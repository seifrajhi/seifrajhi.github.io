<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" property="og:description" content="Explore the essential yet often overlooked components of Kubernetes networking. This guide sheds light on Kube-Proxy and Container Network Interface CNI"/><meta data-react-helmet="true" name="keywords" content="Kubernetes,Kube-Proxy,CNI,Kubernetes networking,Network management,Cluster communication,Container networking"/><meta data-react-helmet="true" name="author" content="@RajhiSaifeddine"/><meta data-react-helmet="true" property="og:title" content="Kube-Proxy and CNI: The Hidden Components of Kubernetes Networking - Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@RajhiSaifeddine"/><meta data-react-helmet="true" name="twitter:title" content="Kube-Proxy and CNI: The Hidden Components of Kubernetes Networking - Blog"/><meta data-react-helmet="true" name="twitter:description" content="Explore the essential yet often overlooked components of Kubernetes networking. This guide sheds light on Kube-Proxy and Container Network Interface CNI"/><meta data-react-helmet="true" name="image" property="og:image" content="https://seifrajhi.github.io/static/9b2db3ad10894dbbfb2da5970f515dbc/29ba9/k8s-networking-cover.jpg"/><meta data-react-helmet="true" name="twitter:image" content="https://seifrajhi.github.io/static/9b2db3ad10894dbbfb2da5970f515dbc/29ba9/k8s-networking-cover.jpg"/><meta data-react-helmet="true" property="og:url" content="https://seifrajhi.github.io/blog/kubernetes-networking/"/><meta name="theme-color" content="#ffffff"/><link rel="stylesheet" href="/styles.f3bb17c4eaf5735a380f.css"/><link rel="stylesheet"/><link rel="alternate" type="application/rss+xml" title="Saifeddine Rajhi&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">Kube-Proxy and CNI: The Hidden Components of Kubernetes Networking - Blog by Saifeddine Rajhi</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/9b2db3ad10894dbbfb2da5970f515dbc/29ba9/k8s-networking-cover.jpg","headline":"Kube-Proxy and CNI: The Hidden Components of Kubernetes Networking","dateCreated":"2024-10-15","datePublished":"2024-10-15","dateModified":"2024-10-15","inLanguage":"en-US","isFamilyFriendly":true,"isAccessibleForFree":true,"author":{"@type":"Person","name":"Saifeddine Rajhi","url":"https://seifrajhi.github.io"},"publisher":{"@type":"Organization","name":"Saifeddine Rajhi's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seifrajhi.github.io/blog/kubernetes-networking/"},"keywords":["Kubernetes","Kube-Proxy","CNI","Kubernetes networking","Network management","Cluster communication","Container networking"],"genre":["Platform engineer","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\n> **A Guide to Network Management in Kubernetes 🕸**\n\n## 📌 Overview:\n\nKubernetes networking is a complex and fascinating topic, with many moving parts. `Kube-Proxy` and `CNI` are two essential components of Kubernetes networking, working together to enable excellent communication between various components.\n\n[Kube-Proxy](https://kubernetes.io/docs/concepts/overview/components/#kube-proxy) is a network proxy that runs on each node in a Kubernetes cluster. It is responsible for maintaining network connectivity between services and pods. Kube-Proxy does this by translating service definitions into actionable networking rules.\n\n[CNI](https://www.cni.dev/), The Container Network Interface (CNI) is a specification for configuring networking resources in Kubernetes. CNI provides a dynamic framework for provisioning IP addresses, establishing cross-host connectivity, and configuring overlay or underlay networks.\n\nThis blog post will explore the inner workings of **Kube-Proxy** and **CNI**, and dive into how they integrate with Kubernetes. We will also discuss different Kubernetes network plugins.\n\n## ↳ Kube-Proxy: Kubernetes network proxy\n\nIn Kubernetes, the ephemeral nature of Pods means their IP addresses can change, making it challenging to establish stable connections 🤔. This is where the Service object comes into play. Services provide a consistent IP address to access Pods and are linked to a group of Pods. When traffic arrives at a Service, it is intelligently directed to the relevant backend Pods.\n\nBut how does this mapping of _`Service to Pod`_ actually function at the networking level? This is where Kube-Proxy excel.\n\nKube-Proxy serves as a vital Kubernetes agent that resides on each node within the cluster. Its primary role involves monitoring changes to Service objects and their corresponding endpoints. It then translates these changes into tangible network rules within the node.\n\nTypically, Kube-Proxy operates within your cluster as a DaemonSet. However, depending on your cluster's installation type, it can also be directly installed as a Linux process on the node. Regardless of the setup, Kube-Proxy is the unsung hero ensuring that your network traffic efficiently reaches the right destinations in your Kubernetes cluster.\n\n### 💭 How Kube-proxy works\n\nOnce `kube-proxy` is installed, it establishes authentication with the `API server`. As new **Services** or **endpoints** are introduced or removed, the API server promptly communicates these changes to Kube-Proxy.\n\nKube-Proxy takes these updates and translates them into `Network Address Translation (NAT)` rules within the node.\n\n> These NAT rules are essentially mappings, linking Service IP addresses to Pod IP addresses.\n\nWhen traffic is directed towards a Service, it adheres to these rules, leading it to the appropriate backend Pod.\n\nTo illustrate this process further, let's consider an example:\n\nImagine we have a Service named `SVC01` with a `ClusterIP` type. When `SVC01` is created, the API server examines which Pods should be associated with this Service by matching labels to the Service's label selector. In our case, let's call these Pods `Pod01` and `Pod02`. Subsequently, the API server creates an abstraction known as an `endpoint`, representing the IP address of each of these Pods. So, `SVC01` becomes linked to `2 endpoints`, denoted as `EP01` and `EP02`.\n\nIn the final step, the API server maps the IP address of `SVC01` to the IP addresses of `EP01` and `EP02`, solidifying the connection between the Service and its associated endpoints.\n\n![alt text](./step1.png)\n![alt text](./step2.png)\n![alt text](./step3.png)\n\n\nAll of this configuration is currently only part of the control plane. We want this mapping to be actually implemented on the network. Once it is applied, traffic coming to the IP of `SVC01` will be forwarded to `EP01` or `EP02`.\n\nSo here comes the `Kube-Proxy`. The API server will advertise these updates to the Kube-proxy on each node. Which will apply it as internal rules to the node.\n\n![alt text](./step4.png)\n![alt text](./step5.png)\n\nNow traffic destined for the `SVC01` IP will follow this [DNAT](https://en.wikipedia.org/wiki/Network_address_translation#DNAT) rule and get forwarded to the Pods. \n\n> Remember that `EP01` and `EP02` are basically the IPs of the Pods.\n\n![alt text](./step6.png)\n![alt text](./step7.png)\n\nNow of course I tried to keep the scenario as simple as possible. This is just to focus on the important part of the Kube-Proxy.\n\nThere are a couple of points that are worth mentioning:\n\n* **IP and port mappings:** Services and endpoints in Kubernetes represent IP and port mappings, ensuring proper routing of traffic to specific combinations of IP addresses and ports within the cluster.\n* **ClusterIP and DNAT translation:** ClusterIP services use DNAT (Destination Network Address Translation) on the source node, keeping their IPs hidden from external access. They function as internal NAT rules, exclusively accessible within the cluster.\n* **Service types and rode rules**: Different service types can lead to the installation of distinct rules within nodes. These rules may be organized into chains, specific sets of rules with defined order in the traffic path.\n* **Random pod selection:** By default, NAT rules select a random Pod to handle incoming traffic. However, this behavior can vary depending on the chosen Kube-Proxy mode, which determines the load balancing strategy for routing traffic to Pods.\n\n\n## 💭 Understanding Kube-Proxy modes\n\nKube-Proxy operates in various modes, each with its approach to implementing NAT rules. To grasp their workings and nuances, let's explore these modes:\n\n### ✅ IPtables mode\n\nThis is the default and widely used mode. Kube-Proxy relies on `IPtables`, a Linux feature for packet processing and filtering. In this mode, Kube-Proxy inserts `Service-to-Pod NAT` rules into IPtables, redirecting traffic from Service IP to Pod IP.\n\nHowever, IPtables can become less efficient with a large number of rules, as its sequential algorithm results in O(n) performance. It also lacks specific load balancing algorithms, using a random equal-cost distribution.\n\nNow the Kube-Proxy role can be described more as the \"installer\" of the rules.\n\n![alt text](./iptables-modes.png)\n\n### ✅ IPVS mode\n\nIPVS (IP Virtual Server) is designed for load balancing and offers efficient lookup with O(1) complexity, ensuring consistent performance regardless of rule count. Kube-Proxy in this mode inserts rules into IPVS instead of IPtables.\n\nIPVS supports various load balancing algorithms like round robin and least connections. Note that IPVS may not be available on all Linux systems, unlike IPtables.\n\n### ✅ KernelSpace mode\n\nThis mode is exclusive to Windows nodes. Kube-Proxy utilizes Windows Virtual Filtering Platform (VFP) to insert packet filtering rules. VFP works similarly to IPtables on Linux, responsible for packet encapsulation and destination IP address replacement. If you're familiar with virtual machines on the Windows platform, think of VFP as an extension of the Hyper-V switch.\n\n### ✅ Userspace mode\n\nIn the early days, Kube-Proxy used the Userspace mode, where it managed connections by proxying them through a user-level process. While charming and simple, this mode is less efficient than others and is akin to riding a bike with training wheels.\n\nEach Kube-Proxy mode has its advantages and limitations, making the choice of mode an essential consideration based on your specific cluster's needs and infrastructure.\n\n**⛓ Checking Kube-Proxy mode**\n\nTo determine the mode in which Kube-Proxy is running, you can use the `/proxyMode` endpoint, which Kube-Proxy exposes for querying information. \n\nHere's how you can do it:\n\n* **SSH into a cluster node:** Connect to one of the nodes within your Kubernetes cluster using SSH.\n*** Use curl to query Kube-Proxy:** Once connected, execute the following command using curl to query the Kube-Proxy mode:\n\n```shell\ncurl -v localhost:10249/proxyMode\n```\n\nThis command will retrieve information about the Kube-Proxy mode, helping you verify which mode it is currently operating in.\n\n![alt text](./kp-mode.png)\n\nHere you can see the last line that Kube-Proxy is using `iptables` mode.\n\n**Recap: Kubernetes Service and Kube-Proxy:**\n\n* A Kubernetes Service operates akin to a proxy by providing a stable IP address for client connections. It directs traffic received at this IP to the corresponding backend Pod IP, effectively solving the issue of Pods' dynamic IP changes.\n* In terms of load balancing, it depends on which aspect of Kube-Proxy is under consideration. The Kube-Proxy agent itself does not handle traffic or perform load balancing; it's solely part of the control plane responsible for creating Service rules. However, Kube-Proxy, through the rules it generates, facilitates load balancing by distributing traffic across multiple identical Pods associated with a specific Service. These Pods serve as replicas and collectively handle incoming requests.\n\n\n## ↳ Container Network Interface CNI\n\nContainer Network Interface (CNI) is a framework that allows you to dynamically configure networking resources for your Kubernetes clusters. It uses a plugin architecture, so you can use the CNI plugins that best meet your needs.\n\nCNI can be used to configure both `overlay` and `underlay` networks:\n\n* **Overlay networks** encapsulate network traffic using a virtual interface such as [Virtual Extensible LAN (VXLAN)](https://datatracker.ietf.org/doc/html/rfc7348).\n* **Underlay networks** work at the physical level and comprise switches and routers.\n\nOnce you've chosen a network configuration type, the container runtime defines the network that containers will join. The runtime adds the interface to the container namespace via a call to the CNI plugin and allocates the connected subnetwork routes via calls to the I`P Address Management (IPAM)` plugin.\n\nCNI can be used with Kubernetes and other Kubernetes-based container orchestration platforms such as OpenShift. It uses a software-defined networking (SDN) approach to unify container communication throughout clusters.\n\n\n## 📍 Kubernetes networking\n\nKubernetes provides networking for containerized applications with a flat network structure. This eliminates the need to map host ports to container ports, enabling the operation of a distributed system without dynamic port allocation.\n\nThe networking architecture in Kubernetes is based on the Container Network Interface (CNI) plugin specification. This plugin acts as a common interface between the Kubernetes runtime and the underlying network, supporting various networking solutions like Flannel, Calico, Weave Net, and Cilium.\n\n\n### How Kubernetes networking works?\n\nWhen a Kubernetes Pod is created, the CNI plugin configures the network interface, assigning an IP address to the Pod. This facilitates communication within the Kubernetes Pod network, which is a flat network accessible to all Pods in the cluster.\n\nAdditionally, Pods can interact with external applications through the Kubernetes Service network, a virtual network that exposes Pods to external entities.\n\nKubernetes networking offers several benefits:\n\n* `Portability`: Kubernetes clusters can be deployed across different cloud providers and on-premises environments.\n* `Scalability`: It supports a large number of Pods within a Kubernetes cluster.\n* `Reliability`: Ensures consistent connectivity for Pods in a Kubernetes cluster.\n\n\nBoth Linux container and container networking technology are continuing to evolve to meet the needs of applications running in various environments. CNI is an initiative of the Cloud-Native Computing Foundation (CNCF), which specifies the configuration of Linux container network interfaces.\n\nCNI was created to make networking solutions integratable with a range of container orchestration systems and runtimes. Instead of making the networking solutions pluggable, it defines a common interface standard for both the networking and container execution layers.\n\n\n<div class=\"note\">\n    <p><strong>🔵 Note:</strong></p>\n    <p>CNI is not native to Kubernetes. Developers using the CNI standard can create network plugins to interoperate with a variety of container runtimes. CNI networks can use an encapsulated network model,\n    such as <a href=\"https://www.techtarget.com/whatis/definition/VXLAN\">Virtual Extensible LAN (VXLAN)</a>, or an unencapsulated - also known as decapsulated - network model, such as <a href=\"https://www.techtarget.com/searchnetworking/definition/BGP-Border-Gateway-Protocol\">Border Gateway Protocol (BGP).</a></p>\n</div>\n\n\n\n**How CNI works?**\n\nCNI uses a plugin architecture to configure the Kubernetes cluster's networking. The CNI plugin is responsible for creating and configuring the network interface for each container. When a container is created,\nthe Kubernetes kubelet calls the CNI plugin to set up the network interface, assign an IP address, and add it to the Kubernetes network.\n\n\nThe CNI plugin also interacts with the `IP Address Management (IPAM) plugin` to allocate IP addresses to containers. This involves managing the pool of available IP addresses and assigning them as needed. Once the network interface is established, the kubelet starts the container,\nenabling it to communicate with other containers on the Kubernetes network.\n\nCNI focuses on the connectivity of container networks and the removal of allocated resources upon the termination of containers. This focus makes CNI specifications simple and allows them to be widely adopted.\nFor additional information on CNI specifications, including third-party plugins and runtimes, refer to the [CNI GitHub project](https://github.com/containernetworking/cni).\n\n\n## 🧵Diverse Kubernetes network plugins necessity\n\nKubernetes relies on a rich ecosystem of network plugins, many of which are endorsed and widely adopted by major container orchestration platforms, with Kubernetes at the forefront.\n\nThese plugins play a crucial role in enabling various container networking functions, all while adhering to the rigorous standards set forth in the Container Network Interface (CNI) specification. Given the inherent complexity of networking, CNI thoughtfully delineates specifications for multiple plugins, recognizing that user requirements can greatly vary.\n\nWithin the realm of CNI, networks can be instantiated using two primary models: `encapsulated` and `unencapsulated`.\n\n**The encapsulated(Overlay) network model:**\n\nThis model is represented by technologies like `VXLAN` and `IPsec`, overlays a logical Layer 2 network over an existing Layer 3 network topology. This approach simplifies routing complexity and minimizes overhead.\n\nIt relies on UDP ports to disseminate encapsulation data among Kubernetes workers, creating a bridge connecting these workers and pods. Communication management within pods is then expertly handled by Docker or alternative container engines.\n\nThis encapsulated network model proves particularly advantageous for scenarios that favor a Layer 2 bridge, especially those sensitive to Kubernetes worker latencies in a Layer 3 environment. \n\nFor distributed data centers spanning distinct geographic locales, minimizing latency is pivotal in preventing network segmentation.\n\n![alt text](./overlay.png)\n\n**🧩 The unencapsulated(Underlay) network model:**\n\nThis model extends a Layer 3 network to facilitate the routing of packets among containers. Unlike the encapsulated counterpart, this model does not introduce an isolated Layer 2 network or any associated overhead. However, it places the onus of managing necessary route distribution squarely on the shoulders of Kubernetes workers.\n\nTo make this work, a network protocol is put into action, connecting Kubernetes workers and utilizing the Border Gateway Protocol (BGP) to efficiently propagate routing information to pods. Within these pods, the role of overseeing communication with workloads is assumed by Docker or a comparable container engine. The unencapsulated network model is ideally suited for scenarios favoring a routed Layer 3 network.\n\nHere, routes for Kubernetes workers undergo dynamic updates at the operating system level, effectively mitigating latency concerns. In essence, Kubernetes networking unfolds as a multifaceted landscape, offering a plethora of plugin choices while accommodating diverse network models tailored to the distinct needs of your containerized workloads.\n\n![alt text](./underlay.png)\n\n## 🐝 CNI with Cilium\n\n[alt text](./cilium.png)\n\n\n[Cilium](https://www.solo.io/topics/cilium/) is an open-source project that enables networking, security, and observability for Kubernetes clusters and other containerized environments.\n\nIt is based on a technology called [eBPF](https://ebpf.io/), which can inject network control logic, security controls, and observability features directly into the Linux kernel.\n\n[Cilium CNI](https://docs.cilium.io/en/stable/) is a powerful networking plugin for Kubernetes which provides enhanced security and networking capabilities for containerised applications. It leverages the power of eBPF (extended Berkeley Packet Filter), a highly efficient and programmable kernel-level technology, to deliver transparent network security and traffic monitoring features.\n\nCilium uses VXLAN to form an overlay network and extended Berkeley Packet Filter to manage network connectivity and application rules. It supports both IPv4 and IPv6 addressing and uses BGP for unencapsulated routing. Cilium can support multiple Kubernetes clusters and, like Multus, provides multi-CNI capabilities.\n\nCilium handles aspects of network management, such as network policies, through HTTP request filters. Policies can be written to YAML or JSON files, both of which provide network traffic enforcement for incoming and outgoing traffic.\n\n > Cilium can run using VXLAN as an overlay network for encapsulation and routingor BGP routing as an underlay network. Cilium used to rely on metallb to power it's BGP features, but since Cilium 1.3 it is possible to use their own implementation built on GoBGP.\n\nCilium Is the only CNI with L7 aware policies. This means you can write Kubernetes networking policies that understand DNS, HTTP, and even Kafka.\n\nFor example, you can write a DNS L7 networking policy to:\n\n**🧩 Restrict DNS Resolution to Subset:**\n\n```yaml\napiVersion: cilium.io/v2\nkind: CiliumClusterwideNetworkPolicy\nmetadata:\n  name: dns-allow-list\nspec:\n  endpointSelector: {}\n  egress:\n    - toEndpoints:\n      - matchLabels:\n        io.kubernetes.pod.namespace: kube-system\n        k8s-app: kube-dns\n      toPorts:\n        - ports:\n          - port: \"53\"\n            protocol: UDP\n          rules:\n            dns:\n              - matchPattern: \"*.abc.xyz\"\n              - \n```\n\n**🧩 Allow POST HTTP requests to abc.xyz:**\n\n```yaml\napiVersion: cilium.io/v2\nkind: CiliumNetworkPolicy\nmetadata:\n  name: http-post-abc-xyz\nspec:\n  endpointSelector: {}\n  egress:\n    - toPorts:\n        - ports:\n            - port: \"443\"\n              protocol: TCP\n      rules:\n        http:\n          - method: POST\n    - toFQDNs:\n        - matchPattern: \"*.abc.xyz\"\n```\n\n**🧩 Restrict Kafka Topic Access to the Following Pods:**\n\nTypically, we're forced to write networking policies like: \"Allow any application with the label kafka-consumer\" to speak to Kafka. This casts a rather wide net, when with L7 policies we can limit the access to individual topics depending on the labels. As such, we can say that only the \"beer-brewer\" can publish to the hops topic. Amazing, right?\n\n```yaml\napiVersion: cilium.io/v2\nkind: CiliumNetworkPolicy\nmetadata:\n  name: beer-brewers\nspec:\n  ingress:\n    - fromEndpoints:\n        - matchLabels:\n            role: beer-brewer\n      toPorts:\n        - ports:\n            - port: 9092\n              protocol: TCP\n          rules:\n            kafka:\n              - role: produce\n                topic: hops\n```\n\n\n### 🎩 Developer experience\n\nNow don't worry if these resources look difficult, because Cilium has that covered too. All of these network policies can be visualised, modified, and event constructed through an entirely point and click visual builder.\n\nCheck out the [Cilium Editor](https://editor.networkpolicy.io/) to see for yourself.\n\n### 🐧 Installing Cilium\n\nCilium is installable as a Helm chart. So you'll first need to make the repository available:\n\n```shell\nhelm repo add cilium https://helm.cilium.io/\n```\n\nNext, we can begin to understand and tweak the default values for the installation we require.\n\nThe highlights are:\n\n**IPAM mode:**\n\nCilium has a few different modes to manage IPAM.\n\n```shell\n--set global.ipam.mode=cluster-pool\n--set global.ipam.operator.clusterPoolIPv4PodCIDR=192.168.0.0/16\n--set global.ipam.operator.clusterPoolIPv4MaskSize=23\n```\n\nCilium also has a preview feature where the IPAM mode can be set to `cluster-pool-v2beta`,\nwhich allows for dynamic, resource usage-based, allocation of node CIDRs.\n\n**eBPF and XDP:**\n\neBPF is a relatively new technology that runs within the Linux kernel and enables the execution of eBPF programs, which run in a sandbox environment.\n\nThese programs allow for user-land code to run within the kernel with unprecedented performance; extending the capabilities of the kernel.\n\nXDP leverages eBPF to provide a highly performant packet processing pipeline that runs as soon as the networking driver receives the packet. What does this actually mean? Well, with XDP - Cilium can help mitigate DDOS attacks by dropping packets before they even hit the traditional networking stack.\n\nCilium's use of eBPF and XDP means we're not reliant on iptables, so we can actually disable the kube-proxy altogether. You'll need to do this with kubeadm and through Cilium's deploy.\n\n```shell\n--set kubeProxyReplacement=probe\n```\n\n**Native routing:**\n\nAs discussed above, Cilium doesn't need encapsulation to handle the routing of packets within our cluster; so let's ensure we enable it.\n\n```shell\n--nativeRoutingCIDR=192.168.0.0/16\n```\n\n**Hubble:**\n\nAs Hubble and Cilium observability is a big part of the appeal, let's not forget to enable it.\n\n```shell\n--set global.hubble.relay.enabled=true\n--set global.hubble.enabled=true\n--set global.hubble.listenAddress=\":4244\"\n--set global.hubble.ui.enabled=true\n```\n\n**Complete install:**\n\n```shell\nhelm repo add cilium https://helm.cilium.io/\nhelm upgrade --install cilium/cilium cilium \\\n                --version 1.13.4 \\\n                --namespace kube-system \\\n                --set image.repository=quay.io/cilium/cilium \\\n                --set global.ipam.mode=cluster-pool \\\n                --set global.ipam.operator.clusterPoolIPv4PodCIDR=192.168.0.0/16 \\\n                --set global.ipam.operator.clusterPoolIPv4MaskSize=23 \\\n                --set global.nativeRoutingCIDR=192.168.0.0/16 \\\n                --set global.endpointRoutes.enabled=true \\\n                --set global.hubble.relay.enabled=true \\\n                --set global.hubble.enabled=true \\\n                --set global.hubble.listenAddress=\":4244\" \\\n                --set global.hubble.ui.enabled=true \\\n    --set kubeProxyReplacement=probe \\\n    --set k8sServiceHost=${PUBLIC_IPv4} \\\n    --set k8sServicePort=6443\n```\n\nCilium might be much newer to the Kubernetes CNI landscape, but in its short time,\nit has become the gold standard for Kubernetes networking.\n\nWhile Calico is also a great option, Cilium's adoption of eBPF and XDP provides a future-facing solution,\nenriched with the best debugging tool available (Hubble) and the best developer experience with the assistance of the Cilium Editor.\n\n## Closing thoughts\n\nKubernetes networking is powered by two vital components: Kube-Proxy and CNI.\n\nKube-Proxy maintains network rules and forwards traffic to Pods, while CNI provides a common interface to the underlying network. These components are essential for running containerized applications on Kubernetes.\n\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n\n**📅 Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordcount":2941}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://seifrajhi.github.io/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://seifrajhi.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Kube-Proxy and CNI: The Hidden Components of Kubernetes Networking","item":"https://seifrajhi.github.io/blog/kubernetes-networking/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=47ae28bb567c9025f1fee24afb2d20c9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-LLPCCGNLH7', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LLPCCGNLH7"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LLPCCGNLH7', {"anonymize_ip":true,"send_page_view":false});gtag('config', 'GTM-5V895PDS', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seifrajhi.github.io/blog/kubernetes-networking/" data-baseprotocol="https:" data-basehost="seifrajhi.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;174&#x27;%20width=&#x27;150&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture><noscript><picture><source type="image/avif" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Saifeddine <br/> Rajhi</a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="Review My Resume" href="/cv/platform-engineer/">cv</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:66.66666666666666%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvOhsc4//EABgQAAMBAQAAAAAAAAAAAAAAAAABMSFB/9oACAEBAAEFAsFUdoj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEAAwAAAAAAAAAAAAAAAAABEBEg/9oACAEBAAY/Aqwkf//EABgQAAMBAQAAAAAAAAAAAAAAAAABETFh/9oACAEBAAE/IXERrgxxjMdTCUCRQ//aAAwDAQACAAMAAAAQ0B//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAhMUFxgf/aAAgBAQABPxBeIDi0pXgnZjFaYpoyktAT7hKMHd7PMAQcZ//Z" alt=""/><picture><source type="image/webp" data-srcset="/static/9b2db3ad10894dbbfb2da5970f515dbc/57584/k8s-networking-cover.webp 750w,/static/9b2db3ad10894dbbfb2da5970f515dbc/984df/k8s-networking-cover.webp 1080w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/9b2db3ad10894dbbfb2da5970f515dbc/29ba9/k8s-networking-cover.jpg" data-srcset="/static/9b2db3ad10894dbbfb2da5970f515dbc/7284f/k8s-networking-cover.jpg 750w,/static/9b2db3ad10894dbbfb2da5970f515dbc/29ba9/k8s-networking-cover.jpg 1080w" alt="Kube-Proxy and CNI: The Hidden Components of Kubernetes Networking"/></picture><noscript><picture><source type="image/webp" srcSet="/static/9b2db3ad10894dbbfb2da5970f515dbc/57584/k8s-networking-cover.webp 750w,/static/9b2db3ad10894dbbfb2da5970f515dbc/984df/k8s-networking-cover.webp 1080w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/9b2db3ad10894dbbfb2da5970f515dbc/29ba9/k8s-networking-cover.jpg" srcSet="/static/9b2db3ad10894dbbfb2da5970f515dbc/7284f/k8s-networking-cover.jpg 750w,/static/9b2db3ad10894dbbfb2da5970f515dbc/29ba9/k8s-networking-cover.jpg 1080w" alt="Kube-Proxy and CNI: The Hidden Components of Kubernetes Networking"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption data-nosnippet="" class="image-title">Photo by Saifeddine Rajhi</figcaption></figure><h1>Kube-Proxy and CNI: The Hidden Components of Kubernetes Networking</h1><div data-nosnippet="" class="blog-details"><time class="blog-createdat" dateTime="2024-10-15">Oct 15, 2024</time><span> • </span><span class="blog-time2read">13<!-- -->mins<!-- --> read</span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul data-nosnippet="" class="blog-tags"><li>Kubernetes</li><li>Kube-Proxy</li><li>CNI</li><li>Kubernetes networking</li><li>Network management</li><li>Cluster communication</li><li>Container networking</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div data-nosnippet="" class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><ul class="toc-list"></ul></ul></div><div class="content blog-content"><blockquote>
<p><strong>A Guide to Network Management in Kubernetes 🕸</strong></p>
</blockquote>
<h2 id="-overview" style="position:relative;"><a href="#-overview" aria-label=" overview permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>📌 Overview:</h2>
<p>Kubernetes networking is a complex and fascinating topic, with many moving parts. <code class="language-text">Kube-Proxy</code> and <code class="language-text">CNI</code> are two essential components of Kubernetes networking, working together to enable excellent communication between various components.</p>
<p><a href="https://kubernetes.io/docs/concepts/overview/components/#kube-proxy" target="_blank" rel="noopener noreferrer">Kube-Proxy</a> is a network proxy that runs on each node in a Kubernetes cluster. It is responsible for maintaining network connectivity between services and pods. Kube-Proxy does this by translating service definitions into actionable networking rules.</p>
<p><a href="https://www.cni.dev/" target="_blank" rel="noopener noreferrer">CNI</a>, The Container Network Interface (CNI) is a specification for configuring networking resources in Kubernetes. CNI provides a dynamic framework for provisioning IP addresses, establishing cross-host connectivity, and configuring overlay or underlay networks.</p>
<p>This blog post will explore the inner workings of <strong>Kube-Proxy</strong> and <strong>CNI</strong>, and dive into how they integrate with Kubernetes. We will also discuss different Kubernetes network plugins.</p>
<h2 id="-kube-proxy-kubernetes-networkproxy" style="position:relative;"><a href="#-kube-proxy-kubernetes-networkproxy" aria-label=" kube proxy kubernetes networkproxy permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>↳ Kube-Proxy: Kubernetes network proxy</h2>
<p>In Kubernetes, the ephemeral nature of Pods means their IP addresses can change, making it challenging to establish stable connections 🤔. This is where the Service object comes into play. Services provide a consistent IP address to access Pods and are linked to a group of Pods. When traffic arrives at a Service, it is intelligently directed to the relevant backend Pods.</p>
<p>But how does this mapping of <em><code class="language-text">Service to Pod</code></em> actually function at the networking level? This is where Kube-Proxy excel.</p>
<p>Kube-Proxy serves as a vital Kubernetes agent that resides on each node within the cluster. Its primary role involves monitoring changes to Service objects and their corresponding endpoints. It then translates these changes into tangible network rules within the node.</p>
<p>Typically, Kube-Proxy operates within your cluster as a DaemonSet. However, depending on your cluster's installation type, it can also be directly installed as a Linux process on the node. Regardless of the setup, Kube-Proxy is the unsung hero ensuring that your network traffic efficiently reaches the right destinations in your Kubernetes cluster.</p>
<h3 id="-how-kube-proxy-works" style="position:relative;"><a href="#-how-kube-proxy-works" aria-label=" how kube proxy works permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>💭 How Kube-proxy works</h3>
<p>Once <code class="language-text">kube-proxy</code> is installed, it establishes authentication with the <code class="language-text">API server</code>. As new <strong>Services</strong> or <strong>endpoints</strong> are introduced or removed, the API server promptly communicates these changes to Kube-Proxy.</p>
<p>Kube-Proxy takes these updates and translates them into <code class="language-text">Network Address Translation (NAT)</code> rules within the node.</p>
<blockquote>
<p>These NAT rules are essentially mappings, linking Service IP addresses to Pod IP addresses.</p>
</blockquote>
<p>When traffic is directed towards a Service, it adheres to these rules, leading it to the appropriate backend Pod.</p>
<p>To illustrate this process further, let's consider an example:</p>
<p>Imagine we have a Service named <code class="language-text">SVC01</code> with a <code class="language-text">ClusterIP</code> type. When <code class="language-text">SVC01</code> is created, the API server examines which Pods should be associated with this Service by matching labels to the Service's label selector. In our case, let's call these Pods <code class="language-text">Pod01</code> and <code class="language-text">Pod02</code>. Subsequently, the API server creates an abstraction known as an <code class="language-text">endpoint</code>, representing the IP address of each of these Pods. So, <code class="language-text">SVC01</code> becomes linked to <code class="language-text">2 endpoints</code>, denoted as <code class="language-text">EP01</code> and <code class="language-text">EP02</code>.</p>
<p>In the final step, the API server maps the IP address of <code class="language-text">SVC01</code> to the IP addresses of <code class="language-text">EP01</code> and <code class="language-text">EP02</code>, solidifying the connection between the Service and its associated endpoints.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABBUlEQVR42qWRbUvDMBSF9///hh98GTg7REGHOm1FBWEyNhlzXWre2s7aOgZit+SYJtYXFD/ohYdz7yUcTpIGPpVSyvKfakRRBEopCCHgnENKiTRNUJalPTBfPGNEZgjZIybUcUczSz2PowxZvnCGlDIIITEYDFEUT1gpjZdyieVb0inPsd4J4QUcrTOG7VNq1fOF1R2fYeuYoj9OnKHW5qoGq6pCW62Mq33IcrS699i/TCzNwxHWdnvYPLjF3kVsdjHagcRwMnOGX19Af3Ta9UQU2OgQtM+lSSMMdVJmZy8QaHa5SZj+ZIhvhvHDHEdXBMGNgN/j79RzYDi5ppiy7HfDv/7yK3B6Dj0s9oEpAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/5da025a9baa720d754be3a179a090889/c5bb3/step1.png" srcset="/static/5da025a9baa720d754be3a179a090889/04472/step1.png 170w,
/static/5da025a9baa720d754be3a179a090889/9f933/step1.png 340w,
/static/5da025a9baa720d754be3a179a090889/c5bb3/step1.png 680w,
/static/5da025a9baa720d754be3a179a090889/b12f7/step1.png 1020w,
/static/5da025a9baa720d754be3a179a090889/00172/step1.png 1044w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          
<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 101.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACxUlEQVR42o2S+U8TURDH+/caE7wCxgT0ByP+YAyJJkYhxgBBQaStlDaiorT0oByViOFI7727u23pvVe/vvegpSiFvmQys3N83sy8dWHA4zgOms0myuUyCoUCVFVFsVhEvV6Hbdssp91uwzUIrNVqdSGNRoMVUgi1OxdUq1WWey3QsiyIosg6pEXpdBr5fJ75qBYEgeVRKO22L5B2QQ8di3ZCj6IoSCaTDEp1NptlPnroOmjutcBSqYRarcZsjuO6IArNZDLM1wHqun79yHRXkiTBNE1m53I5BqM6lUp1dyrLMrNdnW76CokbhkkKFDYS9dGO6T6ppo/SgQ30KBf2qWtEVFQrJ6hUKgxGoZ04A1qWjY3dDNZ3OAR3eyXfIxxCCQ5r8TRWo0ls/+HpLZde6jJMC+6fSXwKClgK8mciwL0hwkOE6o7fs0FyQiICkQz5jezuWnqPyyRAfzgDX0zGSkyEf1OGN5TH26U4ppcTmPb9wnKEJzGJyXJEwvetHAE5l67nH+BpkS8iMKg7mIMnlGMXdYHRAYDe9RTcZBRPSDgXMqo3LDHd66fr+BLN9gfSf2v3SMbWkYrtXjlUEN8XiC5c8McPVfxOKv89ShdIl9rSRRhaHmaRI8LDUHMwTjRW0ypK5JvEdB6WzjPbKBf6/mIu02iBX3wCcWYEmxM3sPdqCOrsPUhrM2iaDgTvc6hzI4iR2NaLm8QeBh94Dacf0DYNyN5nkN8/gDw/hhPPYzTdYyiGF9CyHKiBl1BITOrEPI+g/XjXH+hYJrKL4ziYvMOKmivjqC2NQg/Pw7Ad8J8ncDR1G/yHUTR846i7H0JduwJIR9a8T6GQMZNTt6DM3Ud9YRja+iwbWfdPQJu9i+PJodPYxxEUvr65YmTyytp+CFzMj0x0BUriG/TEKkrpPdhOG/pBFMJmgMT8KJzF9OMdtPsA/wJD+sc6L4oSlgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/4b8d8cbb049ae99e91ee2d8690609698/c5bb3/step2.png" srcset="/static/4b8d8cbb049ae99e91ee2d8690609698/04472/step2.png 170w,
/static/4b8d8cbb049ae99e91ee2d8690609698/9f933/step2.png 340w,
/static/4b8d8cbb049ae99e91ee2d8690609698/c5bb3/step2.png 680w,
/static/4b8d8cbb049ae99e91ee2d8690609698/f3c12/step2.png 764w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          
<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 77.05882352941177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8UlEQVR42pWSbVPaQBSF+f+/oOMX25m2M1qomlHrOC2CVLQgYxWh1IQEGkISQkJeCPCB5Lh3IamMtk135mQ3d3efPffu5pCxxXGM6XQK13UxmUw2RPEoivi6XBYYLR6Px7BtG5ZlwfM8DvZ9fyO+XC6zAR3HwXw+RxAE6Ha7kCQJoiii3++j0+lwh4vFgoMzAU3T5CmTI0VRUqCqqvwAcpysywSk9MgduSBQu93m7mRZRrPZxGw2QxiGPJPc76L/WRH72LaDEatTAidXJIIkdaRa5/AfLZz6cCc2ZmHAbtfhMDqAHFJJSLnkSciqhaZooCWZL+qezXWUMaqNB9RuZQTTeZrZ07YCRkuUGioK50McfB1if629ipYq+T+8NLFT7EEbeen7jJ9QU2DlZgDhUsfxlY4jpuNvBpOJk7qFT7URjyXxQqkH3fJT4DOHEQOeM+DBhc4cDNlGA3vlHt4IN3h7dIed0w6L61w0lz8joJcFaKSbhAuNOVGQL0oonMk8RnPkOs8cDv8FrHzXIFQN7JcVfPj8gPwXkblMgN1VjI0Pqxo+lvt/T5lqWLz+hd2SincnP7BVqGErX8Nr4Q6vdq/YuM61Ldwyd328P5U2LuU5MI7wUxmh0dZx3VJZP2DS0Git+7VWcxrq9wO4fvjis3kEEgNgZwmQNEgAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/fdf3dd3d45f21eaafabdd5e911f94490/c5bb3/step3.png" srcset="/static/fdf3dd3d45f21eaafabdd5e911f94490/04472/step3.png 170w,
/static/fdf3dd3d45f21eaafabdd5e911f94490/9f933/step3.png 340w,
/static/fdf3dd3d45f21eaafabdd5e911f94490/c5bb3/step3.png 680w,
/static/fdf3dd3d45f21eaafabdd5e911f94490/63ec5/step3.png 812w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>All of this configuration is currently only part of the control plane. We want this mapping to be actually implemented on the network. Once it is applied, traffic coming to the IP of <code class="language-text">SVC01</code> will be forwarded to <code class="language-text">EP01</code> or <code class="language-text">EP02</code>.</p>
<p>So here comes the <code class="language-text">Kube-Proxy</code>. The API server will advertise these updates to the Kube-proxy on each node. Which will apply it as internal rules to the node.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 107.05882352941177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAklEQVR42u2U246bMBCG9/0fpDfVtk2aVL2peshp8wCVsupmSTiDAuYQIEDg3xknbEFhs937Iv0aezz+PNge36Dnyw4FVEt0Zfpk/ZbPR54XF3Nv2p26rqV1dhE+/NLxaWpKDWY2BnPSzDr7yE40eGLfmdcDPFnXi/B5bmB8Z2G8tPHxp4LbH48YTLWT787GeKHDD/4R6BBwODMwWpwmv//2B+++/sbt97Xss380fytwbmLEk0lflq7UeOmcfWQXBgGTzrwrexhiMNlgOFXJbmm/ttKeRD7yDycKvNcybL6yPMIPU4goQ5wWiJICcZLLdhBnciyMUxyPx+un3MmWlGYZwkAgjiPEUQQhfCRJgqrGi18vkH+hIiuEwOr+HoqiYLVaQdN1FEWBIxGrur4OTNMUQRAgDEP4IiDYqc3wRnmeIyJfQGOeJ6TlRXmRC6DvedA1TerhUYVO2XC7veH7/V76LNOAstWgaobsp0ny/Gd/gb4PgyDr9RqbzQaGYcAkVVXVAVqmKccfKE5VVdnvB1KGDHAdB45ty0BeoJ1hQkCOsS1LxrCVGdJ29WZonrNiXQPyWKNXge3g/8C3AT06ZQZwUHMwffewiWmk0dXpvTb54YB9HFPtBrIaOBtW+23ix4BrmcefY6jffiQ6tcyX2KL7tdvtXix+zsJ1XamyLC9q+QlhAkBvqNvlwQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/7ae096e07f595ac802b4837c7ec36a3b/c5bb3/step4.png" srcset="/static/7ae096e07f595ac802b4837c7ec36a3b/04472/step4.png 170w,
/static/7ae096e07f595ac802b4837c7ec36a3b/9f933/step4.png 340w,
/static/7ae096e07f595ac802b4837c7ec36a3b/c5bb3/step4.png 680w,
/static/7ae096e07f595ac802b4837c7ec36a3b/b12f7/step4.png 1020w,
/static/7ae096e07f595ac802b4837c7ec36a3b/e996b/step4.png 1050w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          
<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 118.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAACyklEQVR42p1UaU/bQBDl//+MfmypWq70UwVtgQISFVSClMRxfB+5SJo4sXNN35s0hyEWtJaednd25828nfHuyJZvPJlIs/P7RcStrgxHWc53Z3Mxn891jFs92Tt15eDcX+PMWwPro4tA3h7Xpeq01Wf217eQcP8skMPv0QIXsZSumvLpqgGiWG2ly1h2TxwQdl5L6MMxBEEkH7/a8ubgRvH+2FRbCdg9sf8lwwUhQYkfvliKfUimrXT5z4QbkgFKPYLMw4vofyR3Ze+bhQKgMKeOYn8FW8ejc0/efTakareKCZffdDaTJBlJfzBCW6QySjMdiTQby2CY6l4yHMoELVbYNvlsRbJsIiM4DYHRaKTj4+MjiBJktN2vkHA6ExkkiZTLZeCXVCpVubu7E9d1JQU592dbWFeE0+lUMYPcyWSKv2WqchKQpmmqGXKeZZnaU1xDAuljrGkbj8drQh5wbFs8RPdcT0zT0bnrOEqyWTBK5l7g+2LbrliA77kShaGeWRHyUAhj4Adiu4E0Gg21bSNkoEYciYezjhvqPAyCPKHveZqlYVTFrBniI4MiQs0eqNfrCp59liGj0hiFiAZw7iFIESEz8pFhFC2yC3OEuFDeSRMygyBEdESkQwEh7QzIcxYyJOi/KgorW76/lx/X12iPyiLyKwgdx5Oft7dye3OjCnNVZpS6aeIeUWHPhwz/BUIGDCSG5EYc5++QPRQgo1azgexCtEMgTVSOF58MBs8IKY9ENctD4FDXxIqQDc1qmbWaWJaFSi/GXrcrgy2EJpVAogU1BnxYkF6vlydstVp6mBscCWb+VDL3O+227vf7fWljzqA8uybEHVZRjMrDg9QQkYXhmvfyNMNOp6P/t2EYqopzjrSvCDlhYRiFL0qGf5dB+I8uiZYfO4KKeI7B6Mf18hnLvTaUx7uhfDoWP21zbWg2Ph+NzdfmD0dlGDKUOQMRAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/21a523135ce7fd8705e614f56cb2fb8e/c5bb3/step5.png" srcset="/static/21a523135ce7fd8705e614f56cb2fb8e/04472/step5.png 170w,
/static/21a523135ce7fd8705e614f56cb2fb8e/9f933/step5.png 340w,
/static/21a523135ce7fd8705e614f56cb2fb8e/c5bb3/step5.png 680w,
/static/21a523135ce7fd8705e614f56cb2fb8e/cc488/step5.png 928w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>Now traffic destined for the <code class="language-text">SVC01</code> IP will follow this <a href="https://en.wikipedia.org/wiki/Network_address_translation#DNAT" target="_blank" rel="noopener noreferrer">DNAT</a> rule and get forwarded to the Pods.</p>
<blockquote>
<p>Remember that <code class="language-text">EP01</code> and <code class="language-text">EP02</code> are basically the IPs of the Pods.</p>
</blockquote>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 81.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACiUlEQVR42oWU208TQRTG+acVHogaY4xGE+OLz0qCiRJQU57gzdBoCApewGK3271fu+1utxbpbvt5vim7UgxxkpOZ3fnmd86cMzNLkFYUxbU2nU5RtbIsMeF/6YuinPdqXKg5tiUucF0XtmXBti0ZO3AcG5Z809I0rYG9Xg9GtwvH6MA1u2I67G4HltFFEIaYzWYCLAv4YQzvYBfB9lN8f/0YP7eeoL/zDNa3faTDUQ1MBhnMrx8RNx7hZP0uWi/voffuIdwPDUTJALNpOQd6UYKwuYX81TLMFzfgr6/g99Yq7MP3SPNfC0D7aA+jzVW4ojHXlpHJmnBvA2GSLgLd5ltkm7cw2n6AvHEf2Zs7sGTxVaD1pYnexm2Y66s4fb4Ca+0mAgmmBjKZvh/A67bhtQ5hnXyCeXwA98chbF1DmmV/gUkCS/65oqPWOz0S3WfYWgtRFKsCqqI4tg1N68AwbeiGCcfzEYiAxbpclESK4jiOFCCWvEfwgmje+z4iKcqURWFlLNPE7s4ODvb3YbKKUt3A8+DK4n+A4pxzvjirzBOrgerYyMKT42N0NE0toINAvF4LlDmf0AtbAJYC9BlyECCOIgWlUcDFC0DJ4f+BUhRGMj/Y8+hMw1C5onAwGNTAOI7VPOfcC6MD9mF1sHltKGQBVKQSpSdeA4mYc3me18B+vw9LAKY4p46adruNs7MzTCYTdf0UsCdAeqCIcIL5TdFlIKPl9aMmk+PEdNA5ddV9VkUhQO901HY45tZ5Z5nTfDhcAGqSX13X1Y5411utlgqEjtU5pLB6Uc7Pz9XEeDxW/2jMS9Wq8VCcED4ajeoXqWIsXRYyR4YUhNug8GqrdIRxF9x+9WxV7Q+i2qjAY9te2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/9446bade439e11c0df96a1816c63a91e/c5bb3/step6.png" srcset="/static/9446bade439e11c0df96a1816c63a91e/04472/step6.png 170w,
/static/9446bade439e11c0df96a1816c63a91e/9f933/step6.png 340w,
/static/9446bade439e11c0df96a1816c63a91e/c5bb3/step6.png 680w,
/static/9446bade439e11c0df96a1816c63a91e/d48f1/step6.png 796w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          
<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 91.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACr0lEQVR42o2U22sTURDG+0fXWlAR8c0nRX1QsCI+KFarUFBBbVVQCr1AkCS72Uuyl2w2t73v5p7PmdNs0jVVPDCZ3XNmfvnOnLOzARqT8RhJkiDNBkgWJp7TFMPBAPkYjUbncYMhxQyFF89JKtZ4bPBPFEWwTRNNXUGrocA1VDh6DaauotvtLoG+78PQFFiVM2Em+/IpTJrzaG0JjOMEliajv38H1Z0tnD3aRPfVdTS/76LrhStglMAs/US4dwvykytQn20je3sT1ulXeGFyAUiSLVVC+O42ot1r8F/fQLa7DffbizWgVfqBgGLs51ehPd1E8HILztlhERiRQqehofNlB97nx+h9Ivv4ANbRewIGK2AYwyyfwP3wEMb+fchv7qK5fw/2ryMCxitgEseQqhLK5QokWYZpWWi1WrBte62G9mKNre26wjcpzve8FTCj0zw5PsbhwQFURRFJ7iLwMiCvtRwHDhn7NWBMp2waBoxGAxafNgX8D7D1NyBfG57stNtoEFSqVkUSJ/8J5D/MQU6zKWwdGIYioNvpCM+gHoHYd2huCaQkTubauYsasnGc1+8XFbIyVVVh8NbJqqSSFQVBUFCo6zrq9ToptaBpGnQyjknpHArAkFTyQkwnzs+81TF9kvw+n89FMK/3ej1hPM/vfVI2mUzWP71arYZKpQKFfK2moFQqwaXthBcUerRlSZKEelXTIcuSyOE/LyiczWaYTqfCs/lhSuqmFJSIGrJivpN8X4E5Oh43iDEp57yZUMh5S2BxzEWQF2bIqNP4voeUOozn9akDZQjiAbLhWMTlpbg4LgGej8mElEYDjMlz4mjxPiLl/xoFINfBoivQpvvIJWBQlAwRRBk1kKFQnncnvgn8peSHcSmQa8H1iuNIANeKMV/FcaPNqAR57XLgbxEiS20x1RDVAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/95b897d26d864ac2a8a437b40acd8fd4/c5bb3/step7.png" srcset="/static/95b897d26d864ac2a8a437b40acd8fd4/04472/step7.png 170w,
/static/95b897d26d864ac2a8a437b40acd8fd4/9f933/step7.png 340w,
/static/95b897d26d864ac2a8a437b40acd8fd4/c5bb3/step7.png 680w,
/static/95b897d26d864ac2a8a437b40acd8fd4/5d72a/step7.png 834w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>Now of course I tried to keep the scenario as simple as possible. This is just to focus on the important part of the Kube-Proxy.</p>
<p>There are a couple of points that are worth mentioning:</p>
<ul>
<li><strong>IP and port mappings:</strong> Services and endpoints in Kubernetes represent IP and port mappings, ensuring proper routing of traffic to specific combinations of IP addresses and ports within the cluster.</li>
<li><strong>ClusterIP and DNAT translation:</strong> ClusterIP services use DNAT (Destination Network Address Translation) on the source node, keeping their IPs hidden from external access. They function as internal NAT rules, exclusively accessible within the cluster.</li>
<li><strong>Service types and rode rules</strong>: Different service types can lead to the installation of distinct rules within nodes. These rules may be organized into chains, specific sets of rules with defined order in the traffic path.</li>
<li><strong>Random pod selection:</strong> By default, NAT rules select a random Pod to handle incoming traffic. However, this behavior can vary depending on the chosen Kube-Proxy mode, which determines the load balancing strategy for routing traffic to Pods.</li>
</ul>
<h2 id="-understanding-kube-proxy-modes" style="position:relative;"><a href="#-understanding-kube-proxy-modes" aria-label=" understanding kube proxy modes permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>💭 Understanding Kube-Proxy modes</h2>
<p>Kube-Proxy operates in various modes, each with its approach to implementing NAT rules. To grasp their workings and nuances, let's explore these modes:</p>
<h3 id="-iptables-mode" style="position:relative;"><a href="#-iptables-mode" aria-label=" iptables mode permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>✅ IPtables mode</h3>
<p>This is the default and widely used mode. Kube-Proxy relies on <code class="language-text">IPtables</code>, a Linux feature for packet processing and filtering. In this mode, Kube-Proxy inserts <code class="language-text">Service-to-Pod NAT</code> rules into IPtables, redirecting traffic from Service IP to Pod IP.</p>
<p>However, IPtables can become less efficient with a large number of rules, as its sequential algorithm results in O(n) performance. It also lacks specific load balancing algorithms, using a random equal-cost distribution.</p>
<p>Now the Kube-Proxy role can be described more as the "installer" of the rules.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 608px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 112.3529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/0lEQVR42pVUaXPaUAzM//9H6XRC2qQJCSQkYGNsfN8HNjZQSL9kKwnMmQ8tM4veIXZX0huuQJ9F0yBLEhR5foKyLDGfz1FRbOpa4nkOI88yLJdLpsIVfxVFAd/zkMQx4igSRGGIl34f3cdHPD894bbTgaooSEm4zdnnBoGI7QlnsxkC35dkJm3hOg7M6RSWacLQddm3d0x0vK6q6oiQHDLhMRkjS1Mph4V4zXm8l3Mq9djlBSGXyJGTmaAlYmK+y2g/JbcmuXXIqUcGSiLhuwvCkkrWJxOMhkMp0bYsTA0DnuvuS2IBx7al7HjXDj770uGcNjyAb9fX6Pd66Ha76Nzc4G0wkOmzCx4aR+7lRNMkcm9FkM4vSg5pUqzYPgOOXH4SJ+TMoftQcnjqPRLlyY9VVXKic8JSpuzBpZKSONojSxN5Eh6Vx+s0iUk830KEUznj3BPCLC9gOx5My4Flu/CDiJoewvMC6PoULkXZE3jdwvO2Z47r09M7eodhOse7kUOxZnjTM4ydCprLZxntU6h2RXclxQM4p81TrAppUR8Ik2JBlzXMeI27voGhOROB264GK/nANFzBCJbQ/YVg4jVQSYBjX/HxMHBQ1usDYUyEKrlLKWqGA9tP4RD8KIcb1+KQXWluTcJzAQvwfmQWeJ8WKMrVgTDKSdUp8fGxgTZWoYyG9C41SchKEnEb9EY+fj5PcE8VPA5s3PV0ITWj39CDFfLZ4tQh98gKa9hRI5FhBhV0r8KUfvQ2SYXk4dVETwmElMsXp94CeXn0bxOTQ5VcGNSric+92oGSjR3YiU39tOKN9NpKNvu7CRPOzglpKG3zW2yH0JwMo1237v6DcEFu1nDSD3K2EWdu9oecrk9E/4mQ1Znsvmfg5tcInQcF3++HuP7xihc1lJ5eEJ73ULFrulzt+8frd6NAX43wqiV4GUd4Gvr0TGYneQzNXSA7dlhUS1g0US+p5d218NMFgmxJcYmAka0opznJYdjRHPPm6B0Cn1/jc4fz9ZfYfv4Cfz5dyO3RfMgAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/3b7002549d26704094bc19d0b4628f5b/18872/iptables-modes.png" srcset="/static/3b7002549d26704094bc19d0b4628f5b/04472/iptables-modes.png 170w,
/static/3b7002549d26704094bc19d0b4628f5b/9f933/iptables-modes.png 340w,
/static/3b7002549d26704094bc19d0b4628f5b/18872/iptables-modes.png 608w" sizes="(max-width: 608px) 100vw, 608px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="-ipvs-mode" style="position:relative;"><a href="#-ipvs-mode" aria-label=" ipvs mode permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>✅ IPVS mode</h3>
<p>IPVS (IP Virtual Server) is designed for load balancing and offers efficient lookup with O(1) complexity, ensuring consistent performance regardless of rule count. Kube-Proxy in this mode inserts rules into IPVS instead of IPtables.</p>
<p>IPVS supports various load balancing algorithms like round robin and least connections. Note that IPVS may not be available on all Linux systems, unlike IPtables.</p>
<h3 id="-kernelspace-mode" style="position:relative;"><a href="#-kernelspace-mode" aria-label=" kernelspace mode permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>✅ KernelSpace mode</h3>
<p>This mode is exclusive to Windows nodes. Kube-Proxy utilizes Windows Virtual Filtering Platform (VFP) to insert packet filtering rules. VFP works similarly to IPtables on Linux, responsible for packet encapsulation and destination IP address replacement. If you're familiar with virtual machines on the Windows platform, think of VFP as an extension of the Hyper-V switch.</p>
<h3 id="-userspace-mode" style="position:relative;"><a href="#-userspace-mode" aria-label=" userspace mode permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>✅ Userspace mode</h3>
<p>In the early days, Kube-Proxy used the Userspace mode, where it managed connections by proxying them through a user-level process. While charming and simple, this mode is less efficient than others and is akin to riding a bike with training wheels.</p>
<p>Each Kube-Proxy mode has its advantages and limitations, making the choice of mode an essential consideration based on your specific cluster's needs and infrastructure.</p>
<p><strong>⛓ Checking Kube-Proxy mode</strong></p>
<p>To determine the mode in which Kube-Proxy is running, you can use the <code class="language-text">/proxyMode</code> endpoint, which Kube-Proxy exposes for querying information.</p>
<p>Here's how you can do it:</p>
<ul>
<li><strong>SSH into a cluster node:</strong> Connect to one of the nodes within your Kubernetes cluster using SSH.</li>
</ul>
<p>*** Use curl to query Kube-Proxy:** Once connected, execute the following command using curl to query the Kube-Proxy mode:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">curl</span> <span class="token parameter variable">-v</span> localhost:10249/proxyMode</code></pre></div>
<p>This command will retrieve information about the Kube-Proxy mode, helping you verify which mode it is currently operating in.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.294117647058826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCUlEQVR42o2SRwrDMBREfRrj3ntbuOOCscH3P8oP80EhgRQthmgRPU2xsu87VVVFXddRFEXk+z4lScLnOI5Z4hwEATmOQ5qmka7rH6UAeBwHnedJ0zRR0zTU9z0VRcFgKMsyFqAAmqb5VYoAbdtGy7IQHijL8uksDEOGpmnKDuHiJ/C6LhqGgeZ5prZtGQ6gqqoc7TWeYRg/YQxc15XyPOdIiAPBCbr0PI9c1+U/Wpb1F/bmEM7gEt1hJPzWdc1nPCLj7tkhXEJiIDyAPsdx5C5l3TEQECyL/rAu+sMYqABjILZt2/KR7/vmqCImYBBWxcICLg1ENPHNfbqI7mT7Y6D4RMRl2YvfgA9AtV56tDoHdAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/fcb95fb20e18694c52ba207069d16f80/c5bb3/kp-mode.png" srcset="/static/fcb95fb20e18694c52ba207069d16f80/04472/kp-mode.png 170w,
/static/fcb95fb20e18694c52ba207069d16f80/9f933/kp-mode.png 340w,
/static/fcb95fb20e18694c52ba207069d16f80/c5bb3/kp-mode.png 680w,
/static/fcb95fb20e18694c52ba207069d16f80/b12f7/kp-mode.png 1020w,
/static/fcb95fb20e18694c52ba207069d16f80/b5a09/kp-mode.png 1360w,
/static/fcb95fb20e18694c52ba207069d16f80/1134b/kp-mode.png 1470w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>Here you can see the last line that Kube-Proxy is using <code class="language-text">iptables</code> mode.</p>
<p><strong>Recap: Kubernetes Service and Kube-Proxy:</strong></p>
<ul>
<li>A Kubernetes Service operates akin to a proxy by providing a stable IP address for client connections. It directs traffic received at this IP to the corresponding backend Pod IP, effectively solving the issue of Pods' dynamic IP changes.</li>
<li>In terms of load balancing, it depends on which aspect of Kube-Proxy is under consideration. The Kube-Proxy agent itself does not handle traffic or perform load balancing; it's solely part of the control plane responsible for creating Service rules. However, Kube-Proxy, through the rules it generates, facilitates load balancing by distributing traffic across multiple identical Pods associated with a specific Service. These Pods serve as replicas and collectively handle incoming requests.</li>
</ul>
<h2 id="-container-network-interface-cni" style="position:relative;"><a href="#-container-network-interface-cni" aria-label=" container network interface cni permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>↳ Container Network Interface CNI</h2>
<p>Container Network Interface (CNI) is a framework that allows you to dynamically configure networking resources for your Kubernetes clusters. It uses a plugin architecture, so you can use the CNI plugins that best meet your needs.</p>
<p>CNI can be used to configure both <code class="language-text">overlay</code> and <code class="language-text">underlay</code> networks:</p>
<ul>
<li><strong>Overlay networks</strong> encapsulate network traffic using a virtual interface such as <a href="https://datatracker.ietf.org/doc/html/rfc7348" target="_blank" rel="noopener noreferrer">Virtual Extensible LAN (VXLAN)</a>.</li>
<li><strong>Underlay networks</strong> work at the physical level and comprise switches and routers.</li>
</ul>
<p>Once you've chosen a network configuration type, the container runtime defines the network that containers will join. The runtime adds the interface to the container namespace via a call to the CNI plugin and allocates the connected subnetwork routes via calls to the I<code class="language-text">P Address Management (IPAM)</code> plugin.</p>
<p>CNI can be used with Kubernetes and other Kubernetes-based container orchestration platforms such as OpenShift. It uses a software-defined networking (SDN) approach to unify container communication throughout clusters.</p>
<h2 id="-kubernetes-networking" style="position:relative;"><a href="#-kubernetes-networking" aria-label=" kubernetes networking permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>📍 Kubernetes networking</h2>
<p>Kubernetes provides networking for containerized applications with a flat network structure. This eliminates the need to map host ports to container ports, enabling the operation of a distributed system without dynamic port allocation.</p>
<p>The networking architecture in Kubernetes is based on the Container Network Interface (CNI) plugin specification. This plugin acts as a common interface between the Kubernetes runtime and the underlying network, supporting various networking solutions like Flannel, Calico, Weave Net, and Cilium.</p>
<h3 id="how-kubernetes-networking-works" style="position:relative;"><a href="#how-kubernetes-networking-works" aria-label="how kubernetes networking works permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How Kubernetes networking works?</h3>
<p>When a Kubernetes Pod is created, the CNI plugin configures the network interface, assigning an IP address to the Pod. This facilitates communication within the Kubernetes Pod network, which is a flat network accessible to all Pods in the cluster.</p>
<p>Additionally, Pods can interact with external applications through the Kubernetes Service network, a virtual network that exposes Pods to external entities.</p>
<p>Kubernetes networking offers several benefits:</p>
<ul>
<li><code class="language-text">Portability</code>: Kubernetes clusters can be deployed across different cloud providers and on-premises environments.</li>
<li><code class="language-text">Scalability</code>: It supports a large number of Pods within a Kubernetes cluster.</li>
<li><code class="language-text">Reliability</code>: Ensures consistent connectivity for Pods in a Kubernetes cluster.</li>
</ul>
<p>Both Linux container and container networking technology are continuing to evolve to meet the needs of applications running in various environments. CNI is an initiative of the Cloud-Native Computing Foundation (CNCF), which specifies the configuration of Linux container network interfaces.</p>
<p>CNI was created to make networking solutions integratable with a range of container orchestration systems and runtimes. Instead of making the networking solutions pluggable, it defines a common interface standard for both the networking and container execution layers.</p>
<div class="note">
    <p><strong>🔵 Note:</strong></p>
    <p>CNI is not native to Kubernetes. Developers using the CNI standard can create network plugins to interoperate with a variety of container runtimes. CNI networks can use an encapsulated network model,
    such as <a href="https://www.techtarget.com/whatis/definition/VXLAN">Virtual Extensible LAN (VXLAN)</a>, or an unencapsulated - also known as decapsulated - network model, such as <a href="https://www.techtarget.com/searchnetworking/definition/BGP-Border-Gateway-Protocol">Border Gateway Protocol (BGP).</a></p>
</div>
<p><strong>How CNI works?</strong></p>
<p>CNI uses a plugin architecture to configure the Kubernetes cluster's networking. The CNI plugin is responsible for creating and configuring the network interface for each container. When a container is created,
the Kubernetes kubelet calls the CNI plugin to set up the network interface, assign an IP address, and add it to the Kubernetes network.</p>
<p>The CNI plugin also interacts with the <code class="language-text">IP Address Management (IPAM) plugin</code> to allocate IP addresses to containers. This involves managing the pool of available IP addresses and assigning them as needed. Once the network interface is established, the kubelet starts the container,
enabling it to communicate with other containers on the Kubernetes network.</p>
<p>CNI focuses on the connectivity of container networks and the removal of allocated resources upon the termination of containers. This focus makes CNI specifications simple and allows them to be widely adopted.
For additional information on CNI specifications, including third-party plugins and runtimes, refer to the <a href="https://github.com/containernetworking/cni" target="_blank" rel="noopener noreferrer">CNI GitHub project</a>.</p>
<h2 id="diverse-kubernetes-network-plugins-necessity" style="position:relative;"><a href="#diverse-kubernetes-network-plugins-necessity" aria-label="diverse kubernetes network plugins necessity permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>🧵Diverse Kubernetes network plugins necessity</h2>
<p>Kubernetes relies on a rich ecosystem of network plugins, many of which are endorsed and widely adopted by major container orchestration platforms, with Kubernetes at the forefront.</p>
<p>These plugins play a crucial role in enabling various container networking functions, all while adhering to the rigorous standards set forth in the Container Network Interface (CNI) specification. Given the inherent complexity of networking, CNI thoughtfully delineates specifications for multiple plugins, recognizing that user requirements can greatly vary.</p>
<p>Within the realm of CNI, networks can be instantiated using two primary models: <code class="language-text">encapsulated</code> and <code class="language-text">unencapsulated</code>.</p>
<p><strong>The encapsulated(Overlay) network model:</strong></p>
<p>This model is represented by technologies like <code class="language-text">VXLAN</code> and <code class="language-text">IPsec</code>, overlays a logical Layer 2 network over an existing Layer 3 network topology. This approach simplifies routing complexity and minimizes overhead.</p>
<p>It relies on UDP ports to disseminate encapsulation data among Kubernetes workers, creating a bridge connecting these workers and pods. Communication management within pods is then expertly handled by Docker or alternative container engines.</p>
<p>This encapsulated network model proves particularly advantageous for scenarios that favor a Layer 2 bridge, especially those sensitive to Kubernetes worker latencies in a Layer 3 environment.</p>
<p>For distributed data centers spanning distinct geographic locales, minimizing latency is pivotal in preventing network segmentation.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBElEQVR42jXO2VfaQBQHYP93+1DPqYdz2oc+tVbKVgVDtYhsAbKyBUIxELZQaRAkrGFmEkKWJlTvuTMP85vv3HviOE777zL1u3RfJ3Hh8Vd5lawuYvQ63QCOY6+BkeeXOL/M8tsMD6muXOgMqO5wA5ALT9DeiTJShf/Ild/l+Pj7UO883PTF5+e3O4AMbgBP/cKHcMsXV84wmOXjBH2aKfuqQ/k/tq+ZVYIZ4GwXYyZBCoUpFGFQkASrnVGXtMsiitAoTKPvJExWOqUymWZKtLg6Yt26KQGsolyR4581ECBgkPTaXwBrFw+1r/guRLkvXoSVIcbMovS81n9d24oy6i2j3LOzG3YdIIH7z53vJzQPS/pFQXvD4IpVrxklSCxKPehhuLdi9IZJ12oPVAqXA5QdIvVQcePPztbA5AbgIjWNUDBEaG6Uyj/X0iz9UOXax7WNgxVj1W85NZCfXOYqFzgXpJXPd0+fAqxuOvXe4uxL0V/QA+QfN4rgZSwnRdLPjf7Ow+5Rtsbj2Bi8qCOlJcpVUZYbQyhNd7ZtArRvjdSmhMSJJDyxw3lbmCBBNrW99YrdMk1ju1ktlNVmoxrG/mBohq5D6N7IPrgNzb1umZZpOrZlOW/lYdu2HdtpDjiMCGW4uxyfIBoFMitS2c5LPzntxpajxEz8IYjNaGFc76+PxMP/AEh1+jWVe4GGAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/fe31a7b21e4d40d9442e70ac58134af8/c5bb3/overlay.png" srcset="/static/fe31a7b21e4d40d9442e70ac58134af8/04472/overlay.png 170w,
/static/fe31a7b21e4d40d9442e70ac58134af8/9f933/overlay.png 340w,
/static/fe31a7b21e4d40d9442e70ac58134af8/c5bb3/overlay.png 680w,
/static/fe31a7b21e4d40d9442e70ac58134af8/442cb/overlay.png 752w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p><strong>🧩 The unencapsulated(Underlay) network model:</strong></p>
<p>This model extends a Layer 3 network to facilitate the routing of packets among containers. Unlike the encapsulated counterpart, this model does not introduce an isolated Layer 2 network or any associated overhead. However, it places the onus of managing necessary route distribution squarely on the shoulders of Kubernetes workers.</p>
<p>To make this work, a network protocol is put into action, connecting Kubernetes workers and utilizing the Border Gateway Protocol (BGP) to efficiently propagate routing information to pods. Within these pods, the role of overseeing communication with workloads is assumed by Docker or a comparable container engine. The unencapsulated network model is ideally suited for scenarios favoring a routed Layer 3 network.</p>
<p>Here, routes for Kubernetes workers undergo dynamic updates at the operating system level, effectively mitigating latency concerns. In essence, Kubernetes networking unfolds as a multifaceted landscape, offering a plethora of plugin choices while accommodating diverse network models tailored to the distinct needs of your containerized workloads.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACMElEQVR42rWRy44SURCGe8aZuBvnbYwrFz6BUde+gnE1sOEJdDITdxqN0bhgw0o2xGDUKDGsgOF+a+jmkqaBgaGhOacp/78zjKOuPUlxiqqv/qpTbZjdUeR7eSPFUkUV8nnJX5rjODKZTFQQbGTiOqdnDff4Z02kWCyqfC4nORh8MjIej/VqtZLRaBQ1bLt/tFhpqVSqvmm2AyQDJIJmsxnUajVfay29Xu8E3DMPXLlc9m3bDlzXDa1er5Nb+74viEcM/ohspFQqKSQFEDsJBMOY4FhW77RnWcf0C4WCMk0zfAHZarWKYSpaKSXdbjcaCs5mM06hBoOBEO50OtLv9xHrq6W3kEHPOh06znPP8xhXYK841kBDT6fT34IE8UexI6FWq8W9iG119fhiKZ+zhVefUqmXDiaHmCbHF5Alh1vP5/MrwSNOiHuFbhvcLJLhcLjp25bfGc3kzcevH96/ff3OsixO6CO/IcNXsAZxnxOGO0SHCHeDWwHgkjUWrznJyHXDHV6cT1543vKEPvarIKDJcXfg+CE1Px5EowaSj2EFjPttsVjM+RwufImDjj+QK+KjPEX+CfwzCGSwojV3x6ngn+PJX5DLU8u4dnbW6/Wddrv9sNFoPAB4FwPtGX8dxPbR6x4mvA+BR6i5fRnfCYFkMnkznU4fplKpW7FYbBf+Xjab3SeQyWQOGAdzQNv6rLvG7SYSiUNqUOuP7vF4/AZBGsT/mW57tgyNNcb/PL8AAgKbi/2oqAgAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/27ed908cc7970fd2efa2a90f6893ba20/c5bb3/underlay.png" srcset="/static/27ed908cc7970fd2efa2a90f6893ba20/04472/underlay.png 170w,
/static/27ed908cc7970fd2efa2a90f6893ba20/9f933/underlay.png 340w,
/static/27ed908cc7970fd2efa2a90f6893ba20/c5bb3/underlay.png 680w,
/static/27ed908cc7970fd2efa2a90f6893ba20/17a7a/underlay.png 753w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h2 id="-cni-withcilium" style="position:relative;"><a href="#-cni-withcilium" aria-label=" cni withcilium permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>🐝 CNI with Cilium</h2>
<p><a href="./cilium.png">alt text</a></p>
<p><a href="https://www.solo.io/topics/cilium/" target="_blank" rel="noopener noreferrer">Cilium</a> is an open-source project that enables networking, security, and observability for Kubernetes clusters and other containerized environments.</p>
<p>It is based on a technology called <a href="https://ebpf.io/" target="_blank" rel="noopener noreferrer">eBPF</a>, which can inject network control logic, security controls, and observability features directly into the Linux kernel.</p>
<p><a href="https://docs.cilium.io/en/stable/" target="_blank" rel="noopener noreferrer">Cilium CNI</a> is a powerful networking plugin for Kubernetes which provides enhanced security and networking capabilities for containerised applications. It leverages the power of eBPF (extended Berkeley Packet Filter), a highly efficient and programmable kernel-level technology, to deliver transparent network security and traffic monitoring features.</p>
<p>Cilium uses VXLAN to form an overlay network and extended Berkeley Packet Filter to manage network connectivity and application rules. It supports both IPv4 and IPv6 addressing and uses BGP for unencapsulated routing. Cilium can support multiple Kubernetes clusters and, like Multus, provides multi-CNI capabilities.</p>
<p>Cilium handles aspects of network management, such as network policies, through HTTP request filters. Policies can be written to YAML or JSON files, both of which provide network traffic enforcement for incoming and outgoing traffic.</p>
<blockquote>
<p>Cilium can run using VXLAN as an overlay network for encapsulation and routingor BGP routing as an underlay network. Cilium used to rely on metallb to power it's BGP features, but since Cilium 1.3 it is possible to use their own implementation built on GoBGP.</p>
</blockquote>
<p>Cilium Is the only CNI with L7 aware policies. This means you can write Kubernetes networking policies that understand DNS, HTTP, and even Kafka.</p>
<p>For example, you can write a DNS L7 networking policy to:</p>
<p><strong>🧩 Restrict DNS Resolution to Subset:</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> cilium.io/v2
<span class="token key atrule">kind</span><span class="token punctuation">:</span> CiliumClusterwideNetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> dns<span class="token punctuation">-</span>allow<span class="token punctuation">-</span>list
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpointSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">egress</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">toEndpoints</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
        <span class="token key atrule">io.kubernetes.pod.namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
        <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>dns
      <span class="token key atrule">toPorts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">ports</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token string">"53"</span>
            <span class="token key atrule">protocol</span><span class="token punctuation">:</span> UDP
          <span class="token key atrule">rules</span><span class="token punctuation">:</span>
            <span class="token key atrule">dns</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token key atrule">matchPattern</span><span class="token punctuation">:</span> <span class="token string">"*.abc.xyz"</span>
              <span class="token punctuation">-</span> </code></pre></div>
<p><strong>🧩 Allow POST HTTP requests to abc.xyz:</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> cilium.io/v2
<span class="token key atrule">kind</span><span class="token punctuation">:</span> CiliumNetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> http<span class="token punctuation">-</span>post<span class="token punctuation">-</span>abc<span class="token punctuation">-</span>xyz
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpointSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">egress</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">toPorts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token string">"443"</span>
              <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">rules</span><span class="token punctuation">:</span>
        <span class="token key atrule">http</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">method</span><span class="token punctuation">:</span> POST
    <span class="token punctuation">-</span> <span class="token key atrule">toFQDNs</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">matchPattern</span><span class="token punctuation">:</span> <span class="token string">"*.abc.xyz"</span></code></pre></div>
<p><strong>🧩 Restrict Kafka Topic Access to the Following Pods:</strong></p>
<p>Typically, we're forced to write networking policies like: "Allow any application with the label kafka-consumer" to speak to Kafka. This casts a rather wide net, when with L7 policies we can limit the access to individual topics depending on the labels. As such, we can say that only the "beer-brewer" can publish to the hops topic. Amazing, right?</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> cilium.io/v2
<span class="token key atrule">kind</span><span class="token punctuation">:</span> CiliumNetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> beer<span class="token punctuation">-</span>brewers
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingress</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">fromEndpoints</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
            <span class="token key atrule">role</span><span class="token punctuation">:</span> beer<span class="token punctuation">-</span>brewer
      <span class="token key atrule">toPorts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9092</span>
              <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
          <span class="token key atrule">rules</span><span class="token punctuation">:</span>
            <span class="token key atrule">kafka</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> produce
                <span class="token key atrule">topic</span><span class="token punctuation">:</span> hops</code></pre></div>
<h3 id="-developer-experience" style="position:relative;"><a href="#-developer-experience" aria-label=" developer experience permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>🎩 Developer experience</h3>
<p>Now don't worry if these resources look difficult, because Cilium has that covered too. All of these network policies can be visualised, modified, and event constructed through an entirely point and click visual builder.</p>
<p>Check out the <a href="https://editor.networkpolicy.io/" target="_blank" rel="noopener noreferrer">Cilium Editor</a> to see for yourself.</p>
<h3 id="-installing-cilium" style="position:relative;"><a href="#-installing-cilium" aria-label=" installing cilium permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>🐧 Installing Cilium</h3>
<p>Cilium is installable as a Helm chart. So you'll first need to make the repository available:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> cilium https://helm.cilium.io/</code></pre></div>
<p>Next, we can begin to understand and tweak the default values for the installation we require.</p>
<p>The highlights are:</p>
<p><strong>IPAM mode:</strong></p>
<p>Cilium has a few different modes to manage IPAM.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token parameter variable">--set</span> <span class="token assign-left variable">global.ipam.mode</span><span class="token operator">=</span>cluster-pool
<span class="token parameter variable">--set</span> <span class="token assign-left variable">global.ipam.operator.clusterPoolIPv4PodCIDR</span><span class="token operator">=</span><span class="token number">192.168</span>.0.0/16
<span class="token parameter variable">--set</span> <span class="token assign-left variable">global.ipam.operator.clusterPoolIPv4MaskSize</span><span class="token operator">=</span><span class="token number">23</span></code></pre></div>
<p>Cilium also has a preview feature where the IPAM mode can be set to <code class="language-text">cluster-pool-v2beta</code>,
which allows for dynamic, resource usage-based, allocation of node CIDRs.</p>
<p><strong>eBPF and XDP:</strong></p>
<p>eBPF is a relatively new technology that runs within the Linux kernel and enables the execution of eBPF programs, which run in a sandbox environment.</p>
<p>These programs allow for user-land code to run within the kernel with unprecedented performance; extending the capabilities of the kernel.</p>
<p>XDP leverages eBPF to provide a highly performant packet processing pipeline that runs as soon as the networking driver receives the packet. What does this actually mean? Well, with XDP - Cilium can help mitigate DDOS attacks by dropping packets before they even hit the traditional networking stack.</p>
<p>Cilium's use of eBPF and XDP means we're not reliant on iptables, so we can actually disable the kube-proxy altogether. You'll need to do this with kubeadm and through Cilium's deploy.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token parameter variable">--set</span> <span class="token assign-left variable">kubeProxyReplacement</span><span class="token operator">=</span>probe</code></pre></div>
<p><strong>Native routing:</strong></p>
<p>As discussed above, Cilium doesn't need encapsulation to handle the routing of packets within our cluster; so let's ensure we enable it.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token parameter variable">--nativeRoutingCIDR</span><span class="token operator">=</span><span class="token number">192.168</span>.0.0/16</code></pre></div>
<p><strong>Hubble:</strong></p>
<p>As Hubble and Cilium observability is a big part of the appeal, let's not forget to enable it.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token parameter variable">--set</span> <span class="token assign-left variable">global.hubble.relay.enabled</span><span class="token operator">=</span>true
<span class="token parameter variable">--set</span> <span class="token assign-left variable">global.hubble.enabled</span><span class="token operator">=</span>true
<span class="token parameter variable">--set</span> <span class="token assign-left variable">global.hubble.listenAddress</span><span class="token operator">=</span><span class="token string">":4244"</span>
<span class="token parameter variable">--set</span> <span class="token assign-left variable">global.hubble.ui.enabled</span><span class="token operator">=</span>true</code></pre></div>
<p><strong>Complete install:</strong></p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> cilium https://helm.cilium.io/
helm upgrade <span class="token parameter variable">--install</span> cilium/cilium cilium <span class="token punctuation">\</span>
                <span class="token parameter variable">--version</span> <span class="token number">1.13</span>.4 <span class="token punctuation">\</span>
                <span class="token parameter variable">--namespace</span> kube-system <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">image.repository</span><span class="token operator">=</span>quay.io/cilium/cilium <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.ipam.mode</span><span class="token operator">=</span>cluster-pool <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.ipam.operator.clusterPoolIPv4PodCIDR</span><span class="token operator">=</span><span class="token number">192.168</span>.0.0/16 <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.ipam.operator.clusterPoolIPv4MaskSize</span><span class="token operator">=</span><span class="token number">23</span> <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.nativeRoutingCIDR</span><span class="token operator">=</span><span class="token number">192.168</span>.0.0/16 <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.endpointRoutes.enabled</span><span class="token operator">=</span>true <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.hubble.relay.enabled</span><span class="token operator">=</span>true <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.hubble.enabled</span><span class="token operator">=</span>true <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.hubble.listenAddress</span><span class="token operator">=</span><span class="token string">":4244"</span> <span class="token punctuation">\</span>
                <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.hubble.ui.enabled</span><span class="token operator">=</span>true <span class="token punctuation">\</span>
    <span class="token parameter variable">--set</span> <span class="token assign-left variable">kubeProxyReplacement</span><span class="token operator">=</span>probe <span class="token punctuation">\</span>
    <span class="token parameter variable">--set</span> <span class="token assign-left variable">k8sServiceHost</span><span class="token operator">=</span><span class="token variable">${PUBLIC_IPv4}</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">--set</span> <span class="token assign-left variable">k8sServicePort</span><span class="token operator">=</span><span class="token number">6443</span></code></pre></div>
<p>Cilium might be much newer to the Kubernetes CNI landscape, but in its short time,
it has become the gold standard for Kubernetes networking.</p>
<p>While Calico is also a great option, Cilium's adoption of eBPF and XDP provides a future-facing solution,
enriched with the best debugging tool available (Hubble) and the best developer experience with the assistance of the Cilium Editor.</p>
<h2 id="closing-thoughts" style="position:relative;"><a href="#closing-thoughts" aria-label="closing thoughts permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Closing thoughts</h2>
<p>Kubernetes networking is powered by two vital components: Kube-Proxy and CNI.</p>
<p>Kube-Proxy maintains network rules and forwards traffic to Pods, while CNI provides a common interface to the underlying network. These components are essential for running containerized applications on Kubernetes.</p>
<h1 align="center">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>
<p><strong>📅 Stay updated</strong></p>
<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p></div></div><div id="content-end"></div></article><div data-nosnippet="" class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div><br/><br/><br/></main><aside class="blogpost-sidebar"><div data-nosnippet="" class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/kubernetes-dns/">Connecting the Dots: Understanding How Pods Talk in Kubernetes Networks<!-- --> →</a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer data-nosnippet=""><div class="footer-wrapper"><div data-nosnippet="" class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="linkedin" href="https://www.linkedin.com/in/rajhi-saif/" title="Saifeddine Rajhi on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="github" href="https://github.com/seifrajhi" title="Saifeddine Rajhi on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" eventCategory="social" eventAction="click" eventLabel="email" href="mailto:rajhiseif@gmail.com" title="Saifeddine Rajhi&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg><span>Email</span></a></li><li class="social-item social-X/Twitter"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="X/Twitter" href="https://x.com/RajhiSaifeddine" title="Saifeddine Rajhi on X/X/Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg><span>X/Twitter</span></a></li><li class="social-item social-reddit"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="reddit" href="https://www.reddit.com/user/ScoreApprehensive992/" title="Saifeddine Rajhi on Reddit" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit-alien" class="svg-inline--fa fa-reddit-alien fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z"></path></svg><span>Reddit</span></a></li><li class="social-item social-stackoverflow"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://stackoverflow.com/users/21897244/saifeddine-rajhi" title="Saifeddine Rajhi on StackOverflow" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg><span>StackOverflow</span></a></li><li class="social-item social-Goodreads"><a rel="me" eventLabel="StackOverflow" href="https://www.goodreads.com/user/show/176103378-saifeddine" title="Saifeddine Rajhi on Goodreads" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="goodreads" class="svg-inline--fa fa-goodreads fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9 0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9 0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"></path></svg><span>Goodreads</span></a></li><li class="social-item social-osi"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://ossinsight.io/analyze/seifrajhi" title="Saifeddine Rajhi on OSSInsights" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="osi" class="svg-inline--fa fa-osi fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M8 266.44C10.3 130.64 105.4 34 221.8 18.34c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7q-26.7-69.45-53.4-139c-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8a71.47 71.47 0 0 0-64.5-82.2c-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4q-26.85 69.9-53.7 139.9c-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119-24.9-49.2-25.2-87.7-26.8-108.7zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3q22.35-58.65 45-117.3c1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6a91.64 91.64 0 0 1 45.2 90.4c-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6q22.8 58.8 45.2 117.7c1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161-13.7-117.5-119.4-214.8-255.5-198-106.1 13-195.3 102.5-197.1 225.8z"></path></svg><span>OSSInsights</span></a></li><li class="social-item social-devstats"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://devstats.cluster.fun/?user=seifrajhi" title="Saifeddine Rajhi on DevStats" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-line" class="svg-inline--fa fa-chart-line fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg><span>DevStats</span></a></li><li class="social-item social-RSS"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="RSS" href="https://seifrajhi.github.io/rss.xml" title="Subscribe to my blog post" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg><span>RSS</span></a></li></ul></div><div class="copyright">Saifeddine Rajhi © 1994 - <!-- -->2024<!-- --> <br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/saifrajhi">0C3B BABB 8BC1 EA2B</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/kubernetes-networking/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-26cd7e4ffafe4b5866ba.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88fb5c28d68e831e730a.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-83bdb4e48c18bf191297.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-6c9f539d882b31737b03.js\"],\"component---src-pages-cv-platform-engineer-js\":[\"/component---src-pages-cv-platform-engineer-js-13625961a6abec0cbdf1.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-635e45002a3b3339b137.js\"],\"component---src-pages-thoughts-js\":[\"/component---src-pages-thoughts-js-fe54f831bbb3f7f31564.js\"],\"component---src-templates-blog-template-js\":[\"/component---src-templates-blog-template-js-43b163172ed2ce4e492d.js\"],\"component---src-templates-thought-template-js\":[\"/component---src-templates-thought-template-js-7ddf4a0a920bf599f1a2.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="4595bb9a61696dab4748";</script><script src="/webpack-runtime-b52987cbf9e0728ddd5e.js" async></script><script src="/framework-c989293af61a95023f7f.js" async></script><script src="/app-26cd7e4ffafe4b5866ba.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>