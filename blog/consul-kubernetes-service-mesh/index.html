<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" property="og:description" content="Discover the tech-forward approach to service discovery with a deep dive into Consul on Kubernetes, exploring its role in service mesh and discovery."/><meta data-react-helmet="true" name="keywords" content="Service Mesh,Consul,Kubernetes,k8s,Cloud-native,DevOps"/><meta data-react-helmet="true" name="author" content="@RajhiSaifeddine"/><meta data-react-helmet="true" property="og:title" content="Explore the Service discovery: A Deep Dive into Consul on Kubernetes for Service Mesh and Discovery üîç - Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@RajhiSaifeddine"/><meta data-react-helmet="true" name="twitter:title" content="Explore the Service discovery: A Deep Dive into Consul on Kubernetes for Service Mesh and Discovery üîç - Blog"/><meta data-react-helmet="true" name="twitter:description" content="Discover the tech-forward approach to service discovery with a deep dive into Consul on Kubernetes, exploring its role in service mesh and discovery."/><meta data-react-helmet="true" name="image" property="og:image" content="https://seifrajhi.github.io/static/b3c1105766c84618b0a3e160716880a5/1e1a6/consul-service-cover.png"/><meta data-react-helmet="true" name="twitter:image" content="https://seifrajhi.github.io/static/b3c1105766c84618b0a3e160716880a5/1e1a6/consul-service-cover.png"/><meta data-react-helmet="true" property="og:url" content="https://seifrajhi.github.io/blog/consul-kubernetes-service-mesh/"/><meta name="theme-color" content="#ffffff"/><link rel="stylesheet" href="/styles.19780313cdbeec1e4ef5.css"/><link rel="stylesheet"/><link rel="alternate" type="application/rss+xml" title="Saifeddine Rajhi&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">Explore the Service discovery: A Deep Dive into Consul on Kubernetes for Service Mesh and Discovery üîç - Blog by Saifeddine Rajhi</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/b3c1105766c84618b0a3e160716880a5/1e1a6/consul-service-cover.png","headline":"Explore the Service discovery: A Deep Dive into Consul on Kubernetes for Service Mesh and Discovery üîç","dateCreated":"2024-10-30","datePublished":"2024-10-30","dateModified":"2024-10-30","inLanguage":"en-US","isFamilyFriendly":true,"isAccessibleForFree":true,"author":{"@type":"Person","name":"Saifeddine Rajhi","url":"https://seifrajhi.github.io"},"publisher":{"@type":"Organization","name":"Saifeddine Rajhi's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seifrajhi.github.io/blog/consul-kubernetes-service-mesh/"},"keywords":["Service Mesh","Consul","Kubernetes","k8s","Cloud-native","DevOps"],"genre":["Platform engineer","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\n> **The Tech-Forward Approach to Service Discovery üîç**\n\n## üå† Introduction\n\nWelcome to this blog post where I'll be sharing the fundamental concepts of Consul as a service mesh and discovery tool. Whether you're just starting out or looking to enhance your knowledge, this post will provide you with a head start on your journey.\n\n[Consul](https://www.consul.io/) acts as a facilitator, allowing services to communicate smoothly. I'll simplify the complexities and guide you through the essential aspects of Consul, ensuring you have a solid understanding. So, let's dive in and explore the wonders of Consul together! üôå\n\n![consul](./consul.png)\n\n### Exploring Consul's Core Features: Installation, Configuration, and Service Discovery\n\nIn essence, Consul is a networking tool that serves multiple purposes. It functions as a [service discovery](https://en.wikipedia.org/wiki/Service_discovery) mechanism and enables the storage and retrieval of configuration values.\n\nAdditionally, it offers [service-mesh](https://developer.hashicorp.com/consul/docs/connect) capabilities by managing and encrypting traffic between services. Although this may seem straightforward, in intricate and dynamic infrastructures spanning various locations, such as on-premises and cloud environments, it can become highly complex.\n\nLet's focus on the fundamentals and highlight three key aspects:\n\n1. **Installation on Kubernetes**\n2. **Utilizing the key-value store for configuration purposes**\n3. **Leveraging the service catalog to obtain service information**\n\nTo demonstrate the practical usage of the Consul API, we will employ a small Go program. Let's begin our exploration.\n\n### Prerequisites üèó\n\n- Kubernetes cluster\n- Helm installed and configured\n- Kubectl installed and configured\n- Go installed\n\n### Consul Setup\n\nI intend to deploy Consul using the [Helm chart](https://github.com/hashicorp/consul-k8s/tree/main/charts/consul) provided. It's important to note that the installation I'm about to carry out is suitable for testing purposes only and should not be utilized in a production environment. When dealing with production setups, there are numerous additional considerations to take into account, such as certificates, storage size and class, and options for enabling or disabling certain features. However, it's worth mentioning that the Helm chart does include the installation of multiple servers and clients to ensure high availability.\n\nThe chart supports multiple use cases of Consul on Kubernetes, depending on the values provided. Detailed installation instructions for Consul on Kubernetes are found [here](https://www.consul.io/docs/k8s/installation/overview).\n\nAdd the HashiCorp Helm repository:\n\n```shell\nhelm repo add hashicorp https://helm.releases.hashicorp.com\n```\n\nEnsure you have access to the Consul Helm chart and you see the latest chart version listed. If you have previously added the HashiCorp Helm repository, run:\n\n```shell\nhelm repo update\nhelm search repo hashicorp/consul\n```\n\nNow you're ready to install Consul! To install Consul with the default configuration using Helm 3.2, run the following command below. This will create a Consul Kubernetes namespace if not already present, and install Consul on the dedicated namespace.\n\n```shell\nhelm install consul hashicorp/consul --set global.name=consul --create-namespace -n consul\n```\n\nPlease see the many options supported in the `values.yaml` file. These are also fully documented directly on the [Consul website](https://www.consul.io/docs/platform/k8s/helm.html).\n\n![helm](./helm.png)\n\n### Connecting to the Consul UI\n\nThe chart installs Consul in the `consul` namespace. You can run the following command to get to the UI:\n\n```shell\nkubectl port-forward services/consul-ui 8080:80 -n consul\n```\n\nThen you access the UI on [http://localhost:8080](http://localhost:8080). You will see the list of services depending on the Kubernetes services in your system. The services include Consul itself. Additionally, the Consul service is equipped with health checks. The remaining services displayed are Kubernetes services that were discovered by Consul. We will install Redis in the default namespace and make it accessible through a service named `redissvc`. Consequently, a Consul service called `redissvc-default` is generated. Later on, we will query this service from our Go application.\n\nBy selecting **Key/Value**, you can view the configured keys. One of the keys I created is named `REDISPATTERN`, which is subsequently utilized in the Go program to determine the Redis channels to subscribe to. This key serves as a runtime configuration value.\n\n![keys](./keys.png)\n\nThe Key/Value pair can be created via the Consul CLI, the HTTP API, or via the UI (Create button in the main Key/Value screen). I created the `REDISPATTERN` key via the Create button in the web UI.\n\n### Discovering Consul: Querying the Key/Value Store\n\nNow, let's focus on developing code that fetches a Consul key during runtime. The main question here is: 'How does your application discover Consul?'\n\n![app](./app.png)\n\n### The Architecture of Consul: Server and Client Agents\n\nIn the above setup, the Consul server agents are deployed as a Kubernetes StatefulSet. Each server pod utilizes a volume, such as an Azure disk, to store data, including key/value pairs. However, your application won't directly connect to these server agents. Instead, it will connect through the client agents.\n\nThe client agents are implemented as a DaemonSet, ensuring that there is a client agent running on each Kubernetes node. The client agent pods expose a static port on the Kubernetes host, allowing your application to connect to the IP address of the host it is running on. Your app can discover that IP address via the [Downward API](https://kubernetes.io/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/#the-downward-api).\n\nThe container spec contains the following code:\n\n```yaml\ncontainers:\n    - name: realtimeapp\n        image: rajhisaifeddine/realtime-go-consul:1.0.0\n        env:\n            - name: HOST_IP\n                valueFrom:\n                    fieldRef:\n                        apiVersion: v1\n                        fieldPath: status.hostIP\n            - name: CONSUL_HTTP_ADDR\n                value: http://$(HOST_IP):8500\n```\n\nThe `HOST_IP` will be set to the IP of the Kubernetes host via a reference to `status.hostIP`. Next, the environment variable `CONSUL_HTTP_ADDR` is set to the full HTTP address including port 8500. In your code, you will need to read that environment variable.\n\n### Fetching a Key/Value Pair\n\nBelow is a code snippet in Go that demonstrates how to retrieve a key/value pair from Consul. You can find the complete source code [here](https://github.com/hashicorp/consul).\n\n```go\n// return a Consul client based on given address\nfunc getConsul(address string) (*consulapi.Client, error) {\n    config := consulapi.DefaultConfig()\n    config.Address = address\n    consul, err := consulapi.NewClient(config)\n    return consul, err\n}\n\n// get key/value pair from Consul client and passed key name\nfunc getKvPair(client *consulapi.Client, key string) (*consulapi.KVPair, error) {\n    kv := client.KV()\n    keyPair, _, err := kv.Get(key, nil)\n    return keyPair, err\n}\n\nfunc main() {\n    // retrieve address of Consul set via downward API in spec\n    consulAddress := getEnv(\"CONSUL_HTTP_ADDR\", \"\")\n    if consulAddress == \"\" {\n        log.Fatalf(\"CONSUL_HTTP_ADDRESS environment variable not set\")\n    }\n\n    // get Consul client\n    consul, err := getConsul(consulAddress)\n    if err != nil {\n        log.Fatalf(\"Error connecting to Consul: %s\", err)\n    }\n\n    // get key/value pair with Consul client\n    redisPattern, err := getKvPair(consul, \"REDISPATTERN\")\n    if err != nil || redisPattern == nil {\n        log.Fatalf(\"Could not get REDISPATTERN: %s\", err)\n    }\n    log.Printf(\"KV: %v %s\\n\", redisPattern.Key, redisPattern.Value)\n}\n```\n\nThe comments in the code should be self-explanatory. When the `REDISPATTERN` key is not set or another error occurs, the program will exit. If `REDISPATTERN` is set, we can use the value later:\n\n```go\npubsub := client.PSubscribe(string(redisPattern.Value))\n```\n\n### Looking up a Service\n\nThat's great, but how do you look up an address of a service? That's easy with the following basic code via the catalog:\n\n```go\ncat := consul.Catalog()\nsvc, _, err := cat.Service(\"redissvc-default\", \"\", nil)\nlog.Printf(\"Service address and port: %s:%d\\n\", svc[0].ServiceAddress, svc[0].ServicePort)\n```\n\n`consul` is a `*consulapi.Client` obtained earlier. You use the `Catalog()` function to obtain access to the catalog service functionality. In this case, we simply retrieve the address and port value of the Kubernetes service `redissvc` in the default namespace. We can use that information to connect to our Redis back-end.\n\n## üöÄ Wrap Up\n\nExploring the Service Mesh Galaxy, particularly through Consul on Kubernetes, opens up a world of possibilities for an efficient service mesh and discovery experience.\n\nBy adopting a tech-forward approach to service discovery, organizations can overcome the challenges of a distributed and dynamic microservices environment. Its integration with Kubernetes empowers developers to leverage the full potential of service mesh capabilities. As we venture deeper into the realm of service mesh, Consul on Kubernetes stands as a powerful tool to navigate the vast expanse of interconnected services, ensuring a smooth and reliable journey for both developers and end-users.\n","wordcount":1046}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://seifrajhi.github.io/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://seifrajhi.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Explore the Service discovery: A Deep Dive into Consul on Kubernetes for Service Mesh and Discovery üîç","item":"https://seifrajhi.github.io/blog/consul-kubernetes-service-mesh/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=47ae28bb567c9025f1fee24afb2d20c9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-LLPCCGNLH7', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LLPCCGNLH7"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LLPCCGNLH7', {"anonymize_ip":true,"send_page_view":false});gtag('config', 'GTM-5V895PDS', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seifrajhi.github.io/blog/consul-kubernetes-service-mesh/" data-baseprotocol="https:" data-basehost="seifrajhi.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;174&#x27;%20width=&#x27;150&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture><noscript><picture><source type="image/avif" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Saifeddine <br/> Rajhi</a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="My public talks" href="/talks/">talks</a></li><li><a title="Review My Resume" href="/cv/platform-engineer/">cv</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:60%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;object-fit:fill;object-position:center" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAADZUlEQVR42g2R20/TBwBGfw8by2TiHJsE5nTRcaliO4ITsC0BN64CBQu0k8ukLVSQlrbQllIsQgsdBUpxlHEpMBwoFCTcxDmFLMsWyXTxwSV7WhZN5r9x1ofzenLyfYJz9z8c26/o2nlNz+5reh+9wbf2jKEuMzedXQRudTDtqMdvrGHU3U2/y0mfw8rSSpj9P//i72dPePVig3+f3uHNyyUEg3WaZk8YXd899P1h7OM7TAUn6avKJD+/gI6ydCaMCoxtBszNWjotBppqq7DaOnHPbxGcmWE0GKQvMIN/dgXhhmmEFt8azaPbtAQ2aLnzHK9/glsmPVZTK0Mden5wm1lYXmVpfYOf9vYZ8Qdo1OlpDB2gHd/n2thjrrrD1DmnENoG5hn7zs/QVAh/YJBOXxCL1YnFbMNsbMdjNbE4YME74GWg38OAx409UmfTa7D5QjR75zANhjD55rG4hhFeTtey7i5FX3KB1tIsQpZyikqqGe0yMuZqY8HnYqVbwz1rGavOau46KvnRoWbaWs+ysYLJxmICegXO6xpG2q8j/LNkQpUnJfV4AooLEro0WuSZUpx6Nb8GOzjwt7DTLOO5XcoLRwRvFU8GmxlvKkGnqmHMG+KqsoETootUXrMibH87wmK3iwXXECsWHbO9vahVdTjrVezeyGerVky4RsJ6rYiftSk8+uYUm3UipnSleNudBCPCPs015OJErtT3RIRuLctOPWGXkQceA6vWCnb79Rz0KJj++hxbbTL2bHnsW3P4zZ7NA1Meg5dFzCrT2bRFpnDouGsqIdQkZcZcj6AslJOfJSEnPYXstCTKss/ze28ZSw1idLlpDDWV8ceil4fDFh7fdtLyZQbCW7GY5J8yofiMI4ePEhcbxyfxJ3k/Nh5BllNE7lfFyKTZnD0rRpv3BU9tGaSdjOd88mm+byxgrbeR+z0qwnY16oxUUj8+hu5iIsuqMxjkiTTkipEnHyfqcBxCUVExFeXlKBRXkOYWYq2UsaP/HMmJBDJTTnFTKeOXUTV7k7Xsekppy0nhUnICGrmIh7pzZJ1O4O1Dx4iOjuFITCxCdWUlSmUVboOK2+1VzLVeYlMnQp8tokCSSKEkiTlL5JxhNcO6XC6LkxCEGOyFYu43nOHQex8R9e5Rot6J5oMPE/gfjqQhWt5w918AAAAASUVORK5CYII=" alt=""/><picture><source type="image/webp" data-srcset="/static/b3c1105766c84618b0a3e160716880a5/80f13/consul-service-cover.webp 750w,/static/b3c1105766c84618b0a3e160716880a5/1d1da/consul-service-cover.webp 1050w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/b3c1105766c84618b0a3e160716880a5/1e1a6/consul-service-cover.png" data-srcset="/static/b3c1105766c84618b0a3e160716880a5/2512b/consul-service-cover.png 750w,/static/b3c1105766c84618b0a3e160716880a5/1e1a6/consul-service-cover.png 1050w" alt="Explore the Service discovery: A Deep Dive into Consul on Kubernetes for Service Mesh and Discovery üîç"/></picture><noscript><picture><source type="image/webp" srcSet="/static/b3c1105766c84618b0a3e160716880a5/80f13/consul-service-cover.webp 750w,/static/b3c1105766c84618b0a3e160716880a5/1d1da/consul-service-cover.webp 1050w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/b3c1105766c84618b0a3e160716880a5/1e1a6/consul-service-cover.png" srcSet="/static/b3c1105766c84618b0a3e160716880a5/2512b/consul-service-cover.png 750w,/static/b3c1105766c84618b0a3e160716880a5/1e1a6/consul-service-cover.png 1050w" alt="Explore the Service discovery: A Deep Dive into Consul on Kubernetes for Service Mesh and Discovery üîç"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption data-nosnippet="" class="image-title">Photo by Saifeddine Rajhi</figcaption></figure><h1>Explore the Service discovery: A Deep Dive into Consul on Kubernetes for Service Mesh and Discovery üîç</h1><div data-nosnippet="" class="blog-details"><time class="blog-createdat" dateTime="2024-10-30">Oct 30, 2024</time><span> ‚Ä¢ </span><span class="blog-time2read">5<!-- -->mins<!-- --> read</span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul data-nosnippet="" class="blog-tags"><li>Service Mesh</li><li>Consul</li><li>Kubernetes</li><li>k8s</li><li>Cloud-native</li><li>DevOps</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div data-nosnippet="" class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><ul class="toc-list"></ul></ul></div><div class="content blog-content"><blockquote>
<p><strong>The Tech-Forward Approach to Service Discovery üîç</strong></p>
</blockquote>
<h2 id="-introduction" style="position:relative;"><a href="#-introduction" aria-label=" introduction permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üå† Introduction</h2>
<p>Welcome to this blog post where I'll be sharing the fundamental concepts of Consul as a service mesh and discovery tool. Whether you're just starting out or looking to enhance your knowledge, this post will provide you with a head start on your journey.</p>
<p><a href="https://www.consul.io/" target="_blank" rel="noopener noreferrer">Consul</a> acts as a facilitator, allowing services to communicate smoothly. I'll simplify the complexities and guide you through the essential aspects of Consul, ensuring you have a solid understanding. So, let's dive in and explore the wonders of Consul together! üôå</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/ElEQVR42iWTXWibVRjH3/ec98375rNL2qRJ+rXSpO2apm26j65Za7O1tc1qFjcY2kHCLqQbjM6yoZYirDJUqvamIGVt3ZRtTNkY1N3IFGUieqFXRVTwQvDCXTjBL4bI4OdTd/HwcODhd/7/8/yPYZh+DLMGQ7VIj2CqEMqqRzkN6GAaq34Au/EAVjyL03MEZ9chPB157O4CVksvdnMPVtcYZqQZ0xvG+B9mhqR8WHYE2wljeyPomjZ0fQ67dRhP9gierlHc/jKe3FM4IxW8XcP40gO42Un0zr2Y/hgq2LQNDIi6EOa2UsOR0gKvxWrM40mPiaoSbp8oy5Vxh6q4g8/g9JcwUyMY4VYM7UO54iyQxNTCMtW2TD9+f5jzLy6y8s4dTp9fxJMq4Ok7hvfgKYLFWcJTs4Sm5vAVnsPsO0qxeparyxu8fG6eUCwtDJ8Axam2a+VgMb9wkfc+h4Vr/3D9HsxcWMHYUyUwNc/4Kx8w8fpt6ibOYHQeZnj6LH/c+oJHG5/C1n3WNt4XRhitotusKP5gPW+uf8K5jT+5+/UD5tb+YunyR+jBKtEz19j86W8+/OE3kpVljK5jvDC/zCOZ//Wr7/j3x/t8f+8b3GCzwGQf2itUJ87iayus3oW5S7/zrlz8/KurGP0nCMxcpbj5M+NXtvAdXcJITTI2PcvDm1/ycP1j+PYXbty4I7AISolbHUxieGPEW9NcfGuV9c0tXnpjjeDuEvb+CoHSBbwnL+M8+za+/Ax26kl0fC+nZhf47NIt1pZW2ZnqF2AApetkwZEWzJoEmaFxhotl8k9PM1Su0DZaRfUex9lXwcmfxtlzErv9MEbiIKHGQXL7Jxgvn2CoMEky0Sbb3cHjxAhM7XoCT6wZXzSJG28j2H4ANzOJ1VlEt46gUyVUUwEzlkeF94mjbmoTObI9g3R29MpHEJeqQYASOys7is7IcE0c3dSNnexEJzLYkkGrYQBVl0VFd2PuyGGGOiTAGZS3XSAJAbhSQXm3xsfdDPMfJXJ0lHeahggAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="consul" title="" src="/static/5ae45c5125b937e068f2c3aa95eb6258/c5bb3/consul.png" srcset="/static/5ae45c5125b937e068f2c3aa95eb6258/04472/consul.png 170w,
/static/5ae45c5125b937e068f2c3aa95eb6258/9f933/consul.png 340w,
/static/5ae45c5125b937e068f2c3aa95eb6258/c5bb3/consul.png 680w,
/static/5ae45c5125b937e068f2c3aa95eb6258/b12f7/consul.png 1020w,
/static/5ae45c5125b937e068f2c3aa95eb6258/b5a09/consul.png 1360w,
/static/5ae45c5125b937e068f2c3aa95eb6258/29007/consul.png 1600w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="exploring-consuls-core-features-installation-configuration-and-service-discovery" style="position:relative;"><a href="#exploring-consuls-core-features-installation-configuration-and-service-discovery" aria-label="exploring consuls core features installation configuration and service discovery permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exploring Consul's Core Features: Installation, Configuration, and Service Discovery</h3>
<p>In essence, Consul is a networking tool that serves multiple purposes. It functions as a <a href="https://en.wikipedia.org/wiki/Service_discovery" target="_blank" rel="noopener noreferrer">service discovery</a> mechanism and enables the storage and retrieval of configuration values.</p>
<p>Additionally, it offers <a href="https://developer.hashicorp.com/consul/docs/connect" target="_blank" rel="noopener noreferrer">service-mesh</a> capabilities by managing and encrypting traffic between services. Although this may seem straightforward, in intricate and dynamic infrastructures spanning various locations, such as on-premises and cloud environments, it can become highly complex.</p>
<p>Let's focus on the fundamentals and highlight three key aspects:</p>
<ol>
<li><strong>Installation on Kubernetes</strong></li>
<li><strong>Utilizing the key-value store for configuration purposes</strong></li>
<li><strong>Leveraging the service catalog to obtain service information</strong></li>
</ol>
<p>To demonstrate the practical usage of the Consul API, we will employ a small Go program. Let's begin our exploration.</p>
<h3 id="prerequisites-" style="position:relative;"><a href="#prerequisites-" aria-label="prerequisites  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Prerequisites üèó</h3>
<ul>
<li>Kubernetes cluster</li>
<li>Helm installed and configured</li>
<li>Kubectl installed and configured</li>
<li>Go installed</li>
</ul>
<h3 id="consul-setup" style="position:relative;"><a href="#consul-setup" aria-label="consul setup permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Consul Setup</h3>
<p>I intend to deploy Consul using the <a href="https://github.com/hashicorp/consul-k8s/tree/main/charts/consul" target="_blank" rel="noopener noreferrer">Helm chart</a> provided. It's important to note that the installation I'm about to carry out is suitable for testing purposes only and should not be utilized in a production environment. When dealing with production setups, there are numerous additional considerations to take into account, such as certificates, storage size and class, and options for enabling or disabling certain features. However, it's worth mentioning that the Helm chart does include the installation of multiple servers and clients to ensure high availability.</p>
<p>The chart supports multiple use cases of Consul on Kubernetes, depending on the values provided. Detailed installation instructions for Consul on Kubernetes are found <a href="https://www.consul.io/docs/k8s/installation/overview" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Add the HashiCorp Helm repository:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> hashicorp https://helm.releases.hashicorp.com</code></pre></div>
<p>Ensure you have access to the Consul Helm chart and you see the latest chart version listed. If you have previously added the HashiCorp Helm repository, run:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm repo update
helm search repo hashicorp/consul</code></pre></div>
<p>Now you're ready to install Consul! To install Consul with the default configuration using Helm 3.2, run the following command below. This will create a Consul Kubernetes namespace if not already present, and install Consul on the dedicated namespace.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm <span class="token function">install</span> consul hashicorp/consul <span class="token parameter variable">--set</span> <span class="token assign-left variable">global.name</span><span class="token operator">=</span>consul --create-namespace <span class="token parameter variable">-n</span> consul</code></pre></div>
<p>Please see the many options supported in the <code class="language-text">values.yaml</code> file. These are also fully documented directly on the <a href="https://www.consul.io/docs/platform/k8s/helm.html" target="_blank" rel="noopener noreferrer">Consul website</a>.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 67.05882352941177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6ElEQVR42lWQW0hTcRzHT42SKBOnGYhdHoqgpy4PhfVQlj5EYBREUFKR1tKyOQ0zDROELis1odCyoMThNEsrE/JWOLt4azHnNre5zTkvZ207287/ds52Tid9qT+fl/+f/+fL7/ujxvaU22+1+odsMAwhIUEMIQhaJ0OX8oGigFfdjBaURC8Vi+eVkZLcYa1CZb+ylVPJ+EJZtFBGsXM+Ioo4GsXRiPfnlKn1i9Vu6Ox3pKWPph/xZJ5kz+QwNYoXVtVBoowRVZR4fZlQuFwCqVZQiOMgC2EIEFHwvBsalCu+7rvRcrkh63jTyWx95inLof2vilJXa44so6/IxOKVRLUiqIxxX40158VTCCCEsASEiA2GGZ3FdqFhdLOyIyG/cvv90xnacxkVI3lJtw8nHd1EaTJjPMo4Q27CuIRCTi2ZSzJggSgIotTC9ZtWf3QcU3/PqNbsLTFc3M2rd8yVbdOdWWnMWzeeIzfmyG1F8f/IAEKMoW0eTdEkwgGe8CwJ9Ojn8l+/TTswUR4nViUvXFtlzE2Yroj3Nsh97Yn/ywSHLZ7g4KThx1hfb+8CTQvi30E0tZXHUqknZ2VOdaxfm+j9kDT7Ptn1JuW/sSWiHC8EwLxntq2t7dnTp9NOJy+I1q91PY+2lWZvfF4a5+3aMNWa4tImuJrXUEsOkkAISLUxiSzWlq5Go7Gx8WVvn840UG9/vUs0pfu71js0sa6WtTOdO71jZVQ0wksHEh5iDgaYsM3MTI4HvTSHsRTB8byUbdKP/OqtQvoLzKcts/0nArZmEKIxL1ITVpfT6SE0zdsniF6HfnSj4W5WP8hMuwMBBrKs0NTkGNDZ3D4AMGQcCGNJQ5hDIEQ9r65rUT/sq681v230D/UQtwnOuFEwLG0BcHzQbAllZfmqa/xsWApCRPhbELIIcZATqY4Hd9sf3tHevdfxotHQ/c39uNtZ1QUYFmEi/cMcD+cXQP9nGF56WdwNIoj1EbfmD0diQqoMby+GAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="helm" title="" src="/static/dfade66a54963ee9344ec5b5c695cff2/c5bb3/helm.png" srcset="/static/dfade66a54963ee9344ec5b5c695cff2/04472/helm.png 170w,
/static/dfade66a54963ee9344ec5b5c695cff2/9f933/helm.png 340w,
/static/dfade66a54963ee9344ec5b5c695cff2/c5bb3/helm.png 680w,
/static/dfade66a54963ee9344ec5b5c695cff2/f4b77/helm.png 770w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="connecting-to-the-consul-ui" style="position:relative;"><a href="#connecting-to-the-consul-ui" aria-label="connecting to the consul ui permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Connecting to the Consul UI</h3>
<p>The chart installs Consul in the <code class="language-text">consul</code> namespace. You can run the following command to get to the UI:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl port-forward services/consul-ui <span class="token number">8080</span>:80 <span class="token parameter variable">-n</span> consul</code></pre></div>
<p>Then you access the UI on <a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a>. You will see the list of services depending on the Kubernetes services in your system. The services include Consul itself. Additionally, the Consul service is equipped with health checks. The remaining services displayed are Kubernetes services that were discovered by Consul. We will install Redis in the default namespace and make it accessible through a service named <code class="language-text">redissvc</code>. Consequently, a Consul service called <code class="language-text">redissvc-default</code> is generated. Later on, we will query this service from our Go application.</p>
<p>By selecting <strong>Key/Value</strong>, you can view the configured keys. One of the keys I created is named <code class="language-text">REDISPATTERN</code>, which is subsequently utilized in the Go program to determine the Redis channels to subscribe to. This key serves as a runtime configuration value.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8klEQVR42mM4Wjn7UNnso1VzjlTOWlfav6No4pHymQeLp+3Lnbg/bxIutC9v0oGCKQxfvn67ee/xkxcvnzx/9uv37/+kAIZvX77cv3fv/r27QPj48eMnT548fUIAPH7y9NrNh58+fWI4dugwP78gGxsrBwcHGysrMYidjZ2BgWHVqlUMO3bsALIYGRkZiAZMTExAcuXKlVDNQD4j0YCZmZkaNu/cuYMRxCdKM9AOYOhANINsfvn6/fptR/YdOHoEBI4ewwuOHz9+6tQpIOPwoUNvXr9hePL236w9/24///f//+/ff/4RFb///v3/9fv/338A6bkTrW42e7MAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="keys" title="" src="/static/a32caaeae2be5b9cb155c6fc2d03e8fc/c5bb3/keys.png" srcset="/static/a32caaeae2be5b9cb155c6fc2d03e8fc/04472/keys.png 170w,
/static/a32caaeae2be5b9cb155c6fc2d03e8fc/9f933/keys.png 340w,
/static/a32caaeae2be5b9cb155c6fc2d03e8fc/c5bb3/keys.png 680w,
/static/a32caaeae2be5b9cb155c6fc2d03e8fc/b12f7/keys.png 1020w,
/static/a32caaeae2be5b9cb155c6fc2d03e8fc/1ac29/keys.png 1022w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>The Key/Value pair can be created via the Consul CLI, the HTTP API, or via the UI (Create button in the main Key/Value screen). I created the <code class="language-text">REDISPATTERN</code> key via the Create button in the web UI.</p>
<h3 id="discovering-consul-querying-the-keyvalue-store" style="position:relative;"><a href="#discovering-consul-querying-the-keyvalue-store" aria-label="discovering consul querying the keyvalue store permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Discovering Consul: Querying the Key/Value Store</h3>
<p>Now, let's focus on developing code that fetches a Consul key during runtime. The main question here is: 'How does your application discover Consul?'</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 85.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAklEQVR42oVTi47jIAzs///mNte05RHADx6BvSHJrlY6ndaqUjAeexib2+dv1nvfts05Z63FN8YYQvDet9Zuv4Jrrd651+t1X5Z1XZdleRtDRDnnGxLvX4Zk2I4xzvVp2KKOinyOgdAOT+9n3puIpMPAhw5DStADVWCYGWs4h+qodZSCb8+51zrBpRQgEQowFohTVQD4MGxBFTS66qw1xvygfikTjDpZtZWCUCgBInBggaRIZ4xBvv+CER2EnNIzeBeDCR4/l4Lu9WHeFp64BU4xbFQzl8ytaNZxgonZpPBI/u7euOSsrCqqpe+rfc+N6qwsEzBEGjwA5zzBARfNinxW6EkBxQOTp+QyvyXB71NECqEkTBJDYkoqF3gqxFSAFxJh72zYfNw8PMqMI2eMQAtnVXh6hCHPRRuC5terLH/qumKaOCVEFHS11BbiHiJ5j8bs29aJe0pgvie6BKMYK00XDnaihHnAhcFq30ctO5ofwhygGHE6W11LF/kSDJWJ3Lq6jw9QIGPY+2SMfz5f97uiVdaiaQ3NezzKujbn5pB89xmdhM6YKRTJpWCYQ4wYG7yDgGlBHQwmdHauHfWBHK1N8NH5w3qvzp3euT3+Gq56CLszV2uvOTkOL/BpmJtJ6cckAdYgBMQDmAiJvp/EP2A8r0OSn+mAv7jgPSDvV80T/BdesNl+/XBuswAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="app" title="" src="/static/0eeee77314397cbe7aa18746d0e74bb8/c5bb3/app.png" srcset="/static/0eeee77314397cbe7aa18746d0e74bb8/04472/app.png 170w,
/static/0eeee77314397cbe7aa18746d0e74bb8/9f933/app.png 340w,
/static/0eeee77314397cbe7aa18746d0e74bb8/c5bb3/app.png 680w,
/static/0eeee77314397cbe7aa18746d0e74bb8/b3ad9/app.png 909w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="the-architecture-of-consul-server-and-client-agents" style="position:relative;"><a href="#the-architecture-of-consul-server-and-client-agents" aria-label="the architecture of consul server and client agents permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Architecture of Consul: Server and Client Agents</h3>
<p>In the above setup, the Consul server agents are deployed as a Kubernetes StatefulSet. Each server pod utilizes a volume, such as an Azure disk, to store data, including key/value pairs. However, your application won't directly connect to these server agents. Instead, it will connect through the client agents.</p>
<p>The client agents are implemented as a DaemonSet, ensuring that there is a client agent running on each Kubernetes node. The client agent pods expose a static port on the Kubernetes host, allowing your application to connect to the IP address of the host it is running on. Your app can discover that IP address via the <a href="https://kubernetes.io/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/#the-downward-api" target="_blank" rel="noopener noreferrer">Downward API</a>.</p>
<p>The container spec contains the following code:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> realtimeapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> rajhisaifeddine/realtime<span class="token punctuation">-</span>go<span class="token punctuation">-</span>consul<span class="token punctuation">:</span>1.0.0
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> HOST_IP
                <span class="token key atrule">valueFrom</span><span class="token punctuation">:</span>
                    <span class="token key atrule">fieldRef</span><span class="token punctuation">:</span>
                        <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
                        <span class="token key atrule">fieldPath</span><span class="token punctuation">:</span> status.hostIP
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> CONSUL_HTTP_ADDR
                <span class="token key atrule">value</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//$(HOST_IP)<span class="token punctuation">:</span><span class="token number">8500</span></code></pre></div>
<p>The <code class="language-text">HOST_IP</code> will be set to the IP of the Kubernetes host via a reference to <code class="language-text">status.hostIP</code>. Next, the environment variable <code class="language-text">CONSUL_HTTP_ADDR</code> is set to the full HTTP address including port 8500. In your code, you will need to read that environment variable.</p>
<h3 id="fetching-a-keyvalue-pair" style="position:relative;"><a href="#fetching-a-keyvalue-pair" aria-label="fetching a keyvalue pair permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fetching a Key/Value Pair</h3>
<p>Below is a code snippet in Go that demonstrates how to retrieve a key/value pair from Consul. You can find the complete source code <a href="https://github.com/hashicorp/consul" target="_blank" rel="noopener noreferrer">here</a>.</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go"><span class="token comment">// return a Consul client based on given address</span>
<span class="token keyword">func</span> <span class="token function">getConsul</span><span class="token punctuation">(</span>address <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>consulapi<span class="token punctuation">.</span>Client<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    config <span class="token operator">:=</span> consulapi<span class="token punctuation">.</span><span class="token function">DefaultConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    config<span class="token punctuation">.</span>Address <span class="token operator">=</span> address
    consul<span class="token punctuation">,</span> err <span class="token operator">:=</span> consulapi<span class="token punctuation">.</span><span class="token function">NewClient</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
    <span class="token keyword">return</span> consul<span class="token punctuation">,</span> err
<span class="token punctuation">}</span>

<span class="token comment">// get key/value pair from Consul client and passed key name</span>
<span class="token keyword">func</span> <span class="token function">getKvPair</span><span class="token punctuation">(</span>client <span class="token operator">*</span>consulapi<span class="token punctuation">.</span>Client<span class="token punctuation">,</span> key <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>consulapi<span class="token punctuation">.</span>KVPair<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    kv <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">KV</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    keyPair<span class="token punctuation">,</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> kv<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> keyPair<span class="token punctuation">,</span> err
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// retrieve address of Consul set via downward API in spec</span>
    consulAddress <span class="token operator">:=</span> <span class="token function">getEnv</span><span class="token punctuation">(</span><span class="token string">"CONSUL_HTTP_ADDR"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> consulAddress <span class="token operator">==</span> <span class="token string">""</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"CONSUL_HTTP_ADDRESS environment variable not set"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// get Consul client</span>
    consul<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">getConsul</span><span class="token punctuation">(</span>consulAddress<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Error connecting to Consul: %s"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// get key/value pair with Consul client</span>
    redisPattern<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">getKvPair</span><span class="token punctuation">(</span>consul<span class="token punctuation">,</span> <span class="token string">"REDISPATTERN"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token operator">||</span> redisPattern <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Could not get REDISPATTERN: %s"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"KV: %v %s\n"</span><span class="token punctuation">,</span> redisPattern<span class="token punctuation">.</span>Key<span class="token punctuation">,</span> redisPattern<span class="token punctuation">.</span>Value<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The comments in the code should be self-explanatory. When the <code class="language-text">REDISPATTERN</code> key is not set or another error occurs, the program will exit. If <code class="language-text">REDISPATTERN</code> is set, we can use the value later:</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go">pubsub <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">PSubscribe</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>redisPattern<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<h3 id="looking-up-a-service" style="position:relative;"><a href="#looking-up-a-service" aria-label="looking up a service permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Looking up a Service</h3>
<p>That's great, but how do you look up an address of a service? That's easy with the following basic code via the catalog:</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go">cat <span class="token operator">:=</span> consul<span class="token punctuation">.</span><span class="token function">Catalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
svc<span class="token punctuation">,</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> cat<span class="token punctuation">.</span><span class="token function">Service</span><span class="token punctuation">(</span><span class="token string">"redissvc-default"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Service address and port: %s:%d\n"</span><span class="token punctuation">,</span> svc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ServiceAddress<span class="token punctuation">,</span> svc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ServicePort<span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">consul</code> is a <code class="language-text">*consulapi.Client</code> obtained earlier. You use the <code class="language-text">Catalog()</code> function to obtain access to the catalog service functionality. In this case, we simply retrieve the address and port value of the Kubernetes service <code class="language-text">redissvc</code> in the default namespace. We can use that information to connect to our Redis back-end.</p>
<h2 id="-wrap-up" style="position:relative;"><a href="#-wrap-up" aria-label=" wrap up permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üöÄ Wrap Up</h2>
<p>Exploring the Service Mesh Galaxy, particularly through Consul on Kubernetes, opens up a world of possibilities for an efficient service mesh and discovery experience.</p>
<p>By adopting a tech-forward approach to service discovery, organizations can overcome the challenges of a distributed and dynamic microservices environment. Its integration with Kubernetes empowers developers to leverage the full potential of service mesh capabilities. As we venture deeper into the realm of service mesh, Consul on Kubernetes stands as a powerful tool to navigate the vast expanse of interconnected services, ensuring a smooth and reliable journey for both developers and end-users.</p></div></div><div id="content-end"></div></article><div data-nosnippet="" class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div><br/><br/><br/></main><aside class="blogpost-sidebar"><div data-nosnippet="" class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/kubernetes-rbac-privilege-escalation-mitigation/">Kubernetes RBAC: Privilege Escalation Exploits and Mitigations üîí<!-- --> ‚Üí</a><a rel="prev" class="prev-post" href="/blog/openfaas-kubernetes-serverless/">‚Üê <!-- -->Discover the Potential of Serverless Computing with OpenFaaS and Kubernetes as Catalysts for Change üêã</a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer data-nosnippet=""><div class="footer-wrapper"><div data-nosnippet="" class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="linkedin" href="https://www.linkedin.com/in/rajhi-saif/" title="Saifeddine Rajhi on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="github" href="https://github.com/seifrajhi" title="Saifeddine Rajhi on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" eventCategory="social" eventAction="click" eventLabel="email" href="mailto:rajhiseif@gmail.com" title="Saifeddine Rajhi&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg><span>Email</span></a></li><li class="social-item social-bluesky"><a rel="me" itemProp="url" eventCategory="bluesky" eventAction="click" eventLabel="social" href="https://bsky.app/profile/saifrajhi.bsky.social" title="Saifeddine Rajhi on Bluesky Social" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bluesky" class="svg-inline--fa fa-bluesky fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2c42.1-31.6 110.3-56 110.3 21.8c0 15.5-8.9 130.5-14.1 149.2C478.2 298 412 314.6 353.1 304.5c102.9 17.5 129.1 75.5 72.5 133.5c-107.4 110.2-154.3-27.6-166.3-62.9l0 0c-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8l0 0c-12 35.3-59 173.1-166.3 62.9c-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1C10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"></path></svg><span>Bluesky Social</span></a></li><li class="social-item social-X/Twitter"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="X/Twitter" href="https://x.com/RajhiSaifeddine" title="Saifeddine Rajhi on X/Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg><span>X/Twitter</span></a></li><li class="social-item social-reddit"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="reddit" href="https://www.reddit.com/user/ScoreApprehensive992/" title="Saifeddine Rajhi on Reddit" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit-alien" class="svg-inline--fa fa-reddit-alien fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z"></path></svg><span>Reddit</span></a></li><li class="social-item social-stackoverflow"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://stackoverflow.com/users/21897244/saifeddine-rajhi" title="Saifeddine Rajhi on StackOverflow" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg><span>StackOverflow</span></a></li><li class="social-item social-Goodreads"><a rel="me" eventLabel="StackOverflow" href="https://www.goodreads.com/user/show/176103378-saifeddine" title="Saifeddine Rajhi on Goodreads" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="goodreads" class="svg-inline--fa fa-goodreads fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9 0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9 0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"></path></svg><span>Goodreads</span></a></li><li class="social-item social-osi"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://ossinsight.io/analyze/seifrajhi" title="Saifeddine Rajhi on OSSInsights" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="osi" class="svg-inline--fa fa-osi fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M8 266.44C10.3 130.64 105.4 34 221.8 18.34c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7q-26.7-69.45-53.4-139c-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8a71.47 71.47 0 0 0-64.5-82.2c-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4q-26.85 69.9-53.7 139.9c-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119-24.9-49.2-25.2-87.7-26.8-108.7zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3q22.35-58.65 45-117.3c1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6a91.64 91.64 0 0 1 45.2 90.4c-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6q22.8 58.8 45.2 117.7c1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161-13.7-117.5-119.4-214.8-255.5-198-106.1 13-195.3 102.5-197.1 225.8z"></path></svg><span>OSSInsights</span></a></li><li class="social-item social-devstats"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://devstats.cluster.fun/?user=seifrajhi" title="Saifeddine Rajhi on DevStats" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-line" class="svg-inline--fa fa-chart-line fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg><span>DevStats</span></a></li><li class="social-item social-RSS"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="RSS" href="https://seifrajhi.github.io/rss.xml" title="Subscribe to my blog post" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg><span>RSS</span></a></li></ul></div><div class="copyright">Saifeddine Rajhi ¬© 1994 - <!-- -->2025<!-- --> <br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/saifrajhi">0C3B BABB 8BC1 EA2B</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/consul-kubernetes-service-mesh/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-2f4f174b7ccfc9183c7b.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88fb5c28d68e831e730a.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-a0e3d27d11d1ae18e8f0.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-ebba4d9aefd856068672.js\"],\"component---src-pages-cv-platform-engineer-js\":[\"/component---src-pages-cv-platform-engineer-js-6b113f68e4ef180c17b2.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-cca2029691d058282d40.js\"],\"component---src-pages-talks-js\":[\"/component---src-pages-talks-js-d3fd645d0085de17a5e9.js\"],\"component---src-pages-thoughts-js\":[\"/component---src-pages-thoughts-js-0950be014b397a2b3d9c.js\"],\"component---src-templates-blog-template-js\":[\"/component---src-templates-blog-template-js-8b499d4855ef1cb13add.js\"],\"component---src-templates-talk-template-js\":[\"/component---src-templates-talk-template-js-7623845caf43043e0341.js\"],\"component---src-templates-thought-template-js\":[\"/component---src-templates-thought-template-js-b8bdd67706c6a1d2873c.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="88092f7f5940cd0b45c0";</script><script src="/webpack-runtime-7456f0bc58205084e1e1.js" async></script><script src="/framework-580c5b11fe009445c659.js" async></script><script src="/app-2f4f174b7ccfc9183c7b.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>