<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" property="og:description" content="Discover how Velero simplifies EKS backups, ensuring data protection and recovery."/><meta data-react-helmet="true" name="keywords" content="AWS EKS,Velero,Kubernetes,Data protection"/><meta data-react-helmet="true" name="author" content="@RajhiSaifeddine"/><meta data-react-helmet="true" property="og:title" content="EKS Backup Simplified: A Deep Dive into Velero&#x27;s Magic - Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@RajhiSaifeddine"/><meta data-react-helmet="true" name="twitter:title" content="EKS Backup Simplified: A Deep Dive into Velero&#x27;s Magic - Blog"/><meta data-react-helmet="true" name="twitter:description" content="Discover how Velero simplifies EKS backups, ensuring data protection and recovery."/><meta data-react-helmet="true" name="image" property="og:image" content="https://seifrajhi.github.io/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/1e21a/velero-cover.jpg"/><meta data-react-helmet="true" name="twitter:image" content="https://seifrajhi.github.io/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/1e21a/velero-cover.jpg"/><meta data-react-helmet="true" property="og:url" content="https://seifrajhi.github.io/blog/eks-backup-velero/"/><meta name="theme-color" content="#ffffff"/><link rel="stylesheet" href="/styles.38c2a06e874c487e61a0.css"/><link rel="stylesheet"/><link rel="alternate" type="application/rss+xml" title="Saifeddine Rajhi&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">EKS Backup Simplified: A Deep Dive into Velero&#x27;s Magic - Blog by Saifeddine Rajhi</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/1e21a/velero-cover.jpg","headline":"EKS Backup Simplified: A Deep Dive into Velero's Magic","dateCreated":"2024-10-20","datePublished":"2024-10-20","dateModified":"2024-10-20","inLanguage":"en-US","isFamilyFriendly":true,"isAccessibleForFree":true,"author":{"@type":"Person","name":"Saifeddine Rajhi","url":"https://seifrajhi.github.io"},"publisher":{"@type":"Organization","name":"Saifeddine Rajhi's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seifrajhi.github.io/blog/eks-backup-velero/"},"keywords":["AWS EKS","Velero","Kubernetes","Data protection"],"genre":["Platform engineer","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\n> **Easily Backup EKS with Velero üõ≥**\n\n## ‚ò∏Ô∏è Introduction\n\nWelcome to a journey to explore **Velero** and how it makes Kubernetes backups easy. In the world of Kubernetes, keeping your cluster safe is very important. Velero helps with its strong features and simple interface.\n\nWe‚Äôll look at how Velero changes Kubernetes backups. See how it makes managing backups, snapshots, and custom resources easy.\n\n### üéØ Goals & Objectives\n\nJoin us as we explore Velero‚Äôs magic, offering practical tips and best practices to easily protect your AWS Kubernetes cluster. Let‚Äôs dive into the world of simple Kubernetes backups with Velero!\n\n### üöÄ Prerequisites\n\nBefore we start, I assume you have the following:\n\n- [AWS](https://aws.amazon.com/) and [GitHub](https://github.com/) accounts.\n- [Terraform](https://www.terraform.io/) installed and configured.\n- The [AWS CLI](https://aws.amazon.com/cli/) installed and configured.\n- [Velero](https://velero.io/) installed.\n- [Terragrunt](https://terragrunt.gruntwork.io/)\n\n## ‚ùÑ The Workflow Landscape\n\n![workflow](./workflow.png)\n\nVelero is ideal for disaster recovery use cases, as well as for snapshotting your application state prior to performing system operations on your cluster (e.g., upgrades).\n\n### ‚≠êÔ∏è Velero Backup Workflow\n\nWhen you run `velero backup create test-backup`:\n\n1. The Velero client makes a call to the Kubernetes API server to create a Backup object.\n2. The `BackupController` notices the new Backup object and performs validation.\n3. The `BackupController` begins the backup process by collecting the data to back up by querying the API server for resources.\n4. The `BackupController` makes a call to the object storage service (e.g., [AWS S3](https://aws.amazon.com/s3/)) to upload the backup file.\n\nBy default, `velero backup create` makes disk snapshots of any persistent volumes. You can adjust the snapshots by specifying additional flags. Run `velero backup create --help` to see available flags. Snapshots can be disabled with the option `--snapshot-volumes=false`.\n\n![logo](./logo.png)\n\n## Streamline Infrastructure Automation with Terraform and Terragrunt\n\nAutomating infrastructure provisioning with [Terraform](https://www.terraform.io/) is a seamless process. By leveraging the comprehensive [AWS provider](https://registry.terraform.io/providers/hashicorp/aws/latest) available in the Terraform registry, setting up EKS, OIDC, and Velero resources becomes effortless.\n\nHowever, before diving into infrastructure automation, it's crucial to ensure that the Terraform provider is properly configured to interact with the target AWS account. Once configured, Terraform empowers you to effortlessly orchestrate the deployment of complex infrastructure setups, enabling you to focus on higher-level tasks and freeing up valuable time and resources.\n\n## üåê Provision of the EKS, OIDC, and Velero Resources on AWS\n\nThe Terraform configuration is organized as shown below:\n\n![code](./code.png)\n\n### Initialize the Infrastructure on an AWS Account\n\nFirst, update the content of the local Terragrunt variable called `aws_profile` in the file named [terragrunt-global-config.hcl](https://github.com/seifrajhi/aws-eks-irsa/blob/main/terraform/terragrunt-global-config.hcl) to point to your AWS profile instead of mine üòâ.\n\nOnce this is done, you can apply the infrastructure with Terragrunt as follows:\n\n```shell\ncd terraform\nterragrunt run-all init\nterragrunt run-all apply\n```\n\n- The first Terragrunt command will run `terraform init` in every Terraform layer in the `terraform` folder.\n- The second Terragrunt command will run `terraform apply` in each layer.\n\nOn the first apply, Terragrunt will ask if you want to create the Terraform states S3 bucket if it does not exist on your AWS account. It will also create a DynamoDB table for state locking.\n\n### How is the AWS IAM OIDC Provider Created?\n\nBy default, the IAM OIDC provider is created by the [AWS EKS Blueprints for Terraform](https://github.com/aws-ia/terraform-aws-eks-blueprints/) with the input `enable_irsa` set to true.\n\nTo demonstrate how it works, I set that input to false and created the OIDC provider with the AWS provider resources myself (you can find those resources in the file named `irsa.tf`).\n\n### How are the Velero Resources Created?\n\nThe Velero resources are defined in the `velero.tf` file, where configurations for backups, restores, and other Velero functionalities are specified. This Terraform script ensures the creation and configuration of Velero-related resources, enabling efficient data backups and restores for your infrastructure within the defined AWS environment.\n\n###  How to Manage Velero: Technical Aspect\n\nAfter installing the Velero server on the EKS cluster, you can view Velero's server-side components by running:\n\n```shell\nkubectl get all -n velero\n```\n\nWhere `velero` is the namespace where all Velero components are running.\n\nVelero also uses a number of CRDs (Custom Resource Definitions) to represent its own resources like backups, backup schedules, etc.\n\n```shell\nkubectl get crd | grep velero\n```\n\n### Deploy Test Application\n\nThis step involves deploying a sample application to validate the infrastructure setup and ensure successful integration of the components.\n\nCreate a namespace and deploy the application:\n\n![app-test](./app-test.png)\n\nThen verify the deployed application:\n\n![get](./get.png)\n\n### üíæ Backups\n\nNow, let's look into backups in case something happens to the blog. Backups are for Kubernetes resources and persistent volumes. You can back up your entire cluster, or optionally choose a namespace or label selector to back up. They can be run one-off or scheduled. It's a good idea to have scheduled backups so you are certain you have a recent backup to easily fall back to. You can also create backup hooks if you want to execute actions before or after a backup is made. By default, the backup retention is 30 days, but you can change it with the `-ttl` flag.\n\nTo see what all you can do with backups, run:\n\n![bckp](./bckp.png)\n\nLet's start with the most basic option: creating a one-off backup. It's a good idea to give it a meaningful name so you remember what it was for, unlike what is done here.\n\n![example](./example.png)\n\nIf we want to do a backup with all namespaces included, we can remove the flag `--include-namespaces`. And to include all namespaces except specific ones, we could use `--exclude-namespaces` with the namespace(s) we don't want.\n\nLet's create a backup from a schedule.\n\n![schedule](./schedule.png)\n\nSee all of the backups created:\n\n![result](./result.png)\n\n## üí• Wreak Havoc\n\nNow that we have a happy cluster state and that most excellent blog you created‚Ä¶ let's nuke the demo.\n\nLet's say that someone (you) accidentally (definitely intentionally) deleted the demo namespace by running the following:\n\n```shell\nkubectl delete namespace demo\n```\n\nTry to connect to the demo again. Shoot‚Ä¶ Now the site is down and so is that super important blog post you just made. What now?\n\n### üîÑ Restore\n\nWell, it's a good thing you have backups! Now it's time to look into restoring from a backup. To see what all you can do with restore, run:\n\n```shell\nvelero restore -h\n```\n\nLet's now wait for all of the resources to be gone. First, check the output of `get all`:\n\n```shell\nkubectl get all -n demo\n```\n\nNote: It might take some time until everything is properly deleted; so you may run these commands above until they give you a (somewhat ominous) \"No resources found\" output.\n\nNow to perform a restore:\n\nTo take a look at what backups you have, you can run the following again:\n\n```shell\nvelero backup get\n```\n\nTo restore from the specific backup we created first:\n\nSo the big questions are:\nDid all the resources come back up?\n\nLet's find out. First, let's check to see if our resources are back and running:\n\n![restore](./restore.png)\n\n```shell\nkubectl get all -n demo\n```\n\nIt worked üéâ\n\n## üåü Conclusion üåü\n\nThis hands-on blog explored the simplified process of backing up a Kubernetes cluster using Velero. We delved into the magic of Velero, understanding its key components and how it seamlessly integrates with EKS. By following the step-by-step guide, readers can now confidently implement effective backup strategies for their EKS infrastructure, ensuring data resilience and peace of mind.\n\nVelero truly simplifies EKS backups, empowering organizations to safeguard their valuable data effortlessly.\n\nI hope you guys have enjoyed this hands-on tutorial and learned a bit more than what you knew before. Let me know if you have any questions related to this blog.\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  _**Until next time üéâ**_\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordcount":1222}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://seifrajhi.github.io/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://seifrajhi.github.io/blog/"},{"@type":"ListItem","position":3,"name":"EKS Backup Simplified: A Deep Dive into Velero's Magic","item":"https://seifrajhi.github.io/blog/eks-backup-velero/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=47ae28bb567c9025f1fee24afb2d20c9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-LLPCCGNLH7', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LLPCCGNLH7"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LLPCCGNLH7', {"anonymize_ip":true,"send_page_view":false});gtag('config', 'GTM-5V895PDS', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seifrajhi.github.io/blog/eks-backup-velero/" data-baseprotocol="https:" data-basehost="seifrajhi.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;174&#x27;%20width=&#x27;150&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture><noscript><picture><source type="image/avif" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Saifeddine <br/> Rajhi</a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="My public talks" href="/talks/">talks</a></li><li><a title="Review My Resume" href="/cv/platform-engineer/">cv</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:56.25%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;object-fit:fill;object-position:center" decoding="async" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFAf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABY2PjFQlm3//EABkQAAIDAQAAAAAAAAAAAAAAAAECAxARE//aAAgBAQABBQISAlmXOgra/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACBB/9oACAEBAAY/AiL/AP/EABsQAQEAAQUAAAAAAAAAAAAAAAEAEBExQWGR/9oACAEBAAE/IdiXMBu49iEjquP/2gAMAwEAAgADAAAAEE/v/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPxBPCn//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EGtIf//EABoQAQEBAQADAAAAAAAAAAAAAAERACExgeH/2gAIAQEAAT8QnYFYHDVFBjKb6eJvnJiveHm//9k=" alt=""/><picture><source type="image/webp" data-srcset="/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/a66aa/velero-cover.webp 750w,/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/b2a35/velero-cover.webp 800w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/1e21a/velero-cover.jpg" data-srcset="/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/37bba/velero-cover.jpg 750w,/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/1e21a/velero-cover.jpg 800w" alt="EKS Backup Simplified: A Deep Dive into Velero&#x27;s Magic"/></picture><noscript><picture><source type="image/webp" srcSet="/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/a66aa/velero-cover.webp 750w,/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/b2a35/velero-cover.webp 800w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/1e21a/velero-cover.jpg" srcSet="/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/37bba/velero-cover.jpg 750w,/static/18baf81cd46c70dd0d0e4e67a3f2b6fd/1e21a/velero-cover.jpg 800w" alt="EKS Backup Simplified: A Deep Dive into Velero&#x27;s Magic"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption data-nosnippet="" class="image-title">Photo by Saifeddine Rajhi</figcaption></figure><h1>EKS Backup Simplified: A Deep Dive into Velero&#x27;s Magic</h1><div data-nosnippet="" class="blog-details"><time class="blog-createdat" dateTime="2024-10-20">Oct 20, 2024</time><span> ‚Ä¢ </span><span class="blog-time2read">5<!-- -->mins<!-- --> read</span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul data-nosnippet="" class="blog-tags"><li>AWS EKS</li><li>Velero</li><li>Kubernetes</li><li>Data protection</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div data-nosnippet="" class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><ul class="toc-list"></ul></ul></div><div class="content blog-content"><blockquote>
<p><strong>Easily Backup EKS with Velero üõ≥</strong></p>
</blockquote>
<h2 id="Ô∏è-introduction" style="position:relative;"><a href="#%EF%B8%8F-introduction" aria-label="Ô∏è introduction permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚ò∏Ô∏è Introduction</h2>
<p>Welcome to a journey to explore <strong>Velero</strong> and how it makes Kubernetes backups easy. In the world of Kubernetes, keeping your cluster safe is very important. Velero helps with its strong features and simple interface.</p>
<p>We‚Äôll look at how Velero changes Kubernetes backups. See how it makes managing backups, snapshots, and custom resources easy.</p>
<h3 id="-goals--objectives" style="position:relative;"><a href="#-goals--objectives" aria-label=" goals  objectives permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üéØ Goals &#x26; Objectives</h3>
<p>Join us as we explore Velero‚Äôs magic, offering practical tips and best practices to easily protect your AWS Kubernetes cluster. Let‚Äôs dive into the world of simple Kubernetes backups with Velero!</p>
<h3 id="-prerequisites" style="position:relative;"><a href="#-prerequisites" aria-label=" prerequisites permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üöÄ Prerequisites</h3>
<p>Before we start, I assume you have the following:</p>
<ul>
<li><a href="https://aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS</a> and <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a> accounts.</li>
<li><a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">Terraform</a> installed and configured.</li>
<li>The <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a> installed and configured.</li>
<li><a href="https://velero.io/" target="_blank" rel="noopener noreferrer">Velero</a> installed.</li>
<li><a href="https://terragrunt.gruntwork.io/" target="_blank" rel="noopener noreferrer">Terragrunt</a></li>
</ul>
<h2 id="-the-workflow-landscape" style="position:relative;"><a href="#-the-workflow-landscape" aria-label=" the workflow landscape permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚ùÑ The Workflow Landscape</h2>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 72.94117647058825%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvklEQVR42m1TS2/TQBB2S088JAQ/BK78gV6olIKKigAhLqGVKEIV4hwhfgJcKpC490ARx0IVTkjcQkCtkkDzcJz4/Yiz3l3vxsOs8yBBHWViz+w338x+3tU0NDvmmwHhXy0//uAnabkfJne1iTVMv2AGg6gfDW9Oc70B2QiT9KjvRwd+wstOzO+rPAAs5wCHpNsRE3rHdn+ENO0YIdmZ1C7XutajARPQ9ON7U8KuN1D4lm67VYV3Sfp0Roh/S9o4Wlor7Z3X/jO1XgG4MMPN2VrpE+LHebW+iCmVls8i1M4g+ke4NyOcmTkg6wGDdZewW42+vekzUXAIK2C8YUbJjWn3HIuxhfr5DAq+EIVK23poYp3CB0zcPjasVY0ICe2+BV3bBTrKQGS5SyQBJkdH880TjFW+1bOkbo3xqXKsUXZi2KChuFlD72XNnpWp9xgRJB0JBYiYXCAMmfyiOp12++LUMLMBlyP0LEbHfFbtWJnGkXyYCsDu2BHwCcAnE0Z8kXDAxxMmQkpVwyZ4NhpP+LODE/qEgeEE0PciCJJUkUCjrUuCwPA/QtWAY6HhBrLnhYBHBnBqqLd0CIcJVHUkdGMKuu0pEPiEI6mAynFNekOKhIsaKgkYEqJ+0nD8fAC8CFA5qYGJ9VXdAY1KEAjKHccXROTvqg5Qn8PFLcvD/GPhT+EVNlE+AqW5QA2F5ng+1JttaHUNOG3ruTeabcnx64+yrKzOJ4JX7uzvn2NpWlaEpu3I4/pv+NPuoHfBDcJcw3oPJ3QIfexRXsTzuN0wvecepUV7SItWTHasIV2dP4cqRvwTtY6SFGuINwndUjHquV3VzQdn3pTpJQ84vx6n2S6Ct+JU7vqcX5tfP/OmqO1M/c1++eKz9weXX3/+fjWfiNBXaisdJ6DqaVH6UuXffvt1ReFevPt4ab4e9Vj5C7egB8wR+DxlAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="workflow" title="" src="/static/67c895ab0aa79187931427924267ce45/c5bb3/workflow.png" srcset="/static/67c895ab0aa79187931427924267ce45/04472/workflow.png 170w,
/static/67c895ab0aa79187931427924267ce45/9f933/workflow.png 340w,
/static/67c895ab0aa79187931427924267ce45/c5bb3/workflow.png 680w,
/static/67c895ab0aa79187931427924267ce45/5a190/workflow.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>Velero is ideal for disaster recovery use cases, as well as for snapshotting your application state prior to performing system operations on your cluster (e.g., upgrades).</p>
<h3 id="Ô∏è-velero-backup-workflow" style="position:relative;"><a href="#%EF%B8%8F-velero-backup-workflow" aria-label="Ô∏è velero backup workflow permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚≠êÔ∏è Velero Backup Workflow</h3>
<p>When you run <code class="language-text">velero backup create test-backup</code>:</p>
<ol>
<li>The Velero client makes a call to the Kubernetes API server to create a Backup object.</li>
<li>The <code class="language-text">BackupController</code> notices the new Backup object and performs validation.</li>
<li>The <code class="language-text">BackupController</code> begins the backup process by collecting the data to back up by querying the API server for resources.</li>
<li>The <code class="language-text">BackupController</code> makes a call to the object storage service (e.g., <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">AWS S3</a>) to upload the backup file.</li>
</ol>
<p>By default, <code class="language-text">velero backup create</code> makes disk snapshots of any persistent volumes. You can adjust the snapshots by specifying additional flags. Run <code class="language-text">velero backup create --help</code> to see available flags. Snapshots can be disabled with the option <code class="language-text">--snapshot-volumes=false</code>.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACs0lEQVR42mNgmHnzE8MMKmKggVcZZt28yjjz1jXGmTeugWgQHyYOxjNuAMVuAMVuoMrNvAHFSGoZZt3awjATiOfdWAcU2Aim59zYBBYHy93cBBafeWMzmIaJz7qxiQlIM824tY1x5s3NEHmgOJAxCeiySbx1d3fqlT95IV/+6Cpb3+35QA0TgXITGWfcmMU869Z9IH4B1LgYaOgEhjnXeqQmPVxn3f7pExB/Nul494Rtxs2pQD0TGBgWXUkTq727IKrz0/95O7/9bV72879p2bNHQG8WMMy4niay+P5C5TXP/6tufPtffNnDbQzTrqWwzLhZat3x+ZFd66e3pi0vzji3fvmn1/NmG8OsSxkMDMuuuSoWPt/Ws+H3/9N3fvzcde7rP+/GNz/Zm+9nMiy86cI77168+soH1zVXPXgisfh+EcOcm3ZqE17VO3f8+GPU9GSDSsuNVsuGp9cc2r++ZJ51JxBo4FVtpcJHvWlTf/xfdujnnwmb//63q3x9T7DxsrvClL12ui2rPYWnHHVW79oSqtO61lWxb7uLQP9JO4fOX5fsWz4+Na95cNC29vl346YnMxnmntMChuFdOYaZ1yT18p4scah4/sK69NkdqfwnfsLLNkgFl3UHRZR2RgZUTfKMqOwIiSpvTwivmBCq3j5dwbjjXZRj69eXdg2vn9tUPzojOemGBsOch1IMDB1n+IGG8ovvvMAt135JUGXiCT7RVVd4GIBsJaAcX/0OIa2uLRJK3UfF+PvPC8i1HxbkB8oJzznCC6J5Ws+JCgH1CHbc5WeoPy8AdOFMVob6K2wWhcc4c2/dYo+fv59Dvv4+B0MaUByE6/ezoGCouHz9fg6VidvY4excCJsBDur/M9kDNYAwA8N/RrDY//+M9QwMTP+RaBCGydnX/2cB4dDQ/8wwcwCjqbSaDdTsmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="logo" title="" src="/static/48361060518a22260fda230c6572a3d5/c5bb3/logo.png" srcset="/static/48361060518a22260fda230c6572a3d5/04472/logo.png 170w,
/static/48361060518a22260fda230c6572a3d5/9f933/logo.png 340w,
/static/48361060518a22260fda230c6572a3d5/c5bb3/logo.png 680w,
/static/48361060518a22260fda230c6572a3d5/5a190/logo.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h2 id="streamline-infrastructure-automation-with-terraform-and-terragrunt" style="position:relative;"><a href="#streamline-infrastructure-automation-with-terraform-and-terragrunt" aria-label="streamline infrastructure automation with terraform and terragrunt permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Streamline Infrastructure Automation with Terraform and Terragrunt</h2>
<p>Automating infrastructure provisioning with <a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">Terraform</a> is a seamless process. By leveraging the comprehensive <a href="https://registry.terraform.io/providers/hashicorp/aws/latest" target="_blank" rel="noopener noreferrer">AWS provider</a> available in the Terraform registry, setting up EKS, OIDC, and Velero resources becomes effortless.</p>
<p>However, before diving into infrastructure automation, it's crucial to ensure that the Terraform provider is properly configured to interact with the target AWS account. Once configured, Terraform empowers you to effortlessly orchestrate the deployment of complex infrastructure setups, enabling you to focus on higher-level tasks and freeing up valuable time and resources.</p>
<h2 id="-provision-of-the-eks-oidc-and-velero-resources-on-aws" style="position:relative;"><a href="#-provision-of-the-eks-oidc-and-velero-resources-on-aws" aria-label=" provision of the eks oidc and velero resources on aws permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üåê Provision of the EKS, OIDC, and Velero Resources on AWS</h2>
<p>The Terraform configuration is organized as shown below:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 139.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXklEQVR42q2Va26DQAyE98Xu2rSQtLlB73/BKmjrwUuJVKkKMT8skJA+jT1j475uw/d09Qt5t3CSirZyY3J3eWkcekVbOSrhTtPQ6JIbjckMdZSlXQqNZoHOuXEJJqhjAQJCk6j7KI05nqCwAjg0fpdK3g5kATKAqMGf0HKNjUQdXYuqHLwVqC3XWxWn4x6hcDxOCswCpLi6vCp9S1pwHpGC6vzcKHaF3NuetFbnESd8k5E8a5aaIgpZQl2vWY3ZsvhKy7+xQYuTAMmYQ3FUg405bZtiApawYDvW2aFlgE3AKkC0KzD6LNqyJdj00DJJDvlARP6PDVReuimG9eux8apsUwdjsjcAoephM5DJV+/ifm0A3Bw+79pk+4HdgbJ6uNjYlhqsB7bPEFnEDA0qVSH12GxAw29AFSLYY9K/HqcTjgMyJwr/XJrU6whwrHHZ2oUheI5zv4t4HlnD5NsPf1VQcyv7Y+AAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="code" title="" src="/static/1bcd7b014302897252113fefa3143695/c5bb3/code.png" srcset="/static/1bcd7b014302897252113fefa3143695/04472/code.png 170w,
/static/1bcd7b014302897252113fefa3143695/9f933/code.png 340w,
/static/1bcd7b014302897252113fefa3143695/c5bb3/code.png 680w,
/static/1bcd7b014302897252113fefa3143695/5a190/code.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="initialize-the-infrastructure-on-an-aws-account" style="position:relative;"><a href="#initialize-the-infrastructure-on-an-aws-account" aria-label="initialize the infrastructure on an aws account permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Initialize the Infrastructure on an AWS Account</h3>
<p>First, update the content of the local Terragrunt variable called <code class="language-text">aws_profile</code> in the file named <a href="https://github.com/seifrajhi/aws-eks-irsa/blob/main/terraform/terragrunt-global-config.hcl" target="_blank" rel="noopener noreferrer">terragrunt-global-config.hcl</a> to point to your AWS profile instead of mine üòâ.</p>
<p>Once this is done, you can apply the infrastructure with Terragrunt as follows:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">cd</span> terraform
terragrunt run-all init
terragrunt run-all apply</code></pre></div>
<ul>
<li>The first Terragrunt command will run <code class="language-text">terraform init</code> in every Terraform layer in the <code class="language-text">terraform</code> folder.</li>
<li>The second Terragrunt command will run <code class="language-text">terraform apply</code> in each layer.</li>
</ul>
<p>On the first apply, Terragrunt will ask if you want to create the Terraform states S3 bucket if it does not exist on your AWS account. It will also create a DynamoDB table for state locking.</p>
<h3 id="how-is-the-aws-iam-oidc-provider-created" style="position:relative;"><a href="#how-is-the-aws-iam-oidc-provider-created" aria-label="how is the aws iam oidc provider created permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How is the AWS IAM OIDC Provider Created?</h3>
<p>By default, the IAM OIDC provider is created by the <a href="https://github.com/aws-ia/terraform-aws-eks-blueprints/" target="_blank" rel="noopener noreferrer">AWS EKS Blueprints for Terraform</a> with the input <code class="language-text">enable_irsa</code> set to true.</p>
<p>To demonstrate how it works, I set that input to false and created the OIDC provider with the AWS provider resources myself (you can find those resources in the file named <code class="language-text">irsa.tf</code>).</p>
<h3 id="how-are-the-velero-resources-created" style="position:relative;"><a href="#how-are-the-velero-resources-created" aria-label="how are the velero resources created permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How are the Velero Resources Created?</h3>
<p>The Velero resources are defined in the <code class="language-text">velero.tf</code> file, where configurations for backups, restores, and other Velero functionalities are specified. This Terraform script ensures the creation and configuration of Velero-related resources, enabling efficient data backups and restores for your infrastructure within the defined AWS environment.</p>
<h3 id="how-to-manage-velero-technical-aspect" style="position:relative;"><a href="#how-to-manage-velero-technical-aspect" aria-label="how to manage velero technical aspect permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to Manage Velero: Technical Aspect</h3>
<p>After installing the Velero server on the EKS cluster, you can view Velero's server-side components by running:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get all <span class="token parameter variable">-n</span> velero</code></pre></div>
<p>Where <code class="language-text">velero</code> is the namespace where all Velero components are running.</p>
<p>Velero also uses a number of CRDs (Custom Resource Definitions) to represent its own resources like backups, backup schedules, etc.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get crd <span class="token operator">|</span> <span class="token function">grep</span> velero</code></pre></div>
<h3 id="deploy-test-application" style="position:relative;"><a href="#deploy-test-application" aria-label="deploy test application permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deploy Test Application</h3>
<p>This step involves deploying a sample application to validate the infrastructure setup and ensure successful integration of the components.</p>
<p>Create a namespace and deploy the application:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVR42nVR0ZKEIAzza462IKsirNz5/1+lk2sX2fNh7yHTNJ1pUhjqIse4MoQ9vBew9y94kQbjnxDCR334Sulw5QlKCZwz9vTAPo0YlTvVAhECsy6/mRhe2q32hVTy4bYNtK6wyrWCf74bX5sJ7TtiighVTbYKspnhqUEUj1wwq7lo6sGVcrI2tl3GsSG2ame1PirXBPHiNrvmnYfrCQaX82kuvCygUuCU98Sk6fw0gSy1amJcNZ7ndmp/u/vJGvM0B+lp3on+3K2Xe6J/PsQW/gK7n7eJqDjB/gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="app-test" title="" src="/static/ae8af3428090588d73ccc3a1fb208b9a/c5bb3/app-test.png" srcset="/static/ae8af3428090588d73ccc3a1fb208b9a/04472/app-test.png 170w,
/static/ae8af3428090588d73ccc3a1fb208b9a/9f933/app-test.png 340w,
/static/ae8af3428090588d73ccc3a1fb208b9a/c5bb3/app-test.png 680w,
/static/ae8af3428090588d73ccc3a1fb208b9a/5a190/app-test.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>Then verify the deployed application:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAXElEQVR42pWMQQ6AIBADeQ4uLCECwvL/VxmwAol3OUzaQzuqBro56IcO6saYTkSLr8/cQcVTt5I0UorIuaBWGXnBew8RgbUWY/gbxUxtMI4M5yYOzLxEs+/IpvAF7N5a/KQQW5EAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="get" title="" src="/static/9e58f0b788a32741f2d3a634b878ee18/c5bb3/get.png" srcset="/static/9e58f0b788a32741f2d3a634b878ee18/04472/get.png 170w,
/static/9e58f0b788a32741f2d3a634b878ee18/9f933/get.png 340w,
/static/9e58f0b788a32741f2d3a634b878ee18/c5bb3/get.png 680w,
/static/9e58f0b788a32741f2d3a634b878ee18/5a190/get.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="-backups" style="position:relative;"><a href="#-backups" aria-label=" backups permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üíæ Backups</h3>
<p>Now, let's look into backups in case something happens to the blog. Backups are for Kubernetes resources and persistent volumes. You can back up your entire cluster, or optionally choose a namespace or label selector to back up. They can be run one-off or scheduled. It's a good idea to have scheduled backups so you are certain you have a recent backup to easily fall back to. You can also create backup hooks if you want to execute actions before or after a backup is made. By default, the backup retention is 30 days, but you can change it with the <code class="language-text">-ttl</code> flag.</p>
<p>To see what all you can do with backups, run:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARklEQVR42mOwNtT8pWus8U9LU/uvtpbWX21tbYowg7qh0R8NE9P/6ubm/7VMTP5r6+r+B0qQjRm0dHT+gAzRAhlEoWEgAwGLKlo1qyYi6AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="bckp" title="" src="/static/4a6c2a9b89deb93396ccab30d2dffdb8/c5bb3/bckp.png" srcset="/static/4a6c2a9b89deb93396ccab30d2dffdb8/04472/bckp.png 170w,
/static/4a6c2a9b89deb93396ccab30d2dffdb8/9f933/bckp.png 340w,
/static/4a6c2a9b89deb93396ccab30d2dffdb8/c5bb3/bckp.png 680w,
/static/4a6c2a9b89deb93396ccab30d2dffdb8/5a190/bckp.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>Let's start with the most basic option: creating a one-off backup. It's a good idea to give it a meaningful name so you remember what it was for, unlike what is done here.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAbElEQVR42p3PzQ6EIAwE4LKA0CLFn7Pv/45GHRvZZC+e9vAdmklmUto07KruYqJTPsb/rwR3UqrxKCujLBkyJbBGiHew8CGBjPuiH/+OuIZDpgG8WFkbkFtEHRNmyagc+0BLPdd+M3vYN6+FN/aUQCmSYrGeAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="example" title="" src="/static/cf761c976566410cf11eee26251870af/c5bb3/example.png" srcset="/static/cf761c976566410cf11eee26251870af/04472/example.png 170w,
/static/cf761c976566410cf11eee26251870af/9f933/example.png 340w,
/static/cf761c976566410cf11eee26251870af/c5bb3/example.png 680w,
/static/cf761c976566410cf11eee26251870af/5a190/example.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>If we want to do a backup with all namespaces included, we can remove the flag <code class="language-text">--include-namespaces</code>. And to include all namespaces except specific ones, we could use <code class="language-text">--exclude-namespaces</code> with the namespace(s) we don't want.</p>
<p>Let's create a backup from a schedule.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEUlEQVR42nVRXU+DQBC8A7UmRkRaTX2TUij9UkAbnwyltLalfDX9//8EMu4diWLUh8mws5fZ2YX1ZmF1MV+CmSuwQQRmrX6B/6G1e3wYNxDa9Syp+osTbr0MhpdDsRpj3jYyo2bYQPTib0OhmRTmcdmwNJzvK91L0Q1y3L+W0OYH6M8Z7l5Kqo+4HG9h+Dl6QQHVD8G8d7BJ+KV3Se8vjvJbpGSGl9VX071Mo9prKHbcMDUVYvFIdTYS3KYENiUZRrIv3p05a5yPNpJlQtVNau6mYBIHsFFCIJ4U4FRzZ0cmG8IHDaUh1vrnym0IjdLV2hPdLyhxQ6tqBMG6X6Az3lGdynXEjcVZHt5O6Ljbf3/gJzt7rZDt0DXoAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="schedule" title="" src="/static/fa7c116f89fb97f998abc491e2cfbdf6/c5bb3/schedule.png" srcset="/static/fa7c116f89fb97f998abc491e2cfbdf6/04472/schedule.png 170w,
/static/fa7c116f89fb97f998abc491e2cfbdf6/9f933/schedule.png 340w,
/static/fa7c116f89fb97f998abc491e2cfbdf6/c5bb3/schedule.png 680w,
/static/fa7c116f89fb97f998abc491e2cfbdf6/5a190/schedule.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>See all of the backups created:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyElEQVR42k1PyQ6CUBADwSii4BZJPLmABkXE7eLFuCOC0YP//yOYOvMICYem89pZ+qS+f0j11RGqc4M8PkEaHSEx53URuV70C31ivhUkqeHH0Ny7ELRZxiX7jMYiQt2LoM8fhBCKc8mGh9ki9io0x9wgqBPyB/tvam3fUOihTq/oUV33HpBtXh6i6t5QJt3afdAOEpj+E93NGwZxfqyzfokemUJIph/9OqsXmkEs0vElzQ1FAsU5i6RcF9Oayxg1SsxLGHw4//IfvzZ0uue9IYwAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="result" title="" src="/static/e81f131c9d6961e08d7194c3f35afed0/c5bb3/result.png" srcset="/static/e81f131c9d6961e08d7194c3f35afed0/04472/result.png 170w,
/static/e81f131c9d6961e08d7194c3f35afed0/9f933/result.png 340w,
/static/e81f131c9d6961e08d7194c3f35afed0/c5bb3/result.png 680w,
/static/e81f131c9d6961e08d7194c3f35afed0/5a190/result.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h2 id="-wreak-havoc" style="position:relative;"><a href="#-wreak-havoc" aria-label=" wreak havoc permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üí• Wreak Havoc</h2>
<p>Now that we have a happy cluster state and that most excellent blog you created‚Ä¶ let's nuke the demo.</p>
<p>Let's say that someone (you) accidentally (definitely intentionally) deleted the demo namespace by running the following:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl delete namespace demo</code></pre></div>
<p>Try to connect to the demo again. Shoot‚Ä¶ Now the site is down and so is that super important blog post you just made. What now?</p>
<h3 id="-restore" style="position:relative;"><a href="#-restore" aria-label=" restore permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üîÑ Restore</h3>
<p>Well, it's a good thing you have backups! Now it's time to look into restoring from a backup. To see what all you can do with restore, run:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">velero restore <span class="token parameter variable">-h</span></code></pre></div>
<p>Let's now wait for all of the resources to be gone. First, check the output of <code class="language-text">get all</code>:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get all <span class="token parameter variable">-n</span> demo</code></pre></div>
<p>Note: It might take some time until everything is properly deleted; so you may run these commands above until they give you a (somewhat ominous) "No resources found" output.</p>
<p>Now to perform a restore:</p>
<p>To take a look at what backups you have, you can run the following again:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">velero backup get</code></pre></div>
<p>To restore from the specific backup we created first:</p>
<p>So the big questions are:
Did all the resources come back up?</p>
<p>Let's find out. First, let's check to see if our resources are back and running:</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 10.588235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAaElEQVR42lXKwQoDIQyEYY0uaKJGwrrXQt//CUu3U4XSbQ/fYX7G3W17dPMvJn9K9Ccv4d/q8tNlKpE+zX2t7azwc2jBoRV7Exy9gmNCDgoOHckbNDcMFWRiJFLUreE2dhjPH7n5u7wBd6wrpLczbRcAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="restore" title="" src="/static/a6c9b4eef35a409cb385d9618e5d3f77/c5bb3/restore.png" srcset="/static/a6c9b4eef35a409cb385d9618e5d3f77/04472/restore.png 170w,
/static/a6c9b4eef35a409cb385d9618e5d3f77/9f933/restore.png 340w,
/static/a6c9b4eef35a409cb385d9618e5d3f77/c5bb3/restore.png 680w,
/static/a6c9b4eef35a409cb385d9618e5d3f77/5a190/restore.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get all <span class="token parameter variable">-n</span> demo</code></pre></div>
<p>It worked üéâ</p>
<h2 id="-conclusion-" style="position:relative;"><a href="#-conclusion-" aria-label=" conclusion  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üåü Conclusion üåü</h2>
<p>This hands-on blog explored the simplified process of backing up a Kubernetes cluster using Velero. We delved into the magic of Velero, understanding its key components and how it seamlessly integrates with EKS. By following the step-by-step guide, readers can now confidently implement effective backup strategies for their EKS infrastructure, ensuring data resilience and peace of mind.</p>
<p>Velero truly simplifies EKS backups, empowering organizations to safeguard their valuable data effortlessly.</p>
<p>I hope you guys have enjoyed this hands-on tutorial and learned a bit more than what you knew before. Let me know if you have any questions related to this blog.</p>
<br>
<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>
<blockquote>
<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <em><strong>Until next time üéâ</strong></em></p>
</blockquote>
<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>
<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href="https://www.linkedin.com/in/rajhi-saif/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/rajhi-saif/</a></p>
<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href="https://x.com/rajhisaifeddine" target="_blank" rel="noopener noreferrer">https://x.com/rajhisaifeddine</a></p>
<p><strong>The end ‚úåüèª</strong></p>
<h1 align="center">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>
<p><strong>üìÖ Stay updated</strong></p>
<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p></div></div><div id="content-end"></div></article><div data-nosnippet="" class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div><br/><br/><br/></main><aside class="blogpost-sidebar"><div data-nosnippet="" class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/python-diagrams-as-code-architecture/">Simplify Software architecture with Diagrams as Code DaC üìà<!-- --> ‚Üí</a><a rel="prev" class="prev-post" href="/blog/k8s-wasm-runtimes-part1/">‚Üê <!-- -->Wasm and Kubernetes: A new era of cloud-native application deployment; Part1</a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer data-nosnippet=""><div class="footer-wrapper"><div data-nosnippet="" class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="linkedin" href="https://www.linkedin.com/in/rajhi-saif/" title="Saifeddine Rajhi on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="github" href="https://github.com/seifrajhi" title="Saifeddine Rajhi on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" eventCategory="social" eventAction="click" eventLabel="email" href="mailto:rajhiseif@gmail.com" title="Saifeddine Rajhi&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg><span>Email</span></a></li><li class="social-item social-bluesky"><a rel="me" itemProp="url" eventCategory="bluesky" eventAction="click" eventLabel="social" href="https://bsky.app/profile/saifrajhi.bsky.social" title="Saifeddine Rajhi on Bluesky Social" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bluesky" class="svg-inline--fa fa-bluesky fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2c42.1-31.6 110.3-56 110.3 21.8c0 15.5-8.9 130.5-14.1 149.2C478.2 298 412 314.6 353.1 304.5c102.9 17.5 129.1 75.5 72.5 133.5c-107.4 110.2-154.3-27.6-166.3-62.9l0 0c-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8l0 0c-12 35.3-59 173.1-166.3 62.9c-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1C10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"></path></svg><span>Bluesky Social</span></a></li><li class="social-item social-X/Twitter"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="X/Twitter" href="https://x.com/RajhiSaifeddine" title="Saifeddine Rajhi on X/Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg><span>X/Twitter</span></a></li><li class="social-item social-reddit"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="reddit" href="https://www.reddit.com/user/ScoreApprehensive992/" title="Saifeddine Rajhi on Reddit" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit-alien" class="svg-inline--fa fa-reddit-alien fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z"></path></svg><span>Reddit</span></a></li><li class="social-item social-stackoverflow"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://stackoverflow.com/users/21897244/saifeddine-rajhi" title="Saifeddine Rajhi on StackOverflow" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg><span>StackOverflow</span></a></li><li class="social-item social-Goodreads"><a rel="me" eventLabel="StackOverflow" href="https://www.goodreads.com/user/show/176103378-saifeddine" title="Saifeddine Rajhi on Goodreads" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="goodreads" class="svg-inline--fa fa-goodreads fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9 0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9 0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"></path></svg><span>Goodreads</span></a></li><li class="social-item social-osi"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://ossinsight.io/analyze/seifrajhi" title="Saifeddine Rajhi on OSSInsights" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="osi" class="svg-inline--fa fa-osi fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M8 266.44C10.3 130.64 105.4 34 221.8 18.34c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7q-26.7-69.45-53.4-139c-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8a71.47 71.47 0 0 0-64.5-82.2c-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4q-26.85 69.9-53.7 139.9c-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119-24.9-49.2-25.2-87.7-26.8-108.7zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3q22.35-58.65 45-117.3c1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6a91.64 91.64 0 0 1 45.2 90.4c-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6q22.8 58.8 45.2 117.7c1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161-13.7-117.5-119.4-214.8-255.5-198-106.1 13-195.3 102.5-197.1 225.8z"></path></svg><span>OSSInsights</span></a></li><li class="social-item social-devstats"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://devstats.cluster.fun/?user=seifrajhi" title="Saifeddine Rajhi on DevStats" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-line" class="svg-inline--fa fa-chart-line fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg><span>DevStats</span></a></li><li class="social-item social-RSS"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="RSS" href="https://seifrajhi.github.io/rss.xml" title="Subscribe to my blog post" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg><span>RSS</span></a></li></ul></div><div class="copyright">Saifeddine Rajhi ¬© 1994 - <!-- -->2024<!-- --> <br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/saifrajhi">0C3B BABB 8BC1 EA2B</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/eks-backup-velero/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-a5a85b91af04696ccdc4.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88fb5c28d68e831e730a.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-83bdb4e48c18bf191297.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-ecde77d98197d52cb813.js\"],\"component---src-pages-cv-platform-engineer-js\":[\"/component---src-pages-cv-platform-engineer-js-b123892ec44b2247c14c.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-ea9268b02241eb42b7ab.js\"],\"component---src-pages-talks-js\":[\"/component---src-pages-talks-js-be8ac3db9e3c2f2f5cd6.js\"],\"component---src-pages-thoughts-js\":[\"/component---src-pages-thoughts-js-54f56c1476e2dcbf7fc4.js\"],\"component---src-templates-blog-template-js\":[\"/component---src-templates-blog-template-js-36418f189bad33f744db.js\"],\"component---src-templates-talk-template-js\":[\"/component---src-templates-talk-template-js-7623845caf43043e0341.js\"],\"component---src-templates-thought-template-js\":[\"/component---src-templates-thought-template-js-4e873e19a182fe3c30b3.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="6740a3edb303f203b08f";</script><script src="/webpack-runtime-80ade5d9bbec0331f109.js" async></script><script src="/framework-c989293af61a95023f7f.js" async></script><script src="/app-a5a85b91af04696ccdc4.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>