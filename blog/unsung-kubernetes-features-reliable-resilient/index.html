<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" property="og:description" content="Discover the hidden gems within Kubernetes that ensure your clusters remain highly available and resilient."/><meta data-react-helmet="true" name="keywords" content="Kubernetes,High Availability,Resilience,Kubernetes Features"/><meta data-react-helmet="true" name="author" content="@RajhiSaifeddine"/><meta data-react-helmet="true" property="og:title" content="Unsung Kubernetes Features that Keep Kubernetes Clusters Reliable and Resilient - Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@RajhiSaifeddine"/><meta data-react-helmet="true" name="twitter:title" content="Unsung Kubernetes Features that Keep Kubernetes Clusters Reliable and Resilient - Blog"/><meta data-react-helmet="true" name="twitter:description" content="Discover the hidden gems within Kubernetes that ensure your clusters remain highly available and resilient."/><meta data-react-helmet="true" name="image" property="og:image" content="https://seifrajhi.github.io/static/09e20fec65f88b9bfdec8ebe1d3285dc/40ae5/unsung-k8s.png"/><meta data-react-helmet="true" name="twitter:image" content="https://seifrajhi.github.io/static/09e20fec65f88b9bfdec8ebe1d3285dc/40ae5/unsung-k8s.png"/><meta data-react-helmet="true" property="og:url" content="https://seifrajhi.github.io/blog/unsung-kubernetes-features-reliable-resilient/"/><meta name="theme-color" content="#ffffff"/><link rel="stylesheet" href="/styles.38c2a06e874c487e61a0.css"/><link rel="stylesheet"/><link rel="alternate" type="application/rss+xml" title="Saifeddine Rajhi&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">Unsung Kubernetes Features that Keep Kubernetes Clusters Reliable and Resilient - Blog by Saifeddine Rajhi</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/09e20fec65f88b9bfdec8ebe1d3285dc/40ae5/unsung-k8s.png","headline":"Unsung Kubernetes Features that Keep Kubernetes Clusters Reliable and Resilient","dateCreated":"2024-10-24","datePublished":"2024-10-24","dateModified":"2024-10-24","inLanguage":"en-US","isFamilyFriendly":true,"isAccessibleForFree":true,"author":{"@type":"Person","name":"Saifeddine Rajhi","url":"https://seifrajhi.github.io"},"publisher":{"@type":"Organization","name":"Saifeddine Rajhi's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seifrajhi.github.io/blog/unsung-kubernetes-features-reliable-resilient/"},"keywords":["Kubernetes","High Availability","Resilience","Kubernetes Features"],"genre":["Platform engineer","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\n> **Explore the lesser-known features that keep Kubernetes high available**\n\n## ⭐️ Introduction\n\nEnsuring high availability and reliability in Kubernetes clusters can be a challenge. While some features like Deployments and Services are well-known for their ability to maintain availability, there are several lesser-known features that play an important role in keeping Kubernetes clusters running smoothly. In this article, we'll talk about some of these unsung heroes, including **Pod Topology Spread Constraints**, **pod-deletion-cost**, **maxUnavailable**, **Pod Disruption Budgets**, **PriorityClasses**, and **Pod Anti-Affinity**.\n\n## Pod Topology Spread Constraints\n\nPod Topology Spread Constraints in Kubernetes allow for fine-grained control over the distribution of pods across failure domains, such as regions and zones, to achieve high availability and efficient resource utilization. These constraints use labels to enforce specific distribution patterns, ensuring that workloads are evenly distributed and separated by topology. By preventing single points of failure, they enhance fault-tolerance, improve performance, and optimize resource utilization.\n\nFor example, the `maxSkew` parameter defines the degree to which pods may be unevenly distributed, while the `minDomains` parameter forces spreading pods over a minimum number of domains. These constraints complement other Kubernetes scheduling policies, such as Pod affinity/anti-affinity, Node Selector, Node Affinity, and Node Taints, and are an important asset in deploying and running efficient and highly available workloads in complex, distributed environments.\n\nHere's an example of a pod topology spread constraint:\n\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n    name: example-pod\nspec:\n    topologySpreadConstraints:\n        - maxSkew: <integer>\n            minDomains: <integer> # optional\n            topologyKey: <string>\n            whenUnsatisfiable: <string>\n            labelSelector: <object>\n            matchLabelKeys: <list> # optional\n            nodeAffinityPolicy: [Honor|Ignore] # optional\n            nodeTaintsPolicy: [Honor|Ignore] # optional\n```\n\nYou can find a full explanation of each element in the [Kubernetes documentation](https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/#spread-constraint-definition). For now, let's just briefly outline the obligatory fields:\n\n- **maxSkew**: The degree to which your Pods can be distributed unevenly across all zones. Its value must be more than zero.\n- **topologyKey**: The key of node labels. Nodes with the same label and values belong to the same topology. Each topology instance is a domain to which the scheduler tries to assign a balanced number of pods.\n- **whenUnsatisfiable**: Lets you decide what to do with a Pod when it doesn't satisfy your spread constraint:\n    1. `DoNotSchedule` instructs the scheduler not to schedule it.\n    2. `ScheduleAnyway` tells the scheduler to schedule it and prioritize the nodes minimizing the skew.\n- **labelSelector**: Allows finding matching Pods. The number of Pods in their corresponding topology domain is based on the Pods matching the label selector.\n\n## Pod Deletion Cost\n\nPod deletion cost is an annotation in Kubernetes that allows users to set a preference regarding which pods to remove first when downscaling a ReplicaSet. By using the `controller.kubernetes.io/pod-deletion-cost` annotation, users can influence the order in which pods are deleted. The annotation should be set on the pod, and the range is `[-2147483648, 2147483647]`.\n\nIt represents the cost of deleting a pod compared to other pods belonging to the same ReplicaSet. Pods with lower deletion cost are preferred to be deleted before pods with higher deletion costs. If the annotation is not specified, the implicit value is 0.\n\nThis feature is useful for influencing the downscaling order of pods and can be particularly beneficial in scenarios where specific pods need to be retained for longer periods during downscaling. The annotation interacts with the ReplicaSet controller to determine the order of pod deletion based on the set deletion cost values. It provides a way to customize the pod deletion behavior, ensuring that pods are removed in the desired order when downscaling a ReplicaSet.\n\nHere's an example of a YAML manifest for a Kubernetes Pod with the `controller.kubernetes.io/pod-deletion-cost` annotation:\n\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n    name: example-pod\n    labels:\n        app: example\n    annotations:\n        controller.kubernetes.io/pod-deletion-cost: \"100\"\nspec:\n    containers:\n    - name: nginx\n        image: nginx\n        ports:\n        - containerPort: 80\n```\n\nIn this example, we have a Pod named \"example-pod\" with the label \"app: example\" running an Nginx container. The `controller.kubernetes.io/pod-deletion-cost` annotation is set to \"100\" to indicate the deletion cost for this Pod. When scaling down, Pods with lower deletion costs will be preferred for deletion first.\n\n## maxUnavailable Parameter\n\n`maxUnavailable` is a parameter in Kubernetes that specifies the maximum number of pods that can be unavailable during a rolling update. It is used in conjunction with the `maxSurge` parameter, which specifies the maximum number of new pods that can be created at a time. Together, these parameters control the rate at which pods are updated during a rolling update.\n\nHere's an example of how to use `maxUnavailable` in a Kubernetes Deployment:\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n    name: my-deployment\nspec:\n    replicas: 3\n    selector:\n        matchLabels:\n            app: my-app\n    template:\n        metadata:\n            labels:\n                app: my-app\n        spec:\n            containers:\n            - name: my-container\n                image: my-image\n                ports:\n                - containerPort: 80\n    strategy:\n        type: RollingUpdate\n        rollingUpdate:\n            maxSurge: 1\n            maxUnavailable: 0\n```\n\nIn this example, the `maxSurge` is set to 1, which means that only one new pod can be created at a time. The `maxUnavailable` is set to 0, which means that no old pods can be deleted at a time.\n\nKeep in mind that `maxUnavailable` can only be used to control the eviction of pods that have an associated controller managing them. In the case of a Deployment, this means that the controller is the ReplicaSet. If you want to control the eviction of pods in a StatefulSet, you can use the `maxUnavailable` parameter in the StatefulSet's rolling update strategy.\n\n## Pod Disruption Budgets (PDB)\n\nPDBs are a Kubernetes feature that allows users to declare the minimum or maximum number of unavailable pods for an application during disruptions. PDBs help ensure the high availability of applications by setting constraints on the number of pods that can be disrupted at a time. Disruptions can be voluntary, such as maintenance operations or node scaling, or involuntary, such as hardware failures or system crashes.\n\n### Three Steps to Creating a PDB:\n\n1. **Determine the Minimum Number of Instances**: Assess your application's needs and identify the minimum number of instances (`minAvailable`) that must be operational during disruptions.\n2. **Create a YAML File**: Use a text editor to create a YAML file that specifies the PDB object. Here's an example YAML file:\n\n        ```yaml\n        apiVersion: policy/v1\n        kind: PodDisruptionBudget\n        metadata:\n            name: my-pdb\n        spec:\n            minAvailable: 2\n            selector:\n                matchLabels:\n                    app: my-app\n        ```\n\n        In this example, the `minAvailable` field is set to 2, indicating that at least two instances of the specified pods should be available at any given time. The `selector` field identifies the target pods based on the label selector `app: my-app`.\n\n3. **Apply the YAML File**: Use the `kubectl apply` command to apply the YAML file and create the PDB within your Kubernetes cluster:\n\n        ```sh\n        kubectl apply -f pdb.yaml\n        ```\n\n## Kubernetes Pod Priority & Preemption\n\n`PriorityClass` is a cluster-wide API object in Kubernetes and part of the `scheduling.k8s.io/v1` API group. It contains a mapping of the `PriorityClass` name (defined in `.metadata.name`) and an integer value (defined in `.value`). This represents the value that the scheduler uses to determine Pod's relative priority.\n\n[Pod preemption](https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/#preemption) is a Kubernetes feature that allows the cluster to preempt pods (removing an existing Pod in favor of a new Pod) on the basis of priority. [Pod priority](https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/#pod-priority) indicates the importance of a pod relative to other pods while scheduling. If there aren't enough resources to run all the current pods, the scheduler tries to evict lower-priority pods over high-priority ones.\n\nHere's an example. Next, create some environment-specific `PriorityClasses`:\n\n```yaml\napiVersion: scheduling.k8s.io/v1\nkind: PriorityClass\nmetadata:\n    name: dev-pc\nvalue: 1000000\nglobalDefault: false\ndescription: >-\n    (Optional) This priority class should only be used for all development pods.\n---\napiVersion: scheduling.k8s.io/v1\nkind: PriorityClass\nmetadata:\n    name: preprod-pc\nvalue: 2000000\nglobalDefault: false\ndescription: >-\n    (Optional) This priority class should only be used for all preprod pods.\n---\napiVersion: scheduling.k8s.io/v1\nkind: PriorityClass\nmetadata:\n    name: prod-pc\nvalue: 4000000\nglobalDefault: false\ndescription: >-\n    (Optional) This priority class should only be used for all prod pods.\n```\n\nUse `kubectl create -f <FILE.YAML>` command to create a pc and `kubectl get pc` to check its status.\n\n```sh\n$ kubectl get pc\nNAME                      VALUE        GLOBAL-DEFAULT   AGE\ndev-pc                    1000000      false            3m13s\npreprod-pc                2000000      false            2m3s\nprod-pc                   4000000      false            7s\nsystem-cluster-critical   2000000000   false            82m\nsystem-node-critical      2000001000   false            82m\n```\n\nNow, let's say there are 3 application pods: one for prod, one for preprod, and one for development. Below are three sample YAML manifest files for each of those.\n\n```yaml\n---\n# development\napiVersion: v1\nkind: Pod\nmetadata:\n    name: dev-nginx\n    labels:\n        env: dev\nspec:\n    containers:\n    - name: dev-nginx\n        image: nginx\n    priorityClassName: dev-pc\n---\n# preproduction\napiVersion: v1\nkind: Pod\nmetadata:\n    name: preprod-nginx\n    labels:\n        env: preprod\nspec:\n    containers:\n    - name: preprod-nginx\n        image: nginx\n    priorityClassName: preprod-pc\n---\n# production\napiVersion: v1\nkind: Pod\nmetadata:\n    name: prod-nginx\n    labels:\n        env: prod\nspec:\n    containers:\n    - name: prod-nginx\n        image: nginx\n    priorityClassName: prod-pc\n```\n\nYou can create these pods with the `kubectl create -f <FILE.yaml>` command, and then check their status using the `kubectl get pods` command. You can see if they are up and look ready to serve traffic:\n\n```sh\n$ kubectl get pods --show-labels\nNAME            READY   STATUS    RESTARTS   AGE   LABELS\ndev-nginx       1/1     Running   0          55s   env=dev\npreprod-nginx   1/1     Running   0          55s   env=preprod\nprod-nginx      0/1     Pending   0          55s   env=prod\n```\n\nThe diagram below shows exactly how it works with the help of an exampl\n\n![class](./priority.png)\n\n## Inter-pod Anti-affinity\n\nInter-pod affinity and anti-affinity allow you to constrain which nodes your Pods can be scheduled on based on the labels of Pods already running on that node, instead of the node labels. Inter-pod affinity and anti-affinity rules take the form \"this Pod should (or, in the case of anti-affinity, should not) run in an X if that X is already running one or more Pods that meet rule Y\", where X is a topology domain like node, rack, cloud provider zone or region, or similar and Y is the rule Kubernetes tries to satisfy.\n\nYou express these rules (Y) as [label selectors](https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selector) with an optional associated list of namespaces. Pods are namespaced objects in Kubernetes, so Pod labels also implicitly have namespaces. Any label selectors for Pod labels should specify the namespaces in which Kubernetes should look for those labels. You express the topology domain (X) using a `topologyKey`, which is the key for the node label that the system uses to denote the domain.\n\nHere's what the pod spec looks like:\n\n```yaml\nspec:\n    affinity:\n        podAntiAffinity:\n            requiredDuringSchedulingIgnoredDuringExecution:\n            - labelSelector:\n                    matchExpressions:\n                    - key: app\n                        operator: In\n                        values:\n                        - web\n                topologyKey: kubernetes.io/hostname\n            preferredDuringSchedulingIgnoredDuringExecution:\n            - weight: 100\n                podAffinityTerm:\n                    labelSelector:\n                        matchExpressions:\n                        - key: app\n                            operator: In\n                            values:\n                            - backend\n                    topologyKey: kubernetes.io/hostname\n```\n\nLet's dive into the inter-pod anti-affinity structure:\n\n- **requiredDuringSchedulingIgnoredDuringExecution**: It means that conditions must be satisfied to pod be scheduled (hard requirement).\n- **preferredDuringSchedulingIgnoredDuringExecution**: If a condition can be satisfied, it will be satisfied. But if not, it will be ignored (soft requirement).\n- **podAffinityTerm**: The pod affinity term defines which pods we select with a label selector and which node topology key we target.\n\nA soft requirement has `podAffinityTerm` as separate property with an additional weight parameter that defines which term is more important. A hard requirement has an affinity term as a root list item object. For the hard affinity rule, all affinity terms and all expressions should be satisfied for the pod to be scheduled.\n\n## Wrap Up\n\nIn this blog post, we explore the lesser-known features of Kubernetes that play an important role in keeping Kubernetes clusters running smoothly. We discuss **Pod Topology Spread Constraints**, **pod-deletion-cost**, **maxUnavailable**, **Pod Disruption Budgets**, and **PriorityClasses**. These features help ensure high availability and reliability in Kubernetes clusters, making them essential for managing Kubernetes workloads effectively.\n\n![hat](./hat.png)\n\n<br>\n\n**_Until next time, つづく 🎉_**\n\n> 💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  **_Until next time 🎉_**\n\n🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**♻️ LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**♻️ X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ✌🏻**\n\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n\n**📅 Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordcount":1512}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://seifrajhi.github.io/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://seifrajhi.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Unsung Kubernetes Features that Keep Kubernetes Clusters Reliable and Resilient","item":"https://seifrajhi.github.io/blog/unsung-kubernetes-features-reliable-resilient/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=47ae28bb567c9025f1fee24afb2d20c9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-LLPCCGNLH7', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LLPCCGNLH7"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LLPCCGNLH7', {"anonymize_ip":true,"send_page_view":false});gtag('config', 'GTM-5V895PDS', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seifrajhi.github.io/blog/unsung-kubernetes-features-reliable-resilient/" data-baseprotocol="https:" data-basehost="seifrajhi.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;174&#x27;%20width=&#x27;150&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture><noscript><picture><source type="image/avif" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Saifeddine <br/> Rajhi</a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="My public talks" href="/talks/">talks</a></li><li><a title="Review My Resume" href="/cv/platform-engineer/">cv</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:55.125%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;object-fit:fill;object-position:center" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcElEQVR42kWSyW7TUBSG84as2PEESGyQkFAlXqAs2bBiw7BALCqoShmqFhBVaRUStWmmJk5i+3q4HmLHjjN0+DhOqrL4da+P5O+c/z+30vImnKuYrpcwTidMpzlpmhCGIUGgiUKPcazvFEf++h5pknEg9wDXMen1OiRJQqXhpAyUTavdoFY7oXFWo9M+46LbxPcUeZGS3aqYS0NROk1JRGmesljmxEmArYYE2qeix+mqkCauwKoCOyXPQvkOSSKPpqN5ddjle8vi3An5caH43DD5dDrkoKuoWT7bDYthEJPEEZU8y/B9V+x5hNIhCrXcfbTvrWrczEiLjN89xZ+BS10AR32H6sijoTQ10+fyasZyWXI8Aea55CWZjMNVHuUZhb5k0l0BS0vZPOfIcDkWYMsJ+HsLK6FnymdxOaWYpcIJqKSp5CGWA22jlMFo2CWKHIF7kovNt5bJx5U9mxMB7on140EJ0uw0Rux3bPbaFvWRIwMIMBPLgXZlsnKD642W2wtlOi31+SIXFXdaLKYspVZqPs+YzzKuZMJpkaxeRaUoihVZa3kiUUgo0n6ZoZaJLZTdRntd2XhHzg6e08Nyh5jaxCrlj7C9EcoyxHKytux75Y8GRr+NbfVlOsXlcioNfDxzE9d4hGM8QRkPCdVrtoIOm+YBL5xDNu2fbMcNlsVEhqhSmUwmxLEEO0+Y5hGzYix2Uq6vZzjyYB1jg279Pu36A5rVe+jRSz5kfTYGuzz+9YanFzts5X2uFjeo4fM1UGtPcvu/5VjOKApWlu3hFoHzDu28J3Tf4lr7HLl9vuomX+0zvvjnnLg7RO4ugfWMf2YwJFyxIT1HAAAAAElFTkSuQmCC" alt=""/><picture><source type="image/webp" data-srcset="/static/09e20fec65f88b9bfdec8ebe1d3285dc/4ff4a/unsung-k8s.webp 750w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/0220e/unsung-k8s.webp 1080w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/2da9e/unsung-k8s.webp 1366w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/50456/unsung-k8s.webp 1600w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/09e20fec65f88b9bfdec8ebe1d3285dc/40ae5/unsung-k8s.png" data-srcset="/static/09e20fec65f88b9bfdec8ebe1d3285dc/dc458/unsung-k8s.png 750w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/46f54/unsung-k8s.png 1080w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/58134/unsung-k8s.png 1366w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/40ae5/unsung-k8s.png 1600w" alt="Unsung Kubernetes Features that Keep Kubernetes Clusters Reliable and Resilient"/></picture><noscript><picture><source type="image/webp" srcSet="/static/09e20fec65f88b9bfdec8ebe1d3285dc/4ff4a/unsung-k8s.webp 750w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/0220e/unsung-k8s.webp 1080w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/2da9e/unsung-k8s.webp 1366w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/50456/unsung-k8s.webp 1600w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/09e20fec65f88b9bfdec8ebe1d3285dc/40ae5/unsung-k8s.png" srcSet="/static/09e20fec65f88b9bfdec8ebe1d3285dc/dc458/unsung-k8s.png 750w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/46f54/unsung-k8s.png 1080w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/58134/unsung-k8s.png 1366w,/static/09e20fec65f88b9bfdec8ebe1d3285dc/40ae5/unsung-k8s.png 1600w" alt="Unsung Kubernetes Features that Keep Kubernetes Clusters Reliable and Resilient"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption data-nosnippet="" class="image-title">Photo by Saifeddine Rajhi</figcaption></figure><h1>Unsung Kubernetes Features that Keep Kubernetes Clusters Reliable and Resilient</h1><div data-nosnippet="" class="blog-details"><time class="blog-createdat" dateTime="2024-10-24">Oct 24, 2024</time><span> • </span><span class="blog-time2read">8<!-- -->mins<!-- --> read</span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul data-nosnippet="" class="blog-tags"><li>Kubernetes</li><li>High Availability</li><li>Resilience</li><li>Kubernetes Features</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div data-nosnippet="" class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><ul class="toc-list"></ul></ul></div><div class="content blog-content"><blockquote>
<p><strong>Explore the lesser-known features that keep Kubernetes high available</strong></p>
</blockquote>
<h2 id="️-introduction" style="position:relative;"><a href="#%EF%B8%8F-introduction" aria-label="️ introduction permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>⭐️ Introduction</h2>
<p>Ensuring high availability and reliability in Kubernetes clusters can be a challenge. While some features like Deployments and Services are well-known for their ability to maintain availability, there are several lesser-known features that play an important role in keeping Kubernetes clusters running smoothly. In this article, we'll talk about some of these unsung heroes, including <strong>Pod Topology Spread Constraints</strong>, <strong>pod-deletion-cost</strong>, <strong>maxUnavailable</strong>, <strong>Pod Disruption Budgets</strong>, <strong>PriorityClasses</strong>, and <strong>Pod Anti-Affinity</strong>.</p>
<h2 id="pod-topology-spread-constraints" style="position:relative;"><a href="#pod-topology-spread-constraints" aria-label="pod topology spread constraints permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pod Topology Spread Constraints</h2>
<p>Pod Topology Spread Constraints in Kubernetes allow for fine-grained control over the distribution of pods across failure domains, such as regions and zones, to achieve high availability and efficient resource utilization. These constraints use labels to enforce specific distribution patterns, ensuring that workloads are evenly distributed and separated by topology. By preventing single points of failure, they enhance fault-tolerance, improve performance, and optimize resource utilization.</p>
<p>For example, the <code class="language-text">maxSkew</code> parameter defines the degree to which pods may be unevenly distributed, while the <code class="language-text">minDomains</code> parameter forces spreading pods over a minimum number of domains. These constraints complement other Kubernetes scheduling policies, such as Pod affinity/anti-affinity, Node Selector, Node Affinity, and Node Taints, and are an important asset in deploying and running efficient and highly available workloads in complex, distributed environments.</p>
<p>Here's an example of a pod topology spread constraint:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>pod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">topologySpreadConstraints</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">maxSkew</span><span class="token punctuation">:</span> &lt;integer<span class="token punctuation">></span>
            <span class="token key atrule">minDomains</span><span class="token punctuation">:</span> &lt;integer<span class="token punctuation">></span> <span class="token comment"># optional</span>
            <span class="token key atrule">topologyKey</span><span class="token punctuation">:</span> &lt;string<span class="token punctuation">></span>
            <span class="token key atrule">whenUnsatisfiable</span><span class="token punctuation">:</span> &lt;string<span class="token punctuation">></span>
            <span class="token key atrule">labelSelector</span><span class="token punctuation">:</span> &lt;object<span class="token punctuation">></span>
            <span class="token key atrule">matchLabelKeys</span><span class="token punctuation">:</span> &lt;list<span class="token punctuation">></span> <span class="token comment"># optional</span>
            <span class="token key atrule">nodeAffinityPolicy</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Honor<span class="token punctuation">|</span>Ignore<span class="token punctuation">]</span> <span class="token comment"># optional</span>
            <span class="token key atrule">nodeTaintsPolicy</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Honor<span class="token punctuation">|</span>Ignore<span class="token punctuation">]</span> <span class="token comment"># optional</span></code></pre></div>
<p>You can find a full explanation of each element in the <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/#spread-constraint-definition" target="_blank" rel="noopener noreferrer">Kubernetes documentation</a>. For now, let's just briefly outline the obligatory fields:</p>
<ul>
<li><strong>maxSkew</strong>: The degree to which your Pods can be distributed unevenly across all zones. Its value must be more than zero.</li>
<li><strong>topologyKey</strong>: The key of node labels. Nodes with the same label and values belong to the same topology. Each topology instance is a domain to which the scheduler tries to assign a balanced number of pods.</li>
<li><strong>whenUnsatisfiable</strong>: Lets you decide what to do with a Pod when it doesn't satisfy your spread constraint:
<ol>
<li><code class="language-text">DoNotSchedule</code> instructs the scheduler not to schedule it.</li>
<li><code class="language-text">ScheduleAnyway</code> tells the scheduler to schedule it and prioritize the nodes minimizing the skew.</li>
</ol>
</li>
<li><strong>labelSelector</strong>: Allows finding matching Pods. The number of Pods in their corresponding topology domain is based on the Pods matching the label selector.</li>
</ul>
<h2 id="pod-deletion-cost" style="position:relative;"><a href="#pod-deletion-cost" aria-label="pod deletion cost permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pod Deletion Cost</h2>
<p>Pod deletion cost is an annotation in Kubernetes that allows users to set a preference regarding which pods to remove first when downscaling a ReplicaSet. By using the <code class="language-text">controller.kubernetes.io/pod-deletion-cost</code> annotation, users can influence the order in which pods are deleted. The annotation should be set on the pod, and the range is <code class="language-text">[-2147483648, 2147483647]</code>.</p>
<p>It represents the cost of deleting a pod compared to other pods belonging to the same ReplicaSet. Pods with lower deletion cost are preferred to be deleted before pods with higher deletion costs. If the annotation is not specified, the implicit value is 0.</p>
<p>This feature is useful for influencing the downscaling order of pods and can be particularly beneficial in scenarios where specific pods need to be retained for longer periods during downscaling. The annotation interacts with the ReplicaSet controller to determine the order of pod deletion based on the set deletion cost values. It provides a way to customize the pod deletion behavior, ensuring that pods are removed in the desired order when downscaling a ReplicaSet.</p>
<p>Here's an example of a YAML manifest for a Kubernetes Pod with the <code class="language-text">controller.kubernetes.io/pod-deletion-cost</code> annotation:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>pod
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> example
    <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
        <span class="token key atrule">controller.kubernetes.io/pod-deletion-cost</span><span class="token punctuation">:</span> <span class="token string">"100"</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span></code></pre></div>
<p>In this example, we have a Pod named "example-pod" with the label "app: example" running an Nginx container. The <code class="language-text">controller.kubernetes.io/pod-deletion-cost</code> annotation is set to "100" to indicate the deletion cost for this Pod. When scaling down, Pods with lower deletion costs will be preferred for deletion first.</p>
<h2 id="maxunavailable-parameter" style="position:relative;"><a href="#maxunavailable-parameter" aria-label="maxunavailable parameter permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>maxUnavailable Parameter</h2>
<p><code class="language-text">maxUnavailable</code> is a parameter in Kubernetes that specifies the maximum number of pods that can be unavailable during a rolling update. It is used in conjunction with the <code class="language-text">maxSurge</code> parameter, which specifies the maximum number of new pods that can be created at a time. Together, these parameters control the rate at which pods are updated during a rolling update.</p>
<p>Here's an example of how to use <code class="language-text">maxUnavailable</code> in a Kubernetes Deployment:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>deployment
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">selector</span><span class="token punctuation">:</span>
        <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
            <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>app
    <span class="token key atrule">template</span><span class="token punctuation">:</span>
        <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
            <span class="token key atrule">labels</span><span class="token punctuation">:</span>
                <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>app
        <span class="token key atrule">spec</span><span class="token punctuation">:</span>
            <span class="token key atrule">containers</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>container
                <span class="token key atrule">image</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>image
                <span class="token key atrule">ports</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> RollingUpdate
        <span class="token key atrule">rollingUpdate</span><span class="token punctuation">:</span>
            <span class="token key atrule">maxSurge</span><span class="token punctuation">:</span> <span class="token number">1</span>
            <span class="token key atrule">maxUnavailable</span><span class="token punctuation">:</span> <span class="token number">0</span></code></pre></div>
<p>In this example, the <code class="language-text">maxSurge</code> is set to 1, which means that only one new pod can be created at a time. The <code class="language-text">maxUnavailable</code> is set to 0, which means that no old pods can be deleted at a time.</p>
<p>Keep in mind that <code class="language-text">maxUnavailable</code> can only be used to control the eviction of pods that have an associated controller managing them. In the case of a Deployment, this means that the controller is the ReplicaSet. If you want to control the eviction of pods in a StatefulSet, you can use the <code class="language-text">maxUnavailable</code> parameter in the StatefulSet's rolling update strategy.</p>
<h2 id="pod-disruption-budgets-pdb" style="position:relative;"><a href="#pod-disruption-budgets-pdb" aria-label="pod disruption budgets pdb permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pod Disruption Budgets (PDB)</h2>
<p>PDBs are a Kubernetes feature that allows users to declare the minimum or maximum number of unavailable pods for an application during disruptions. PDBs help ensure the high availability of applications by setting constraints on the number of pods that can be disrupted at a time. Disruptions can be voluntary, such as maintenance operations or node scaling, or involuntary, such as hardware failures or system crashes.</p>
<h3 id="three-steps-to-creating-a-pdb" style="position:relative;"><a href="#three-steps-to-creating-a-pdb" aria-label="three steps to creating a pdb permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Three Steps to Creating a PDB:</h3>
<ol>
<li>
<p><strong>Determine the Minimum Number of Instances</strong>: Assess your application's needs and identify the minimum number of instances (<code class="language-text">minAvailable</code>) that must be operational during disruptions.</p>
</li>
<li>
<p><strong>Create a YAML File</strong>: Use a text editor to create a YAML file that specifies the PDB object. Here's an example YAML file:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"> ```yaml
 apiVersion: policy/v1
 kind: PodDisruptionBudget
 metadata:
     name: my-pdb
 spec:
     minAvailable: 2
     selector:
         matchLabels:
             app: my-app
 ```

 In this example, the `minAvailable` field is set to 2, indicating that at least two instances of the specified pods should be available at any given time. The `selector` field identifies the target pods based on the label selector `app: my-app`.</code></pre></div>
</li>
<li>
<p><strong>Apply the YAML File</strong>: Use the <code class="language-text">kubectl apply</code> command to apply the YAML file and create the PDB within your Kubernetes cluster:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"> ```sh
 kubectl apply -f pdb.yaml
 ```</code></pre></div>
</li>
</ol>
<h2 id="kubernetes-pod-priority--preemption" style="position:relative;"><a href="#kubernetes-pod-priority--preemption" aria-label="kubernetes pod priority  preemption permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Kubernetes Pod Priority &#x26; Preemption</h2>
<p><code class="language-text">PriorityClass</code> is a cluster-wide API object in Kubernetes and part of the <code class="language-text">scheduling.k8s.io/v1</code> API group. It contains a mapping of the <code class="language-text">PriorityClass</code> name (defined in <code class="language-text">.metadata.name</code>) and an integer value (defined in <code class="language-text">.value</code>). This represents the value that the scheduler uses to determine Pod's relative priority.</p>
<p><a href="https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/#preemption" target="_blank" rel="noopener noreferrer">Pod preemption</a> is a Kubernetes feature that allows the cluster to preempt pods (removing an existing Pod in favor of a new Pod) on the basis of priority. <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/#pod-priority" target="_blank" rel="noopener noreferrer">Pod priority</a> indicates the importance of a pod relative to other pods while scheduling. If there aren't enough resources to run all the current pods, the scheduler tries to evict lower-priority pods over high-priority ones.</p>
<p>Here's an example. Next, create some environment-specific <code class="language-text">PriorityClasses</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> scheduling.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PriorityClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dev<span class="token punctuation">-</span>pc
<span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token number">1000000</span>
<span class="token key atrule">globalDefault</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token punctuation">-</span>
    (Optional) This priority class should only be used for all development pods.
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> scheduling.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PriorityClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> preprod<span class="token punctuation">-</span>pc
<span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token number">2000000</span>
<span class="token key atrule">globalDefault</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token punctuation">-</span>
    (Optional) This priority class should only be used for all preprod pods.
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> scheduling.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PriorityClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> prod<span class="token punctuation">-</span>pc
<span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token number">4000000</span>
<span class="token key atrule">globalDefault</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token punctuation">-</span>
    (Optional) This priority class should only be used for all prod pods.</code></pre></div>
<p>Use <code class="language-text">kubectl create -f &lt;FILE.YAML></code> command to create a pc and <code class="language-text">kubectl get pc</code> to check its status.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ kubectl get pc
NAME                      VALUE        GLOBAL-DEFAULT   AGE
dev-pc                    <span class="token number">1000000</span>      <span class="token boolean">false</span>            3m13s
preprod-pc                <span class="token number">2000000</span>      <span class="token boolean">false</span>            2m3s
prod-pc                   <span class="token number">4000000</span>      <span class="token boolean">false</span>            7s
system-cluster-critical   <span class="token number">2000000000</span>   <span class="token boolean">false</span>            82m
system-node-critical      <span class="token number">2000001000</span>   <span class="token boolean">false</span>            82m</code></pre></div>
<p>Now, let's say there are 3 application pods: one for prod, one for preprod, and one for development. Below are three sample YAML manifest files for each of those.</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token comment"># development</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dev<span class="token punctuation">-</span>nginx
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span> dev
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> dev<span class="token punctuation">-</span>nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">priorityClassName</span><span class="token punctuation">:</span> dev<span class="token punctuation">-</span>pc
<span class="token punctuation">---</span>
<span class="token comment"># preproduction</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> preprod<span class="token punctuation">-</span>nginx
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span> preprod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> preprod<span class="token punctuation">-</span>nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">priorityClassName</span><span class="token punctuation">:</span> preprod<span class="token punctuation">-</span>pc
<span class="token punctuation">---</span>
<span class="token comment"># production</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> prod<span class="token punctuation">-</span>nginx
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span> prod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> prod<span class="token punctuation">-</span>nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">priorityClassName</span><span class="token punctuation">:</span> prod<span class="token punctuation">-</span>pc</code></pre></div>
<p>You can create these pods with the <code class="language-text">kubectl create -f &lt;FILE.yaml></code> command, and then check their status using the <code class="language-text">kubectl get pods</code> command. You can see if they are up and look ready to serve traffic:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ kubectl get pods --show-labels
NAME            READY   STATUS    RESTARTS   AGE   LABELS
dev-nginx       <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55s   <span class="token assign-left variable">env</span><span class="token operator">=</span>dev
preprod-nginx   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55s   <span class="token assign-left variable">env</span><span class="token operator">=</span>preprod
prod-nginx      <span class="token number">0</span>/1     Pending   <span class="token number">0</span>          55s   <span class="token assign-left variable">env</span><span class="token operator">=</span>prod</code></pre></div>
<p>The diagram below shows exactly how it works with the help of an exampl</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 124.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJElEQVR42qVV2a7aMBTM//9SvwCpqni4LIKkbAlLbsKSAiHOMs2c6hQD6b1ua+koYOI545mx8fAfo24aoCnx5e2KaF9wBl7Xiw1fdBjX6xWr1QrTYIEgmGG/33cDug5jDA6HA6IwbIGXOB6Pd0CyyrJMOsZxjDzP70wfH9BpAnJNkiSy5nK53AH542azQb/fx2AwkG5VVT1KYZWSsOXh59+AXEwNJpMJZrOZdCvLsi2DvCikIatgtd+fm+l42DIBqAm3wQXGFMhvBl+jCvNDjW/tM0hrTJIaTWXQ5d2HptR1LWz8KMVqm+DNDzH+HiEIY9RViQYOgAQhO7tMkSM7HfEeb5C873D5kf2RhKeG0FXW7XaT77/0KwVQm3D+s+FRO5rQ6/UwHA7FDHso6Ha7xXw+x+l0kqYfmsLE73Y7MYOfNQpkRtZczHwyTgRkE4LCRUPdLoG5WJtwTnPHRpxjo+dj6tkBZRGQC8L2OE2nU5FjsViI2/ruer0WeTj/rGsnQ3vLZGZfGHySmZr2wpCLzuezbI2GKEOeGp5PVpqmTg4LIMHG47FsgdujCewcRRFGo5EYwe1z3uVqk9jQMbKjTuqqRsbWzolhl4Z2mFVD1/ECqGKTaRAEIoeG3YWlp1eXGsPsMWME9H1ftOVvfwVIAM0WjxcB9Dpzdfcl2Bof3bIyV3f/WUMOarZcLqV4GliUwik2XX+fjBH/eHjDUAoGW3X8jOFP7KWldxv1d1UAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="class" title="" src="/static/7ac02e7be6040d03a013650befced831/c5bb3/priority.png" srcset="/static/7ac02e7be6040d03a013650befced831/04472/priority.png 170w,
/static/7ac02e7be6040d03a013650befced831/9f933/priority.png 340w,
/static/7ac02e7be6040d03a013650befced831/c5bb3/priority.png 680w,
/static/7ac02e7be6040d03a013650befced831/b12f7/priority.png 1020w,
/static/7ac02e7be6040d03a013650befced831/1be7e/priority.png 1059w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h2 id="inter-pod-anti-affinity" style="position:relative;"><a href="#inter-pod-anti-affinity" aria-label="inter pod anti affinity permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Inter-pod Anti-affinity</h2>
<p>Inter-pod affinity and anti-affinity allow you to constrain which nodes your Pods can be scheduled on based on the labels of Pods already running on that node, instead of the node labels. Inter-pod affinity and anti-affinity rules take the form "this Pod should (or, in the case of anti-affinity, should not) run in an X if that X is already running one or more Pods that meet rule Y", where X is a topology domain like node, rack, cloud provider zone or region, or similar and Y is the rule Kubernetes tries to satisfy.</p>
<p>You express these rules (Y) as <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selector" target="_blank" rel="noopener noreferrer">label selectors</a> with an optional associated list of namespaces. Pods are namespaced objects in Kubernetes, so Pod labels also implicitly have namespaces. Any label selectors for Pod labels should specify the namespaces in which Kubernetes should look for those labels. You express the topology domain (X) using a <code class="language-text">topologyKey</code>, which is the key for the node label that the system uses to denote the domain.</p>
<p>Here's what the pod spec looks like:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">affinity</span><span class="token punctuation">:</span>
        <span class="token key atrule">podAntiAffinity</span><span class="token punctuation">:</span>
            <span class="token key atrule">requiredDuringSchedulingIgnoredDuringExecution</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">labelSelector</span><span class="token punctuation">:</span>
                    <span class="token key atrule">matchExpressions</span><span class="token punctuation">:</span>
                    <span class="token punctuation">-</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> app
                        <span class="token key atrule">operator</span><span class="token punctuation">:</span> In
                        <span class="token key atrule">values</span><span class="token punctuation">:</span>
                        <span class="token punctuation">-</span> web
                <span class="token key atrule">topologyKey</span><span class="token punctuation">:</span> kubernetes.io/hostname
            <span class="token key atrule">preferredDuringSchedulingIgnoredDuringExecution</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">100</span>
                <span class="token key atrule">podAffinityTerm</span><span class="token punctuation">:</span>
                    <span class="token key atrule">labelSelector</span><span class="token punctuation">:</span>
                        <span class="token key atrule">matchExpressions</span><span class="token punctuation">:</span>
                        <span class="token punctuation">-</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> app
                            <span class="token key atrule">operator</span><span class="token punctuation">:</span> In
                            <span class="token key atrule">values</span><span class="token punctuation">:</span>
                            <span class="token punctuation">-</span> backend
                    <span class="token key atrule">topologyKey</span><span class="token punctuation">:</span> kubernetes.io/hostname</code></pre></div>
<p>Let's dive into the inter-pod anti-affinity structure:</p>
<ul>
<li><strong>requiredDuringSchedulingIgnoredDuringExecution</strong>: It means that conditions must be satisfied to pod be scheduled (hard requirement).</li>
<li><strong>preferredDuringSchedulingIgnoredDuringExecution</strong>: If a condition can be satisfied, it will be satisfied. But if not, it will be ignored (soft requirement).</li>
<li><strong>podAffinityTerm</strong>: The pod affinity term defines which pods we select with a label selector and which node topology key we target.</li>
</ul>
<p>A soft requirement has <code class="language-text">podAffinityTerm</code> as separate property with an additional weight parameter that defines which term is more important. A hard requirement has an affinity term as a root list item object. For the hard affinity rule, all affinity terms and all expressions should be satisfied for the pod to be scheduled.</p>
<h2 id="wrap-up" style="position:relative;"><a href="#wrap-up" aria-label="wrap up permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Wrap Up</h2>
<p>In this blog post, we explore the lesser-known features of Kubernetes that play an important role in keeping Kubernetes clusters running smoothly. We discuss <strong>Pod Topology Spread Constraints</strong>, <strong>pod-deletion-cost</strong>, <strong>maxUnavailable</strong>, <strong>Pod Disruption Budgets</strong>, and <strong>PriorityClasses</strong>. These features help ensure high availability and reliability in Kubernetes clusters, making them essential for managing Kubernetes workloads effectively.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 64px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD+0lEQVR42pWUe0xbVRzHr8xFjSZq4jvqMP6jJuomzmWaadLSAJVSHi33thRaYDE6E6dZfERdcJmLmpjpXJy4wAzb4ubiBmMMdI+IuAqMx3gPCqV0ZStEvL23lD5u77lfzy2rDtkm/pKbe3PPOZ/zPb/v73cY5l8BMDeob/+mtffw2zRPLRyrSEFFRQrzX4FD5mWJyZdhng2r74v8lNsWOmOKBo8aDoRrsljv288/kNwwOe/6UGZ+0i8Mc2O43tCAyRJIo0Xy3IAN8V4LJKdpau5w9m7fO889eOVJrhqBvZnl4jHDKeG44dfQsRwnGeCI4tkgY6xMjgxy8amzHIm4bAT+UlDlHV7rk3deExqo1phwjgWZsClSUy7IyQJgokiG+3UC3xYFY8VybJAl/rZCEh6yRuGxQ9yX+WYyVYuBB/XbMFoEscMc5XdqZf4rrRxtKVDgoYq8mxXF9zEw/iqJDllJsNcSh8+OuQbj/qRJi4BClY6Te1iI/Zws1BrA79CC36VDpDlfwXgxhW4kZHyTApedwGWV4HMg3JhbOw+kZl429G/g9EtP3BY6YRyWXFYIfSwR6lVoOvid6QgdzVHkfjOB20IfqnjMJmHSjsjxnL3XVKhGsFpninUUIjhokcU+ThEajQhQlfx2LQK7MzBXb4TUZiZkyCLBVYzggazN6rrP0+6/60KjYQffz1UuKNZELvdlbsWgBbPUVbGfJWKrCTS/CaX8dk0iFYFKnUxq9PStqVHXVHOPvYV2DtJUqTTUlP3MYuj+jE9IN4vIsIWIAxTcxypiSwGEw9kI7MnAn1+nKwLdZI7+Q5V2lf3pu1/wV+qA6TL4u9iPFhR1Ejrzjc4xezpvRnWeqlWEAU5OKO4uVIIdZog9hdRtFkJzftfp73Vfurau4zFSgvCYrWtRpyTryv/umlTh0MtVoZb8EEaKEBu2KhSOAAXxPSwJn6d1OlUGBNYT2ppypC4HcU8J2uuynl3cghX/9PTMpy8+Lvyg/0w4YTw/eyY/1n0kKx4bVd0uRv8eba2zTv8zZtYjcipfwkUHLnVy9qv3dQWTcmVJIC1tufP91RnuphzRXas/4v1iHUtPcwtzM/OwuznvglqbuFgKf7f1jetfGBTc+e0ry9Vvo3HFSokeKzpWtDE57nA8+tClVpMPXjsw6cD0OauDWUIklN57+02PTLabQmTU1utpycs8W5e5yttqasV0OTBqixN3MfpOZq9dCpCWFRI5bfpOcxCx10B8dinussWpMgUjtqgKpS530inLlgicNyk19Y4VbbVZv2OiRK09hfjLFPxRDmpUZMKZp2H+ZyTvvlt3bVlT8NuPGR+21+s/6G7Uv9feoF+Z3PgvxVKytrrXF2AAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="hat" title="" src="/static/3f09f9fba9b337c48fbfa766a63fec33/6b377/hat.png" srcset="/static/3f09f9fba9b337c48fbfa766a63fec33/6b377/hat.png 64w" sizes="(max-width: 64px) 100vw, 64px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<br>
<p><strong><em>Until next time, つづく 🎉</em></strong></p>
<blockquote>
<p>💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  <strong><em>Until next time 🎉</em></strong></p>
</blockquote>
<p>🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>
<p><strong>♻️ LinkedIn:</strong> <a href="https://www.linkedin.com/in/rajhi-saif/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/rajhi-saif/</a></p>
<p><strong>♻️ X/Twitter:</strong> <a href="https://x.com/rajhisaifeddine" target="_blank" rel="noopener noreferrer">https://x.com/rajhisaifeddine</a></p>
<p><strong>The end ✌🏻</strong></p>
<h1 align="center">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>
<p><strong>📅 Stay updated</strong></p>
<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p></div></div><div id="content-end"></div></article><div data-nosnippet="" class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div><br/><br/><br/></main><aside class="blogpost-sidebar"><div data-nosnippet="" class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/sysdig-docker-scout-cloud-native-security/">Sysdig and Docker Forge Alliance to Accelerate Cloud-Native Security: Docker Scout🐳<!-- --> →</a><a rel="prev" class="prev-post" href="/blog/data-on-kubernetes-ai-ml-5/">← <!-- -->Data on Kubernetes: Part 5 - Making AI/ML simpler</a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer data-nosnippet=""><div class="footer-wrapper"><div data-nosnippet="" class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="linkedin" href="https://www.linkedin.com/in/rajhi-saif/" title="Saifeddine Rajhi on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="github" href="https://github.com/seifrajhi" title="Saifeddine Rajhi on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" eventCategory="social" eventAction="click" eventLabel="email" href="mailto:rajhiseif@gmail.com" title="Saifeddine Rajhi&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg><span>Email</span></a></li><li class="social-item social-bluesky"><a rel="me" itemProp="url" eventCategory="bluesky" eventAction="click" eventLabel="social" href="https://bsky.app/profile/saifrajhi.bsky.social" title="Saifeddine Rajhi on Bluesky Social" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bluesky" class="svg-inline--fa fa-bluesky fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"></path></svg><span>Bluesky Social</span></a></li><li class="social-item social-X/Twitter"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="X/Twitter" href="https://x.com/RajhiSaifeddine" title="Saifeddine Rajhi on X/Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg><span>X/Twitter</span></a></li><li class="social-item social-reddit"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="reddit" href="https://www.reddit.com/user/ScoreApprehensive992/" title="Saifeddine Rajhi on Reddit" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit-alien" class="svg-inline--fa fa-reddit-alien fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z"></path></svg><span>Reddit</span></a></li><li class="social-item social-stackoverflow"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://stackoverflow.com/users/21897244/saifeddine-rajhi" title="Saifeddine Rajhi on StackOverflow" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg><span>StackOverflow</span></a></li><li class="social-item social-Goodreads"><a rel="me" eventLabel="StackOverflow" href="https://www.goodreads.com/user/show/176103378-saifeddine" title="Saifeddine Rajhi on Goodreads" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="goodreads" class="svg-inline--fa fa-goodreads fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9 0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9 0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"></path></svg><span>Goodreads</span></a></li><li class="social-item social-osi"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://ossinsight.io/analyze/seifrajhi" title="Saifeddine Rajhi on OSSInsights" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="osi" class="svg-inline--fa fa-osi fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M8 266.44C10.3 130.64 105.4 34 221.8 18.34c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7q-26.7-69.45-53.4-139c-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8a71.47 71.47 0 0 0-64.5-82.2c-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4q-26.85 69.9-53.7 139.9c-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119-24.9-49.2-25.2-87.7-26.8-108.7zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3q22.35-58.65 45-117.3c1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6a91.64 91.64 0 0 1 45.2 90.4c-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6q22.8 58.8 45.2 117.7c1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161-13.7-117.5-119.4-214.8-255.5-198-106.1 13-195.3 102.5-197.1 225.8z"></path></svg><span>OSSInsights</span></a></li><li class="social-item social-devstats"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://devstats.cluster.fun/?user=seifrajhi" title="Saifeddine Rajhi on DevStats" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-line" class="svg-inline--fa fa-chart-line fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg><span>DevStats</span></a></li><li class="social-item social-RSS"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="RSS" href="https://seifrajhi.github.io/rss.xml" title="Subscribe to my blog post" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg><span>RSS</span></a></li></ul></div><div class="copyright">Saifeddine Rajhi © 1994 - <!-- -->2024<!-- --> <br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/saifrajhi">0C3B BABB 8BC1 EA2B</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/unsung-kubernetes-features-reliable-resilient/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-a5a85b91af04696ccdc4.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88fb5c28d68e831e730a.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-83bdb4e48c18bf191297.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-fa80ec1022aa33a49efa.js\"],\"component---src-pages-cv-platform-engineer-js\":[\"/component---src-pages-cv-platform-engineer-js-f8a094a4210d77300f3f.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-ea9268b02241eb42b7ab.js\"],\"component---src-pages-talks-js\":[\"/component---src-pages-talks-js-5e077ae5e3fe948f12d0.js\"],\"component---src-pages-thoughts-js\":[\"/component---src-pages-thoughts-js-1d43cbe28697ce8b330b.js\"],\"component---src-templates-blog-template-js\":[\"/component---src-templates-blog-template-js-36418f189bad33f744db.js\"],\"component---src-templates-talk-template-js\":[\"/component---src-templates-talk-template-js-7623845caf43043e0341.js\"],\"component---src-templates-thought-template-js\":[\"/component---src-templates-thought-template-js-4e873e19a182fe3c30b3.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="d7919ed1ee0af8f5afaa";</script><script src="/webpack-runtime-414dfe370faa8e694f9b.js" async></script><script src="/framework-c989293af61a95023f7f.js" async></script><script src="/app-a5a85b91af04696ccdc4.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>