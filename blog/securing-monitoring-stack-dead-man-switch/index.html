<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" property="og:description" content="How to enhance the security of your monitoring stack using a dead man switch, ensuring that your systems are always under watchful eyes."/><meta data-react-helmet="true" name="keywords" content="Monitoring &amp; Security,SRE,Dead Man Switch,Observability,Incident Response"/><meta data-react-helmet="true" name="author" content="@RajhiSaifeddine"/><meta data-react-helmet="true" property="og:title" content="Never Get Caught Blind: Securing Your Monitoring Stack with a Dead Man Switch üëÄ - Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@RajhiSaifeddine"/><meta data-react-helmet="true" name="twitter:title" content="Never Get Caught Blind: Securing Your Monitoring Stack with a Dead Man Switch üëÄ - Blog"/><meta data-react-helmet="true" name="twitter:description" content="How to enhance the security of your monitoring stack using a dead man switch, ensuring that your systems are always under watchful eyes."/><meta data-react-helmet="true" name="image" property="og:image" content="https://seifrajhi.github.io/static/bd2e4367c6d3b74929af61251ddc5cd6/7284f/switch-cover.jpg"/><meta data-react-helmet="true" name="twitter:image" content="https://seifrajhi.github.io/static/bd2e4367c6d3b74929af61251ddc5cd6/7284f/switch-cover.jpg"/><meta data-react-helmet="true" property="og:url" content="https://seifrajhi.github.io/blog/securing-monitoring-stack-dead-man-switch/"/><meta name="theme-color" content="#ffffff"/><link rel="stylesheet" href="/styles.19780313cdbeec1e4ef5.css"/><link rel="stylesheet"/><link rel="alternate" type="application/rss+xml" title="Saifeddine Rajhi&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">Never Get Caught Blind: Securing Your Monitoring Stack with a Dead Man Switch üëÄ - Blog by Saifeddine Rajhi</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/bd2e4367c6d3b74929af61251ddc5cd6/7284f/switch-cover.jpg","headline":"Never Get Caught Blind: Securing Your Monitoring Stack with a Dead Man Switch üëÄ","dateCreated":"2024-10-27","datePublished":"2024-10-27","dateModified":"2024-10-27","inLanguage":"en-US","isFamilyFriendly":true,"isAccessibleForFree":true,"author":{"@type":"Person","name":"Saifeddine Rajhi","url":"https://seifrajhi.github.io"},"publisher":{"@type":"Organization","name":"Saifeddine Rajhi's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seifrajhi.github.io/blog/securing-monitoring-stack-dead-man-switch/"},"keywords":["Monitoring & Security","SRE","Dead Man Switch","Observability","Incident Response"],"genre":["Platform engineer","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\n> **Who Watches the Watchers and the Monitoring Stack? üëÆ**\n\n## üí¨ Introduction\n\nNowadays, monitoring systems play an important role in ensuring the smooth operation of critical infrastructure.\n\nHowever, what happens when the monitoring system itself falters? This is where the concept of a [dead man switch](https://deadmanssnitch.com/) comes into play.\n\nA dead man switch, in the context of monitoring, serves as an independent watchdog, tasked with keeping an eye on the monitoring system. If the monitoring system fails to provide [regular heartbeats](https://en.wikipedia.org/wiki/Heartbeat_(computing)) to the dead man switch, it triggers an alarm, alerting operators to a potential problem.\n\n## ü•Ö Objectives\n\nThis blog post is a deep dive into the implementation of a dead man switch for [Prometheus](https://prometheus.io/), a widely used monitoring tool. We'll explore the tools and techniques involved in setting up this guardian of the guardians, ensuring that our monitoring system remains vigilant and reliable.\n\nBy the end of this post, you'll have a clear understanding of how a dead man switch can safeguard your monitoring system and prevent blind spots in your infrastructure.\n\n![dms](./dms.png)\n\n## üìò Dead Man's Switch\n\nA monitoring system can be very simple, like a ping to a server IP, or it can be as complex as monitoring every component in a distributed system to ensure everything is working as expected. No matter how sophisticated the monitoring system is, we rely on them to ensure that our main system is in a healthy state. But what happens when your monitoring system fails? How do you know that your monitoring system is healthy?\n\nA frequent question I get asked when working with our DevOps teams is:\n\n> **Who is monitoring the monitoring system to make sure it's working?**\n\n![alt text](image.png)\n\nWe can borrow a concept from the physical engineering world: the [dead man's switch](https://en.wikipedia.org/wiki/Dead_man's_switch).\n\nThe idea revolves around ensuring that we can receive a signal to trigger an alarm at any unpredictable moment. To achieve this, we can flip the logic: instead of relying on a signal to activate the alarm, we can set it up so that the alarm goes off when we **do not** receive a signal. This approach is quite straightforward! This principle, often referred to as a [¬´heartbeat¬ª](https://en.wikipedia.org/wiki/Heartbeat_(computing)), is used in various applications, including clustering, and is also employed in military contexts.\n\nIn this scenario, if the operator (like Prometheus) goes offline or malfunctions, it will stop sending its \"OK\" response, which will then trigger an alert.\n\n![alt text](image-1.png)\n\n## üèó Why Do We Need It\n\nYour monitoring solution is your bread and butter for knowing when you have issues with your infrastructure. But what happens if it has issues? Unless you are monitoring your system health dashboards 24/7, you will want to have some notification configured to let you know if your monitoring solution itself is experiencing issues.\n\nTo do this, we'll want to create a rule that always triggers in Prometheus (think if `False == True`).\n\n### Integrations\n\nIntegrations help bring alerts from Dead Man's Snitch into the systems and services your team uses.\n\nSupported Integrations:\n\n* [Microsoft Teams](https://deadmanssnitch.com/docs/integrations/teams)\n* [Opsgenie](https://deadmanssnitch.com/docs/integrations/opsgenie)\n* [PagerDuty](https://deadmanssnitch.com/docs/integrations/pagerduty)\n* [Slack](https://deadmanssnitch.com/docs/integrations/slack)\n* [VictorOps](https://deadmanssnitch.com/docs/integrations/victor-ops)\n* [Webhooks](https://deadmanssnitch.com/docs/integrations/webhooks)\n\n## Hands-On\n\nTo transform the concept of a dead man's switch into the Prometheus world, we need to:\n\n1. **Create a Prometheus alert** that will fire regularly, like the train conductor pushing the button.\n2. **Configure the Alertmanager** to send to another system outside our primary monitoring system.\n3. **Set up the outside system** to take care of the alert and notify us if it doesn't receive the alert.\n\nIn the following sections, we will go through each of these steps in detail.\n\n![alt text](image-2.png)\n\n### Setting Up the Dead Man's Switch\n\nI will use the following services and tools:\n- [kube-prometheus-stack Helm chart](https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack) to deploy Prometheus and Alertmanager.\n- [Dead Man's Snitch](https://deadmanssnitch.com/) to send the alerts to.\n- A Kubernetes cluster to deploy onto. I will use Docker Desktop for Mac to deploy the services, but you can use any Kubernetes cluster you want.\n\n#### Sign Up for Dead Man's Snitch\n\nDead Man's Snitch is a monitoring tool for cron, [Heroku Scheduler](https://addons.heroku.com/scheduler), or any periodic process. Dead Man's Snitch will notify you when your scheduled tasks don't run so you can investigate before it becomes a problem.\n\n![Sign up page](./account.png)\n\nA Snitch looks like this:\n\n```shell\n$ curl https://nosnch.in/c2354d53d2\n```\n\nIt's a unique URL we create for you to add to jobs you want to be monitored. If you want to add a Snitch to your backup cron job, it would look something like this:\n\nTo create a snitch:\n\n1. Log in and click \"Create Your First Snitch\".\n2. Give your Snitch a name (Nightly Backup, Data Import, Monthly Invoice, etc.).\n3. Choose an interval. This is based on how often your task runs. If you have an hourly task, then choose hourly. If you have a task that runs every six hours, round up to Daily.\n4. Type in an email address that you would like to be alerted at should your task fail. If you leave this space blank, your Snitch alerts will be sent to the email you used to sign up with. Click \"Save\".\n\nThe next page displays your unique Snitch URL in the blue box followed by examples of how your Snitch can be used. For each Snitch you create, a new URL will be created. Simply curl the unique Snitch URL after your task (as shown in the examples).\n\nTo tell your Snitch to start checking, hit the URL. You can manually hit the URL by pasting your Snitch URL into a browser window and hitting return. Refresh the page. The box next to your Snitch should be green.\n\nThat's it! If your process fails to run, Dead Man's Snitch will email you.\n\n![snitch](./snitch.gif)\n\nThe next page displays your unique Snitch URL and methods for checking in your Snitch: cURL, [Field Agent](https://deadmanssnitch.com/docs/field-agent), [email](https://deadmanssnitch.com/blog/snitch-check-in-via-email), Ruby, and Python.\n\nTo kick off the checking-in process for your Snitch, you'll send a request for the unique Snitch URL. The most common and basic method is using cURL and it would look something like this:\n\n```shell\nrun_backups_or_something.sh && curl https://nosnch.in/c2354d53d2\n```\n\nFor the purpose of the test Snitch, cURL only the Snitch URL in the terminal or paste the Snitch URL in your browser.\n\n![test](./test.png)\n\nOn the hour, every hour, Dead Man's Snitch looks to see if your Snitch checked in during the previous hour. Since you just checked in your Snitch manually, and our alert type is set to Basic, we won't check on your Snitch until the next full hour. For example, if you manually checked in your Snitch at 2:10 p.m., the next full hour it monitors doesn't start until the period of 3‚Äì4 p.m. This means we won't check for your Snitch until 4:01 p.m. Once you check-in, we will continue to monitor your Snitches on the hour, every hour.\n\nWe'll keep watching your Snitch, expecting it to check in every hour. We'll alert you at the end of the expected interval if it doesn't check-in.\n\n### Terraform Code\n\nWe can automate the creation of snitch. I have created a [Terraform module](https://github.com/seifrajhi/Terraform-Dead-Mans-Snitch-module/tree/main) to automate it.\n\n```hcl\nterraform {\n    required_providers {\n        dmsnitch = {\n            source = \"plukevdh/dmsnitch\"\n            version = \"0.1.5\"\n        }\n    }\n}\n\nprovider \"dmsnitch\" {\n    api_key = var.dms_key\n}\n\nresource \"dmsnitch_snitch\" \"dmsnitch\" {\n    name = var.snitch_name\n    notes = \"DeadMan's Switch ensures proper functioning of k8s Alertmanager alerting pipeline\"\n\n    interval = var.snitch_interval\n    type = var.snitch_type\n    tags = var.snitch_tags\n    alert_email = var.snitch_emails\n}\n```\n\nTo apply it, you can use your values:\n\n```hcl\nmodule \"dmsnitch\" {\n    source = \"git::https://github.com/seifrajhi/Terraform-Dead-Mans-Snitch-module.git?ref=v1.0.0\"\n\n    snitch_name     = \"dms-demo-blog\"\n    snitch_interval = \"5_minute\"\n    snitch_type     = \"basic\"\n    snitch_tags     = [\"DMS\", \"demo\"]\n    snitch_emails   = [\"example@example.com\"]\n}\n```\n\n### Deploying Prometheus and Alertmanager\n\nI use the default values to deploy the [kube-prometheus-stack Helm chart](https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack). The only thing I changed is setting the Alertmanager configuration to use the deadmanssnitch.com service when it receives it's not receiving an alert.\n\n```shell\nalertmanager:\n    config:\n        receivers:\n            - name: 'null'\n            - name: deadman\n                webhook_configs:\n                    - url: \"https://nosnch.in/c2354d53d2\"\n        route:\n            routes:\n                - match:\n                        alertname: Watchdog\n                    receiver: deadman\n                    group_wait: 0s\n                    group_interval: 1m\n                    repeat_interval: 50s\nprometheus-node-exporter:\n    hostRootFsMount:\n        enabled: false\n```\n\nThen run the following commands\n\n```shell\nhelm repo add prometheus-community https://prometheus-community.github.io/helm-charts\nhelm upgrade -i monitoring prometheus-community/kube-prometheus-stack -f values.yaml\n```\n\nThe good thing about the kube-prometheus-stack Helm chart is that there is already a Prometheus alert configured that acts as a heartbeat. The alert is called Watchdog and here is the alert rule:\n\n```yaml\n- alert: Watchdog\n                annotations:\n                    description: |\n                        This is an alert meant to ensure that the entire alerting pipeline is functional.\n                        This alert is always firing, therefore it should always be firing in Alertmanager\n                        and always fire against a receiver. There are integrations with various notification\n                        mechanisms that send a notification when this alert is not firing. For example the\n                        \"DeadMansSnitch\" integration in PagerDuty.\n                    runbook_url: https://runbooks.prometheus-operator.dev/runbooks/general/watchdog\n                    summary: An alert that should always be firing to certify that Alertmanager\n                        is working properly.\n                expr: vector(1)\n                labels:\n                    severity: none\n```\n\nIf everything went well, you should see the Watchdog alert firing in the Alertmanager dashboard.\n\n![logic](./logic.png)\n\n### Let's break it\n\nNow that we have everything set up, let's break it and see what happens. For this, I will **scale down the Alertmanager and the operator to 0**.\n\n```shell\nkubectl scale statefulset alertmanager-monitoring-kube-prometheus-alertmanager --replicas=0\nkubectl scale deployment monitoring-kube-prometheus-operator --replicas=0\n```\n\nLet's see what happens in the **deadmanssnitch.com** dashboard. We should see in the status column that the check is late. This means that the check didn't receive a ping in the last 2 minutes.\n\nTo fix the problem, we need to scale up the Alertmanager and the operator again.\n\n```shell\nkubectl scale statefulset alertmanager-monitoring-kube-prometheus-alertmanager --replicas=1\nkubectl scale deployment monitoring-kube-prometheus-operator --replicas=1\n```\n\n## üìë Conclusion\n\nIn this article, we learned how to create a dead man's switch implementation with Prometheus and Alertmanager. Of course, a dead man's switch is not a silver bullet, but it is an important part of a monitoring system and helps to build a more robust monitoring system.\n\nIn the end, we need to make sure that our systems are up and running, and if they are not, which can happen more often than we think, we need to be notified as soon as possible. This means also when the monitoring system itself is not working.\n\n**References**\n\n* https://deadmanssnitch.com/docs/api/\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** [https://www.linkedin.com/in/rajhi-saif/](https://www.linkedin.com/in/rajhi-saif/)\n\n**‚ôªÔ∏è X/Twitter:** [https://x.com/rajhisaifeddine](https://x.com/rajhisaifeddine)\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordcount":1494}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://seifrajhi.github.io/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://seifrajhi.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Never Get Caught Blind: Securing Your Monitoring Stack with a Dead Man Switch üëÄ","item":"https://seifrajhi.github.io/blog/securing-monitoring-stack-dead-man-switch/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=47ae28bb567c9025f1fee24afb2d20c9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-LLPCCGNLH7', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LLPCCGNLH7"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LLPCCGNLH7', {"anonymize_ip":true,"send_page_view":false});gtag('config', 'GTM-5V895PDS', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seifrajhi.github.io/blog/securing-monitoring-stack-dead-man-switch/" data-baseprotocol="https:" data-basehost="seifrajhi.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;174&#x27;%20width=&#x27;150&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture><noscript><picture><source type="image/avif" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Saifeddine <br/> Rajhi</a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="My public talks" href="/talks/">talks</a></li><li><a title="Review My Resume" href="/cv/platform-engineer/">cv</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:66.66666666666666%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;object-fit:fill;object-position:center" decoding="async" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGTgfRIqlf/xAAaEAADAAMBAAAAAAAAAAAAAAABAgMEEBES/9oACAEBAAEFAi56/rSAMYY6VFJKrf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAMAAwEAAAAAAAAAAAAAAAABEQIQIZH/2gAIAQEABj8CUZcnqM7fSH//xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhUXFB/9oACAEBAAE/IaIRkuK4C+aCdYqT7ck4Z1kYPm//2gAMAwEAAgADAAAAEDjf/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QR//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxCtf//EABwQAQEBAAIDAQAAAAAAAAAAAAERACHBMUFxgf/aAAgBAQABPxB4pciwD7ch64KjrBzanIJ3nxlrEz8mbL0nB2atEB4d/9k=" alt=""/><picture><source type="image/webp" data-srcset="/static/bd2e4367c6d3b74929af61251ddc5cd6/57584/switch-cover.webp 750w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/bd2e4367c6d3b74929af61251ddc5cd6/7284f/switch-cover.jpg" data-srcset="/static/bd2e4367c6d3b74929af61251ddc5cd6/7284f/switch-cover.jpg 750w" alt="Never Get Caught Blind: Securing Your Monitoring Stack with a Dead Man Switch üëÄ"/></picture><noscript><picture><source type="image/webp" srcSet="/static/bd2e4367c6d3b74929af61251ddc5cd6/57584/switch-cover.webp 750w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/bd2e4367c6d3b74929af61251ddc5cd6/7284f/switch-cover.jpg" srcSet="/static/bd2e4367c6d3b74929af61251ddc5cd6/7284f/switch-cover.jpg 750w" alt="Never Get Caught Blind: Securing Your Monitoring Stack with a Dead Man Switch üëÄ"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption data-nosnippet="" class="image-title">Photo by Saifeddine Rajhi</figcaption></figure><h1>Never Get Caught Blind: Securing Your Monitoring Stack with a Dead Man Switch üëÄ</h1><div data-nosnippet="" class="blog-details"><time class="blog-createdat" dateTime="2024-10-27">Oct 27, 2024</time><span> ‚Ä¢ </span><span class="blog-time2read">7<!-- -->mins<!-- --> read</span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul data-nosnippet="" class="blog-tags"><li>Monitoring &amp; Security</li><li>SRE</li><li>Dead Man Switch</li><li>Observability</li><li>Incident Response</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div data-nosnippet="" class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><ul class="toc-list"></ul></ul></div><div class="content blog-content"><blockquote>
<p><strong>Who Watches the Watchers and the Monitoring Stack? üëÆ</strong></p>
</blockquote>
<h2 id="-introduction" style="position:relative;"><a href="#-introduction" aria-label=" introduction permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üí¨ Introduction</h2>
<p>Nowadays, monitoring systems play an important role in ensuring the smooth operation of critical infrastructure.</p>
<p>However, what happens when the monitoring system itself falters? This is where the concept of a <a href="https://deadmanssnitch.com/" target="_blank" rel="noopener noreferrer">dead man switch</a> comes into play.</p>
<p>A dead man switch, in the context of monitoring, serves as an independent watchdog, tasked with keeping an eye on the monitoring system. If the monitoring system fails to provide <a href="https://en.wikipedia.org/wiki/Heartbeat_(computing)" target="_blank" rel="noopener noreferrer">regular heartbeats</a> to the dead man switch, it triggers an alarm, alerting operators to a potential problem.</p>
<h2 id="-objectives" style="position:relative;"><a href="#-objectives" aria-label=" objectives permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ü•Ö Objectives</h2>
<p>This blog post is a deep dive into the implementation of a dead man switch for <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a>, a widely used monitoring tool. We'll explore the tools and techniques involved in setting up this guardian of the guardians, ensuring that our monitoring system remains vigilant and reliable.</p>
<p>By the end of this post, you'll have a clear understanding of how a dead man switch can safeguard your monitoring system and prevent blind spots in your infrastructure.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEz0lEQVR42gHEBDv7AAsTFgAAAAABAQAAAAAAAAIHCwwSFg0aHgtBSh5IUi1KUzhNU0tSU1lWU1lWU01QTzhITiFCSwg8Rww8RgAPXGQLDhEAAAABAQEAAAADCAwTGB0aIicgRk82UVlIVFliXFmOdF2gfVyee1mPc1hpX1VBSk8hRk4gP0cABoiPEFxhCgsNAAAAAQEBBAcLGB8lJisyNEtSTFpfc2Rdm29Ux5hh1atp06hlyp5ionZUbllPQFdeETU/AAp/hgWAghRMUxMbHgAAAAQHCRsgJy0yO0FMUm1lYqFzWsiGT+O0aPDXiO/VhefEc8+LSphwVDtXYQ4uNgAZmKgHfYQUYGc2T1oqMTQAAAAZHiMwNUBLTlSPb13Cf0veolnxzX778b/788j035jnr1mqfF06T1QRMDcAD5CcDpmnFVxmJD9IWW97PkBDCwsOKzA7UE5Tk29cyZJr6rJh9uCZ/f73/v//+u6/78Fku4ZhSlRREC42AAt2ewlrcRNeZhs7QkZcZI2aqWRfZTc4QkZFTHJTS7F4aO2tVvTck/7/+f7///nuv+6+X7KEZEBPVA8jKgAJe4YNYGUVWF4WOUA8TlN7rL6pyd1VUFpAQE18doOviIrapHzuv2r44Jz44aTwzHzjpE6HblocKzQFCw8ABoGLCIKJEkdNES0zL0pQKZy6Qb3jQUZROzdCe4yomoyfrX9635RF57168Pbl4M2kxXs9XEhABwoRAQQGAAp1ewZ3ehBGSxAXHBtJWQGu3Aar2DFBSigkKzxUaE9ohqBwWcFuM8qje97//8HIuIlfRT06OQACBQEBAgAHbHMFbnMTU1oWMTYZQk4QgaERl7kiOUIZFBcZRFshcpJrZ2F8TjmajHfF9OOauqZOUlAoMzcDBwwHFxwACHB5BWhvEE1UFDI3GDU+J4CZVaK5GC83Cw0QHUVcL1RgNGBsVGFob46HsefLgbKfJ0lPHTU9CxojCB0mAApzdwRmaQ5RVxIxNxotNRJ4nRaw4QsiKhwZGUJndkhjbkBncidjd0yGhZ/bvWmllAtATBM1PgkaIAYbIwAJcnMFcnANVloPLzUXKC8PTGsCgrkIHCMRDAonO0EoSVI/XWQHUGQubW+LzrBYnIwAM0ISMjsKGiAFGyIABnJzBGxtDExQDjAzDSIsARwzBDJNGSwyJysvME5bQlpgQVxpFjA4cYt9h7GbO2hmETpFFzM6CRkfBhkfAAZ7fgNqaw5LTQ0tLwsjKwMhLRUzOyc/RztOWDVPWj1TXH2Ri8vOpP//yqGlkB41RCtGTjI/QwoYHgQWGwANYGAKLi4ePkIbNzwPJi0UKzMcMjwgN0ASKjYcNT83Qz9wgHLj7rDk7q+So4QaNkQjP0gdLTEUGR0HEBUAEhUbDw8UDBIVDh0jFis0GC86Eik2DyUzDiQuQFhMfZRvkK6Fv9ic0OelgZx6EzA+HjhCGDQ+Dh0hDQ4SAAUMEAMKEQsYJRAkNRAnNBs0Oi9NRVN3XImvfq3WlbXem7TamavRlLjdm3WXdBEpNhkxORcvORcxOwkWGgAQJCcnRUA0WExJdFZgk2RyrHCHw3yRzYKPyoGKw32IwX2Kwn6Mw4CWzoZmlWoRJzIWLTUVLDMVLTUVLzaO6pTp0P8tIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="dms" title="" src="/static/5ea78d6221ddecfdc2ea528584b7892e/01e7c/dms.png" srcset="/static/5ea78d6221ddecfdc2ea528584b7892e/04472/dms.png 170w,
/static/5ea78d6221ddecfdc2ea528584b7892e/9f933/dms.png 340w,
/static/5ea78d6221ddecfdc2ea528584b7892e/01e7c/dms.png 512w" sizes="(max-width: 512px) 100vw, 512px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h2 id="-dead-mans-switch" style="position:relative;"><a href="#-dead-mans-switch" aria-label=" dead mans switch permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üìò Dead Man's Switch</h2>
<p>A monitoring system can be very simple, like a ping to a server IP, or it can be as complex as monitoring every component in a distributed system to ensure everything is working as expected. No matter how sophisticated the monitoring system is, we rely on them to ensure that our main system is in a healthy state. But what happens when your monitoring system fails? How do you know that your monitoring system is healthy?</p>
<p>A frequent question I get asked when working with our DevOps teams is:</p>
<blockquote>
<p><strong>Who is monitoring the monitoring system to make sure it's working?</strong></p>
</blockquote>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.70588235294118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4klEQVR42oWT3W7aQBBGef936V2VGyIlVaoCjkhQXQNtIcVgY2OMHRv/4LXXp7tO2hRaqSN9sla7c2Zn53NPSolsW8qyJMsy8jzvVBQFVVUhhOj29Frv669WXde0Ku9SPVoJtBwOe1xng+9tCYIA0zQxDIPxwwPD0QjXdVmvN3ie10lDdfwFTHNJWkIulCqICknZNEilqhI0ouqkD/8ZrbrIiy6Aw1lG/35Lf+Ty0cq4833MZMMqC3GqCCtL2FUqUUFOjaSoJbVs3sBcAMfLhttJxM3jAeOpZuCtuJ6NuPr8iQ+bKbdxybUd0196DKOax2iJl1mqox3Jaa26OmjqG3D/LAiU4kwSJIJZ6jNNXax4o5LXDJ9PvLds3o3n3AUFq+OMb/YNhnXFJronyE1EU75CJb1wHzC1TOYzi2Dnk+UZ/m7HqTpR1QKvrBVE8CM5sS4E7vErT/6A7+4AOzSIyiVSPcHvG7qOy2pls+sgVTfByWTCdDrFcRziKGL+xWTve8oQkmOWsvVcdd4nCH0aKc5b1tPUXvwV2mtJktA0Lw9/UMDZfE4Ux+TKKkGwZ7FYsFwssW27yz0biq4qX3VpAR3a3GmadtKGj1QBDZyrIrqrfxj73F//C11AQ8Mw7P6Wy/gJwJhG0pr1KrcAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/50a19ac56732f90aa55f1d0ac63b0216/c5bb3/image.png" srcset="/static/50a19ac56732f90aa55f1d0ac63b0216/04472/image.png 170w,
/static/50a19ac56732f90aa55f1d0ac63b0216/9f933/image.png 340w,
/static/50a19ac56732f90aa55f1d0ac63b0216/c5bb3/image.png 680w,
/static/50a19ac56732f90aa55f1d0ac63b0216/b12f7/image.png 1020w,
/static/50a19ac56732f90aa55f1d0ac63b0216/fbf76/image.png 1252w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>We can borrow a concept from the physical engineering world: the <a href="https://en.wikipedia.org/wiki/Dead_man&#x27;s_switch" target="_blank" rel="noopener noreferrer">dead man's switch</a>.</p>
<p>The idea revolves around ensuring that we can receive a signal to trigger an alarm at any unpredictable moment. To achieve this, we can flip the logic: instead of relying on a signal to activate the alarm, we can set it up so that the alarm goes off when we <strong>do not</strong> receive a signal. This approach is quite straightforward! This principle, often referred to as a <a href="https://en.wikipedia.org/wiki/Heartbeat_(computing)" target="_blank" rel="noopener noreferrer">¬´heartbeat¬ª</a>, is used in various applications, including clustering, and is also employed in military contexts.</p>
<p>In this scenario, if the operator (like Prometheus) goes offline or malfunctions, it will stop sending its "OK" response, which will then trigger an alert.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 74.11764705882352%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACWElEQVR42m1U/W/TMBDd//9HAGMMgYQACX5AgjV0bN2QOoFGWyZgdGu7rp/5aBIntmM/7pxmpFstXXL22e/ec+6yUxiL79FfHAVdsg5ClWKchWgFPZyEPVzEI8Qqp3mX5j/RDn+DzyzzBMdhBy2yb9ElrcGNHUWeF57hzeIQbxdNzGWEy2SC5+PPeDr0cOT34MsUL2+beHFziPezr+AzozTA3qCJvWET727PoAtbAvLDkp/mBkGi4acKQaoxjRStFajiPHJlYEw5Z1PaQpJV8TtAt1kbl4Wz85s3rkSBUGhKoOAnZaL6YOna2I21O0BJQPVQrCQWQrgEUpd2E+TEXGIeSwc+DiVW2VrFfUC1BrTr0OnsCh9HF24nM1HEur8QDnRBbFn+KtPOtjJU9xgyo3msEFWS04eSWa6QZjtgqpRjUl1wRgyWzISAmQ2/J2EpebqSLtn1IsOM/IeSadaa9DEVsfNdZgIRskBCX5oPs0yWK1Th1jkB318kiu0Mo0xBW3uXSREogzFLZlSXXKngakjlFkCGSShgawWlDcss6BqMu4rCGsS5dgz7c+Gkp1JTWalNyZXjx8QmMo5VkhlkmUUYl35IzATNl6sCWW7LsqEmSFLr4hsM+b46yRW+LLs4mP3ATCQYxAG8WReNaQfn4ZDqMXPzT5MOTpa/3B1O0hjetIfj5QXOV/3/rcfl8WHexv5tA8/GB5jQj+EP9fL+uIHdYQOHlMinH8HuoIFHfQ+vblquxAaJjyfXHh5feXg9alMbYrOXuUfNmr1dP2zNqh42NYX1eCX5H2aRgcqpr0inAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/32118deec60cf303716385f78ccb8b2d/c5bb3/image-1.png" srcset="/static/32118deec60cf303716385f78ccb8b2d/04472/image-1.png 170w,
/static/32118deec60cf303716385f78ccb8b2d/9f933/image-1.png 340w,
/static/32118deec60cf303716385f78ccb8b2d/c5bb3/image-1.png 680w,
/static/32118deec60cf303716385f78ccb8b2d/b12f7/image-1.png 1020w,
/static/32118deec60cf303716385f78ccb8b2d/b5a09/image-1.png 1360w,
/static/32118deec60cf303716385f78ccb8b2d/51dd6/image-1.png 1952w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h2 id="-why-do-we-need-it" style="position:relative;"><a href="#-why-do-we-need-it" aria-label=" why do we need it permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üèó Why Do We Need It</h2>
<p>Your monitoring solution is your bread and butter for knowing when you have issues with your infrastructure. But what happens if it has issues? Unless you are monitoring your system health dashboards 24/7, you will want to have some notification configured to let you know if your monitoring solution itself is experiencing issues.</p>
<p>To do this, we'll want to create a rule that always triggers in Prometheus (think if <code class="language-text">False == True</code>).</p>
<h3 id="integrations" style="position:relative;"><a href="#integrations" aria-label="integrations permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integrations</h3>
<p>Integrations help bring alerts from Dead Man's Snitch into the systems and services your team uses.</p>
<p>Supported Integrations:</p>
<ul>
<li><a href="https://deadmanssnitch.com/docs/integrations/teams" target="_blank" rel="noopener noreferrer">Microsoft Teams</a></li>
<li><a href="https://deadmanssnitch.com/docs/integrations/opsgenie" target="_blank" rel="noopener noreferrer">Opsgenie</a></li>
<li><a href="https://deadmanssnitch.com/docs/integrations/pagerduty" target="_blank" rel="noopener noreferrer">PagerDuty</a></li>
<li><a href="https://deadmanssnitch.com/docs/integrations/slack" target="_blank" rel="noopener noreferrer">Slack</a></li>
<li><a href="https://deadmanssnitch.com/docs/integrations/victor-ops" target="_blank" rel="noopener noreferrer">VictorOps</a></li>
<li><a href="https://deadmanssnitch.com/docs/integrations/webhooks" target="_blank" rel="noopener noreferrer">Webhooks</a></li>
</ul>
<h2 id="hands-on" style="position:relative;"><a href="#hands-on" aria-label="hands on permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Hands-On</h2>
<p>To transform the concept of a dead man's switch into the Prometheus world, we need to:</p>
<ol>
<li><strong>Create a Prometheus alert</strong> that will fire regularly, like the train conductor pushing the button.</li>
<li><strong>Configure the Alertmanager</strong> to send to another system outside our primary monitoring system.</li>
<li><strong>Set up the outside system</strong> to take care of the alert and notify us if it doesn't receive the alert.</li>
</ol>
<p>In the following sections, we will go through each of these steps in detail.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 117.05882352941177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADfElEQVR42q1VS28bVRSuhISEugaprCohwYINKxZdskH8AXasKCtUZYGEhNQuqiIkxIrHjwAJCUGLcNqkJHEax66jJGOPJ37b43nPeGY8D4894/HHudO6cYgbBYkjHd/rO2e+e+73nXPnCi60+XO/vF1hP7PZDKqqwnEcNJtN8HwVXLWJk4aMZkvBSX0AXhDJe+A4DpIkwbZt6LqONE3PA8ZxjOFwmC04zhCiZKGydxvFP95HOfcRCvc/ROnBDRxvf4pOp4vRaJTFWpaVvbsSkO34zFIktKnZuAOp8BY6+fcgbLyLXv5tiOWPkcxOM2KA0+n0PCBbXGQ4n8+JgpSycBCNHRi6CLHfRODbcOyzAKZpvhyQPVzYZDJBqz1AXzTo+AZ6fQ3iQM9G3w9exBmGcTnAeTpD6AqIRhyGWgnd+kY2DxyO6AkulyHbbWHj0EJz83WUfn0VlQdXIeSu4uC319DZfAWmtPHfjzxLJjDbP8FofgtF+AZi9S6s7g9wet9j7EuXE2UByGpS11SougNZHcIaepAUK5srqpPFJUmSxTIhV5bNMiBT2bR8WHZIYAEM0yWBZPhBDJP+205EgLMslpXaBYDPOEySGHLtHpTKZ1Cqt9Au3ST/BFrtFq19Dl1YQ+gbFwMud0oST9HZ+wC19TfAr19D6+/r6O9eh/DwTVRz16AU38HI7j3vqpcAMk6YymEYIggCDPpVlIs5dFsl6AoHVeIgi0fguS006yV4nocoirIkFnyeAWTGwFiPsmMUi2XizkEQxuj2ZBxzNVSqdZTLx/TsgC6PGmo1nkYeg8Eg4/0c4LL5vvdiZxY8n6cZtzSBTVmxTkqpGhI67soM2UvsqJPxGAkF16pVuEMbURDCdV3KNERIwo0JgK/XYdORJ9TvEcVG9M5KlVnqfVUB3+tgPb+Dw8YJitwRCvv72M/nsf7Lzzgp7OHJn/ch7O+hc/AU+kCEqulnhDktG03D78Ih7u3m8N2Th/h65y/8WNgEqziLO0TlqzWUyIW7X+LozhcorN2EvPUI/jTGdBKdB7RI5bapYbfbQL4lYLtVQ6ndQEp8e7oGZXcLvZ3HELc3IdO8//gRPFnCiKiKl9ovA2TXuEGd4hFfvu3Ao0+BTx64o6zWXFLfIT6Z23R9DT2fnHWNm5XOSpXZYvovXw5kCp96yrKgIV39kfo/7R+c8bsXZno1VAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="alt text" title="" src="/static/5d08d7b2e5070900b428a4a74592580f/c5bb3/image-2.png" srcset="/static/5d08d7b2e5070900b428a4a74592580f/04472/image-2.png 170w,
/static/5d08d7b2e5070900b428a4a74592580f/9f933/image-2.png 340w,
/static/5d08d7b2e5070900b428a4a74592580f/c5bb3/image-2.png 680w,
/static/5d08d7b2e5070900b428a4a74592580f/b12f7/image-2.png 1020w,
/static/5d08d7b2e5070900b428a4a74592580f/302a4/image-2.png 1080w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="setting-up-the-dead-mans-switch" style="position:relative;"><a href="#setting-up-the-dead-mans-switch" aria-label="setting up the dead mans switch permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Setting Up the Dead Man's Switch</h3>
<p>I will use the following services and tools:</p>
<ul>
<li><a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack" target="_blank" rel="noopener noreferrer">kube-prometheus-stack Helm chart</a> to deploy Prometheus and Alertmanager.</li>
<li><a href="https://deadmanssnitch.com/" target="_blank" rel="noopener noreferrer">Dead Man's Snitch</a> to send the alerts to.</li>
<li>A Kubernetes cluster to deploy onto. I will use Docker Desktop for Mac to deploy the services, but you can use any Kubernetes cluster you want.</li>
</ul>
<h4 id="sign-up-for-dead-mans-snitch" style="position:relative;"><a href="#sign-up-for-dead-mans-snitch" aria-label="sign up for dead mans snitch permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sign Up for Dead Man's Snitch</h4>
<p>Dead Man's Snitch is a monitoring tool for cron, <a href="https://addons.heroku.com/scheduler" target="_blank" rel="noopener noreferrer">Heroku Scheduler</a>, or any periodic process. Dead Man's Snitch will notify you when your scheduled tasks don't run so you can investigate before it becomes a problem.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVR42qWSwQ6DIBBE+f8/6Y/03HM11guICqiw2PZgpkg0TRqliZK8LCHsMBuGcc6xhxACRVEgy3PcswyPsoxnqR5Go8cu3qNpWwhZoaolGtXCeUKqh1lySOGI0A8DuqGP+3/32fziHhTwweU0TViXDy5SPUnBVdRYh7LWkc7aMNoJwdlRLiQu11uEK43x6WGPCq6i79czQqdGJtr4CDomOEcmMm7XpOBvTFyoymgordAG5vzJmEOFOqCNWZx/cYvzD/vD/It5GSRzAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="Sign up page" title="" src="/static/9f2ef18bff3f1e2addf3fbbb63364baa/c5bb3/account.png" srcset="/static/9f2ef18bff3f1e2addf3fbbb63364baa/04472/account.png 170w,
/static/9f2ef18bff3f1e2addf3fbbb63364baa/9f933/account.png 340w,
/static/9f2ef18bff3f1e2addf3fbbb63364baa/c5bb3/account.png 680w,
/static/9f2ef18bff3f1e2addf3fbbb63364baa/b12f7/account.png 1020w,
/static/9f2ef18bff3f1e2addf3fbbb63364baa/c1b63/account.png 1200w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>A Snitch looks like this:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">curl</span> https://nosnch.in/c2354d53d2</code></pre></div>
<p>It's a unique URL we create for you to add to jobs you want to be monitored. If you want to add a Snitch to your backup cron job, it would look something like this:</p>
<p>To create a snitch:</p>
<ol>
<li>Log in and click "Create Your First Snitch".</li>
<li>Give your Snitch a name (Nightly Backup, Data Import, Monthly Invoice, etc.).</li>
<li>Choose an interval. This is based on how often your task runs. If you have an hourly task, then choose hourly. If you have a task that runs every six hours, round up to Daily.</li>
<li>Type in an email address that you would like to be alerted at should your task fail. If you leave this space blank, your Snitch alerts will be sent to the email you used to sign up with. Click "Save".</li>
</ol>
<p>The next page displays your unique Snitch URL in the blue box followed by examples of how your Snitch can be used. For each Snitch you create, a new URL will be created. Simply curl the unique Snitch URL after your task (as shown in the examples).</p>
<p>To tell your Snitch to start checking, hit the URL. You can manually hit the URL by pasting your Snitch URL into a browser window and hitting return. Refresh the page. The box next to your Snitch should be green.</p>
<p>That's it! If your process fails to run, Dead Man's Snitch will email you.</p>
<p><img src="/abe81a46d267e9a529b9108aa856a662/snitch.gif" alt="snitch" loading="lazy">
          </p>
<p>The next page displays your unique Snitch URL and methods for checking in your Snitch: cURL, <a href="https://deadmanssnitch.com/docs/field-agent" target="_blank" rel="noopener noreferrer">Field Agent</a>, <a href="https://deadmanssnitch.com/blog/snitch-check-in-via-email" target="_blank" rel="noopener noreferrer">email</a>, Ruby, and Python.</p>
<p>To kick off the checking-in process for your Snitch, you'll send a request for the unique Snitch URL. The most common and basic method is using cURL and it would look something like this:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">run_backups_or_something.sh <span class="token operator">&amp;&amp;</span> <span class="token function">curl</span> https://nosnch.in/c2354d53d2</code></pre></div>
<p>For the purpose of the test Snitch, cURL only the Snitch URL in the terminal or paste the Snitch URL in your browser.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5UlEQVR42m2SSW/aUBSF389otkhMYoYFEkoXzS9hR7op2EghShZlzj7d8zOSQqUuiG0Qa9RF0i7KZGwzLQAJijn1u9QdKLY+nXPvuVd+lh57c3GBQDCIaDSCSCSCcDiMcCSMUCiEoNUPBAKIx+NIJBJUn4LvORwOpFIpsGw2i4yQgSiKpFe5K+SucxCzIt6l00hn0hAEAYIokD8F37t8e4n7D/dgzy/P+D7o4+XbV0IzdIx1jVSfHODeRp8Yv9XODnMG1LEK1ul0ICsyWu0WoSgKZFn+B0mWIEnSH2/xJD1RrbQU2m82m+h2u2Cz2QwcwzBge7ueTqfkJ5MJMZ/PSXlvsVhQTnvTw/xyuQQbDodQVRWj0Qj9fh+9Xo88h/vBYEA5z3iP17zPe/Yh7A+tViswXbf+/whN02iAK1/ijMdjOhHv85rPrddrbLdbbDYbgnt2fv4aHo8HPp8Pfr+f9G+8Xq91paKIxWJwuVxwu93wuD2E0+kk3JY/e3WGZDIJVq6UUCqXUb27s6iiYlGuVshXf/lCqYhisYB8IX9EAe/zeRSt/Ob2FrVaDezL8DPM/Q6maeL42e/34O/O3JE/9fww99hYbHcmltZ1Y4/1B9QbdTQaDTQ+/Q/PbE7lNg8fH9Fut/ATHXGcNF69rT8AAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="test" title="" src="/static/1676add9d9cddbc23df8dbfb97b6656e/c5bb3/test.png" srcset="/static/1676add9d9cddbc23df8dbfb97b6656e/04472/test.png 170w,
/static/1676add9d9cddbc23df8dbfb97b6656e/9f933/test.png 340w,
/static/1676add9d9cddbc23df8dbfb97b6656e/c5bb3/test.png 680w,
/static/1676add9d9cddbc23df8dbfb97b6656e/b12f7/test.png 1020w,
/static/1676add9d9cddbc23df8dbfb97b6656e/c1b63/test.png 1200w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>On the hour, every hour, Dead Man's Snitch looks to see if your Snitch checked in during the previous hour. Since you just checked in your Snitch manually, and our alert type is set to Basic, we won't check on your Snitch until the next full hour. For example, if you manually checked in your Snitch at 2:10 p.m., the next full hour it monitors doesn't start until the period of 3‚Äì4 p.m. This means we won't check for your Snitch until 4:01 p.m. Once you check-in, we will continue to monitor your Snitches on the hour, every hour.</p>
<p>We'll keep watching your Snitch, expecting it to check in every hour. We'll alert you at the end of the expected interval if it doesn't check-in.</p>
<h3 id="terraform-code" style="position:relative;"><a href="#terraform-code" aria-label="terraform code permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Terraform Code</h3>
<p>We can automate the creation of snitch. I have created a <a href="https://github.com/seifrajhi/Terraform-Dead-Mans-Snitch-module/tree/main" target="_blank" rel="noopener noreferrer">Terraform module</a> to automate it.</p>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">terraform</span> <span class="token punctuation">{</span>
    <span class="token keyword">required_providers</span> <span class="token punctuation">{</span>
        <span class="token property">dmsnitch</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
            <span class="token property">source</span> <span class="token punctuation">=</span> <span class="token string">"plukevdh/dmsnitch"</span>
            <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.1.5"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">provider<span class="token type variable"> "dmsnitch" </span></span><span class="token punctuation">{</span>
    <span class="token property">api_key</span> <span class="token punctuation">=</span> var.dms_key
<span class="token punctuation">}</span>

<span class="token keyword">resource <span class="token type variable">"dmsnitch_snitch"</span></span> <span class="token string">"dmsnitch"</span> <span class="token punctuation">{</span>
    <span class="token property">name</span> <span class="token punctuation">=</span> var.snitch_name
    <span class="token property">notes</span> <span class="token punctuation">=</span> <span class="token string">"DeadMan's Switch ensures proper functioning of k8s Alertmanager alerting pipeline"</span>

    <span class="token property">interval</span> <span class="token punctuation">=</span> var.snitch_interval
    <span class="token property">type</span> <span class="token punctuation">=</span> var.snitch_type
    <span class="token property">tags</span> <span class="token punctuation">=</span> var.snitch_tags
    <span class="token property">alert_email</span> <span class="token punctuation">=</span> var.snitch_emails
<span class="token punctuation">}</span></code></pre></div>
<p>To apply it, you can use your values:</p>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">module<span class="token type variable"> "dmsnitch" </span></span><span class="token punctuation">{</span>
    <span class="token property">source</span> <span class="token punctuation">=</span> <span class="token string">"git::https://github.com/seifrajhi/Terraform-Dead-Mans-Snitch-module.git?ref=v1.0.0"</span>

    <span class="token property">snitch_name</span>     <span class="token punctuation">=</span> <span class="token string">"dms-demo-blog"</span>
    <span class="token property">snitch_interval</span> <span class="token punctuation">=</span> <span class="token string">"5_minute"</span>
    <span class="token property">snitch_type</span>     <span class="token punctuation">=</span> <span class="token string">"basic"</span>
    <span class="token property">snitch_tags</span>     <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"DMS"</span>, <span class="token string">"demo"</span><span class="token punctuation">]</span>
    <span class="token property">snitch_emails</span>   <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"example@example.com"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="deploying-prometheus-and-alertmanager" style="position:relative;"><a href="#deploying-prometheus-and-alertmanager" aria-label="deploying prometheus and alertmanager permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deploying Prometheus and Alertmanager</h3>
<p>I use the default values to deploy the <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack" target="_blank" rel="noopener noreferrer">kube-prometheus-stack Helm chart</a>. The only thing I changed is setting the Alertmanager configuration to use the deadmanssnitch.com service when it receives it's not receiving an alert.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">alertmanager:
    config:
        receivers:
            - name: <span class="token string">'null'</span>
            - name: deadman
                webhook_configs:
                    - url: <span class="token string">"https://nosnch.in/c2354d53d2"</span>
        route:
            routes:
                - match:
                        alertname: Watchdog
                    receiver: deadman
                    group_wait: 0s
                    group_interval: 1m
                    repeat_interval: 50s
prometheus-node-exporter:
    hostRootFsMount:
        enabled: <span class="token boolean">false</span></code></pre></div>
<p>Then run the following commands</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> prometheus-community https://prometheus-community.github.io/helm-charts
helm upgrade <span class="token parameter variable">-i</span> monitoring prometheus-community/kube-prometheus-stack <span class="token parameter variable">-f</span> values.yaml</code></pre></div>
<p>The good thing about the kube-prometheus-stack Helm chart is that there is already a Prometheus alert configured that acts as a heartbeat. The alert is called Watchdog and here is the alert rule:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">alert</span><span class="token punctuation">:</span> Watchdog
                <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
                    <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
                        This is an alert meant to ensure that the entire alerting pipeline is functional.
                        This alert is always firing, therefore it should always be firing in Alertmanager
                        and always fire against a receiver. There are integrations with various notification
                        mechanisms that send a notification when this alert is not firing. For example the
                        "DeadMansSnitch" integration in PagerDuty.</span>
                    <span class="token key atrule">runbook_url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//runbooks.prometheus<span class="token punctuation">-</span>operator.dev/runbooks/general/watchdog
                    <span class="token key atrule">summary</span><span class="token punctuation">:</span> An alert that should always be firing to certify that Alertmanager
                        is working properly.
                <span class="token key atrule">expr</span><span class="token punctuation">:</span> vector(1)
                <span class="token key atrule">labels</span><span class="token punctuation">:</span>
                    <span class="token key atrule">severity</span><span class="token punctuation">:</span> none</code></pre></div>
<p>If everything went well, you should see the Watchdog alert firing in the Alertmanager dashboard.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVR42nWSWQqEQAwFvf8p/ZB2QVFxXzNU4IkwbaDpJUnlRZNM02RZllnTNHbft53naVVVWVEUNo6jYbxj3PM8d9++7xazZF1Xh5BEAsHbttl1XYaPgn3fW9d1vog7jsN9UeCyLM+F8zzPDsRIFBxFwKX4U6GABFEViILZucsPnF0FokAcQNU6wbTOEkBGDO90QZ7a/1MYQrC2bZ/qdV1Hfwog3suyfIDEUlh3VwhELX21TOH392Yq0jR1v5SyHKhWBRQEn+D4USjFwzB4V+TKT2wCRGOj89dPQaFmVcWVy+4KBVCyRuJ9l2n+AEuZYnnnG/4AqKgQ4TkBOoMAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="logic" title="" src="/static/86e9cb03a086f37228e7ae5f631acc0c/c5bb3/logic.png" srcset="/static/86e9cb03a086f37228e7ae5f631acc0c/04472/logic.png 170w,
/static/86e9cb03a086f37228e7ae5f631acc0c/9f933/logic.png 340w,
/static/86e9cb03a086f37228e7ae5f631acc0c/c5bb3/logic.png 680w,
/static/86e9cb03a086f37228e7ae5f631acc0c/c1c45/logic.png 824w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="lets-break-it" style="position:relative;"><a href="#lets-break-it" aria-label="lets break it permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Let's break it</h3>
<p>Now that we have everything set up, let's break it and see what happens. For this, I will <strong>scale down the Alertmanager and the operator to 0</strong>.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl scale statefulset alertmanager-monitoring-kube-prometheus-alertmanager <span class="token parameter variable">--replicas</span><span class="token operator">=</span><span class="token number">0</span>
kubectl scale deployment monitoring-kube-prometheus-operator <span class="token parameter variable">--replicas</span><span class="token operator">=</span><span class="token number">0</span></code></pre></div>
<p>Let's see what happens in the <strong>deadmanssnitch.com</strong> dashboard. We should see in the status column that the check is late. This means that the check didn't receive a ping in the last 2 minutes.</p>
<p>To fix the problem, we need to scale up the Alertmanager and the operator again.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl scale statefulset alertmanager-monitoring-kube-prometheus-alertmanager <span class="token parameter variable">--replicas</span><span class="token operator">=</span><span class="token number">1</span>
kubectl scale deployment monitoring-kube-prometheus-operator <span class="token parameter variable">--replicas</span><span class="token operator">=</span><span class="token number">1</span></code></pre></div>
<h2 id="-conclusion" style="position:relative;"><a href="#-conclusion" aria-label=" conclusion permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üìë Conclusion</h2>
<p>In this article, we learned how to create a dead man's switch implementation with Prometheus and Alertmanager. Of course, a dead man's switch is not a silver bullet, but it is an important part of a monitoring system and helps to build a more robust monitoring system.</p>
<p>In the end, we need to make sure that our systems are up and running, and if they are not, which can happen more often than we think, we need to be notified as soon as possible. This means also when the monitoring system itself is not working.</p>
<p><strong>References</strong></p>
<ul>
<li><a href="https://deadmanssnitch.com/docs/api/" target="_blank" rel="noopener noreferrer">https://deadmanssnitch.com/docs/api/</a></li>
</ul>
<br>
<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>
<blockquote>
<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>
</blockquote>
<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>
<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href="https://www.linkedin.com/in/rajhi-saif/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/rajhi-saif/</a></p>
<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href="https://x.com/rajhisaifeddine" target="_blank" rel="noopener noreferrer">https://x.com/rajhisaifeddine</a></p>
<p><strong>The end ‚úåüèª</strong></p>
<h1 align="center">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>
<p><strong>üìÖ Stay updated</strong></p>
<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p></div></div><div id="content-end"></div></article><div data-nosnippet="" class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div><br/><br/><br/></main><aside class="blogpost-sidebar"><div data-nosnippet="" class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/arc-zonal-shift-high-availability-eks/">How ARC Zonal Shift Enhances Application Availability in Amazon EKS<!-- --> ‚Üí</a><a rel="prev" class="prev-post" href="/blog/victoriametrics-time-series-db-prometheus-k8s/">‚Üê <!-- -->VictoriaMetrics: A Guide, Comparing It to Prometheus, and Implementing Kubernetes Monitoring</a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer data-nosnippet=""><div class="footer-wrapper"><div data-nosnippet="" class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="linkedin" href="https://www.linkedin.com/in/rajhi-saif/" title="Saifeddine Rajhi on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="github" href="https://github.com/seifrajhi" title="Saifeddine Rajhi on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" eventCategory="social" eventAction="click" eventLabel="email" href="mailto:rajhiseif@gmail.com" title="Saifeddine Rajhi&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg><span>Email</span></a></li><li class="social-item social-bluesky"><a rel="me" itemProp="url" eventCategory="bluesky" eventAction="click" eventLabel="social" href="https://bsky.app/profile/saifrajhi.bsky.social" title="Saifeddine Rajhi on Bluesky Social" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bluesky" class="svg-inline--fa fa-bluesky fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2c42.1-31.6 110.3-56 110.3 21.8c0 15.5-8.9 130.5-14.1 149.2C478.2 298 412 314.6 353.1 304.5c102.9 17.5 129.1 75.5 72.5 133.5c-107.4 110.2-154.3-27.6-166.3-62.9l0 0c-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8l0 0c-12 35.3-59 173.1-166.3 62.9c-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1C10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"></path></svg><span>Bluesky Social</span></a></li><li class="social-item social-X/Twitter"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="X/Twitter" href="https://x.com/RajhiSaifeddine" title="Saifeddine Rajhi on X/Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg><span>X/Twitter</span></a></li><li class="social-item social-reddit"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="reddit" href="https://www.reddit.com/user/ScoreApprehensive992/" title="Saifeddine Rajhi on Reddit" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit-alien" class="svg-inline--fa fa-reddit-alien fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z"></path></svg><span>Reddit</span></a></li><li class="social-item social-stackoverflow"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://stackoverflow.com/users/21897244/saifeddine-rajhi" title="Saifeddine Rajhi on StackOverflow" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg><span>StackOverflow</span></a></li><li class="social-item social-Goodreads"><a rel="me" eventLabel="StackOverflow" href="https://www.goodreads.com/user/show/176103378-saifeddine" title="Saifeddine Rajhi on Goodreads" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="goodreads" class="svg-inline--fa fa-goodreads fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9 0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9 0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"></path></svg><span>Goodreads</span></a></li><li class="social-item social-osi"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://ossinsight.io/analyze/seifrajhi" title="Saifeddine Rajhi on OSSInsights" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="osi" class="svg-inline--fa fa-osi fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M8 266.44C10.3 130.64 105.4 34 221.8 18.34c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7q-26.7-69.45-53.4-139c-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8a71.47 71.47 0 0 0-64.5-82.2c-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4q-26.85 69.9-53.7 139.9c-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119-24.9-49.2-25.2-87.7-26.8-108.7zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3q22.35-58.65 45-117.3c1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6a91.64 91.64 0 0 1 45.2 90.4c-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6q22.8 58.8 45.2 117.7c1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161-13.7-117.5-119.4-214.8-255.5-198-106.1 13-195.3 102.5-197.1 225.8z"></path></svg><span>OSSInsights</span></a></li><li class="social-item social-devstats"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://devstats.cluster.fun/?user=seifrajhi" title="Saifeddine Rajhi on DevStats" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-line" class="svg-inline--fa fa-chart-line fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg><span>DevStats</span></a></li><li class="social-item social-RSS"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="RSS" href="https://seifrajhi.github.io/rss.xml" title="Subscribe to my blog post" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg><span>RSS</span></a></li></ul></div><div class="copyright">Saifeddine Rajhi ¬© 1994 - <!-- -->2025<!-- --> <br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/saifrajhi">0C3B BABB 8BC1 EA2B</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/securing-monitoring-stack-dead-man-switch/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-2f4f174b7ccfc9183c7b.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88fb5c28d68e831e730a.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-a0e3d27d11d1ae18e8f0.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-ebba4d9aefd856068672.js\"],\"component---src-pages-cv-platform-engineer-js\":[\"/component---src-pages-cv-platform-engineer-js-6b113f68e4ef180c17b2.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-cca2029691d058282d40.js\"],\"component---src-pages-talks-js\":[\"/component---src-pages-talks-js-d3fd645d0085de17a5e9.js\"],\"component---src-pages-thoughts-js\":[\"/component---src-pages-thoughts-js-0950be014b397a2b3d9c.js\"],\"component---src-templates-blog-template-js\":[\"/component---src-templates-blog-template-js-8b499d4855ef1cb13add.js\"],\"component---src-templates-talk-template-js\":[\"/component---src-templates-talk-template-js-7623845caf43043e0341.js\"],\"component---src-templates-thought-template-js\":[\"/component---src-templates-thought-template-js-b8bdd67706c6a1d2873c.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="eaddde9f0729f628bfa3";</script><script src="/webpack-runtime-7456f0bc58205084e1e1.js" async></script><script src="/framework-580c5b11fe009445c659.js" async></script><script src="/app-2f4f174b7ccfc9183c7b.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>