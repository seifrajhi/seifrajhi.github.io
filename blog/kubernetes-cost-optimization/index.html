<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" property="og:description" content="Discover effective strategies and tools for optimizing costs in your Kubernetes environment, making FinOps simpler and more efficient."/><meta data-react-helmet="true" name="keywords" content="Kubernetes,cost optimization,FinOps,cloud costs,K8s,DevOps"/><meta data-react-helmet="true" name="author" content="@RajhiSaifeddine"/><meta data-react-helmet="true" property="og:title" content="Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞ - Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@RajhiSaifeddine"/><meta data-react-helmet="true" name="twitter:title" content="Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞ - Blog"/><meta data-react-helmet="true" name="twitter:description" content="Discover effective strategies and tools for optimizing costs in your Kubernetes environment, making FinOps simpler and more efficient."/><meta data-react-helmet="true" name="image" property="og:image" content="https://seifrajhi.github.io/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png"/><meta data-react-helmet="true" name="twitter:image" content="https://seifrajhi.github.io/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png"/><meta data-react-helmet="true" property="og:url" content="https://seifrajhi.github.io/blog/kubernetes-cost-optimization/"/><meta name="theme-color" content="#ffffff"/><link rel="stylesheet" href="/styles.f2578406544ee58a43e3.css"/><link rel="stylesheet"/><link rel="alternate" type="application/rss+xml" title="Saifeddine Rajhi&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞ - Blog by Saifeddine Rajhi</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png","headline":"Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞","dateCreated":"2024-10-28","datePublished":"2024-10-28","dateModified":"2024-10-28","inLanguage":"en-US","isFamilyFriendly":true,"isAccessibleForFree":true,"author":{"@type":"Person","name":"Saifeddine Rajhi","url":"https://seifrajhi.github.io"},"publisher":{"@type":"Organization","name":"Saifeddine Rajhi's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seifrajhi.github.io/blog/kubernetes-cost-optimization/"},"keywords":["Kubernetes","cost optimization","FinOps","cloud costs","K8s","DevOps"],"genre":["Platform engineer","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\n> **Efficient Tools for Streamlining FinOps üí∏**\n\n## üóØ Introduction\n\nAs organizations embrace Kubernetes for their containerized workloads, the need for effective cost optimization becomes paramount. To navigate the complex landscape of cloud-native infrastructure, leveraging efficient tools is key to streamlining FinOps practices and maximizing cost savings. Fortunately, a range of efficient tools exists to streamline FinOps practices and drive significant savings.\n\nIn this article, we will discuss cutting-edge solutions such as [Cloudability](https://www.apptio.com/products/cloudability/), [Kube-Green](https://github.com/kube-green/kube-green), [Cloud Custodian](https://cloudcustodian.io/docs/index.html), and [Kubecost](https://www.kubecost.com/). Discover how these tools empower businesses to gain cost visibility, optimize resource utilization, and achieve financial excellence in their Kubernetes deployments. Let's dive into the world of Kubernetes cost optimization made easy. üí∏\n\n![finops](./finops.png)\n\n## Introduction to Kube-Green üçÄ\n\nIn the first paragraph of this tutorial, I will explain how Kube-Green was born and why it is useful for reducing the waste of resources.\n\n### The Idea of Kube-Green üóØ\n\nIn a Kubernetes cluster, non-production namespaces typically operate during business hours, which amounts to approximately 40 hours per week out of a total of 168 weekly hours. However, it's common for resources to be allocated to pods in these namespaces even when they are not actively in use. This results in unnecessary consumption of CPU and memory resources.\n\n[Kube-Green](https://github.com/kube-green/kube-green) offers a simple solution to address this issue by halting all pods within those namespaces, effectively optimizing resource utilization during non-business hours.\n\n### How is it Possible? ü§î\n\nKube-Green is a Kubernetes controller, which defines a Custom Resource Definition (CRD) called `SleepInfo`. The `SleepInfo` CRD defines when to stop and restart the pods in a namespace. For example, in development namespaces, it is possible to stop all the pods during non-business hours: wake up every morning from Monday to Friday and stop every night from Monday to Friday.\n\n### Hands-On üë∑\n\nTo follow this guide, you should have [kubectl](https://kubernetes.io/docs/tasks/tools/#kubectl) and [kind](https://kind.sigs.k8s.io/) installed locally.\n\n- The Kubernetes command line tool: [kubectl](https://kubernetes.io/docs/tasks/tools/#kubectl)\n- [Docker](https://docs.docker.com/get-started/get-docker/)\n- Kubernetes cluster\n\nNow you have all the tools needed, let's go!\n\n### ‚û°Ô∏è Install the Cert-Manager\n\n![cert](./cert.png)\n\nWith this command, the latest release of cert-manager will be installed. You can check the correct cert-manager deployment by verifying that all the pods are correctly running.\n\n![get-ns](./get-ns.png)\n\n### Install Kube-Green „äô\n\nInstall Kube-Green with the default static install. [Click here](https://kube-green.dev/docs/install/) to see the different install methods supported.\n\nInstall Kube-Green with this command:\n```sh\nkubectl apply -f https://github.com/kube-green/kube-green/releases/latest/download/kube-green.yaml\n```\nThis command creates a `kube-green` namespace and deploys a `kube-green-controller-manager`. You can check that the pod is correctly running:\n```sh\nkubectl -n kube-green get pods\n```\n\n### ‚û°Ô∏è Setup Kube-Green in Dev Namespace\n\nTo setup Kube-Green, the `SleepInfo` resource must be created in the `dev` namespace. The `SleepInfo` spec contains:\n\n- `weekdays`: day of the week. `*` is every day, `1` is Monday, `1-5` is from Monday to Friday.\n- `sleepAt`: time in hours and minutes (HH:mm) when the namespace will go to sleep. Valid values are, for example, `19:00` or `*:*` for every minute and every hour. Resources sleep will be deployments (setting replicas value to 0) and, if `suspendCronjobs` option is set to true, cron jobs will be suspended.\n- `wakeUpAt` (optional): time in hours and minutes (HH:mm) when the namespace should be restored to the initial state (before sleep). Valid values are, for example, `19:00` or `*:*` for every minute and every hour. If wake up value is not set, the pod in the namespace will not be restored. So, you will need to deploy the initial namespace configuration to restore it.\n- `timeZone` (optional, default to UTC): time zone in IANA specification. For example, for Italian hour, set `Europe/Rome`.\n- `suspendDeployments` (optional, default to true): if set to false, deployments will not be suspended.\n- `suspendCronJobs` (optional, default to false): if set to true, cronjobs will be suspended.\n- `excludeRef` (optional): an array of objects containing the resource to exclude from sleep. It can specify exactly the name of the specified resource or match based on the labels. The possible formats are:\n    - `apiVersion`: version of the resource. Now it supports \"apps/v1\", \"batch/v1beta1\" and \"batch/v1\".\n    - `kind`: the kind of resource. Now it supports \"Deployment\" and \"CronJob\".\n    - `name`: the name of the resource or\n    - `matchLabels`: an object of strings with labels to identify resources. [Click here](https://kube-green.dev/docs/sleepinfo/) to see an example.\n\n### Example üèó\n\n```yaml\napiVersion: kube-green.com/v1alpha1\nkind: SleepInfo\nmetadata:\n    name: working-hours\nspec:\n    weekdays: \"1-5\"\n    sleepAt: \"20:00\"\n    wakeUpAt: \"08:00\"\n    timeZone: \"Europe/Rome\"\n```\n\nWith this CRD, it's configured to sleep at 20:00 and wake up at 08:00 on weekdays only for Deployments.\n\n## Introduction to OpenCost by Kubecost üí∞\n\n[kubectl-cost](https://github.com/kubecost/kubectl-cost) is a [kubectl plugin](https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/) that provides easy CLI access to Kubernetes cost allocation metrics via the [OpenCost API](https://www.opencost.io/docs/api). It allows developers, DevOps, and others to quickly determine the cost & efficiency for any Kubernetes workload.\n\n### OpenCost Setup\n\nOpenCost requires Prometheus for scraping metrics and data storage. Follow the steps below to install OpenCost.\n\n### Quick Start Installation üìÅ\n\nThese commands will get you started immediately with OpenCost.\n\n#### Install Prometheus\n\n```sh\nhelm install my-prometheus --repo https://prometheus-community.github.io/helm-charts prometheus \\\n    --namespace prometheus --create-namespace \\\n    --set pushgateway.enabled=false \\\n    --set alertmanager.enabled=false \\\n    -f https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/prometheus/extraScrapeConfigs.yaml\n```\n\n#### Install OpenCost\n\n```sh\nkubectl apply --namespace opencost -f https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/opencost.yaml\n```\n\n#### Install Kubecost\n\nThis software requires that you have a running deployment of Kubecost in your cluster. The recommended path is to use Helm, but there are [alternative install options](https://docs.kubecost.com/install).\n\n##### Helm 3\n\n```sh\nhelm repo add kubecost https://kubecost.github.io/cost-analyzer/\nhelm upgrade -i --create-namespace kubecost kubecost/cost-analyzer --namespace kubecost --set kubecostToken=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n```\n\n#### Install kubectl-cost\n\n##### Krew\n\nIf you have [Krew](https://krew.sigs.k8s.io/), the kubectl plugin manager, installed:\n\n```sh\nkubectl krew install cost\n```\n\nThe Krew manifest can be found [here](https://github.com/kubecost/kubectl-cost/blob/master/krew.yaml).\n\n### Example Usage\n\nKube-Green offers aggregation-based cost monitoring with subcommands like namespace, deployment, controller, label, pod, and node. These subcommands provide cost information aggregated by their respective names. There are two modes: rate (default) and non-rate (historical). Rate mode shows projected monthly cost based on activity, while non-rate mode displays total cost for the specified window duration.\n\n#### Show the Projected Monthly Rate for Each Namespace\n\n```sh\nkubectl cost namespace --show-all-resources\n```\n\nOutput:\n\n```shell\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n| NAMESPACE         | CPU       | CPU EFF. | MEMORY   | MEMORY EFF. | GPU      | PV       | NETWORK  | SHARED COST | MONTHLY RATE (ALL) |\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n| kube-system       | 29.366083 | 0.066780 | 5.226317 | 0.928257    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         171.735257 |\n| kubecost-stage    | 6.602761  | 0.158069 | 1.824703 | 1.594699    | 0.000000 | 2.569600 | 0.000000 | 137.142857  |         148.139922 |\n| kubecost          | 6.499445  | 0.116629 | 1.442334 | 1.461370    | 0.000000 | 2.569600 | 0.000000 | 137.142857  |         147.654236 |\n| default           | 3.929377  | 0.000457 | 0.237937 | 0.283941    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         141.310171 |\n| logging           | 0.770976  | 0.003419 | 0.645843 | 0.260154    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         138.559676 |\n| frontend-services | 0.710425  | 0.003660 | 0.595008 | 0.244802    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         138.448290 |\n| data-science      | 0.000284  | 2.000000 | 0.009500 | 2.000000    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         137.152641 |\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n| SUMMED            | 47.879350 |          | 9.981644 |             | 0.000000 | 5.139200 | 0.000000 | 960.000000  |        1023.000194 |\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n```\n\n## üåê Introduction to Cloud Custodian\n\nOrganizations can utilize [Custodian](https://cloudcustodian.io/docs/index.html) as a powerful tool to effectively manage their cloud environments, with a strong emphasis on cost management. With Custodian, businesses can ensure compliance with security policies, enforce tag policies, perform garbage collection of unused resources, and actively manage costs‚Ää‚Äî‚Ääall within a unified and comprehensive solution.\n\nBy incorporating Custodian into their cloud operations, organizations gain the ability to optimize resource utilization, eliminate unnecessary expenses, and achieve greater control over their cloud costs, ultimately contributing to improved financial efficiency and savings.\n\n### üõ†Ô∏è Install Kubernetes Plugin\n\nThe Kubernetes Provider (Alpha) is an optional package which can be installed to enable writing policies that interact with Kubernetes related resources.\n\nFirst, ensure you have installed [the base Cloud Custodian application](https://cloudcustodian.io/docs/quickstart/index.html#install-cc). Cloud Custodian is a Python application and must run on an actively supported version.\n\nOnce the base install is complete, you are now ready to install the Kubernetes provider package using one of the following options:\n\n#### Option 1: Install Released Packages to Local Python Environment\n\n```sh\npip install c7n\npip install c7n_kube\n```\n\n#### Option 2: Install the Latest from the Repository\n\n```sh\ngit clone https://github.com/cloud-custodian/cloud-custodian.git\npip install -e ./cloud-custodian\npip install -e ./cloud-custodian/tools/c7n_kube\n```\n\n### üîó Connecting to Your Cluster\n\nThe Custodian Kubernetes provider automatically uses your Kubectl configuration or the config file set by the environment variable `KUBECONFIG`. [See the Kubernetes Docs](https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/) for more information.\n\n### ‚ö° Write Your First Policy\n\nA policy is the primary way that Custodian is configured to manage cloud resources. It is a YAML file that follows a predetermined schema to describe what you want Custodian to do.\n\nIn the example below, we will write a policy that filters for pods with the label \"custodian\" and deletes it:\n\nFirst, let's create a pod resource that we want to target with the policy:\n\n```sh\nkubectl run nginx --image=nginx --labels=name=custodian\nkubectl get pod -o wide --show-labels\n```\n\nOutput:\n\n```sh\nNAME    READY   STATUS    RESTARTS   AGE   IP           NODE     NOMINATED NODE   READINESS GATES   LABELS\nnginx   1/1     Running   0          24s   10.0.1.224   worker   <none>           <none>            name=custodian\n```\n\nNow in the example below, we will write a policy that filters for pods with the label \"custodian\" and deletes it:\n\n**Filename: custodian.yml**\n\n```yaml\npolicies:\n    - name: my-first-policy\n        description: |\n            Deletes pods with label name:custodian\n        resource: k8s.pod\n        filters:\n            - type: value\n                key: metadata.labels.name\n                value: custodian\n        actions:\n            - type: delete\n```\n\nNext, run the following command to execute the policy with Custodian:\n\n```sh\ncustodian run --output-dir=output custodian.yml --cache-period 0 -v\n```\n\n## üåü Introduction to Cloudability\n\n[Apptio Cloudability](https://www.apptio.com/products/cloudability/) streamlines Kubernetes cost management by automatically discovering and mapping cloud resources associated with each cluster, providing comprehensive billing data. Their interactive tool empowers users to gain insights into cluster costs and resource consumption within a chosen timeframe.\n\n![Cloudability](./Cloudability.jpg)\n\n### üîç Automatically Map Cluster Costs\n\nApptio Cloudability can automatically discover all the cloud resources backing each of your Kubernetes clusters and map this information back to detailed billing data. Users are provided with a specialized interactive tool that allows them to quickly understand the full cost of each cluster and underlying resource consumption within a definable time window.\n\n### üí° Intelligently Allocate Spend\n\nSophisticated algorithms analyze resource utilization metrics on each node‚Ää‚Äî‚ÄäCPU, memory, network, and disk‚Ää‚Äî‚Ääand evaluate pod-level Quality of Service settings so that these cluster costs can be split out and fairly allocated across Kubernetes constructs of Namespaces and Labels.\n\n## üåü Conclusion\n\nIn order to maximize the return on investment in cloud adoption, it is crucial to effectively manage Kubernetes costs. Conventional methods of calculating resource consumption and associated expenses often prove insufficient. As organizations progress, they may seek to enhance cost efficiency by utilizing resources strategically. üíÆ\n\nI hope this blog post has been helpful.\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordcount":1430}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://seifrajhi.github.io/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://seifrajhi.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞","item":"https://seifrajhi.github.io/blog/kubernetes-cost-optimization/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=47ae28bb567c9025f1fee24afb2d20c9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-LLPCCGNLH7', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LLPCCGNLH7"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LLPCCGNLH7', {"anonymize_ip":true,"send_page_view":false});gtag('config', 'GTM-5V895PDS', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seifrajhi.github.io/blog/kubernetes-cost-optimization/" data-baseprotocol="https:" data-basehost="seifrajhi.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;174&#x27;%20width=&#x27;150&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture><noscript><picture><source type="image/avif" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Saifeddine <br/> Rajhi</a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="Review My Resume" href="/cv/platform-engineer/">cv</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:55.885416666666664%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAADB0lEQVR42iWS20+aBxiHudn+gV3uetmyrMnSrWvSZVnrXGrWg6WiYs2Qo0ApU9EyUdACq9Hh2Vr9+JSTQilYRBFbrLRWC9SKTZzbdIfuYlfLsv/h2Ve9+OV9r54870H2eq/M05VF5oRJlu/NsRAJcD8okk1EWY7Ps55JopBXcPbUhzSc/wSH+gvGPCaGHY101H6Mz/QlYmc12gsnaPy2Dtkv28+Jz05zT0o8IEgwP6m5wFEfFe8SmB7n/Il3mTUpCA/0MCSOEEkG8Vgv0nL5PXwtcmwWDVVX67C7+5Ed7BRZX0oSmZ7gQWSWsFRjM1NHsIxkmIuFEMxy4tYGtkQf5l4n9mkRlXuQq/V1nNa2cK5Rj97WxeDUDLLDconDnefS2CnJVGApFj6yW01G2S8+o/xkFX3lSTxVn5LoNtFW8xnGa19R1WShsl+g+R84Y3NhbW1nKBA5NtwvblB6nJWMpB2GZ0iGZ8mlEhyWX/A4JlL9wTv47RY6rzfTZdWg0jUhvFnFxDx1pb+otDmpVtTT1tV7DPy5tEnmfpTQ1BjByTESQYG4OEYhnyMf9fNDzef0iAsYPXcwDEyhdA3QJwooLK2o9BouyeXUKq9hMJqPgX+Un/Hby6fHV5YM84tRXm2k+Htvl+R8iHZvH3r3KIYeHx1CDIXdTYWxjWqVDp3BiLqlFW8qw+BiBtnvu0VWsttksjv8uVvgVWkLf3aNH1MPSa+ts7Kc5juXG4dVi0KppL2zg8amJjTtvagsNmqarcil1N8ewTohItveLOEM/Ysz/B97WwVyG3ka5rNcT+QYTj9iMfUA/c3veRjysRbyMn6rmVvmy9wwXEIpgWu0JiobtHx07hvUDi+yX18WCCzsE1w4IP1ojfd77vCW1sXb6m4u9kmvk0pyRa3jZMXXdLdZSDvNZNxKCsNn+WnBjr/vBopaOWqVEoNJ9+Ztihy8eMLr8iYzqTTWUYEucY7WoUmWVrMsS4a1iir6dacYVZ8mYddQ8I+zcdfFiFOHt9eGw3ObfMTDQfIm/wOloUS8d3ynaAAAAABJRU5ErkJggg==" alt=""/><picture><source type="image/webp" data-srcset="/static/aa89597a3e00977bbce465bb28732f25/45f0d/image.webp 750w,/static/aa89597a3e00977bbce465bb28732f25/eedfa/image.webp 1080w,/static/aa89597a3e00977bbce465bb28732f25/e048d/image.webp 1366w,/static/aa89597a3e00977bbce465bb28732f25/37915/image.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png" data-srcset="/static/aa89597a3e00977bbce465bb28732f25/38de2/image.png 750w,/static/aa89597a3e00977bbce465bb28732f25/be7fa/image.png 1080w,/static/aa89597a3e00977bbce465bb28732f25/ee3cf/image.png 1366w,/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png 1920w" alt="Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞"/></picture><noscript><picture><source type="image/webp" srcSet="/static/aa89597a3e00977bbce465bb28732f25/45f0d/image.webp 750w,/static/aa89597a3e00977bbce465bb28732f25/eedfa/image.webp 1080w,/static/aa89597a3e00977bbce465bb28732f25/e048d/image.webp 1366w,/static/aa89597a3e00977bbce465bb28732f25/37915/image.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png" srcSet="/static/aa89597a3e00977bbce465bb28732f25/38de2/image.png 750w,/static/aa89597a3e00977bbce465bb28732f25/be7fa/image.png 1080w,/static/aa89597a3e00977bbce465bb28732f25/ee3cf/image.png 1366w,/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png 1920w" alt="Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption data-nosnippet="" class="image-title">Photo by Saifeddine Rajhi</figcaption></figure><h1>Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞</h1><div data-nosnippet="" class="blog-details"><time class="blog-createdat" dateTime="2024-10-28">Oct 28, 2024</time><span> ‚Ä¢ </span><span class="blog-time2read">8<!-- -->mins<!-- --> read</span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul data-nosnippet="" class="blog-tags"><li>Kubernetes</li><li>cost optimization</li><li>FinOps</li><li>cloud costs</li><li>K8s</li><li>DevOps</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div data-nosnippet="" class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><ul class="toc-list"></ul></ul></div><div class="content blog-content"><blockquote>
<p><strong>Efficient Tools for Streamlining FinOps üí∏</strong></p>
</blockquote>
<h2 id="-introduction" style="position:relative;"><a href="#-introduction" aria-label=" introduction permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üóØ Introduction</h2>
<p>As organizations embrace Kubernetes for their containerized workloads, the need for effective cost optimization becomes paramount. To navigate the complex landscape of cloud-native infrastructure, leveraging efficient tools is key to streamlining FinOps practices and maximizing cost savings. Fortunately, a range of efficient tools exists to streamline FinOps practices and drive significant savings.</p>
<p>In this article, we will discuss cutting-edge solutions such as <a href="https://www.apptio.com/products/cloudability/" target="_blank" rel="noopener noreferrer">Cloudability</a>, <a href="https://github.com/kube-green/kube-green" target="_blank" rel="noopener noreferrer">Kube-Green</a>, <a href="https://cloudcustodian.io/docs/index.html" target="_blank" rel="noopener noreferrer">Cloud Custodian</a>, and <a href="https://www.kubecost.com/" target="_blank" rel="noopener noreferrer">Kubecost</a>. Discover how these tools empower businesses to gain cost visibility, optimize resource utilization, and achieve financial excellence in their Kubernetes deployments. Let's dive into the world of Kubernetes cost optimization made easy. üí∏</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEuElEQVR42o2VC0wTdxzHQVjiZDMuGhMzExcXZ+Km2VzYI25zcY+w4WPzMRNFxWlwbi4zAwJuzkpw6iAIwsAWA5anpICltvIsj9Ier0JLQR590VpoodAXLS9p77673oSwRDN/yeV+d/f7ff6/+/7v97uAgGcYgEAejxdEu4H+65bmlh2HL3OkKz6NCmcCDh0KCnheY0As1jK/P9NHbIi5VcY9XUTMRVY/woqvY2KYIBYr+H9BdFXLWE9AtB/yZy7/t8jsaudPYiPY+rnHiV12LA87/3xAFgsLoMCcYuHBqFuCwbMVvbhEWKg8/ZSv3jLrTVI6EBz263MBGZ0kYsn2nzPLak+VdCBBPkHlq10+vtFD3h+ZQYMD3iSFDcG7zsYxGTt3BtOr03kIfCrsRuF91smcOjK6bQIp/R5f6RANssxB2jcCSY8JA4SKutZhRdjlMsdFrnAvsy+01v43OvTv5i3RTtO28kx2peOq3Ip06ZA3ptWKB6YpVNOVDeffg52dj+GKRvI6MYXIzI7uTz77MopOe3Hd7qI1AZtjX17Qf6G4AEMqa9WJ7ErXH4IeSGKvUJckRghN07BzCuDi5KODeIhc7TQVW+fARyf+qt26NbSeTlsnfoiDF7Llg2v3ZO9b0P8JMHXVEXaVO7GkFSWpRdTvshHU6J1Q17eDp3WhwgYkDbjxbW439p1JFb75zseDdNoaLpezt6XuAZoUE+ThBHEOfe8FBuikKzx8u9Z9J6MUwitsKl5mRvnwLJIHppDcZcX1hn68/v1VbDhwARy+ai6JXW775nT8G3Tq7pORkYBLiyHTmHXLj7yXGOCjoqxXjnKq3HEVPUjnyahzcjeqGsUQNdXjeIYQsZwyHE28jfbBEWhsIO9LdVBoXb3JaWk523eEEWbrtGLcYhqLzu8OYYBKPn/VsZv33DkCAs2dKqqiWQVnXga0TVycKOKBq+vHNZUcMz5g1A30m+cpWi9SVF2DH87H96insb+hUx/eaGhczgCHNar1pzIE0925eYDkLuUVl4DXJEShQorPecUILSlAcZ8GY1M+WN0UnLMkpmggv05KCoSVfvi8zYNzDExh8hwxTXon98TdIsUp6dAX3EBjYRZ+kUuwi1uMhLs1IDQWtI+NgTCboLI7obOOYl6phE6pRk+bymd7DMj6xiIYoNGGLSK5zrb5QBySj0X5QrdtxZ7UFETUVSKWX4Vm1Si0Fg9UZh8EagNudslR29oLKUdISsQan1JnJ5XjQPPghOi9o6yVDHR/9N8bWvUuybXkNKx/bZM3LIuN0DtcSNSj8BuhJXH+DsCuNJKJRQoyU2SAqBfoMlMgdJPe+gGHQtRuTAuPz9q4+DHea59cnSuQSB9IOqEw2r0yzTgNslPND00wOebRpocvReSkbjfZkFQqQ4G4c7xUprmakNf04bp3d6/47/wDmF4kdFg74CDbR+fp1Q0Ob0W3ATU9I9Sww0v6lTc7Sbtcb0uKiOe8H/T28a+2fREdstAh9BG02CmLQ5W2K1zxq0rLTNcE/VRpdHvGPfPTjlmS6hqaLMwRdWxc2mL+/l061Z86YP3nslbdJp5UffE7Vslb5dL+D0QthrAlMUHMdHnGL+Afp3pRTE6ca5AAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="finops" title="" src="/static/32c0f5eeac6b9b3897edfe08986d69f0/c5bb3/finops.png" srcset="/static/32c0f5eeac6b9b3897edfe08986d69f0/04472/finops.png 170w,
/static/32c0f5eeac6b9b3897edfe08986d69f0/9f933/finops.png 340w,
/static/32c0f5eeac6b9b3897edfe08986d69f0/c5bb3/finops.png 680w,
/static/32c0f5eeac6b9b3897edfe08986d69f0/00d43/finops.png 1000w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h2 id="introduction-to-kube-green-" style="position:relative;"><a href="#introduction-to-kube-green-" aria-label="introduction to kube green  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Introduction to Kube-Green üçÄ</h2>
<p>In the first paragraph of this tutorial, I will explain how Kube-Green was born and why it is useful for reducing the waste of resources.</p>
<h3 id="the-idea-of-kube-green-" style="position:relative;"><a href="#the-idea-of-kube-green-" aria-label="the idea of kube green  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Idea of Kube-Green üóØ</h3>
<p>In a Kubernetes cluster, non-production namespaces typically operate during business hours, which amounts to approximately 40 hours per week out of a total of 168 weekly hours. However, it's common for resources to be allocated to pods in these namespaces even when they are not actively in use. This results in unnecessary consumption of CPU and memory resources.</p>
<p><a href="https://github.com/kube-green/kube-green" target="_blank" rel="noopener noreferrer">Kube-Green</a> offers a simple solution to address this issue by halting all pods within those namespaces, effectively optimizing resource utilization during non-business hours.</p>
<h3 id="how-is-it-possible-" style="position:relative;"><a href="#how-is-it-possible-" aria-label="how is it possible  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How is it Possible? ü§î</h3>
<p>Kube-Green is a Kubernetes controller, which defines a Custom Resource Definition (CRD) called <code class="language-text">SleepInfo</code>. The <code class="language-text">SleepInfo</code> CRD defines when to stop and restart the pods in a namespace. For example, in development namespaces, it is possible to stop all the pods during non-business hours: wake up every morning from Monday to Friday and stop every night from Monday to Friday.</p>
<h3 id="hands-on-" style="position:relative;"><a href="#hands-on-" aria-label="hands on  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Hands-On üë∑</h3>
<p>To follow this guide, you should have <a href="https://kubernetes.io/docs/tasks/tools/#kubectl" target="_blank" rel="noopener noreferrer">kubectl</a> and <a href="https://kind.sigs.k8s.io/" target="_blank" rel="noopener noreferrer">kind</a> installed locally.</p>
<ul>
<li>The Kubernetes command line tool: <a href="https://kubernetes.io/docs/tasks/tools/#kubectl" target="_blank" rel="noopener noreferrer">kubectl</a></li>
<li><a href="https://docs.docker.com/get-started/get-docker/" target="_blank" rel="noopener noreferrer">Docker</a></li>
<li>Kubernetes cluster</li>
</ul>
<p>Now you have all the tools needed, let's go!</p>
<h3 id="Ô∏è-install-the-cert-manager" style="position:relative;"><a href="#%EF%B8%8F-install-the-cert-manager" aria-label="Ô∏è install the cert manager permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚û°Ô∏è Install the Cert-Manager</h3>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 14.117647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAf0lEQVR42m2L0Q7CIAxFKYNCC7Jp+P9/NOsbJrVsmqjx4eac9N663uGRwQ32btBi8af/DXwQvrv5V4MfjjdUakG5BL2lpL2wltVuNWhtybqo5XKGtknrVmPDw+eWp9uW0avL17RTQ6HspQaQGhexQiiC0CTC4Rzf/iL+Enbb3J/bcz9dnEft7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="cert" title="" src="/static/cd60065cedd4846166653cbe457c2c5c/c5bb3/cert.png" srcset="/static/cd60065cedd4846166653cbe457c2c5c/04472/cert.png 170w,
/static/cd60065cedd4846166653cbe457c2c5c/9f933/cert.png 340w,
/static/cd60065cedd4846166653cbe457c2c5c/c5bb3/cert.png 680w,
/static/cd60065cedd4846166653cbe457c2c5c/b12f7/cert.png 1020w,
/static/cd60065cedd4846166653cbe457c2c5c/b5a09/cert.png 1360w,
/static/cd60065cedd4846166653cbe457c2c5c/29007/cert.png 1600w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>With this command, the latest release of cert-manager will be installed. You can check the correct cert-manager deployment by verifying that all the pods are correctly running.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 10.588235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASUlEQVR42mOwM9X5qWum+UdLS/uPljYEa2ujsknBDBrGxn80TUz+axkY/AfR6hYW/w0NDf7rmhj/1wSKaWtp/QcqJArr6Oj8BwDhEDxboKZ1lQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="get-ns" title="" src="/static/9617f5bc987191d334570611a02ffa45/c5bb3/get-ns.png" srcset="/static/9617f5bc987191d334570611a02ffa45/04472/get-ns.png 170w,
/static/9617f5bc987191d334570611a02ffa45/9f933/get-ns.png 340w,
/static/9617f5bc987191d334570611a02ffa45/c5bb3/get-ns.png 680w,
/static/9617f5bc987191d334570611a02ffa45/b12f7/get-ns.png 1020w,
/static/9617f5bc987191d334570611a02ffa45/b5a09/get-ns.png 1360w,
/static/9617f5bc987191d334570611a02ffa45/29007/get-ns.png 1600w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="install-kube-green-" style="position:relative;"><a href="#install-kube-green-" aria-label="install kube green  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install Kube-Green „äô</h3>
<p>Install Kube-Green with the default static install. <a href="https://kube-green.dev/docs/install/" target="_blank" rel="noopener noreferrer">Click here</a> to see the different install methods supported.</p>
<p>Install Kube-Green with this command:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">kubectl apply <span class="token parameter variable">-f</span> https://github.com/kube-green/kube-green/releases/latest/download/kube-green.yaml</code></pre></div>
<p>This command creates a <code class="language-text">kube-green</code> namespace and deploys a <code class="language-text">kube-green-controller-manager</code>. You can check that the pod is correctly running:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">kubectl <span class="token parameter variable">-n</span> kube-green get pods</code></pre></div>
<h3 id="Ô∏è-setup-kube-green-in-dev-namespace" style="position:relative;"><a href="#%EF%B8%8F-setup-kube-green-in-dev-namespace" aria-label="Ô∏è setup kube green in dev namespace permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚û°Ô∏è Setup Kube-Green in Dev Namespace</h3>
<p>To setup Kube-Green, the <code class="language-text">SleepInfo</code> resource must be created in the <code class="language-text">dev</code> namespace. The <code class="language-text">SleepInfo</code> spec contains:</p>
<ul>
<li><code class="language-text">weekdays</code>: day of the week. <code class="language-text">*</code> is every day, <code class="language-text">1</code> is Monday, <code class="language-text">1-5</code> is from Monday to Friday.</li>
<li><code class="language-text">sleepAt</code>: time in hours and minutes (HH:mm) when the namespace will go to sleep. Valid values are, for example, <code class="language-text">19:00</code> or <code class="language-text">*:*</code> for every minute and every hour. Resources sleep will be deployments (setting replicas value to 0) and, if <code class="language-text">suspendCronjobs</code> option is set to true, cron jobs will be suspended.</li>
<li><code class="language-text">wakeUpAt</code> (optional): time in hours and minutes (HH:mm) when the namespace should be restored to the initial state (before sleep). Valid values are, for example, <code class="language-text">19:00</code> or <code class="language-text">*:*</code> for every minute and every hour. If wake up value is not set, the pod in the namespace will not be restored. So, you will need to deploy the initial namespace configuration to restore it.</li>
<li><code class="language-text">timeZone</code> (optional, default to UTC): time zone in IANA specification. For example, for Italian hour, set <code class="language-text">Europe/Rome</code>.</li>
<li><code class="language-text">suspendDeployments</code> (optional, default to true): if set to false, deployments will not be suspended.</li>
<li><code class="language-text">suspendCronJobs</code> (optional, default to false): if set to true, cronjobs will be suspended.</li>
<li><code class="language-text">excludeRef</code> (optional): an array of objects containing the resource to exclude from sleep. It can specify exactly the name of the specified resource or match based on the labels. The possible formats are:
<ul>
<li><code class="language-text">apiVersion</code>: version of the resource. Now it supports "apps/v1", "batch/v1beta1" and "batch/v1".</li>
<li><code class="language-text">kind</code>: the kind of resource. Now it supports "Deployment" and "CronJob".</li>
<li><code class="language-text">name</code>: the name of the resource or</li>
<li><code class="language-text">matchLabels</code>: an object of strings with labels to identify resources. <a href="https://kube-green.dev/docs/sleepinfo/" target="_blank" rel="noopener noreferrer">Click here</a> to see an example.</li>
</ul>
</li>
</ul>
<h3 id="example-" style="position:relative;"><a href="#example-" aria-label="example  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example üèó</h3>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>green.com/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> SleepInfo
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> working<span class="token punctuation">-</span>hours
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">weekdays</span><span class="token punctuation">:</span> <span class="token string">"1-5"</span>
    <span class="token key atrule">sleepAt</span><span class="token punctuation">:</span> <span class="token string">"20:00"</span>
    <span class="token key atrule">wakeUpAt</span><span class="token punctuation">:</span> <span class="token string">"08:00"</span>
    <span class="token key atrule">timeZone</span><span class="token punctuation">:</span> <span class="token string">"Europe/Rome"</span></code></pre></div>
<p>With this CRD, it's configured to sleep at 20:00 and wake up at 08:00 on weekdays only for Deployments.</p>
<h2 id="introduction-to-opencost-by-kubecost-" style="position:relative;"><a href="#introduction-to-opencost-by-kubecost-" aria-label="introduction to opencost by kubecost  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Introduction to OpenCost by Kubecost üí∞</h2>
<p><a href="https://github.com/kubecost/kubectl-cost" target="_blank" rel="noopener noreferrer">kubectl-cost</a> is a <a href="https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/" target="_blank" rel="noopener noreferrer">kubectl plugin</a> that provides easy CLI access to Kubernetes cost allocation metrics via the <a href="https://www.opencost.io/docs/api" target="_blank" rel="noopener noreferrer">OpenCost API</a>. It allows developers, DevOps, and others to quickly determine the cost &#x26; efficiency for any Kubernetes workload.</p>
<h3 id="opencost-setup" style="position:relative;"><a href="#opencost-setup" aria-label="opencost setup permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>OpenCost Setup</h3>
<p>OpenCost requires Prometheus for scraping metrics and data storage. Follow the steps below to install OpenCost.</p>
<h3 id="quick-start-installation-" style="position:relative;"><a href="#quick-start-installation-" aria-label="quick start installation  permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start Installation üìÅ</h3>
<p>These commands will get you started immediately with OpenCost.</p>
<h4 id="install-prometheus" style="position:relative;"><a href="#install-prometheus" aria-label="install prometheus permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install Prometheus</h4>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">helm <span class="token function">install</span> my-prometheus <span class="token parameter variable">--repo</span> https://prometheus-community.github.io/helm-charts prometheus <span class="token punctuation">\</span>
    <span class="token parameter variable">--namespace</span> prometheus --create-namespace <span class="token punctuation">\</span>
    <span class="token parameter variable">--set</span> <span class="token assign-left variable">pushgateway.enabled</span><span class="token operator">=</span>false <span class="token punctuation">\</span>
    <span class="token parameter variable">--set</span> <span class="token assign-left variable">alertmanager.enabled</span><span class="token operator">=</span>false <span class="token punctuation">\</span>
    <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/prometheus/extraScrapeConfigs.yaml</code></pre></div>
<h4 id="install-opencost" style="position:relative;"><a href="#install-opencost" aria-label="install opencost permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install OpenCost</h4>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">kubectl apply <span class="token parameter variable">--namespace</span> opencost <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/opencost.yaml</code></pre></div>
<h4 id="install-kubecost" style="position:relative;"><a href="#install-kubecost" aria-label="install kubecost permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install Kubecost</h4>
<p>This software requires that you have a running deployment of Kubecost in your cluster. The recommended path is to use Helm, but there are <a href="https://docs.kubecost.com/install" target="_blank" rel="noopener noreferrer">alternative install options</a>.</p>
<h5 id="helm-3" style="position:relative;"><a href="#helm-3" aria-label="helm 3 permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Helm 3</h5>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">helm repo <span class="token function">add</span> kubecost https://kubecost.github.io/cost-analyzer/
helm upgrade <span class="token parameter variable">-i</span> --create-namespace kubecost kubecost/cost-analyzer <span class="token parameter variable">--namespace</span> kubecost <span class="token parameter variable">--set</span> <span class="token assign-left variable">kubecostToken</span><span class="token operator">=</span><span class="token string">"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span></code></pre></div>
<h4 id="install-kubectl-cost" style="position:relative;"><a href="#install-kubectl-cost" aria-label="install kubectl cost permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install kubectl-cost</h4>
<h5 id="krew" style="position:relative;"><a href="#krew" aria-label="krew permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Krew</h5>
<p>If you have <a href="https://krew.sigs.k8s.io/" target="_blank" rel="noopener noreferrer">Krew</a>, the kubectl plugin manager, installed:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">kubectl krew <span class="token function">install</span> cost</code></pre></div>
<p>The Krew manifest can be found <a href="https://github.com/kubecost/kubectl-cost/blob/master/krew.yaml" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h3 id="example-usage" style="position:relative;"><a href="#example-usage" aria-label="example usage permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example Usage</h3>
<p>Kube-Green offers aggregation-based cost monitoring with subcommands like namespace, deployment, controller, label, pod, and node. These subcommands provide cost information aggregated by their respective names. There are two modes: rate (default) and non-rate (historical). Rate mode shows projected monthly cost based on activity, while non-rate mode displays total cost for the specified window duration.</p>
<h4 id="show-the-projected-monthly-rate-for-each-namespace" style="position:relative;"><a href="#show-the-projected-monthly-rate-for-each-namespace" aria-label="show the projected monthly rate for each namespace permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Show the Projected Monthly Rate for Each Namespace</h4>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">kubectl cost namespace --show-all-resources</code></pre></div>
<p>Output:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+
<span class="token operator">|</span> NAMESPACE         <span class="token operator">|</span> CPU       <span class="token operator">|</span> CPU EFF. <span class="token operator">|</span> MEMORY   <span class="token operator">|</span> MEMORY EFF. <span class="token operator">|</span> GPU      <span class="token operator">|</span> PV       <span class="token operator">|</span> NETWORK  <span class="token operator">|</span> SHARED COST <span class="token operator">|</span> MONTHLY RATE <span class="token punctuation">(</span>ALL<span class="token punctuation">)</span> <span class="token operator">|</span>
+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+
<span class="token operator">|</span> kube-system       <span class="token operator">|</span> <span class="token number">29.366083</span> <span class="token operator">|</span> <span class="token number">0.066780</span> <span class="token operator">|</span> <span class="token number">5.226317</span> <span class="token operator">|</span> <span class="token number">0.928257</span>    <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">137.142857</span>  <span class="token operator">|</span>         <span class="token number">171.735257</span> <span class="token operator">|</span>
<span class="token operator">|</span> kubecost-stage    <span class="token operator">|</span> <span class="token number">6.602761</span>  <span class="token operator">|</span> <span class="token number">0.158069</span> <span class="token operator">|</span> <span class="token number">1.824703</span> <span class="token operator">|</span> <span class="token number">1.594699</span>    <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">2.569600</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">137.142857</span>  <span class="token operator">|</span>         <span class="token number">148.139922</span> <span class="token operator">|</span>
<span class="token operator">|</span> kubecost          <span class="token operator">|</span> <span class="token number">6.499445</span>  <span class="token operator">|</span> <span class="token number">0.116629</span> <span class="token operator">|</span> <span class="token number">1.442334</span> <span class="token operator">|</span> <span class="token number">1.461370</span>    <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">2.569600</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">137.142857</span>  <span class="token operator">|</span>         <span class="token number">147.654236</span> <span class="token operator">|</span>
<span class="token operator">|</span> default           <span class="token operator">|</span> <span class="token number">3.929377</span>  <span class="token operator">|</span> <span class="token number">0.000457</span> <span class="token operator">|</span> <span class="token number">0.237937</span> <span class="token operator">|</span> <span class="token number">0.283941</span>    <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">137.142857</span>  <span class="token operator">|</span>         <span class="token number">141.310171</span> <span class="token operator">|</span>
<span class="token operator">|</span> logging           <span class="token operator">|</span> <span class="token number">0.770976</span>  <span class="token operator">|</span> <span class="token number">0.003419</span> <span class="token operator">|</span> <span class="token number">0.645843</span> <span class="token operator">|</span> <span class="token number">0.260154</span>    <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">137.142857</span>  <span class="token operator">|</span>         <span class="token number">138.559676</span> <span class="token operator">|</span>
<span class="token operator">|</span> frontend-services <span class="token operator">|</span> <span class="token number">0.710425</span>  <span class="token operator">|</span> <span class="token number">0.003660</span> <span class="token operator">|</span> <span class="token number">0.595008</span> <span class="token operator">|</span> <span class="token number">0.244802</span>    <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">137.142857</span>  <span class="token operator">|</span>         <span class="token number">138.448290</span> <span class="token operator">|</span>
<span class="token operator">|</span> data-science      <span class="token operator">|</span> <span class="token number">0.000284</span>  <span class="token operator">|</span> <span class="token number">2.000000</span> <span class="token operator">|</span> <span class="token number">0.009500</span> <span class="token operator">|</span> <span class="token number">2.000000</span>    <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">137.142857</span>  <span class="token operator">|</span>         <span class="token number">137.152641</span> <span class="token operator">|</span>
+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+
<span class="token operator">|</span> SUMMED            <span class="token operator">|</span> <span class="token number">47.879350</span> <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">9.981644</span> <span class="token operator">|</span>             <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">5.139200</span> <span class="token operator">|</span> <span class="token number">0.000000</span> <span class="token operator">|</span> <span class="token number">960.000000</span>  <span class="token operator">|</span>        <span class="token number">1023.000194</span> <span class="token operator">|</span>
+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+</code></pre></div>
<h2 id="-introduction-to-cloud-custodian" style="position:relative;"><a href="#-introduction-to-cloud-custodian" aria-label=" introduction to cloud custodian permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üåê Introduction to Cloud Custodian</h2>
<p>Organizations can utilize <a href="https://cloudcustodian.io/docs/index.html" target="_blank" rel="noopener noreferrer">Custodian</a> as a powerful tool to effectively manage their cloud environments, with a strong emphasis on cost management. With Custodian, businesses can ensure compliance with security policies, enforce tag policies, perform garbage collection of unused resources, and actively manage costs‚Ää‚Äî‚Ääall within a unified and comprehensive solution.</p>
<p>By incorporating Custodian into their cloud operations, organizations gain the ability to optimize resource utilization, eliminate unnecessary expenses, and achieve greater control over their cloud costs, ultimately contributing to improved financial efficiency and savings.</p>
<h3 id="Ô∏è-install-kubernetes-plugin" style="position:relative;"><a href="#%EF%B8%8F-install-kubernetes-plugin" aria-label="Ô∏è install kubernetes plugin permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üõ†Ô∏è Install Kubernetes Plugin</h3>
<p>The Kubernetes Provider (Alpha) is an optional package which can be installed to enable writing policies that interact with Kubernetes related resources.</p>
<p>First, ensure you have installed <a href="https://cloudcustodian.io/docs/quickstart/index.html#install-cc" target="_blank" rel="noopener noreferrer">the base Cloud Custodian application</a>. Cloud Custodian is a Python application and must run on an actively supported version.</p>
<p>Once the base install is complete, you are now ready to install the Kubernetes provider package using one of the following options:</p>
<h4 id="option-1-install-released-packages-to-local-python-environment" style="position:relative;"><a href="#option-1-install-released-packages-to-local-python-environment" aria-label="option 1 install released packages to local python environment permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Option 1: Install Released Packages to Local Python Environment</h4>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">pip <span class="token function">install</span> c7n
pip <span class="token function">install</span> c7n_kube</code></pre></div>
<h4 id="option-2-install-the-latest-from-the-repository" style="position:relative;"><a href="#option-2-install-the-latest-from-the-repository" aria-label="option 2 install the latest from the repository permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Option 2: Install the Latest from the Repository</h4>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token function">git</span> clone https://github.com/cloud-custodian/cloud-custodian.git
pip <span class="token function">install</span> <span class="token parameter variable">-e</span> ./cloud-custodian
pip <span class="token function">install</span> <span class="token parameter variable">-e</span> ./cloud-custodian/tools/c7n_kube</code></pre></div>
<h3 id="-connecting-to-your-cluster" style="position:relative;"><a href="#-connecting-to-your-cluster" aria-label=" connecting to your cluster permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üîó Connecting to Your Cluster</h3>
<p>The Custodian Kubernetes provider automatically uses your Kubectl configuration or the config file set by the environment variable <code class="language-text">KUBECONFIG</code>. <a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener noreferrer">See the Kubernetes Docs</a> for more information.</p>
<h3 id="-write-your-first-policy" style="position:relative;"><a href="#-write-your-first-policy" aria-label=" write your first policy permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚ö° Write Your First Policy</h3>
<p>A policy is the primary way that Custodian is configured to manage cloud resources. It is a YAML file that follows a predetermined schema to describe what you want Custodian to do.</p>
<p>In the example below, we will write a policy that filters for pods with the label "custodian" and deletes it:</p>
<p>First, let's create a pod resource that we want to target with the policy:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">kubectl run nginx <span class="token parameter variable">--image</span><span class="token operator">=</span>nginx <span class="token parameter variable">--labels</span><span class="token operator">=</span>name<span class="token operator">=</span>custodian
kubectl get pod <span class="token parameter variable">-o</span> wide --show-labels</code></pre></div>
<p>Output:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">NAME    READY   STATUS    RESTARTS   AGE   IP           NODE     NOMINATED NODE   READINESS GATES   LABELS
nginx   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          24s   <span class="token number">10.0</span>.1.224   worker   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>            <span class="token assign-left variable">name</span><span class="token operator">=</span>custodian</code></pre></div>
<p>Now in the example below, we will write a policy that filters for pods with the label "custodian" and deletes it:</p>
<p><strong>Filename: custodian.yml</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">policies</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>first<span class="token punctuation">-</span>policy
        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            Deletes pods with label name:custodian</span>
        <span class="token key atrule">resource</span><span class="token punctuation">:</span> k8s.pod
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> value
                <span class="token key atrule">key</span><span class="token punctuation">:</span> metadata.labels.name
                <span class="token key atrule">value</span><span class="token punctuation">:</span> custodian
        <span class="token key atrule">actions</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> delete</code></pre></div>
<p>Next, run the following command to execute the policy with Custodian:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">custodian run --output-dir<span class="token operator">=</span>output custodian.yml --cache-period <span class="token number">0</span> <span class="token parameter variable">-v</span></code></pre></div>
<h2 id="-introduction-to-cloudability" style="position:relative;"><a href="#-introduction-to-cloudability" aria-label=" introduction to cloudability permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üåü Introduction to Cloudability</h2>
<p><a href="https://www.apptio.com/products/cloudability/" target="_blank" rel="noopener noreferrer">Apptio Cloudability</a> streamlines Kubernetes cost management by automatically discovering and mapping cloud resources associated with each cluster, providing comprehensive billing data. Their interactive tool empowers users to gain insights into cluster costs and resource consumption within a chosen timeframe.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 45.294117647058826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHu1UwK/8QAGBAAAgMAAAAAAAAAAAAAAAAAABARIUH/2gAIAQEAAQUCLIe//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEg/9oACAEBAAY/ApZ//8QAGxABAAICAwAAAAAAAAAAAAAAAQAhESAxUZH/2gAIAQEAAT8hs4JnoexC3of/2gAMAwEAAgADAAAAEC8f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQIBAT8QV//EAB0QAQABAwUAAAAAAAAAAAAAAAEAEBGxIVFx0fD/2gAIAQEAAT8Q1LAm62ngdRMgXmhMhgn/2Q=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="Cloudability" title="" src="/static/55bbf8b29567b9fa7b8cddb55a8f5b26/7bf67/Cloudability.jpg" srcset="/static/55bbf8b29567b9fa7b8cddb55a8f5b26/651be/Cloudability.jpg 170w,
/static/55bbf8b29567b9fa7b8cddb55a8f5b26/d30a3/Cloudability.jpg 340w,
/static/55bbf8b29567b9fa7b8cddb55a8f5b26/7bf67/Cloudability.jpg 680w,
/static/55bbf8b29567b9fa7b8cddb55a8f5b26/990cb/Cloudability.jpg 1020w,
/static/55bbf8b29567b9fa7b8cddb55a8f5b26/c44b8/Cloudability.jpg 1360w,
/static/55bbf8b29567b9fa7b8cddb55a8f5b26/b17f8/Cloudability.jpg 1600w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h3 id="-automatically-map-cluster-costs" style="position:relative;"><a href="#-automatically-map-cluster-costs" aria-label=" automatically map cluster costs permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üîç Automatically Map Cluster Costs</h3>
<p>Apptio Cloudability can automatically discover all the cloud resources backing each of your Kubernetes clusters and map this information back to detailed billing data. Users are provided with a specialized interactive tool that allows them to quickly understand the full cost of each cluster and underlying resource consumption within a definable time window.</p>
<h3 id="-intelligently-allocate-spend" style="position:relative;"><a href="#-intelligently-allocate-spend" aria-label=" intelligently allocate spend permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üí° Intelligently Allocate Spend</h3>
<p>Sophisticated algorithms analyze resource utilization metrics on each node‚Ää‚Äî‚ÄäCPU, memory, network, and disk‚Ää‚Äî‚Ääand evaluate pod-level Quality of Service settings so that these cluster costs can be split out and fairly allocated across Kubernetes constructs of Namespaces and Labels.</p>
<h2 id="-conclusion" style="position:relative;"><a href="#-conclusion" aria-label=" conclusion permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üåü Conclusion</h2>
<p>In order to maximize the return on investment in cloud adoption, it is crucial to effectively manage Kubernetes costs. Conventional methods of calculating resource consumption and associated expenses often prove insufficient. As organizations progress, they may seek to enhance cost efficiency by utilizing resources strategically. üíÆ</p>
<p>I hope this blog post has been helpful.</p>
<br>
<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>
<blockquote>
<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>
</blockquote>
<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>
<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href="https://www.linkedin.com/in/rajhi-saif/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/rajhi-saif/</a></p>
<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href="https://x.com/rajhisaifeddine" target="_blank" rel="noopener noreferrer">https://x.com/rajhisaifeddine</a></p>
<p><strong>The end ‚úåüèª</strong></p>
<h1 align="center">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>
<p><strong>üìÖ Stay updated</strong></p>
<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p></div></div><div id="content-end"></div></article><div data-nosnippet="" class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div><br/><br/><br/></main><aside class="blogpost-sidebar"><div data-nosnippet="" class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/kubernetes-pod-priority-preemption/">Kubernetes Pod Priority and Preemption: How to Ensure Your Critical Pods Get the Resources They Need üöÄ<!-- --> ‚Üí</a><a rel="prev" class="prev-post" href="/blog/kubernetes-networking-istio-sidecarless/">‚Üê <!-- -->Kubernetes Networking with Ambient: Istio&#x27;s Sidecarless Innovation ‚ò∏</a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer data-nosnippet=""><div class="footer-wrapper"><div data-nosnippet="" class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="linkedin" href="https://www.linkedin.com/in/rajhi-saif/" title="Saifeddine Rajhi on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="github" href="https://github.com/seifrajhi" title="Saifeddine Rajhi on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" eventCategory="social" eventAction="click" eventLabel="email" href="mailto:rajhiseif@gmail.com" title="Saifeddine Rajhi&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg><span>Email</span></a></li><li class="social-item social-X/Twitter"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="X/Twitter" href="https://x.com/RajhiSaifeddine" title="Saifeddine Rajhi on X/X/Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg><span>X/Twitter</span></a></li><li class="social-item social-reddit"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="reddit" href="https://www.reddit.com/user/ScoreApprehensive992/" title="Saifeddine Rajhi on Reddit" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit-alien" class="svg-inline--fa fa-reddit-alien fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z"></path></svg><span>Reddit</span></a></li><li class="social-item social-stackoverflow"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://stackoverflow.com/users/21897244/saifeddine-rajhi" title="Saifeddine Rajhi on StackOverflow" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg><span>StackOverflow</span></a></li><li class="social-item social-Goodreads"><a rel="me" eventLabel="StackOverflow" href="https://www.goodreads.com/user/show/176103378-saifeddine" title="Saifeddine Rajhi on Goodreads" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="goodreads" class="svg-inline--fa fa-goodreads fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9 0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9 0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"></path></svg><span>Goodreads</span></a></li><li class="social-item social-osi"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://ossinsight.io/analyze/seifrajhi" title="Saifeddine Rajhi on OSSInsights" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="osi" class="svg-inline--fa fa-osi fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M8 266.44C10.3 130.64 105.4 34 221.8 18.34c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7q-26.7-69.45-53.4-139c-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8a71.47 71.47 0 0 0-64.5-82.2c-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4q-26.85 69.9-53.7 139.9c-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119-24.9-49.2-25.2-87.7-26.8-108.7zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3q22.35-58.65 45-117.3c1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6a91.64 91.64 0 0 1 45.2 90.4c-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6q22.8 58.8 45.2 117.7c1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161-13.7-117.5-119.4-214.8-255.5-198-106.1 13-195.3 102.5-197.1 225.8z"></path></svg><span>OSSInsights</span></a></li><li class="social-item social-devstats"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://devstats.cluster.fun/?user=seifrajhi" title="Saifeddine Rajhi on DevStats" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-line" class="svg-inline--fa fa-chart-line fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg><span>DevStats</span></a></li><li class="social-item social-RSS"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="RSS" href="https://seifrajhi.github.io/rss.xml" title="Subscribe to my blog post" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg><span>RSS</span></a></li></ul></div><div class="copyright">Saifeddine Rajhi ¬© 1994 - <!-- -->2024<!-- --> <br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/saifrajhi">0C3B BABB 8BC1 EA2B</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/kubernetes-cost-optimization/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-26cd7e4ffafe4b5866ba.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88fb5c28d68e831e730a.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-83bdb4e48c18bf191297.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-6c9f539d882b31737b03.js\"],\"component---src-pages-cv-platform-engineer-js\":[\"/component---src-pages-cv-platform-engineer-js-13625961a6abec0cbdf1.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-391336a56f413aaa34c1.js\"],\"component---src-pages-thoughts-js\":[\"/component---src-pages-thoughts-js-fe54f831bbb3f7f31564.js\"],\"component---src-templates-blog-template-js\":[\"/component---src-templates-blog-template-js-43b163172ed2ce4e492d.js\"],\"component---src-templates-thought-template-js\":[\"/component---src-templates-thought-template-js-7ddf4a0a920bf599f1a2.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="0ebd81c81e97d97f085d";</script><script src="/webpack-runtime-3d388d6978483882f4b9.js" async></script><script src="/framework-c989293af61a95023f7f.js" async></script><script src="/app-26cd7e4ffafe4b5866ba.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>