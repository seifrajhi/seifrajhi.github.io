<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" property="og:description" content="How AWS Controllers for Kubernetes (ACK) enables seamless management of AWS services directly from your Kubernetes cluster."/><meta data-react-helmet="true" name="keywords" content="AWS EKS,Kubernetes,AWS Controllers for Kubernetes,Cloud-native,Service management"/><meta data-react-helmet="true" name="author" content="@RajhiSaifeddine"/><meta data-react-helmet="true" property="og:title" content="AWS Controllers for Kubernetes (ACK): Managing AWS services from Kubernetes - Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@RajhiSaifeddine"/><meta data-react-helmet="true" name="twitter:title" content="AWS Controllers for Kubernetes (ACK): Managing AWS services from Kubernetes - Blog"/><meta data-react-helmet="true" name="twitter:description" content="How AWS Controllers for Kubernetes (ACK) enables seamless management of AWS services directly from your Kubernetes cluster."/><meta data-react-helmet="true" name="image" property="og:image" content="https://seifrajhi.github.io/static/337542faae08df3f2211e006ed8e7548/20b93/ack-cover.jpg"/><meta data-react-helmet="true" name="twitter:image" content="https://seifrajhi.github.io/static/337542faae08df3f2211e006ed8e7548/20b93/ack-cover.jpg"/><meta data-react-helmet="true" property="og:url" content="https://seifrajhi.github.io/blog/aws-controllers-for-kubernetes-ack/"/><meta name="theme-color" content="#ffffff"/><link rel="stylesheet" href="/styles.38c2a06e874c487e61a0.css"/><link rel="stylesheet"/><link rel="alternate" type="application/rss+xml" title="Saifeddine Rajhi&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">AWS Controllers for Kubernetes (ACK): Managing AWS services from Kubernetes - Blog by Saifeddine Rajhi</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/337542faae08df3f2211e006ed8e7548/20b93/ack-cover.jpg","headline":"AWS Controllers for Kubernetes (ACK): Managing AWS services from Kubernetes","dateCreated":"2024-10-19","datePublished":"2024-10-19","dateModified":"2024-10-19","inLanguage":"en-US","isFamilyFriendly":true,"isAccessibleForFree":true,"author":{"@type":"Person","name":"Saifeddine Rajhi","url":"https://seifrajhi.github.io"},"publisher":{"@type":"Organization","name":"Saifeddine Rajhi's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seifrajhi.github.io/blog/aws-controllers-for-kubernetes-ack/"},"keywords":["AWS EKS","Kubernetes","AWS Controllers for Kubernetes","Cloud-native","Service management"],"genre":["Platform engineer","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\n> **A Path to AWS Service Control in Kubernetes**\n\n## ü§ñ Introduction\n\n[AWS Controllers for Kubernetes (ACK)](https://aws-controllers-k8s.github.io/community/docs/community/overview/) is an open-source project that lets you define and use AWS service resources directly from Kubernetes. This means that you can manage all of your application's resources, including its infrastructure and dependencies, from a single place.\n\nACK works by extending the Kubernetes API with custom resource definitions (CRDs) and custom controllers. These CRDs and controllers allow you to define and manage AWS service resources using the same Kubernetes constructs that you use to manage your application's other resources.\n\nACK makes it easy to take advantage of AWS managed services for your Kubernetes applications. With ACK, you don't need to worry about provisioning or managing the underlying infrastructure for these services. You can simply define the AWS service resources that you need in your Kubernetes cluster, and ACK will take care of the rest.\n\nThis article aims to discover this service and test it by installing a controller within a Kubernetes cluster.\n\n### üåü What is the benefit of ACK?\n\nACK can be considered as an additional abstraction for managing AWS resources that is added to the existing solutions. Today, there are three levels of \"abstraction\" for infrastructure as code:\n\n1. **Level 1**: Infrastructure as code defined as shell scripts. In this category, we can cite the launching of commands via the [AWS CLI](https://aws.amazon.com/cli/).\n2. **Level 2**: The use of tools such as [Puppet](https://puppet.com/), [Terraform](https://www.terraform.io/), [Ansible](https://www.ansible.com/), and [Salt](https://saltproject.io/) to define step by step the infrastructure that we want to put in place.\n3. **Level 3**: We only define the desired final state of the infrastructure. This is the level that ACK belongs to.\n\nCurrently, the use of AWS and Kubernetes represents a design complexity that is not easy to understand. Indeed, these architectures require the articulation of resources with each other in order to allow the general infrastructure to function properly. The understanding of the infrastructure in its entirety is therefore necessary and requires switching very regularly between the different technologies.\n\nAWS offers us this new tool to allow its users to create new resources and control their current state. Thus, the user would only have to define the state of the desired AWS resource, and the controller would take care of bringing the resource from the current state to the desired state.\n\n### ‚öôÔ∏è How ACK works\n\nOur goal with ACK is to provide a consistent Kubernetes interface for AWS, regardless of the AWS service API. One example of this is ensuring field names and identifiers are normalized and tags are handled the same way across AWS resources.\n\n![ACK Workflow](./ack.png)\n\nAs depicted above, from a high level, the ACK workflow is as follows:\n\n1. **Artifact Generation**: We, as in \"the project team led by the authors\", generate and maintain a collection of artifacts (binaries, container images, Helm charts, etc.). These artifacts are automatically derived from the AWS services APIs and represent the business logic of how to manage AWS resources from within Kubernetes.\n2. **Controller Installation**: As a cluster admin, you select one or more ACK controllers you want to install and configure for a cluster you're responsible for.\n3. **Custom Resource Creation**: As an application developer, you create (Kubernetes) custom resources representing AWS resources.\n4. **Resource Management**: The respective ACK controller (installed in step 2) manages said custom resources and with it the underlying AWS resources. Based on the custom resource defined in step 3, the controller creates, updates, or deletes the underlying AWS resources using the AWS APIs.\n\n## üõ†Ô∏è Hands-On for Testing ACK on a Kubernetes Cluster\n\n**Required Tools:**\n\n- üê≥ **Docker**\n- üì¶ **kubectl**\n- üéõÔ∏è **Helm 3**\n- ‚ò∏Ô∏è **eksctl**\n\n### Setting Up the EKS Cluster\n\nTo test this service, quickly set up an EKS Kubernetes cluster using the following command:\n\n```sh\neksctl create cluster --name=ack-demo --nodes=2 --region=eu-west-1\n```\n\nYou can consult the [CloudFormation stack on AWS](https://aws.amazon.com/cloudformation/) to learn more about the resources created previously.\n\n### Installing an ACK Service Controller with Helm (Recommended)\n\nThe recommended way to install an ACK service controller for Kubernetes is to use [Helm 3.8+](https://helm.sh/docs/intro/install/).\n\nEach ACK service controller has a separate Helm chart that installs the necessary supporting artifacts as a Kubernetes Deployment. This includes the ACK service controller, custom resource definitions (CRDs), and Kubernetes Role-Based Access Control (RBAC) manifests.\n\nHelm charts for ACK service controllers can be found in the ACK registry within the [Amazon ECR Public Gallery](https://gallery.ecr.aws/aws-controllers-k8s). To find a Helm chart for a specific service, you can go to `gallery.ecr.aws/aws-controllers-k8s/$SERVICENAME-chart`. For example, the link to the ACK service controller Helm chart for Amazon Simple Storage Service (Amazon S3) is [gallery.ecr.aws/aws-controllers-k8s/s3-chart](https://gallery.ecr.aws/aws-controllers-k8s/s3-chart).\n\nHelm charts for individual ACK service controllers are tagged with their release version. You can find charts for different releases under the **Image tags** section in the chart repository on the ECR Public Gallery.\n\nBefore installing a Helm chart, you can query the controller repository to find the latest release tag. This tag will correspond with a version of the Helm chart and a controller image. Then, you can use the Helm CLI to log into the ECR public Helm registry and install the chart.\n\n```sh\nexport SERVICE=s3\nexport RELEASE_VERSION=$(curl -sL https://api.github.com/repos/aws-controllers-k8s/${SERVICE}-controller/releases/latest | jq -r '.tag_name | ltrimstr(\"v\")')\nexport ACK_SYSTEM_NAMESPACE=ack-system\nexport AWS_REGION=eu-west-1\n\naws ecr-public get-login-password --region us-east-1 | helm registry login --username AWS --password-stdin public.ecr.aws\nhelm install --create-namespace -n $ACK_SYSTEM_NAMESPACE ack-$SERVICE-controller \\\n    oci://public.ecr.aws/aws-controllers-k8s/$SERVICE-chart --version=$RELEASE_VERSION --set=aws.region=$AWS_REGION\n```\n\nThe `helm install` command should return relevant installation information:\n\n```yaml\nNAME: ack-s3-controller\nLAST DEPLOYED: Thu Nov 02 10:30:16 2023\nNAMESPACE: ack-system\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\nNOTES: ...\n```\n\nTo verify that the Helm chart was installed, use the `helm list` command:\n\n```sh\nhelm list --namespace $ACK_SYSTEM_NAMESPACE -o yaml\n```\n\n## üîê Configure IAM Permissions\n\n### Set up ACK with IAM Roles for Service Accounts\n\nIAM Roles for Service Accounts (IRSA) is a system that automates the provisioning and rotation of IAM temporary credentials (called a Web Identity) that a Kubernetes ServiceAccount can use to call AWS APIs.\n\nThe primary advantage of IRSA is that Kubernetes Pods which use the ServiceAccount associated with an IAM Role can have a reduced IAM permission footprint compared to the IAM Role in use for the Kubernetes EC2 worker node (known as the EC2 Instance Profile Role). This security concept is known as **Least Privilege**.\n\n### Step 1: Create an OIDC Identity Provider for Your Cluster\n\nCreate an OpenID Connect (OIDC) identity provider for your EKS cluster using the `eksctl utils` command:\n\n```shell\nexport EKS_CLUSTER_NAME=<eks cluster name>\nexport AWS_REGION=<aws region id>\neksctl utils associate-iam-oidc-provider --cluster $EKS_CLUSTER_NAME --region $AWS_REGION --approve\n```\n\nFor detailed instructions, refer to the [Amazon EKS documentation](https://docs.aws.amazon.com/eks/latest/userguide/enable-iam-roles-for-service-accounts.html) on how to create an IAM OIDC provider for your cluster.\n\n### Step 2. Create an IAM role and policy for your service¬†account\n\n```shell\n# Update the service name variables as needed\nSERVICE=\"s3\"\nAWS_ACCOUNT_ID=$(aws sts get-caller-identity --query \"Account\" --output text)\nOIDC_PROVIDER=$(aws eks describe-cluster --name $EKS_CLUSTER_NAME --region $AWS_REGION --query \"cluster.identity.oidc.issuer\" --output text | sed -e \"s/^https:\\/\\///\")\nACK_K8S_NAMESPACE=ack-system\n\nACK_K8S_SERVICE_ACCOUNT_NAME=ack-$SERVICE-controller\n\nread -r -d '' TRUST_RELATIONSHIP <<EOF\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Federated\": \"arn:aws:iam::${AWS_ACCOUNT_ID}:oidc-provider/${OIDC_PROVIDER}\"\n      },\n      \"Action\": \"sts:AssumeRoleWithWebIdentity\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"${OIDC_PROVIDER}:sub\": \"system:serviceaccount:${ACK_K8S_NAMESPACE}:${ACK_K8S_SERVICE_ACCOUNT_NAME}\"\n        }\n      }\n    }\n  ]\n}\nEOF\n\necho \"${TRUST_RELATIONSHIP}\" > trust.json\n\nACK_CONTROLLER_IAM_ROLE=\"ack-${SERVICE}-controller\"\nACK_CONTROLLER_IAM_ROLE_DESCRIPTION=\"IRSA role for ACK ${SERVICE} controller deployment on EKS cluster using Helm charts\"\naws iam create-role --role-name \"${ACK_CONTROLLER_IAM_ROLE}\" --assume-role-policy-document file://trust.json --description \"${ACK_CONTROLLER_IAM_ROLE_DESCRIPTION}\"\nACK_CONTROLLER_IAM_ROLE_ARN=$(aws iam get-role --role-name=$ACK_CONTROLLER_IAM_ROLE --query Role.Arn --output text)\n```\n\n### Attach IAM policy to the IAM role:\n\n```shell\n# Download the recommended managed and inline policies and apply them to the\n# newly created IRSA role\nBASE_URL=https://raw.githubusercontent.com/aws-controllers-k8s/${SERVICE}-controller/main\nPOLICY_ARN_URL=${BASE_URL}/config/iam/recommended-policy-arn\nPOLICY_ARN_STRINGS=\"$(wget -qO- ${POLICY_ARN_URL})\"\n\nINLINE_POLICY_URL=${BASE_URL}/config/iam/recommended-inline-policy\nINLINE_POLICY=\"$(wget -qO- ${INLINE_POLICY_URL})\"\n\nwhile IFS= read -r POLICY_ARN; do\n    echo -n \"Attaching $POLICY_ARN ... \"\n    aws iam attach-role-policy \\\n        --role-name \"${ACK_CONTROLLER_IAM_ROLE}\" \\\n        --policy-arn \"${POLICY_ARN}\"\n    echo \"ok.\"\ndone <<< \"$POLICY_ARN_STRINGS\"\n\nif [ ! -z \"$INLINE_POLICY\" ]; then\n    echo -n \"Putting inline policy ... \"\n    aws iam put-role-policy \\\n        --role-name \"${ACK_CONTROLLER_IAM_ROLE}\" \\\n        --policy-name \"ack-recommended-policy\" \\\n        --policy-document \"$INLINE_POLICY\"\n    echo \"ok.\"\nfi\n```\n\n### Step 3. Associate an IAM role to a service account and restart deployment\n\nIf you installed your [ACK service controller using a Helm chart](https://aws-controllers-k8s.github.io/community/docs/user-docs/install/), then a service account already exists on your cluster.\n\n> However, it is still neccessary to associate an IAM role with the service account.\n\nVerify that your service account exists using kubectl describe:\n\n```shell\nkubectl describe serviceaccount/$ACK_K8S_SERVICE_ACCOUNT_NAME -n $ACK_K8S_NAMESPACE\n```\n\nNote that the Amazon Resource Name (ARN) of the IAM role that you created is not yet set as an annotation for the service account.\n\nUse the following commands to associate an IAM role to a service account:\n\n```shell\n# Annotate the service account with the ARN\nexport IRSA_ROLE_ARN=eks.amazonaws.com/role-arn=$ACK_CONTROLLER_IAM_ROLE_ARN\nkubectl annotate serviceaccount -n $ACK_K8S_NAMESPACE $ACK_K8S_SERVICE_ACCOUNT_NAME $IRSA_ROLE_ARN\n```\n\nRestart ACK service controller deployment using the following commands. The restart will update service controller pods with IRSA environment variables:\n\n```shell\n# Note the deployment name for ACK service controller from following command\nkubectl get deployments -n $ACK_K8S_NAMESPACE\nkubectl -n $ACK_K8S_NAMESPACE rollout restart deployment <ACK deployment name>\n```\n\n## Create an ACK Resource\n\n**Create an S3 bucket:**\n\n```shell\nexport AWS_ACCOUNT_ID=$(aws sts get-caller-identity --query \"Account\" --output text)\nexport BUCKET_NAME=my-ack-s3-bucket-$AWS_ACCOUNT_ID\nread -r -d '' BUCKET_MANIFEST <<EOF\napiVersion: s3.services.k8s.aws/v1alpha1\nkind: Bucket\nmetadata:\n  name: $BUCKET_NAME\nspec:\n  name: $BUCKET_NAME\nEOF\necho \"${BUCKET_MANIFEST}\" > bucket.yaml\nkubectl create -f bucket.yaml\nkubectl describe bucket/$BUCKET_NAME\n```\n\n**Update the S3 bucket:**\n\n```shell\nread -r -d '' BUCKET_MANIFEST <<EOF\napiVersion: s3.services.k8s.aws/v1alpha1\nkind: Bucket\nmetadata:\n  name: $BUCKET_NAME\nspec:\n  name: $BUCKET_NAME\n  tagging:\n    tagSet:\n    - key: myTagKey\n      value: myTagValue\nEOF\n\necho \"${BUCKET_MANIFEST}\" > bucket.yaml\nkubectl apply -f bucket.yaml\nkubectl describe bucket/$BUCKET_NAME\n```\n\n**Delete the S3 bucket:**\n\n```shell\nkubectl delete -f bucket.yaml\n# verify the bucket no longer exists\nkubectl get bucket/$BUCKET_NAME\n```\n\n## What can we learn from this exploration?\n\nThe ACK service offers significant benefits for managing AWS resources through Kubernetes. However, it is best suited for organizations with advanced proficiency in both AWS and Kubernetes. A strong understanding of these technologies by the DevOps team is crucial for effectively implementing ACK. This includes managing resource separation into namespaces and addressing security concerns related to AWS resource management from Kubernetes.\n\nTo adhere to a \"least privilege\" policy, Kubernetes users should be granted access only to the necessary namespaces. Implementing and maintaining this level of granularity can be challenging in large organizations where teams require access to numerous resources.\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  _**Until next time üéâ**_\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordcount":1311}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://seifrajhi.github.io/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://seifrajhi.github.io/blog/"},{"@type":"ListItem","position":3,"name":"AWS Controllers for Kubernetes (ACK): Managing AWS services from Kubernetes","item":"https://seifrajhi.github.io/blog/aws-controllers-for-kubernetes-ack/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=47ae28bb567c9025f1fee24afb2d20c9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-LLPCCGNLH7', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LLPCCGNLH7"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LLPCCGNLH7', {"anonymize_ip":true,"send_page_view":false});gtag('config', 'GTM-5V895PDS', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seifrajhi.github.io/blog/aws-controllers-for-kubernetes-ack/" data-baseprotocol="https:" data-basehost="seifrajhi.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;174&#x27;%20width=&#x27;150&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture><noscript><picture><source type="image/avif" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Saifeddine <br/> Rajhi</a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="My public talks" href="/talks/">talks</a></li><li><a title="Review My Resume" href="/cv/platform-engineer/">cv</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:66.75%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;object-fit:fill;object-position:center" decoding="async" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAABBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHipK25HZD/AP/EABgQAQEBAQEAAAAAAAAAAAAAAAEAAgMT/9oACAEBAAEFAi8xGI55cpf/xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8BVH//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8BcH//xAAXEAEAAwAAAAAAAAAAAAAAAAARACAh/9oACAEBAAY/AouV/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAEhETFBUf/aAAgBAQABPyHO0UGSc+iLYWyxVfYnT//aAAwDAQACAAMAAAAQYM//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8QkGv/xAAXEQADAQAAAAAAAAAAAAAAAAAAARFh/9oACAECAQE/EGwmH//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExQVFhcf/aAAgBAQABPxBLBRPboMW6DmXNsfJqalSZJQNVXnMAyf/Z" alt=""/><picture><source type="image/webp" data-srcset="/static/337542faae08df3f2211e006ed8e7548/d2a19/ack-cover.webp 750w,/static/337542faae08df3f2211e006ed8e7548/56f2e/ack-cover.webp 800w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/337542faae08df3f2211e006ed8e7548/20b93/ack-cover.jpg" data-srcset="/static/337542faae08df3f2211e006ed8e7548/6cce3/ack-cover.jpg 750w,/static/337542faae08df3f2211e006ed8e7548/20b93/ack-cover.jpg 800w" alt="AWS Controllers for Kubernetes (ACK): Managing AWS services from Kubernetes"/></picture><noscript><picture><source type="image/webp" srcSet="/static/337542faae08df3f2211e006ed8e7548/d2a19/ack-cover.webp 750w,/static/337542faae08df3f2211e006ed8e7548/56f2e/ack-cover.webp 800w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/337542faae08df3f2211e006ed8e7548/20b93/ack-cover.jpg" srcSet="/static/337542faae08df3f2211e006ed8e7548/6cce3/ack-cover.jpg 750w,/static/337542faae08df3f2211e006ed8e7548/20b93/ack-cover.jpg 800w" alt="AWS Controllers for Kubernetes (ACK): Managing AWS services from Kubernetes"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption data-nosnippet="" class="image-title">Photo by Saifeddine Rajhi</figcaption></figure><h1>AWS Controllers for Kubernetes (ACK): Managing AWS services from Kubernetes</h1><div data-nosnippet="" class="blog-details"><time class="blog-createdat" dateTime="2024-10-19">Oct 19, 2024</time><span> ‚Ä¢ </span><span class="blog-time2read">8<!-- -->mins<!-- --> read</span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul data-nosnippet="" class="blog-tags"><li>AWS EKS</li><li>Kubernetes</li><li>AWS Controllers for Kubernetes</li><li>Cloud-native</li><li>Service management</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div data-nosnippet="" class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><ul class="toc-list"></ul></ul></div><div class="content blog-content"><blockquote>
<p><strong>A Path to AWS Service Control in Kubernetes</strong></p>
</blockquote>
<h2 id="-introduction" style="position:relative;"><a href="#-introduction" aria-label=" introduction permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ü§ñ Introduction</h2>
<p><a href="https://aws-controllers-k8s.github.io/community/docs/community/overview/" target="_blank" rel="noopener noreferrer">AWS Controllers for Kubernetes (ACK)</a> is an open-source project that lets you define and use AWS service resources directly from Kubernetes. This means that you can manage all of your application's resources, including its infrastructure and dependencies, from a single place.</p>
<p>ACK works by extending the Kubernetes API with custom resource definitions (CRDs) and custom controllers. These CRDs and controllers allow you to define and manage AWS service resources using the same Kubernetes constructs that you use to manage your application's other resources.</p>
<p>ACK makes it easy to take advantage of AWS managed services for your Kubernetes applications. With ACK, you don't need to worry about provisioning or managing the underlying infrastructure for these services. You can simply define the AWS service resources that you need in your Kubernetes cluster, and ACK will take care of the rest.</p>
<p>This article aims to discover this service and test it by installing a controller within a Kubernetes cluster.</p>
<h3 id="-what-is-the-benefit-of-ack" style="position:relative;"><a href="#-what-is-the-benefit-of-ack" aria-label=" what is the benefit of ack permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üåü What is the benefit of ACK?</h3>
<p>ACK can be considered as an additional abstraction for managing AWS resources that is added to the existing solutions. Today, there are three levels of "abstraction" for infrastructure as code:</p>
<ol>
<li><strong>Level 1</strong>: Infrastructure as code defined as shell scripts. In this category, we can cite the launching of commands via the <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a>.</li>
<li><strong>Level 2</strong>: The use of tools such as <a href="https://puppet.com/" target="_blank" rel="noopener noreferrer">Puppet</a>, <a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">Terraform</a>, <a href="https://www.ansible.com/" target="_blank" rel="noopener noreferrer">Ansible</a>, and <a href="https://saltproject.io/" target="_blank" rel="noopener noreferrer">Salt</a> to define step by step the infrastructure that we want to put in place.</li>
<li><strong>Level 3</strong>: We only define the desired final state of the infrastructure. This is the level that ACK belongs to.</li>
</ol>
<p>Currently, the use of AWS and Kubernetes represents a design complexity that is not easy to understand. Indeed, these architectures require the articulation of resources with each other in order to allow the general infrastructure to function properly. The understanding of the infrastructure in its entirety is therefore necessary and requires switching very regularly between the different technologies.</p>
<p>AWS offers us this new tool to allow its users to create new resources and control their current state. Thus, the user would only have to define the state of the desired AWS resource, and the controller would take care of bringing the resource from the current state to the desired state.</p>
<h3 id="Ô∏è-how-ack-works" style="position:relative;"><a href="#%EF%B8%8F-how-ack-works" aria-label="Ô∏è how ack works permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚öôÔ∏è How ACK works</h3>
<p>Our goal with ACK is to provide a consistent Kubernetes interface for AWS, regardless of the AWS service API. One example of this is ensuring field names and identifiers are normalized and tags are handled the same way across AWS resources.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 84.11764705882354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACQUlEQVR42n1Ui47aMBDMV/MV/FhP5aRSpIpDvJTjekcO8o7fme6uk5RWBxYrG2OPZ8Zjkr7vca9AH+M0XrMDVHpGe8zQvW2w26VI0xZlpuGchTEG3nvZk9wDC30At6LJ8WP3hHa5R/F9C735hsPuHctlidOmpBWBQP20LwkhYCwBGnou5xyUUgLcc8lBvMbH6oOs4eJ9zPJLhvwjt/V6jcvlU8bBx81adbDWCitjolz+zmA8Th552HXd5M3tYeO4bpppDTdh+I/kG+me2WjNOmXMbbVaYT6fCwgGC9q2k8rznC5rFxnenhpG/+g0TRLYOzcwWCwWmM1mBNBOgGzDKL0sy1EyeeQMgmmJpZPy1sCQX+hJsnfCfjycqyWW1ihsfxs8rTX2H1bWJrKQTrPvLyi2z1A07yzLNSKFzXdkeu/Z+CA2MHBV1XRBLQ5ni8XW4JhFIoOHHGKLnweDrAhQpkfTORSVRqPjmBWMEseYxKhYCTfHiG97umVnNfKavLBeWCnjyXwlN2fpe6BNIyDPjWVt9JDZTzk8nU7Ybl7EfGM0Ogrz6qBQ1hTqPr4ETwwZLGbQ3QBaYXq9XrHf75FUdf03sD7KN47iQFKrRkUwnhdAPwFydPhm/wePkjmUzgqbt4tDmlkcyexX7j+MzPvBw/iKYujdkM/b4E8eMgM2v9ODf0OvTCAm46UAj14WHzYBIlj8Sh3OFT0peiAlRbDqYl92JNnbu0/wC4Z0slPIP6/QTQHflXC31eaUqnb6x3lUfwDEki9srIKnLQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="ACK Workflow" title="" src="/static/f50cdf2dcd65ba8d3ce914553ae33dc7/c5bb3/ack.png" srcset="/static/f50cdf2dcd65ba8d3ce914553ae33dc7/04472/ack.png 170w,
/static/f50cdf2dcd65ba8d3ce914553ae33dc7/9f933/ack.png 340w,
/static/f50cdf2dcd65ba8d3ce914553ae33dc7/c5bb3/ack.png 680w,
/static/f50cdf2dcd65ba8d3ce914553ae33dc7/5a190/ack.png 800w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<p>As depicted above, from a high level, the ACK workflow is as follows:</p>
<ol>
<li><strong>Artifact Generation</strong>: We, as in "the project team led by the authors", generate and maintain a collection of artifacts (binaries, container images, Helm charts, etc.). These artifacts are automatically derived from the AWS services APIs and represent the business logic of how to manage AWS resources from within Kubernetes.</li>
<li><strong>Controller Installation</strong>: As a cluster admin, you select one or more ACK controllers you want to install and configure for a cluster you're responsible for.</li>
<li><strong>Custom Resource Creation</strong>: As an application developer, you create (Kubernetes) custom resources representing AWS resources.</li>
<li><strong>Resource Management</strong>: The respective ACK controller (installed in step 2) manages said custom resources and with it the underlying AWS resources. Based on the custom resource defined in step 3, the controller creates, updates, or deletes the underlying AWS resources using the AWS APIs.</li>
</ol>
<h2 id="Ô∏è-hands-on-for-testing-ack-on-a-kubernetes-cluster" style="position:relative;"><a href="#%EF%B8%8F-hands-on-for-testing-ack-on-a-kubernetes-cluster" aria-label="Ô∏è hands on for testing ack on a kubernetes cluster permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üõ†Ô∏è Hands-On for Testing ACK on a Kubernetes Cluster</h2>
<p><strong>Required Tools:</strong></p>
<ul>
<li>üê≥ <strong>Docker</strong></li>
<li>üì¶ <strong>kubectl</strong></li>
<li>üéõÔ∏è <strong>Helm 3</strong></li>
<li>‚ò∏Ô∏è <strong>eksctl</strong></li>
</ul>
<h3 id="setting-up-the-eks-cluster" style="position:relative;"><a href="#setting-up-the-eks-cluster" aria-label="setting up the eks cluster permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Setting Up the EKS Cluster</h3>
<p>To test this service, quickly set up an EKS Kubernetes cluster using the following command:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">eksctl create cluster <span class="token parameter variable">--name</span><span class="token operator">=</span>ack-demo <span class="token parameter variable">--nodes</span><span class="token operator">=</span><span class="token number">2</span> <span class="token parameter variable">--region</span><span class="token operator">=</span>eu-west-1</code></pre></div>
<p>You can consult the <a href="https://aws.amazon.com/cloudformation/" target="_blank" rel="noopener noreferrer">CloudFormation stack on AWS</a> to learn more about the resources created previously.</p>
<h3 id="installing-an-ack-service-controller-with-helm-recommended" style="position:relative;"><a href="#installing-an-ack-service-controller-with-helm-recommended" aria-label="installing an ack service controller with helm recommended permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing an ACK Service Controller with Helm (Recommended)</h3>
<p>The recommended way to install an ACK service controller for Kubernetes is to use <a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Helm 3.8+</a>.</p>
<p>Each ACK service controller has a separate Helm chart that installs the necessary supporting artifacts as a Kubernetes Deployment. This includes the ACK service controller, custom resource definitions (CRDs), and Kubernetes Role-Based Access Control (RBAC) manifests.</p>
<p>Helm charts for ACK service controllers can be found in the ACK registry within the <a href="https://gallery.ecr.aws/aws-controllers-k8s" target="_blank" rel="noopener noreferrer">Amazon ECR Public Gallery</a>. To find a Helm chart for a specific service, you can go to <code class="language-text">gallery.ecr.aws/aws-controllers-k8s/$SERVICENAME-chart</code>. For example, the link to the ACK service controller Helm chart for Amazon Simple Storage Service (Amazon S3) is <a href="https://gallery.ecr.aws/aws-controllers-k8s/s3-chart" target="_blank" rel="noopener noreferrer">gallery.ecr.aws/aws-controllers-k8s/s3-chart</a>.</p>
<p>Helm charts for individual ACK service controllers are tagged with their release version. You can find charts for different releases under the <strong>Image tags</strong> section in the chart repository on the ECR Public Gallery.</p>
<p>Before installing a Helm chart, you can query the controller repository to find the latest release tag. This tag will correspond with a version of the Helm chart and a controller image. Then, you can use the Helm CLI to log into the ECR public Helm registry and install the chart.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token builtin class-name">export</span> <span class="token assign-left variable">SERVICE</span><span class="token operator">=</span>s3
<span class="token builtin class-name">export</span> <span class="token assign-left variable">RELEASE_VERSION</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-sL</span> https://api.github.com/repos/aws-controllers-k8s/$<span class="token punctuation">{</span>SERVICE<span class="token punctuation">}</span>-controller/releases/latest <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.tag_name | ltrimstr("v")'</span><span class="token variable">)</span></span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ACK_SYSTEM_NAMESPACE</span><span class="token operator">=</span>ack-system
<span class="token builtin class-name">export</span> <span class="token assign-left variable">AWS_REGION</span><span class="token operator">=</span>eu-west-1

aws ecr-public get-login-password <span class="token parameter variable">--region</span> us-east-1 <span class="token operator">|</span> helm registry login <span class="token parameter variable">--username</span> AWS --password-stdin public.ecr.aws
helm <span class="token function">install</span> --create-namespace <span class="token parameter variable">-n</span> <span class="token variable">$ACK_SYSTEM_NAMESPACE</span> ack-<span class="token variable">$SERVICE</span>-controller <span class="token punctuation">\</span>
    oci://public.ecr.aws/aws-controllers-k8s/<span class="token variable">$SERVICE</span>-chart <span class="token parameter variable">--version</span><span class="token operator">=</span><span class="token variable">$RELEASE_VERSION</span> <span class="token parameter variable">--set</span><span class="token operator">=</span>aws.region<span class="token operator">=</span><span class="token variable">$AWS_REGION</span></code></pre></div>
<p>The <code class="language-text">helm install</code> command should return relevant installation information:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">NAME</span><span class="token punctuation">:</span> ack<span class="token punctuation">-</span>s3<span class="token punctuation">-</span>controller
<span class="token key atrule">LAST DEPLOYED</span><span class="token punctuation">:</span> Thu Nov 02 10<span class="token punctuation">:</span>30<span class="token punctuation">:</span>16 2023
<span class="token key atrule">NAMESPACE</span><span class="token punctuation">:</span> ack<span class="token punctuation">-</span>system
<span class="token key atrule">STATUS</span><span class="token punctuation">:</span> deployed
<span class="token key atrule">REVISION</span><span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">TEST SUITE</span><span class="token punctuation">:</span> None
<span class="token key atrule">NOTES</span><span class="token punctuation">:</span> <span class="token punctuation">...</span></code></pre></div>
<p>To verify that the Helm chart was installed, use the <code class="language-text">helm list</code> command:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">helm list <span class="token parameter variable">--namespace</span> <span class="token variable">$ACK_SYSTEM_NAMESPACE</span> <span class="token parameter variable">-o</span> yaml</code></pre></div>
<h2 id="-configure-iam-permissions" style="position:relative;"><a href="#-configure-iam-permissions" aria-label=" configure iam permissions permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üîê Configure IAM Permissions</h2>
<h3 id="set-up-ack-with-iam-roles-for-service-accounts" style="position:relative;"><a href="#set-up-ack-with-iam-roles-for-service-accounts" aria-label="set up ack with iam roles for service accounts permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Set up ACK with IAM Roles for Service Accounts</h3>
<p>IAM Roles for Service Accounts (IRSA) is a system that automates the provisioning and rotation of IAM temporary credentials (called a Web Identity) that a Kubernetes ServiceAccount can use to call AWS APIs.</p>
<p>The primary advantage of IRSA is that Kubernetes Pods which use the ServiceAccount associated with an IAM Role can have a reduced IAM permission footprint compared to the IAM Role in use for the Kubernetes EC2 worker node (known as the EC2 Instance Profile Role). This security concept is known as <strong>Least Privilege</strong>.</p>
<h3 id="step-1-create-an-oidc-identity-provider-for-your-cluster" style="position:relative;"><a href="#step-1-create-an-oidc-identity-provider-for-your-cluster" aria-label="step 1 create an oidc identity provider for your cluster permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Step 1: Create an OIDC Identity Provider for Your Cluster</h3>
<p>Create an OpenID Connect (OIDC) identity provider for your EKS cluster using the <code class="language-text">eksctl utils</code> command:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">EKS_CLUSTER_NAME</span><span class="token operator">=</span><span class="token operator">&lt;</span>eks cluster name<span class="token operator">></span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">AWS_REGION</span><span class="token operator">=</span><span class="token operator">&lt;</span>aws region id<span class="token operator">></span>
eksctl utils associate-iam-oidc-provider <span class="token parameter variable">--cluster</span> <span class="token variable">$EKS_CLUSTER_NAME</span> <span class="token parameter variable">--region</span> <span class="token variable">$AWS_REGION</span> <span class="token parameter variable">--approve</span></code></pre></div>
<p>For detailed instructions, refer to the <a href="https://docs.aws.amazon.com/eks/latest/userguide/enable-iam-roles-for-service-accounts.html" target="_blank" rel="noopener noreferrer">Amazon EKS documentation</a> on how to create an IAM OIDC provider for your cluster.</p>
<h3 id="step-2-create-an-iam-role-and-policy-for-your-serviceaccount" style="position:relative;"><a href="#step-2-create-an-iam-role-and-policy-for-your-serviceaccount" aria-label="step 2 create an iam role and policy for your serviceaccount permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Step 2. Create an IAM role and policy for your service¬†account</h3>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Update the service name variables as needed</span>
<span class="token assign-left variable">SERVICE</span><span class="token operator">=</span><span class="token string">"s3"</span>
<span class="token assign-left variable">AWS_ACCOUNT_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws sts get-caller-identity <span class="token parameter variable">--query</span> <span class="token string">"Account"</span> <span class="token parameter variable">--output</span> text<span class="token variable">)</span></span>
<span class="token assign-left variable">OIDC_PROVIDER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws eks describe-cluster <span class="token parameter variable">--name</span> $EKS_CLUSTER_NAME <span class="token parameter variable">--region</span> $AWS_REGION <span class="token parameter variable">--query</span> <span class="token string">"cluster.identity.oidc.issuer"</span> <span class="token parameter variable">--output</span> text <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">"s/^https:\/\///"</span><span class="token variable">)</span></span>
<span class="token assign-left variable">ACK_K8S_NAMESPACE</span><span class="token operator">=</span>ack-system

<span class="token assign-left variable">ACK_K8S_SERVICE_ACCOUNT_NAME</span><span class="token operator">=</span>ack-<span class="token variable">$SERVICE</span>-controller

<span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-d</span> <span class="token string">''</span> TRUST_RELATIONSHIP <span class="token operator">&lt;&lt;</span><span class="token string">EOF
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Federated": "arn:aws:iam::<span class="token variable">${AWS_ACCOUNT_ID}</span>:oidc-provider/<span class="token variable">${OIDC_PROVIDER}</span>"
      },
      "Action": "sts:AssumeRoleWithWebIdentity",
      "Condition": {
        "StringEquals": {
          "<span class="token variable">${OIDC_PROVIDER}</span>:sub": "system:serviceaccount:<span class="token variable">${ACK_K8S_NAMESPACE}</span>:<span class="token variable">${ACK_K8S_SERVICE_ACCOUNT_NAME}</span>"
        }
      }
    }
  ]
}
EOF</span>

<span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${TRUST_RELATIONSHIP}</span>"</span> <span class="token operator">></span> trust.json

<span class="token assign-left variable">ACK_CONTROLLER_IAM_ROLE</span><span class="token operator">=</span><span class="token string">"ack-<span class="token variable">${SERVICE}</span>-controller"</span>
<span class="token assign-left variable">ACK_CONTROLLER_IAM_ROLE_DESCRIPTION</span><span class="token operator">=</span><span class="token string">"IRSA role for ACK <span class="token variable">${SERVICE}</span> controller deployment on EKS cluster using Helm charts"</span>
aws iam create-role --role-name <span class="token string">"<span class="token variable">${ACK_CONTROLLER_IAM_ROLE}</span>"</span> --assume-role-policy-document file://trust.json <span class="token parameter variable">--description</span> <span class="token string">"<span class="token variable">${ACK_CONTROLLER_IAM_ROLE_DESCRIPTION}</span>"</span>
<span class="token assign-left variable">ACK_CONTROLLER_IAM_ROLE_ARN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws iam get-role --role-name<span class="token operator">=</span>$ACK_CONTROLLER_IAM_ROLE <span class="token parameter variable">--query</span> Role.Arn <span class="token parameter variable">--output</span> text<span class="token variable">)</span></span></code></pre></div>
<h3 id="attach-iam-policy-to-the-iam-role" style="position:relative;"><a href="#attach-iam-policy-to-the-iam-role" aria-label="attach iam policy to the iam role permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Attach IAM policy to the IAM role:</h3>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Download the recommended managed and inline policies and apply them to the</span>
<span class="token comment"># newly created IRSA role</span>
<span class="token assign-left variable">BASE_URL</span><span class="token operator">=</span>https://raw.githubusercontent.com/aws-controllers-k8s/<span class="token variable">${SERVICE}</span>-controller/main
<span class="token assign-left variable">POLICY_ARN_URL</span><span class="token operator">=</span><span class="token variable">${BASE_URL}</span>/config/iam/recommended-policy-arn
<span class="token assign-left variable">POLICY_ARN_STRINGS</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- $<span class="token punctuation">{</span>POLICY_ARN_URL<span class="token punctuation">}</span><span class="token variable">)</span></span>"</span>

<span class="token assign-left variable">INLINE_POLICY_URL</span><span class="token operator">=</span><span class="token variable">${BASE_URL}</span>/config/iam/recommended-inline-policy
<span class="token assign-left variable">INLINE_POLICY</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- $<span class="token punctuation">{</span>INLINE_POLICY_URL<span class="token punctuation">}</span><span class="token variable">)</span></span>"</span>

<span class="token keyword">while</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> POLICY_ARN<span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">"Attaching <span class="token variable">$POLICY_ARN</span> ... "</span>
    aws iam attach-role-policy <span class="token punctuation">\</span>
        --role-name <span class="token string">"<span class="token variable">${ACK_CONTROLLER_IAM_ROLE}</span>"</span> <span class="token punctuation">\</span>
        --policy-arn <span class="token string">"<span class="token variable">${POLICY_ARN}</span>"</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"ok."</span>
<span class="token keyword">done</span> <span class="token operator">&lt;&lt;&lt;</span> <span class="token string">"<span class="token variable">$POLICY_ARN_STRINGS</span>"</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$INLINE_POLICY</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">"Putting inline policy ... "</span>
    aws iam put-role-policy <span class="token punctuation">\</span>
        --role-name <span class="token string">"<span class="token variable">${ACK_CONTROLLER_IAM_ROLE}</span>"</span> <span class="token punctuation">\</span>
        --policy-name <span class="token string">"ack-recommended-policy"</span> <span class="token punctuation">\</span>
        --policy-document <span class="token string">"<span class="token variable">$INLINE_POLICY</span>"</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"ok."</span>
<span class="token keyword">fi</span></code></pre></div>
<h3 id="step-3-associate-an-iam-role-to-a-service-account-and-restart-deployment" style="position:relative;"><a href="#step-3-associate-an-iam-role-to-a-service-account-and-restart-deployment" aria-label="step 3 associate an iam role to a service account and restart deployment permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Step 3. Associate an IAM role to a service account and restart deployment</h3>
<p>If you installed your <a href="https://aws-controllers-k8s.github.io/community/docs/user-docs/install/" target="_blank" rel="noopener noreferrer">ACK service controller using a Helm chart</a>, then a service account already exists on your cluster.</p>
<blockquote>
<p>However, it is still neccessary to associate an IAM role with the service account.</p>
</blockquote>
<p>Verify that your service account exists using kubectl describe:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl describe serviceaccount/<span class="token variable">$ACK_K8S_SERVICE_ACCOUNT_NAME</span> <span class="token parameter variable">-n</span> <span class="token variable">$ACK_K8S_NAMESPACE</span></code></pre></div>
<p>Note that the Amazon Resource Name (ARN) of the IAM role that you created is not yet set as an annotation for the service account.</p>
<p>Use the following commands to associate an IAM role to a service account:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Annotate the service account with the ARN</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">IRSA_ROLE_ARN</span><span class="token operator">=</span>eks.amazonaws.com/role-arn<span class="token operator">=</span><span class="token variable">$ACK_CONTROLLER_IAM_ROLE_ARN</span>
kubectl annotate serviceaccount <span class="token parameter variable">-n</span> <span class="token variable">$ACK_K8S_NAMESPACE</span> <span class="token variable">$ACK_K8S_SERVICE_ACCOUNT_NAME</span> <span class="token variable">$IRSA_ROLE_ARN</span></code></pre></div>
<p>Restart ACK service controller deployment using the following commands. The restart will update service controller pods with IRSA environment variables:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Note the deployment name for ACK service controller from following command</span>
kubectl get deployments <span class="token parameter variable">-n</span> <span class="token variable">$ACK_K8S_NAMESPACE</span>
kubectl <span class="token parameter variable">-n</span> <span class="token variable">$ACK_K8S_NAMESPACE</span> rollout restart deployment <span class="token operator">&lt;</span>ACK deployment name<span class="token operator">></span></code></pre></div>
<h2 id="create-an-ack-resource" style="position:relative;"><a href="#create-an-ack-resource" aria-label="create an ack resource permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Create an ACK Resource</h2>
<p><strong>Create an S3 bucket:</strong></p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">AWS_ACCOUNT_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws sts get-caller-identity <span class="token parameter variable">--query</span> <span class="token string">"Account"</span> <span class="token parameter variable">--output</span> text<span class="token variable">)</span></span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BUCKET_NAME</span><span class="token operator">=</span>my-ack-s3-bucket-<span class="token variable">$AWS_ACCOUNT_ID</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-d</span> <span class="token string">''</span> BUCKET_MANIFEST <span class="token operator">&lt;&lt;</span><span class="token string">EOF
apiVersion: s3.services.k8s.aws/v1alpha1
kind: Bucket
metadata:
  name: <span class="token variable">$BUCKET_NAME</span>
spec:
  name: <span class="token variable">$BUCKET_NAME</span>
EOF</span>
<span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${BUCKET_MANIFEST}</span>"</span> <span class="token operator">></span> bucket.yaml
kubectl create <span class="token parameter variable">-f</span> bucket.yaml
kubectl describe bucket/<span class="token variable">$BUCKET_NAME</span></code></pre></div>
<p><strong>Update the S3 bucket:</strong></p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-d</span> <span class="token string">''</span> BUCKET_MANIFEST <span class="token operator">&lt;&lt;</span><span class="token string">EOF
apiVersion: s3.services.k8s.aws/v1alpha1
kind: Bucket
metadata:
  name: <span class="token variable">$BUCKET_NAME</span>
spec:
  name: <span class="token variable">$BUCKET_NAME</span>
  tagging:
    tagSet:
    - key: myTagKey
      value: myTagValue
EOF</span>

<span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${BUCKET_MANIFEST}</span>"</span> <span class="token operator">></span> bucket.yaml
kubectl apply <span class="token parameter variable">-f</span> bucket.yaml
kubectl describe bucket/<span class="token variable">$BUCKET_NAME</span></code></pre></div>
<p><strong>Delete the S3 bucket:</strong></p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl delete <span class="token parameter variable">-f</span> bucket.yaml
<span class="token comment"># verify the bucket no longer exists</span>
kubectl get bucket/<span class="token variable">$BUCKET_NAME</span></code></pre></div>
<h2 id="what-can-we-learn-from-this-exploration" style="position:relative;"><a href="#what-can-we-learn-from-this-exploration" aria-label="what can we learn from this exploration permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What can we learn from this exploration?</h2>
<p>The ACK service offers significant benefits for managing AWS resources through Kubernetes. However, it is best suited for organizations with advanced proficiency in both AWS and Kubernetes. A strong understanding of these technologies by the DevOps team is crucial for effectively implementing ACK. This includes managing resource separation into namespaces and addressing security concerns related to AWS resource management from Kubernetes.</p>
<p>To adhere to a "least privilege" policy, Kubernetes users should be granted access only to the necessary namespaces. Implementing and maintaining this level of granularity can be challenging in large organizations where teams require access to numerous resources.</p>
<br>
<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>
<blockquote>
<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <em><strong>Until next time üéâ</strong></em></p>
</blockquote>
<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>
<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href="https://www.linkedin.com/in/rajhi-saif/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/rajhi-saif/</a></p>
<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href="https://x.com/rajhisaifeddine" target="_blank" rel="noopener noreferrer">https://x.com/rajhisaifeddine</a></p>
<p><strong>The end ‚úåüèª</strong></p>
<h1 align="center">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>
<p><strong>üìÖ Stay updated</strong></p>
<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p></div></div><div id="content-end"></div></article><div data-nosnippet="" class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div><br/><br/><br/></main><aside class="blogpost-sidebar"><div data-nosnippet="" class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/aws-eks-audit-logs-with-falco/">Monitoring AWS EKS Audit Logs with Falco<!-- --> ‚Üí</a><a rel="prev" class="prev-post" href="/blog/k8s-observability-datadaog/">‚Üê <!-- -->Automate Kubernetes Monitoring with Terraform and Datadog</a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer data-nosnippet=""><div class="footer-wrapper"><div data-nosnippet="" class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="linkedin" href="https://www.linkedin.com/in/rajhi-saif/" title="Saifeddine Rajhi on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="github" href="https://github.com/seifrajhi" title="Saifeddine Rajhi on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" eventCategory="social" eventAction="click" eventLabel="email" href="mailto:rajhiseif@gmail.com" title="Saifeddine Rajhi&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg><span>Email</span></a></li><li class="social-item social-bluesky"><a rel="me" itemProp="url" eventCategory="bluesky" eventAction="click" eventLabel="social" href="https://bsky.app/profile/saifrajhi.bsky.social" title="Saifeddine Rajhi on Bluesky Social" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bluesky" class="svg-inline--fa fa-bluesky fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"></path></svg><span>Bluesky Social</span></a></li><li class="social-item social-X/Twitter"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="X/Twitter" href="https://x.com/RajhiSaifeddine" title="Saifeddine Rajhi on X/Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg><span>X/Twitter</span></a></li><li class="social-item social-reddit"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="reddit" href="https://www.reddit.com/user/ScoreApprehensive992/" title="Saifeddine Rajhi on Reddit" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit-alien" class="svg-inline--fa fa-reddit-alien fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z"></path></svg><span>Reddit</span></a></li><li class="social-item social-stackoverflow"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://stackoverflow.com/users/21897244/saifeddine-rajhi" title="Saifeddine Rajhi on StackOverflow" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg><span>StackOverflow</span></a></li><li class="social-item social-Goodreads"><a rel="me" eventLabel="StackOverflow" href="https://www.goodreads.com/user/show/176103378-saifeddine" title="Saifeddine Rajhi on Goodreads" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="goodreads" class="svg-inline--fa fa-goodreads fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9 0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9 0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"></path></svg><span>Goodreads</span></a></li><li class="social-item social-osi"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://ossinsight.io/analyze/seifrajhi" title="Saifeddine Rajhi on OSSInsights" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="osi" class="svg-inline--fa fa-osi fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M8 266.44C10.3 130.64 105.4 34 221.8 18.34c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7q-26.7-69.45-53.4-139c-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8a71.47 71.47 0 0 0-64.5-82.2c-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4q-26.85 69.9-53.7 139.9c-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119-24.9-49.2-25.2-87.7-26.8-108.7zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3q22.35-58.65 45-117.3c1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6a91.64 91.64 0 0 1 45.2 90.4c-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6q22.8 58.8 45.2 117.7c1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161-13.7-117.5-119.4-214.8-255.5-198-106.1 13-195.3 102.5-197.1 225.8z"></path></svg><span>OSSInsights</span></a></li><li class="social-item social-devstats"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://devstats.cluster.fun/?user=seifrajhi" title="Saifeddine Rajhi on DevStats" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-line" class="svg-inline--fa fa-chart-line fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg><span>DevStats</span></a></li><li class="social-item social-RSS"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="RSS" href="https://seifrajhi.github.io/rss.xml" title="Subscribe to my blog post" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg><span>RSS</span></a></li></ul></div><div class="copyright">Saifeddine Rajhi ¬© 1994 - <!-- -->2024<!-- --> <br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/saifrajhi">0C3B BABB 8BC1 EA2B</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/aws-controllers-for-kubernetes-ack/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-a5a85b91af04696ccdc4.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88fb5c28d68e831e730a.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-83bdb4e48c18bf191297.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-c30054b9e13d83b88b5e.js\"],\"component---src-pages-cv-platform-engineer-js\":[\"/component---src-pages-cv-platform-engineer-js-f8a094a4210d77300f3f.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-02b95e948418d187521a.js\"],\"component---src-pages-talks-js\":[\"/component---src-pages-talks-js-83d06faa39fa5807183d.js\"],\"component---src-pages-thoughts-js\":[\"/component---src-pages-thoughts-js-1d43cbe28697ce8b330b.js\"],\"component---src-templates-blog-template-js\":[\"/component---src-templates-blog-template-js-36418f189bad33f744db.js\"],\"component---src-templates-talk-template-js\":[\"/component---src-templates-talk-template-js-7623845caf43043e0341.js\"],\"component---src-templates-thought-template-js\":[\"/component---src-templates-thought-template-js-4e873e19a182fe3c30b3.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="cd77f17b1396fa76c722";</script><script src="/webpack-runtime-9bd77e767c2b556866fd.js" async></script><script src="/framework-c989293af61a95023f7f.js" async></script><script src="/app-a5a85b91af04696ccdc4.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>