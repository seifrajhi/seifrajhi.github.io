<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" property="og:description" content="Learn how to effectively scale your Kubernetes pods both vertically and horizontally using Horizontal Pod Autoscaler (HPA) and Vertical Pod Autoscaler (VPA) for optimal resource utilization."/><meta data-react-helmet="true" name="keywords" content="Kubernetes,Autoscaling,HPA &amp; VPA,SRE"/><meta data-react-helmet="true" name="author" content="@RajhiSaifeddine"/><meta data-react-helmet="true" property="og:title" content="Kubernetes Autoscaling: Achieving Scalability and Efficiency - Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@RajhiSaifeddine"/><meta data-react-helmet="true" name="twitter:title" content="Kubernetes Autoscaling: Achieving Scalability and Efficiency - Blog"/><meta data-react-helmet="true" name="twitter:description" content="Learn how to effectively scale your Kubernetes pods both vertically and horizontally using Horizontal Pod Autoscaler (HPA) and Vertical Pod Autoscaler (VPA) for optimal resource utilization."/><meta data-react-helmet="true" name="image" property="og:image" content="https://seifrajhi.github.io/static/ac5fc33b531d775f51f3a52118a89a2d/d0bbc/hpa-vpa-cover.png"/><meta data-react-helmet="true" name="twitter:image" content="https://seifrajhi.github.io/static/ac5fc33b531d775f51f3a52118a89a2d/d0bbc/hpa-vpa-cover.png"/><meta data-react-helmet="true" property="og:url" content="https://seifrajhi.github.io/blog/kubernetes-autoscaling-pods-hpa-vpa/"/><meta name="theme-color" content="#ffffff"/><link rel="stylesheet" href="/styles.38c2a06e874c487e61a0.css"/><link rel="stylesheet"/><link rel="alternate" type="application/rss+xml" title="Saifeddine Rajhi&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">Kubernetes Autoscaling: Achieving Scalability and Efficiency - Blog by Saifeddine Rajhi</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/ac5fc33b531d775f51f3a52118a89a2d/d0bbc/hpa-vpa-cover.png","headline":"Kubernetes Autoscaling: Achieving Scalability and Efficiency","dateCreated":"2024-10-27","datePublished":"2024-10-27","dateModified":"2024-10-27","inLanguage":"en-US","isFamilyFriendly":true,"isAccessibleForFree":true,"author":{"@type":"Person","name":"Saifeddine Rajhi","url":"https://seifrajhi.github.io"},"publisher":{"@type":"Organization","name":"Saifeddine Rajhi's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seifrajhi.github.io/blog/kubernetes-autoscaling-pods-hpa-vpa/"},"keywords":["Kubernetes","Autoscaling","HPA & VPA","SRE"],"genre":["Platform engineer","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\n> **How to Scale Pods Vertically and Horizontally in Kubernetes üåê**\n\n## üê≥ Introduction\n\n[Kubernetes](https://kubernetes.io/) embodies resilience and scalability by deploying diverse pods with varying resource allocations, ensuring application redundancy. While manual adjustments suffice, Kubernetes elevates scaling with Horizontal Pod Autoscaling (HPA). This self-regulating loop dynamically expands or contracts resources (app Pods) based on real-time demands. Simply deploy a [HorizontalPodAutoscaler (HPA)](https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/) resource for auto-scaling, leaving the automation to it.\n\nMoreover, in addition to HPA, the [Vertical Pod Autoscaler (VPA)](https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler) offers a distinct approach. Unlike HPA's horizontal scaling, VPA modifies a Pod's resources.requests, prompting the Kubernetes Scheduler to shift Pods across WorkerNodes as needed. VPA incessantly monitors container resource usage, automatically tweaking requests to prevent waste and ensure sufficient CPU and memory allocation. This synergy of HPA and VPA empowers Kubernetes users to effortlessly achieve efficient, tailored scaling.\n\nThis blog explores the universe of Kubernetes autoscaling, casting a spotlight on these two powerful tools: HPA and VPA. We'll uncover how they work, their distinctions, and how they can collaborate to enhance resource utilization and application performance.\n\nJoin us on a quest to become proficient in the art of scaling within Kubernetes.\n\n![hpa-vpa](./hpa-vpa.jpg)\n\n## üìà HorizontalPodAutoscaler (HPA): Scaling Horizontally\n\nUnder the hood, HPA is powered by a dedicated Kubernetes controller. You create an HPA YAML targeting your app's Deployment and use `kubectl` to apply it.\n\n## üìâ Vertical Pod Autoscaler (VPA): Scaling Vertically\n\nVPA involves three pods:\n\n- **Recommender**: [Analyzes](https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/recommender/README.md) Pod resource usage and recommends CPU/memory requests.\n- **Updater**: [Monitors](https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/updater/README.md) and aligns Pod requests with recommendations, recreating if needed.\n- **Admission-plugin**: [Sets](https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/admission-controller/README.md) request values for new/updated Pods.\n\n### ‚ö†Ô∏è VPA Limitations\n\n- VPA doesn't oversee Pod recreation post-eviction, needing tools like Cluster Autoscaler.\n- It can't be used with HPA for CPU/memory scaling, but custom metrics are compatible.\n- VPA's Pod recreation might cause service downtime without fault-tolerant solutions.\n\nHPA and VPA require a [metrics server](https://github.com/kubernetes-sigs/metrics-server), like Kubernetes Metrics Server, to gather CPU/memory metrics for scaling decisions.\n\n### üìä Metrics API Types\n\n- **metrics.k8s.io**: Default metrics, provided by the [metrics-server](https://github.com/kubernetes-sigs/metrics-server).\n- **custom.metrics.k8s.io**: Metrics provided by adapters from inside a cluster, e.g., [Microsoft Azure Adapter](https://github.com/Azure/azure-k8s-metrics-adapter), [Google Stackdriver](https://github.com/GoogleCloudPlatform/k8s-stackdriver), [Prometheus Adapter](https://github.com/kubernetes-sigs/prometheus-adapter).\n- **external.metrics.k8s.io**: Similar to the Custom Metrics API, but metrics are provided by an external system, such as [AWS CloudWatch](https://aws.amazon.com/cloudwatch/).\n\nIn a nutshell, `metrics.k8s.io` encompasses default metrics from the metrics-server, while `custom.metrics.k8s.io` involves internal cluster adapters like Microsoft Azure or Google Stackdriver, and `external.metrics.k8s.io` pertains to external systems like AWS CloudWatch, providing adaptable metrics.\n\n## ‚òÅÔ∏è Deploy Metrics Server Using Helm\n\nTo initiate the process, integrate the metrics-server repository into your helm package collection. Employ the `helm repo add` command as follows:\n\n```shell\nhelm repo add metrics-server https://kubernetes-sigs.github.io/metrics-server\n```\n\nThen, employ `helm repo update` to refresh the pool of accessible packages:\n\n```shell\n$ helm repo update metrics-server\n\nHang tight while we grab the latest from your chart repositories...\n...Successfully got an update from the \"metrics-server\" chart repository\nUpdate Complete. ‚éàHappy Helming!‚éà\n\n$ helm search repo metrics-server\n```\n\n### ‚ò∏Ô∏è Repository Integration Complete: Metrics Server Deployment\n\nWith the repository successfully added to Helm, you're poised to include metrics-server in your Kubernetes deployments. Here's how you can create your deployment configuration:\n\nClone the Kubernetes Starter Kit Git repository:\n\n```shell\ngit clone https://github.com/seifrajhi/K8s-Workload-Scaling-Strategies.git\n```\n\nLocate the metrics-server configuration in the following path:\n\n```shell\ncd K8s-Workload-Scaling-Strategies\nvim assets/manifests/metrics-server-values-v3.11.0.yaml\n```\n\nBy following these steps, you'll seamlessly integrate metrics-server into your Kubernetes environment and have the flexibility to tailor your deployment configuration to your needs.\n\nIt contains a few stock parameters. Note that replicas is a fixed value, 2.\n\n```shell\n## Ref: https://github.com/kubernetes-sigs/metrics-server/blob/metrics-server-helm-chart-3.8.2/charts/metrics-server\n# Number of metrics-server replicas to run\nreplicas: 2\n\napiService:\n    # Specifies if the v1beta1.metrics.k8s.io API service should be created.\n    create: true\n\nhostNetwork:\n    # Specifies if metrics-server should be started in hostNetwork mode.\n    enabled: false\n```\n\nYou can check the Metrics Server chart page for explanations of the available values for metrics-server.\n\nThen, you can install the Kubernetes Metrics Server using Helm (a dedicated metrics-server namespace will be created as well):\n\n```shell\nhelm install metrics-server metrics-server/metrics-server --version 3.11.0\\\n    --namespace metrics-server \\\n    --create-namespace \\\n    -f \"assets/manifests/metrics-server-v3.11.0.yaml\"\n```\n\nThis will deploy metrics-server to your configured Kubernetes cluster.\n\nAfter deploying, you can use `helm ls` to verify that metrics-server has been added to your deployment:\n\n```shell\nhelm ls -n metrics-server\n```\n\nNext, you can check the status of all of the Kubernetes resources deployed to the metrics-server namespace:\n\n```shell\nkubectl get all -n metrics-server\n```\n\nFinally, check if the `kubectl top` command works (similar to Linux top command - prints current resource usage, such as CPU and memory). Below command displays current resource usage for all Pods in the kube-system namespace:\n\n```shell\nkubectl top pods -n kube-system\n```\n\nYou have now deployed metrics-server into your Kubernetes cluster. In the next step, you'll review some of the parameters of a HorizontalPodAutoscaler Custom Resource Definition.\n\n## Introducing HPAs: The Key to Dynamic Scaling\n\nSo far, you've been manually configuring the number of pods in your Kubernetes deployments. This is fine for simple cases, but it can be a pain to keep up with as your application grows and traffic fluctuates.\n\nThat's where **HorizontalPodAutoscalers (HPAs)** come in. HPAs are a Kubernetes feature that automatically scales your deployments up or down based on metrics like CPU usage and memory utilization. This means that you can focus on building great applications, and let HPAs take care of the scaling for you.\n\n### How an HPA Works\n\n1. **Metric Monitoring**: The HPA watches a metric, such as CPU usage.\n2. **Threshold Exceeded**: When the metric exceeds a threshold, the HPA triggers a scale operation.\n3. **Scaling**: The scale operation either increases or decreases the number of pods in the deployment.\n\n### HPA CRD (Custom Resource Definition)\n\nThe HPA CRD is a YAML file that specifies the configuration of the HPA. The CRD includes the following fields:\n\n- **Target**: The name of the Kubernetes object that the HPA is monitoring.\n- **Metrics**: The metrics that the HPA is watching.\n- **Scaling Policies**: The rules for how the HPA scales the deployment.\n\nHere's an example of an HPA CRD:\n\n```yaml\napiVersion: autoscaling/v2beta2\nkind: HorizontalPodAutoscaler\nmetadata:\n    name: demo-hpa\nspec:\n    scaleTargetRef:\n        apiVersion: apps/v1\n        kind: Deployment\n        name: my-deployment\n    minReplicas: 1\n    maxReplicas: 3\n    metrics:\n        - type: Resource\n            resource:\n                name: cpu\n                target:\n                    type: Utilization\n                    averageUtilization: 80\n```\n\n### Explanation of the Configuration\n\n- **spec.scaleTargetRef**: Specifies the Kubernetes object that the HPA is monitoring. In this case, it is the `my-deployment` deployment.\n- **spec.minReplicas**: Specifies the lower limit for the number of replicas in the deployment. The HPA will never scale the deployment down below 1 pod.\n- **spec.maxReplicas**: Specifies the upper limit for the number of replicas in the deployment. The HPA will never scale the deployment up above 3 pods.\n- **spec.metrics.type**: Specifies the type of metric that the HPA is using to calculate the desired replica count. Here, it is using the `Resource` type, which means it is scaling the deployment based on the average CPU utilization.\n- **spec.metrics.resource.name**: Specifies the name of the resource that the HPA is monitoring. In this case, it is the `cpu` resource.\n- **spec.metrics.resource.averageUtilization**: Specifies the threshold value for the metric. The HPA will scale the deployment up if the average CPU utilization exceeds 80%.\n\n### Creating an HPA\n\nThere are two ways to create an HPA for your application deployment. You can use the `kubectl autoscale` command on an existing deployment, or you can create an HPA YAML manifest.\n\n#### Using `kubectl autoscale` Command\n\nTo create an HPA using the `kubectl autoscale` command, you need to specify the name of the deployment and the target CPU utilization. For example, the following command would create an HPA for the `myapp-test` deployment with a target CPU utilization of 80%:\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n    name: myapp-test\nspec:\n    selector:\n        matchLabels:\n            run: myapp-test\n    replicas: 1\n    template:\n        metadata:\n            labels:\n                run: myapp-test\n        spec:\n            containers:\n                - name: busybox\n                    image: busybox\n                    resources:\n                        limits:\n                            cpu: 50m\n                        requests:\n                            cpu: 20m\n                    command: [\"sh\", \"-c\"]\n                    args:\n                        - while [ 1 ]; do\n                            echo \"Test\";\n                            sleep 0.01;\n                            done\n```\n\nNote the last few lines of this file. They contain some shell syntax to repeatedly print \"Test\" a hundred times a second, to simulate load. Once you are done reviewing the file, you can deploy it into your cluster using `kubectl`:\n\n```shell\nkubectl apply -f assets/manifests/hpa/metrics-server/myapp-test.yaml\n```\n\nFinally, create a HorizontalPodAutoscaler targeting the `myapp-test` deployment:\n\n```shell\nkubectl autoscale deployment hpa-test --cpu-percent=80 --min=1 --max=3\n```\n\nYou can check if the HPA resource was created by running:\n\n```shell\nkubectl get hpa\n```\n\nThe `TARGETS` column of the output will eventually show a figure of current usage%/target usage%.\n\nYou can also observe the logged events that an HPA generates by using:\n\n```shell\nkubectl describe hpa hpa-test\n```\n\nIn a real-world scenario, you will want to use a dedicated YAML manifest to define each HPA. This way, you can track the changes by having the manifest committed in a Git repository, as well as come back to it later and perform changes.\n\n### Scaling Applications Automatically with Metrics Server\n\nIn this last step, you will experiment with two different ways of generating server load and scaling your applications automatically via a YAML manifest.\n\n#### Application Deployment\n\nOne way to generate server load is to create an application deployment that performs some CPU-intensive computations. This will cause the pods in the deployment to use more CPU resources, which will trigger the HorizontalPodAutoscaler (HPA) to scale the deployment up.\n\n#### Shell Script\n\nAnother way to generate server load is to use a shell script. This script can be configured to perform fast successive HTTP calls to a web application. This will cause the web application to use more CPU resources, which will also trigger the HPA to scale the deployment up.\n\n#### Constant Load Test\n\nIn this scenario, you will create a sample application that performs some CPU-intensive computations. This application is implemented in Python and is included in one of the example manifests from the starter kit. You can open the manifest, called `constant-load.yaml`, using nano or your favorite text editor.\n\nThe manifest defines a deployment that creates a pod that runs the Python application. The application will continuously perform CPU-intensive computations, which will cause the pod to use more CPU resources. This will trigger the HorizontalPodAutoscaler (HPA) to scale the deployment up.\n\nOnce you have opened the manifest, you can edit it to change the number of replicas in the deployment. The default number of replicas is 1, but you can increase this number to create more pods. The more pods you create, the more CPU resources will be used, and the more the HPA will scale the deployment up.\n\nOnce you have edited the manifest, you can save it and apply it to your cluster using the `kubectl apply` command:\n\n```shell\nkubectl apply -f assets/manifests/hpa/metrics-server/constant-load.yaml\n```\n\nOnce the manifest has been applied, the HPA will start monitoring the CPU usage of the deployment. If the CPU usage exceeds the target utilization, the HPA will scale the deployment up to add more pods.\n\nVerify that the deployment was created successfully, and that it's up and running:\n\n```shell\nkubectl get deployments\n```\n\nNext, you will need to deploy another HorizontalPodAutoscaler (HPA) to this cluster. There is an example HPA that is matched to this scenario in the file `constant-load-hpa.yaml`.\n\nThe `constant-load-hpa.yaml` file defines an HPA that monitors the CPU usage of the constant-load deployment. The HPA will scale the deployment up if the CPU usage exceeds the target utilization, which is set to 80% by default.\n\n```shell\ncat assets/manifests/hpa/metrics-server/constant-load-hpa.yaml\n```\n\n```yaml\napiVersion: autoscaling/v2beta2\nkind: HorizontalPodAutoscaler\nmetadata:\n    name: constant-load\nspec:\n    scaleTargetRef:\n        apiVersion: apps/v1\n        kind: Deployment\n        name: constant-load-deployment\n    minReplicas: 1\n    maxReplicas: 3\n    metrics:\n        - type: Resource\n            resource:\n                name: cpu\n                target:\n                    type: Utilization\n                    averageUtilization: 80\n```\n\n```shell\nkubectl apply -f constant-load-hpa.yaml\n```\n\nOnce the HPA has been applied, it will start monitoring the CPU usage of the constant-load deployment. If the CPU usage exceeds the target utilization, the HPA will scale the deployment up to add more pods.\n\n## Running Vertical Pod Autoscaler\n\nFor the VPA to work, it relies on the Kubernetes Metrics Server to get a Pod's CPU/Memory values. However, it can also use Prometheus. See [How can I use Prometheus for the VPA recommender](https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler#using-prometheus).\n\n### üõ†Ô∏è Installing Vertical Pod Autoscaler\n\nLet's use the Helm chart `cowboysysop/vertical-pod-autoscaler`:\n\n```shell\nhelm repo add cowboysysop https://cowboysysop.github.io/charts/\nhelm -n kube-system upgrade --install vertical-pod-autoscaler cowboysysop/vertical-pod-autoscaler\n```\n\nThen, you can check VPA's Pods:\n\n```shell\nkubectl -n kube-system get pod -l app.kubernetes.io/name=vertical-pod-autoscaler\n```\n\nAnd its CustomResourceDefinitions:\n\n```shell\nkubectl get crds\nNAME                                                   CREATED AT\nverticalpodautoscalercheckpoints.autoscaling.k8s.io  2023-08-26T10:45:46Z\nverticalpodautoscalers.autoscaling.k8s.io            2023-08-26T10:45:46Z\n```\n\nNow everything is ready to start using it.\n\n### üìÑ Examples of Work with Vertical Pod Autoscaler\n\nIn the [VPA repository](https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler), there is a directory named `vpa`, which contains examples of manifests. In the `hamster.yaml` file, there is an example of a configured VPA and a test Deployment. But let's create our manifests and deploy resources separately.\n\n#### üêπ First, Describe a Deployment\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n    name: hamster\nspec:\n    selector:\n        matchLabels:\n            app: hamster\n    replicas: 2\n    template:\n        metadata:\n            labels:\n                app: hamster\n        spec:\n            securityContext:\n                runAsNonRoot: true\n                runAsUser: 65534 # nobody\n            containers:\n                - name: hamster\n                    image: registry.k8s.io/ubuntu-slim:0.1\n                    resources:\n                        requests:\n                            cpu: 100m\n                            memory: 50Mi\n                    command: [\"/bin/sh\"]\n                    args:\n                        - \"-c\"\n                        - \"while true; do timeout 0.5s yes >/dev/null; sleep 0.5s; done\"\n```\n\nHere we have to create two Pods with requests at 100 Milli CPU and 50 Megabyte memory. Deploy it:\n\n```shell\nkubectl apply -f assets/manifests/vpa/hamster.yaml\ndeployment.apps/hamster created\n```\n\nA few minutes later, check the resources that are actually consumed by the Pods:\n\n```shell\nkubectl top pod\nNAME                       CPU(cores)   MEMORY(bytes)\nhamster-65cd4dd797-fq9lq   498m         0Mi\nhamster-65cd4dd797-lnpks   499m         0Mi\n```\n\n#### Now, Add a VPA\n\n```yaml\napiVersion: \"autoscaling.k8s.io/v1\"\nkind: VerticalPodAutoscaler\nmetadata:\n    name: hamster-vpa\nspec:\n    targetRef:\n        apiVersion: \"apps/v1\"\n        kind: Deployment\n        name: hamster\n    resourcePolicy:\n        containerPolicies:\n            - containerName: '*'\n                minAllowed:\n                    cpu: 100m\n                    memory: 50Mi\n                maxAllowed:\n                    cpu: 1\n                    memory: 500Mi\n                controlledResources: [\"cpu\", \"memory\"]\n```\n\nDeploy it:\n\n```shell\nkubectl apply -f assets/manifests/vpa/vpa.yaml\nverticalpodautoscaler.autoscaling.k8s.io/hamster-vpa created\n```\n\nCheck the VPA object:\n\n```shell\nkubectl get vpa\nNAME         MODE CPU MEM PROVIDED AGE\nhamster-vpa   Auto                 14s\n```\n\nAnd in a minute or two, the Recommender starts working:\n\n```shell\nkubectl get vpa\nNAME          MODE  CPU   MEM     PROVIDED AGE\nhamster-vpa   Auto  587m  262144k  True    43s\n```\n\nAnd in another minute, check the Updater work‚Ää‚Äî‚Ääit kills old Pods to apply new recommended values for the requests:\n\n```shell\nkubectl get pod\nNAME                       READY   STATUS        RESTARTS   AGE\nhamster-65cd4dd797-fq9lq   1/1     Terminating   0          3m43s\nhamster-65cd4dd797-hc9cn   1/1     Running       0          13s\nhamster-65cd4dd797-lnpks   1/1     Running       0          3m43s\n```\n\nCheck the value requests of the new Pod:\n\n```shell\nkubectl get pod hamster-65cd4dd797-hc9cn -o yaml | yq '.spec.containers[].resources'\n{\n    \"requests\": {\n        \"cpu\": \"587m\",\n        \"memory\": \"262144k\"\n    }\n}\n```\n\nThat's all for now. üéâ\n\n## üìï Closing Notes\n\nKubernetes autoscaling is a pivotal strategy for achieving seamless scalability and operational efficiency in your containerized applications. By mastering the art of vertical and horizontal pod autoscaling, you unlock the ability to adapt to varying workloads while optimizing resource utilization. Whether it's boosting performance through vertical scaling or accommodating increased traffic with horizontal scaling, Kubernetes provides the tools to strike a balance between performance and cost-effectiveness. Harness the power of autoscaling to elevate your applications, ensuring they effortlessly meet user demands and resource constraints in today's dynamic computing landscape.\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\n**Subscribe to our newsletter for more insights on AWS cloud computing and containers.**\n","wordcount":1989}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://seifrajhi.github.io/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://seifrajhi.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Kubernetes Autoscaling: Achieving Scalability and Efficiency","item":"https://seifrajhi.github.io/blog/kubernetes-autoscaling-pods-hpa-vpa/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=47ae28bb567c9025f1fee24afb2d20c9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=47ae28bb567c9025f1fee24afb2d20c9"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v25/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-LLPCCGNLH7', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LLPCCGNLH7"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-LLPCCGNLH7',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LLPCCGNLH7', {"anonymize_ip":true,"send_page_view":false});gtag('config', 'GTM-5V895PDS', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://seifrajhi.github.io/blog/kubernetes-autoscaling-pods-hpa-vpa/" data-baseprotocol="https:" data-basehost="seifrajhi.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;174&#x27;%20width=&#x27;150&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" data-srcset="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture><noscript><picture><source type="image/avif" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/2e0ee/saifeddine-rajhi.avif 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/81dba/saifeddine-rajhi.avif 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/20c67/saifeddine-rajhi.avif 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/94b9f/saifeddine-rajhi.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/92aab/saifeddine-rajhi.webp 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/359cc/saifeddine-rajhi.webp 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/aac41/saifeddine-rajhi.webp 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/a15c6/saifeddine-rajhi.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png" srcSet="/static/a1a51351bdf7de55eaaa515eb15ce2da/9c61d/saifeddine-rajhi.png 38w,/static/a1a51351bdf7de55eaaa515eb15ce2da/d405f/saifeddine-rajhi.png 75w,/static/a1a51351bdf7de55eaaa515eb15ce2da/885b3/saifeddine-rajhi.png 150w,/static/a1a51351bdf7de55eaaa515eb15ce2da/4aeea/saifeddine-rajhi.png 300w" alt="Saifeddine Rajhi"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Saifeddine <br/> Rajhi</a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="My public talks" href="/talks/">talks</a></li><li><a title="Review My Resume" href="/cv/platform-engineer/">cv</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:100.21978021978022%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;object-fit:fill;object-position:center" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADOElEQVR42qVUW0xScRgnL9nMsloPOi9p681Ht3jo9tJWazpfwnV5yFadEm/N5kNLO04z8TIFteSoA02phTq1OQEvEF7b0q0VajChlUCkkiAocAy+zv8oRC+W+m3fvnPOdzm/78pgbEEAsAdJnlRbRHGZ/7cdU61MW9r6fhlEUytQJ9NVMxh4wKZqG4E3UbA44nCu7EtN07DBIxwzAU+iJW7h0iM7QsoSiwORrOhWMxve6qF5YhFKO6bP+uu2RTgAnVpJl/pMo1IPLe8WobhDfd5ft72ACghCkpCrmYRCD8LxReDLNhBixGTw1s44BNA18TL1zgBUdAg49dj04GS+GZgFFjidb3rESNwMRtv88UExfKOBasLCxXt9hhTFZZgvxLLNs/vTbJBSbvVcLLF4wm7aIZa9NBefvpjsb5vF6wvBcTzA1yhu39wVTud0Nl1wqougYARFZ60NJnEBCtvtZOuwA15Q/KTDtp5MfYvKcA6z8bqwFLzrEPIp65xhV/eqr9LBKjpmk4XjCyuCUdMyf+irRqCc19YO6HXR6UuOSxyLW/rB5WlROkA04oCBjy5I4ix7IjCzk9dv0DVRtgTyGTWZBWMLq1XdmsuMerleJP7khLYpCylW/YLuzySUD5EQgf10l3bZoXHIASOzJExoSGgYdEBFzypE3TO7i6Uk9KhJeK1ap33bVS7gyw3tKMnAevm8hFAY5WXdmhyhUpeXyjXWxWfb3RhhpdCtwasx6ocjTmilUKY32dzHc+yQUmFsaFHO5ZX3aO4TSmP/86Fv/eduCPfRaVd1zkQWiKYS6RqyNob2WKa17sDtdXj40uZC6TZRSJ922V0H75AQm2kReKcDSeSLi1URvi4jRsOKZg8jIBgZnsjqC6GCDiYWAsSxze7ou0tuZhFADNsymogZQpEPNknZUj5/jZ03KGq735rQz6HX7ZEJuQvNqbwfcO3ZEiTkfhcdTluL8bfx7fW/dhvHFRubIlMz2ybmQTy1APzejU3x6nZ8HPhyPQjGdnMcNuFjnIHwGom2plFp8AjQ+ZLq6rHKN0d3dWh50rmStkkrdWBtUEMfWB9tP6AXRa1UW8yT6Cr/B9lvrYUpF+E9DVkAAAAASUVORK5CYII=" alt=""/><picture><source type="image/webp" data-srcset="/static/ac5fc33b531d775f51f3a52118a89a2d/b9e89/hpa-vpa-cover.webp 750w,/static/ac5fc33b531d775f51f3a52118a89a2d/55619/hpa-vpa-cover.webp 910w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/ac5fc33b531d775f51f3a52118a89a2d/d0bbc/hpa-vpa-cover.png" data-srcset="/static/ac5fc33b531d775f51f3a52118a89a2d/38e6a/hpa-vpa-cover.png 750w,/static/ac5fc33b531d775f51f3a52118a89a2d/d0bbc/hpa-vpa-cover.png 910w" alt="Kubernetes Autoscaling: Achieving Scalability and Efficiency"/></picture><noscript><picture><source type="image/webp" srcSet="/static/ac5fc33b531d775f51f3a52118a89a2d/b9e89/hpa-vpa-cover.webp 750w,/static/ac5fc33b531d775f51f3a52118a89a2d/55619/hpa-vpa-cover.webp 910w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;object-position:center;opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/ac5fc33b531d775f51f3a52118a89a2d/d0bbc/hpa-vpa-cover.png" srcSet="/static/ac5fc33b531d775f51f3a52118a89a2d/38e6a/hpa-vpa-cover.png 750w,/static/ac5fc33b531d775f51f3a52118a89a2d/d0bbc/hpa-vpa-cover.png 910w" alt="Kubernetes Autoscaling: Achieving Scalability and Efficiency"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption data-nosnippet="" class="image-title">Photo by Saifeddine Rajhi</figcaption></figure><h1>Kubernetes Autoscaling: Achieving Scalability and Efficiency</h1><div data-nosnippet="" class="blog-details"><time class="blog-createdat" dateTime="2024-10-27">Oct 27, 2024</time><span> ‚Ä¢ </span><span class="blog-time2read">11<!-- -->mins<!-- --> read</span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul data-nosnippet="" class="blog-tags"><li>Kubernetes</li><li>Autoscaling</li><li>HPA &amp; VPA</li><li>SRE</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div data-nosnippet="" class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><ul class="toc-list"></ul></ul></div><div class="content blog-content"><blockquote>
<p><strong>How to Scale Pods Vertically and Horizontally in Kubernetes üåê</strong></p>
</blockquote>
<h2 id="-introduction" style="position:relative;"><a href="#-introduction" aria-label=" introduction permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üê≥ Introduction</h2>
<p><a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes</a> embodies resilience and scalability by deploying diverse pods with varying resource allocations, ensuring application redundancy. While manual adjustments suffice, Kubernetes elevates scaling with Horizontal Pod Autoscaling (HPA). This self-regulating loop dynamically expands or contracts resources (app Pods) based on real-time demands. Simply deploy a <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/" target="_blank" rel="noopener noreferrer">HorizontalPodAutoscaler (HPA)</a> resource for auto-scaling, leaving the automation to it.</p>
<p>Moreover, in addition to HPA, the <a href="https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler" target="_blank" rel="noopener noreferrer">Vertical Pod Autoscaler (VPA)</a> offers a distinct approach. Unlike HPA's horizontal scaling, VPA modifies a Pod's resources.requests, prompting the Kubernetes Scheduler to shift Pods across WorkerNodes as needed. VPA incessantly monitors container resource usage, automatically tweaking requests to prevent waste and ensure sufficient CPU and memory allocation. This synergy of HPA and VPA empowers Kubernetes users to effortlessly achieve efficient, tailored scaling.</p>
<p>This blog explores the universe of Kubernetes autoscaling, casting a spotlight on these two powerful tools: HPA and VPA. We'll uncover how they work, their distinctions, and how they can collaborate to enhance resource utilization and application performance.</p>
<p>Join us on a quest to become proficient in the art of scaling within Kubernetes.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB5VUzGVGA/wD/xAAaEAACAgMAAAAAAAAAAAAAAAAAAQISESEx/9oACAEBAAEFAl1syKUS+rI//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAABEBECIx/9oACAEBAAY/AjMKEdpOv//EABwQAAMAAgMBAAAAAAAAAAAAAAABETFRYZGh8P/aAAgBAQABPyGsBTTbOZ6Xt2UZg1hki0j5rP/aAAwDAQACAAMAAAAQ6C//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QhX//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCn/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARITFBUXH/2gAIAQEAAT8Qvp3tbD9c4pXxxBbtN+oy1UcoWV5sATn7kR9uH//Z'); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="hpa-vpa" title="" src="/static/063a135be697a2c366aa6efcd27d818a/7bf67/hpa-vpa.jpg" srcset="/static/063a135be697a2c366aa6efcd27d818a/651be/hpa-vpa.jpg 170w,
/static/063a135be697a2c366aa6efcd27d818a/d30a3/hpa-vpa.jpg 340w,
/static/063a135be697a2c366aa6efcd27d818a/7bf67/hpa-vpa.jpg 680w,
/static/063a135be697a2c366aa6efcd27d818a/990cb/hpa-vpa.jpg 1020w,
/static/063a135be697a2c366aa6efcd27d818a/e5166/hpa-vpa.jpg 1200w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<h2 id="-horizontalpodautoscaler-hpa-scaling-horizontally" style="position:relative;"><a href="#-horizontalpodautoscaler-hpa-scaling-horizontally" aria-label=" horizontalpodautoscaler hpa scaling horizontally permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üìà HorizontalPodAutoscaler (HPA): Scaling Horizontally</h2>
<p>Under the hood, HPA is powered by a dedicated Kubernetes controller. You create an HPA YAML targeting your app's Deployment and use <code class="language-text">kubectl</code> to apply it.</p>
<h2 id="-vertical-pod-autoscaler-vpa-scaling-vertically" style="position:relative;"><a href="#-vertical-pod-autoscaler-vpa-scaling-vertically" aria-label=" vertical pod autoscaler vpa scaling vertically permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üìâ Vertical Pod Autoscaler (VPA): Scaling Vertically</h2>
<p>VPA involves three pods:</p>
<ul>
<li><strong>Recommender</strong>: <a href="https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/recommender/README.md" target="_blank" rel="noopener noreferrer">Analyzes</a> Pod resource usage and recommends CPU/memory requests.</li>
<li><strong>Updater</strong>: <a href="https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/updater/README.md" target="_blank" rel="noopener noreferrer">Monitors</a> and aligns Pod requests with recommendations, recreating if needed.</li>
<li><strong>Admission-plugin</strong>: <a href="https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/admission-controller/README.md" target="_blank" rel="noopener noreferrer">Sets</a> request values for new/updated Pods.</li>
</ul>
<h3 id="Ô∏è-vpa-limitations" style="position:relative;"><a href="#%EF%B8%8F-vpa-limitations" aria-label="Ô∏è vpa limitations permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚ö†Ô∏è VPA Limitations</h3>
<ul>
<li>VPA doesn't oversee Pod recreation post-eviction, needing tools like Cluster Autoscaler.</li>
<li>It can't be used with HPA for CPU/memory scaling, but custom metrics are compatible.</li>
<li>VPA's Pod recreation might cause service downtime without fault-tolerant solutions.</li>
</ul>
<p>HPA and VPA require a <a href="https://github.com/kubernetes-sigs/metrics-server" target="_blank" rel="noopener noreferrer">metrics server</a>, like Kubernetes Metrics Server, to gather CPU/memory metrics for scaling decisions.</p>
<h3 id="-metrics-api-types" style="position:relative;"><a href="#-metrics-api-types" aria-label=" metrics api types permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üìä Metrics API Types</h3>
<ul>
<li><strong>metrics.k8s.io</strong>: Default metrics, provided by the <a href="https://github.com/kubernetes-sigs/metrics-server" target="_blank" rel="noopener noreferrer">metrics-server</a>.</li>
<li><strong>custom.metrics.k8s.io</strong>: Metrics provided by adapters from inside a cluster, e.g., <a href="https://github.com/Azure/azure-k8s-metrics-adapter" target="_blank" rel="noopener noreferrer">Microsoft Azure Adapter</a>, <a href="https://github.com/GoogleCloudPlatform/k8s-stackdriver" target="_blank" rel="noopener noreferrer">Google Stackdriver</a>, <a href="https://github.com/kubernetes-sigs/prometheus-adapter" target="_blank" rel="noopener noreferrer">Prometheus Adapter</a>.</li>
<li><strong>external.metrics.k8s.io</strong>: Similar to the Custom Metrics API, but metrics are provided by an external system, such as <a href="https://aws.amazon.com/cloudwatch/" target="_blank" rel="noopener noreferrer">AWS CloudWatch</a>.</li>
</ul>
<p>In a nutshell, <code class="language-text">metrics.k8s.io</code> encompasses default metrics from the metrics-server, while <code class="language-text">custom.metrics.k8s.io</code> involves internal cluster adapters like Microsoft Azure or Google Stackdriver, and <code class="language-text">external.metrics.k8s.io</code> pertains to external systems like AWS CloudWatch, providing adaptable metrics.</p>
<h2 id="Ô∏è-deploy-metrics-server-using-helm" style="position:relative;"><a href="#%EF%B8%8F-deploy-metrics-server-using-helm" aria-label="Ô∏è deploy metrics server using helm permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚òÅÔ∏è Deploy Metrics Server Using Helm</h2>
<p>To initiate the process, integrate the metrics-server repository into your helm package collection. Employ the <code class="language-text">helm repo add</code> command as follows:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> metrics-server https://kubernetes-sigs.github.io/metrics-server</code></pre></div>
<p>Then, employ <code class="language-text">helm repo update</code> to refresh the pool of accessible packages:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ helm repo update metrics-server

Hang tight <span class="token keyword">while</span> we grab the latest from your chart repositories<span class="token punctuation">..</span>.
<span class="token punctuation">..</span>.Successfully got an update from the <span class="token string">"metrics-server"</span> chart repository
Update Complete. ‚éàHappy Helming<span class="token operator">!</span>‚éà

$ helm search repo metrics-server</code></pre></div>
<h3 id="Ô∏è-repository-integration-complete-metrics-server-deployment" style="position:relative;"><a href="#%EF%B8%8F-repository-integration-complete-metrics-server-deployment" aria-label="Ô∏è repository integration complete metrics server deployment permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚ò∏Ô∏è Repository Integration Complete: Metrics Server Deployment</h3>
<p>With the repository successfully added to Helm, you're poised to include metrics-server in your Kubernetes deployments. Here's how you can create your deployment configuration:</p>
<p>Clone the Kubernetes Starter Kit Git repository:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">git</span> clone https://github.com/seifrajhi/K8s-Workload-Scaling-Strategies.git</code></pre></div>
<p>Locate the metrics-server configuration in the following path:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">cd</span> K8s-Workload-Scaling-Strategies
<span class="token function">vim</span> assets/manifests/metrics-server-values-v3.11.0.yaml</code></pre></div>
<p>By following these steps, you'll seamlessly integrate metrics-server into your Kubernetes environment and have the flexibility to tailor your deployment configuration to your needs.</p>
<p>It contains a few stock parameters. Note that replicas is a fixed value, 2.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment">## Ref: https://github.com/kubernetes-sigs/metrics-server/blob/metrics-server-helm-chart-3.8.2/charts/metrics-server</span>
<span class="token comment"># Number of metrics-server replicas to run</span>
replicas: <span class="token number">2</span>

apiService:
    <span class="token comment"># Specifies if the v1beta1.metrics.k8s.io API service should be created.</span>
    create: <span class="token boolean">true</span>

hostNetwork:
    <span class="token comment"># Specifies if metrics-server should be started in hostNetwork mode.</span>
    enabled: <span class="token boolean">false</span></code></pre></div>
<p>You can check the Metrics Server chart page for explanations of the available values for metrics-server.</p>
<p>Then, you can install the Kubernetes Metrics Server using Helm (a dedicated metrics-server namespace will be created as well):</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm <span class="token function">install</span> metrics-server metrics-server/metrics-server <span class="token parameter variable">--version</span> <span class="token number">3.11</span>.0<span class="token punctuation">\</span>
    <span class="token parameter variable">--namespace</span> metrics-server <span class="token punctuation">\</span>
    --create-namespace <span class="token punctuation">\</span>
    <span class="token parameter variable">-f</span> <span class="token string">"assets/manifests/metrics-server-v3.11.0.yaml"</span></code></pre></div>
<p>This will deploy metrics-server to your configured Kubernetes cluster.</p>
<p>After deploying, you can use <code class="language-text">helm ls</code> to verify that metrics-server has been added to your deployment:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm <span class="token function">ls</span> <span class="token parameter variable">-n</span> metrics-server</code></pre></div>
<p>Next, you can check the status of all of the Kubernetes resources deployed to the metrics-server namespace:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get all <span class="token parameter variable">-n</span> metrics-server</code></pre></div>
<p>Finally, check if the <code class="language-text">kubectl top</code> command works (similar to Linux top command - prints current resource usage, such as CPU and memory). Below command displays current resource usage for all Pods in the kube-system namespace:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl <span class="token function">top</span> pods <span class="token parameter variable">-n</span> kube-system</code></pre></div>
<p>You have now deployed metrics-server into your Kubernetes cluster. In the next step, you'll review some of the parameters of a HorizontalPodAutoscaler Custom Resource Definition.</p>
<h2 id="introducing-hpas-the-key-to-dynamic-scaling" style="position:relative;"><a href="#introducing-hpas-the-key-to-dynamic-scaling" aria-label="introducing hpas the key to dynamic scaling permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Introducing HPAs: The Key to Dynamic Scaling</h2>
<p>So far, you've been manually configuring the number of pods in your Kubernetes deployments. This is fine for simple cases, but it can be a pain to keep up with as your application grows and traffic fluctuates.</p>
<p>That's where <strong>HorizontalPodAutoscalers (HPAs)</strong> come in. HPAs are a Kubernetes feature that automatically scales your deployments up or down based on metrics like CPU usage and memory utilization. This means that you can focus on building great applications, and let HPAs take care of the scaling for you.</p>
<h3 id="how-an-hpa-works" style="position:relative;"><a href="#how-an-hpa-works" aria-label="how an hpa works permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How an HPA Works</h3>
<ol>
<li><strong>Metric Monitoring</strong>: The HPA watches a metric, such as CPU usage.</li>
<li><strong>Threshold Exceeded</strong>: When the metric exceeds a threshold, the HPA triggers a scale operation.</li>
<li><strong>Scaling</strong>: The scale operation either increases or decreases the number of pods in the deployment.</li>
</ol>
<h3 id="hpa-crd-custom-resource-definition" style="position:relative;"><a href="#hpa-crd-custom-resource-definition" aria-label="hpa crd custom resource definition permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>HPA CRD (Custom Resource Definition)</h3>
<p>The HPA CRD is a YAML file that specifies the configuration of the HPA. The CRD includes the following fields:</p>
<ul>
<li><strong>Target</strong>: The name of the Kubernetes object that the HPA is monitoring.</li>
<li><strong>Metrics</strong>: The metrics that the HPA is watching.</li>
<li><strong>Scaling Policies</strong>: The rules for how the HPA scales the deployment.</li>
</ul>
<p>Here's an example of an HPA CRD:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> autoscaling/v2beta2
<span class="token key atrule">kind</span><span class="token punctuation">:</span> HorizontalPodAutoscaler
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> demo<span class="token punctuation">-</span>hpa
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">scaleTargetRef</span><span class="token punctuation">:</span>
        <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
        <span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
        <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>deployment
    <span class="token key atrule">minReplicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token key atrule">maxReplicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">metrics</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> Resource
            <span class="token key atrule">resource</span><span class="token punctuation">:</span>
                <span class="token key atrule">name</span><span class="token punctuation">:</span> cpu
                <span class="token key atrule">target</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> Utilization
                    <span class="token key atrule">averageUtilization</span><span class="token punctuation">:</span> <span class="token number">80</span></code></pre></div>
<h3 id="explanation-of-the-configuration" style="position:relative;"><a href="#explanation-of-the-configuration" aria-label="explanation of the configuration permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Explanation of the Configuration</h3>
<ul>
<li><strong>spec.scaleTargetRef</strong>: Specifies the Kubernetes object that the HPA is monitoring. In this case, it is the <code class="language-text">my-deployment</code> deployment.</li>
<li><strong>spec.minReplicas</strong>: Specifies the lower limit for the number of replicas in the deployment. The HPA will never scale the deployment down below 1 pod.</li>
<li><strong>spec.maxReplicas</strong>: Specifies the upper limit for the number of replicas in the deployment. The HPA will never scale the deployment up above 3 pods.</li>
<li><strong>spec.metrics.type</strong>: Specifies the type of metric that the HPA is using to calculate the desired replica count. Here, it is using the <code class="language-text">Resource</code> type, which means it is scaling the deployment based on the average CPU utilization.</li>
<li><strong>spec.metrics.resource.name</strong>: Specifies the name of the resource that the HPA is monitoring. In this case, it is the <code class="language-text">cpu</code> resource.</li>
<li><strong>spec.metrics.resource.averageUtilization</strong>: Specifies the threshold value for the metric. The HPA will scale the deployment up if the average CPU utilization exceeds 80%.</li>
</ul>
<h3 id="creating-an-hpa" style="position:relative;"><a href="#creating-an-hpa" aria-label="creating an hpa permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Creating an HPA</h3>
<p>There are two ways to create an HPA for your application deployment. You can use the <code class="language-text">kubectl autoscale</code> command on an existing deployment, or you can create an HPA YAML manifest.</p>
<h4 id="using-code-classlanguage-textkubectl-autoscalecode-command" style="position:relative;"><a href="#using-code-classlanguage-textkubectl-autoscalecode-command" aria-label="using code classlanguage textkubectl autoscalecode command permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using <code class="language-text">kubectl autoscale</code> Command</h4>
<p>To create an HPA using the <code class="language-text">kubectl autoscale</code> command, you need to specify the name of the deployment and the target CPU utilization. For example, the following command would create an HPA for the <code class="language-text">myapp-test</code> deployment with a target CPU utilization of 80%:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>test
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">selector</span><span class="token punctuation">:</span>
        <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
            <span class="token key atrule">run</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>test
    <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token key atrule">template</span><span class="token punctuation">:</span>
        <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
            <span class="token key atrule">labels</span><span class="token punctuation">:</span>
                <span class="token key atrule">run</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>test
        <span class="token key atrule">spec</span><span class="token punctuation">:</span>
            <span class="token key atrule">containers</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> busybox
                    <span class="token key atrule">image</span><span class="token punctuation">:</span> busybox
                    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
                        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
                            <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 50m
                        <span class="token key atrule">requests</span><span class="token punctuation">:</span>
                            <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 20m
                    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"sh"</span><span class="token punctuation">,</span> <span class="token string">"-c"</span><span class="token punctuation">]</span>
                    <span class="token key atrule">args</span><span class="token punctuation">:</span>
                        <span class="token punctuation">-</span> while <span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span>; do
                            echo "Test";
                            sleep 0.01;
                            done</code></pre></div>
<p>Note the last few lines of this file. They contain some shell syntax to repeatedly print "Test" a hundred times a second, to simulate load. Once you are done reviewing the file, you can deploy it into your cluster using <code class="language-text">kubectl</code>:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl apply <span class="token parameter variable">-f</span> assets/manifests/hpa/metrics-server/myapp-test.yaml</code></pre></div>
<p>Finally, create a HorizontalPodAutoscaler targeting the <code class="language-text">myapp-test</code> deployment:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl autoscale deployment hpa-test --cpu-percent<span class="token operator">=</span><span class="token number">80</span> <span class="token parameter variable">--min</span><span class="token operator">=</span><span class="token number">1</span> <span class="token parameter variable">--max</span><span class="token operator">=</span><span class="token number">3</span></code></pre></div>
<p>You can check if the HPA resource was created by running:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get hpa</code></pre></div>
<p>The <code class="language-text">TARGETS</code> column of the output will eventually show a figure of current usage%/target usage%.</p>
<p>You can also observe the logged events that an HPA generates by using:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl describe hpa hpa-test</code></pre></div>
<p>In a real-world scenario, you will want to use a dedicated YAML manifest to define each HPA. This way, you can track the changes by having the manifest committed in a Git repository, as well as come back to it later and perform changes.</p>
<h3 id="scaling-applications-automatically-with-metrics-server" style="position:relative;"><a href="#scaling-applications-automatically-with-metrics-server" aria-label="scaling applications automatically with metrics server permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Scaling Applications Automatically with Metrics Server</h3>
<p>In this last step, you will experiment with two different ways of generating server load and scaling your applications automatically via a YAML manifest.</p>
<h4 id="application-deployment" style="position:relative;"><a href="#application-deployment" aria-label="application deployment permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Application Deployment</h4>
<p>One way to generate server load is to create an application deployment that performs some CPU-intensive computations. This will cause the pods in the deployment to use more CPU resources, which will trigger the HorizontalPodAutoscaler (HPA) to scale the deployment up.</p>
<h4 id="shell-script" style="position:relative;"><a href="#shell-script" aria-label="shell script permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Shell Script</h4>
<p>Another way to generate server load is to use a shell script. This script can be configured to perform fast successive HTTP calls to a web application. This will cause the web application to use more CPU resources, which will also trigger the HPA to scale the deployment up.</p>
<h4 id="constant-load-test" style="position:relative;"><a href="#constant-load-test" aria-label="constant load test permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Constant Load Test</h4>
<p>In this scenario, you will create a sample application that performs some CPU-intensive computations. This application is implemented in Python and is included in one of the example manifests from the starter kit. You can open the manifest, called <code class="language-text">constant-load.yaml</code>, using nano or your favorite text editor.</p>
<p>The manifest defines a deployment that creates a pod that runs the Python application. The application will continuously perform CPU-intensive computations, which will cause the pod to use more CPU resources. This will trigger the HorizontalPodAutoscaler (HPA) to scale the deployment up.</p>
<p>Once you have opened the manifest, you can edit it to change the number of replicas in the deployment. The default number of replicas is 1, but you can increase this number to create more pods. The more pods you create, the more CPU resources will be used, and the more the HPA will scale the deployment up.</p>
<p>Once you have edited the manifest, you can save it and apply it to your cluster using the <code class="language-text">kubectl apply</code> command:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl apply <span class="token parameter variable">-f</span> assets/manifests/hpa/metrics-server/constant-load.yaml</code></pre></div>
<p>Once the manifest has been applied, the HPA will start monitoring the CPU usage of the deployment. If the CPU usage exceeds the target utilization, the HPA will scale the deployment up to add more pods.</p>
<p>Verify that the deployment was created successfully, and that it's up and running:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get deployments</code></pre></div>
<p>Next, you will need to deploy another HorizontalPodAutoscaler (HPA) to this cluster. There is an example HPA that is matched to this scenario in the file <code class="language-text">constant-load-hpa.yaml</code>.</p>
<p>The <code class="language-text">constant-load-hpa.yaml</code> file defines an HPA that monitors the CPU usage of the constant-load deployment. The HPA will scale the deployment up if the CPU usage exceeds the target utilization, which is set to 80% by default.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">cat</span> assets/manifests/hpa/metrics-server/constant-load-hpa.yaml</code></pre></div>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> autoscaling/v2beta2
<span class="token key atrule">kind</span><span class="token punctuation">:</span> HorizontalPodAutoscaler
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> constant<span class="token punctuation">-</span>load
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">scaleTargetRef</span><span class="token punctuation">:</span>
        <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
        <span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
        <span class="token key atrule">name</span><span class="token punctuation">:</span> constant<span class="token punctuation">-</span>load<span class="token punctuation">-</span>deployment
    <span class="token key atrule">minReplicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token key atrule">maxReplicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">metrics</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> Resource
            <span class="token key atrule">resource</span><span class="token punctuation">:</span>
                <span class="token key atrule">name</span><span class="token punctuation">:</span> cpu
                <span class="token key atrule">target</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> Utilization
                    <span class="token key atrule">averageUtilization</span><span class="token punctuation">:</span> <span class="token number">80</span></code></pre></div>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl apply <span class="token parameter variable">-f</span> constant-load-hpa.yaml</code></pre></div>
<p>Once the HPA has been applied, it will start monitoring the CPU usage of the constant-load deployment. If the CPU usage exceeds the target utilization, the HPA will scale the deployment up to add more pods.</p>
<h2 id="running-vertical-pod-autoscaler" style="position:relative;"><a href="#running-vertical-pod-autoscaler" aria-label="running vertical pod autoscaler permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running Vertical Pod Autoscaler</h2>
<p>For the VPA to work, it relies on the Kubernetes Metrics Server to get a Pod's CPU/Memory values. However, it can also use Prometheus. See <a href="https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler#using-prometheus" target="_blank" rel="noopener noreferrer">How can I use Prometheus for the VPA recommender</a>.</p>
<h3 id="Ô∏è-installing-vertical-pod-autoscaler" style="position:relative;"><a href="#%EF%B8%8F-installing-vertical-pod-autoscaler" aria-label="Ô∏è installing vertical pod autoscaler permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üõ†Ô∏è Installing Vertical Pod Autoscaler</h3>
<p>Let's use the Helm chart <code class="language-text">cowboysysop/vertical-pod-autoscaler</code>:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> cowboysysop https://cowboysysop.github.io/charts/
helm <span class="token parameter variable">-n</span> kube-system upgrade <span class="token parameter variable">--install</span> vertical-pod-autoscaler cowboysysop/vertical-pod-autoscaler</code></pre></div>
<p>Then, you can check VPA's Pods:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl <span class="token parameter variable">-n</span> kube-system get pod <span class="token parameter variable">-l</span> app.kubernetes.io/name<span class="token operator">=</span>vertical-pod-autoscaler</code></pre></div>
<p>And its CustomResourceDefinitions:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get crds
NAME                                                   CREATED AT
verticalpodautoscalercheckpoints.autoscaling.k8s.io  <span class="token number">2023</span>-08-26T10:45:46Z
verticalpodautoscalers.autoscaling.k8s.io            <span class="token number">2023</span>-08-26T10:45:46Z</code></pre></div>
<p>Now everything is ready to start using it.</p>
<h3 id="-examples-of-work-with-vertical-pod-autoscaler" style="position:relative;"><a href="#-examples-of-work-with-vertical-pod-autoscaler" aria-label=" examples of work with vertical pod autoscaler permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üìÑ Examples of Work with Vertical Pod Autoscaler</h3>
<p>In the <a href="https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler" target="_blank" rel="noopener noreferrer">VPA repository</a>, there is a directory named <code class="language-text">vpa</code>, which contains examples of manifests. In the <code class="language-text">hamster.yaml</code> file, there is an example of a configured VPA and a test Deployment. But let's create our manifests and deploy resources separately.</p>
<h4 id="-first-describe-a-deployment" style="position:relative;"><a href="#-first-describe-a-deployment" aria-label=" first describe a deployment permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üêπ First, Describe a Deployment</h4>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> hamster
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">selector</span><span class="token punctuation">:</span>
        <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
            <span class="token key atrule">app</span><span class="token punctuation">:</span> hamster
    <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token key atrule">template</span><span class="token punctuation">:</span>
        <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
            <span class="token key atrule">labels</span><span class="token punctuation">:</span>
                <span class="token key atrule">app</span><span class="token punctuation">:</span> hamster
        <span class="token key atrule">spec</span><span class="token punctuation">:</span>
            <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>
                <span class="token key atrule">runAsNonRoot</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
                <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">65534</span> <span class="token comment"># nobody</span>
            <span class="token key atrule">containers</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> hamster
                    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.k8s.io/ubuntu<span class="token punctuation">-</span>slim<span class="token punctuation">:</span><span class="token number">0.1</span>
                    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
                        <span class="token key atrule">requests</span><span class="token punctuation">:</span>
                            <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 100m
                            <span class="token key atrule">memory</span><span class="token punctuation">:</span> 50Mi
                    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/sh"</span><span class="token punctuation">]</span>
                    <span class="token key atrule">args</span><span class="token punctuation">:</span>
                        <span class="token punctuation">-</span> <span class="token string">"-c"</span>
                        <span class="token punctuation">-</span> <span class="token string">"while true; do timeout 0.5s yes >/dev/null; sleep 0.5s; done"</span></code></pre></div>
<p>Here we have to create two Pods with requests at 100 Milli CPU and 50 Megabyte memory. Deploy it:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl apply <span class="token parameter variable">-f</span> assets/manifests/vpa/hamster.yaml
deployment.apps/hamster created</code></pre></div>
<p>A few minutes later, check the resources that are actually consumed by the Pods:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl <span class="token function">top</span> pod
NAME                       CPU<span class="token punctuation">(</span>cores<span class="token punctuation">)</span>   MEMORY<span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
hamster-65cd4dd797-fq9lq   498m         0Mi
hamster-65cd4dd797-lnpks   499m         0Mi</code></pre></div>
<h4 id="now-add-a-vpa" style="position:relative;"><a href="#now-add-a-vpa" aria-label="now add a vpa permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Now, Add a VPA</h4>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token string">"autoscaling.k8s.io/v1"</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> VerticalPodAutoscaler
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> hamster<span class="token punctuation">-</span>vpa
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
    <span class="token key atrule">targetRef</span><span class="token punctuation">:</span>
        <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token string">"apps/v1"</span>
        <span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
        <span class="token key atrule">name</span><span class="token punctuation">:</span> hamster
    <span class="token key atrule">resourcePolicy</span><span class="token punctuation">:</span>
        <span class="token key atrule">containerPolicies</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">containerName</span><span class="token punctuation">:</span> <span class="token string">'*'</span>
                <span class="token key atrule">minAllowed</span><span class="token punctuation">:</span>
                    <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 100m
                    <span class="token key atrule">memory</span><span class="token punctuation">:</span> 50Mi
                <span class="token key atrule">maxAllowed</span><span class="token punctuation">:</span>
                    <span class="token key atrule">cpu</span><span class="token punctuation">:</span> <span class="token number">1</span>
                    <span class="token key atrule">memory</span><span class="token punctuation">:</span> 500Mi
                <span class="token key atrule">controlledResources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"cpu"</span><span class="token punctuation">,</span> <span class="token string">"memory"</span><span class="token punctuation">]</span></code></pre></div>
<p>Deploy it:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl apply <span class="token parameter variable">-f</span> assets/manifests/vpa/vpa.yaml
verticalpodautoscaler.autoscaling.k8s.io/hamster-vpa created</code></pre></div>
<p>Check the VPA object:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get vpa
NAME         MODE CPU MEM PROVIDED AGE
hamster-vpa   Auto                 14s</code></pre></div>
<p>And in a minute or two, the Recommender starts working:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get vpa
NAME          MODE  CPU   MEM     PROVIDED AGE
hamster-vpa   Auto  587m  262144k  True    43s</code></pre></div>
<p>And in another minute, check the Updater work‚Ää‚Äî‚Ääit kills old Pods to apply new recommended values for the requests:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get pod
NAME                       READY   STATUS        RESTARTS   AGE
hamster-65cd4dd797-fq9lq   <span class="token number">1</span>/1     Terminating   <span class="token number">0</span>          3m43s
hamster-65cd4dd797-hc9cn   <span class="token number">1</span>/1     Running       <span class="token number">0</span>          13s
hamster-65cd4dd797-lnpks   <span class="token number">1</span>/1     Running       <span class="token number">0</span>          3m43s</code></pre></div>
<p>Check the value requests of the new Pod:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">kubectl get pod hamster-65cd4dd797-hc9cn <span class="token parameter variable">-o</span> yaml <span class="token operator">|</span> yq <span class="token string">'.spec.containers[].resources'</span>
<span class="token punctuation">{</span>
    <span class="token string">"requests"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"cpu"</span><span class="token builtin class-name">:</span> <span class="token string">"587m"</span>,
        <span class="token string">"memory"</span><span class="token builtin class-name">:</span> <span class="token string">"262144k"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>That's all for now. üéâ</p>
<h2 id="-closing-notes" style="position:relative;"><a href="#-closing-notes" aria-label=" closing notes permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>üìï Closing Notes</h2>
<p>Kubernetes autoscaling is a pivotal strategy for achieving seamless scalability and operational efficiency in your containerized applications. By mastering the art of vertical and horizontal pod autoscaling, you unlock the ability to adapt to varying workloads while optimizing resource utilization. Whether it's boosting performance through vertical scaling or accommodating increased traffic with horizontal scaling, Kubernetes provides the tools to strike a balance between performance and cost-effectiveness. Harness the power of autoscaling to elevate your applications, ensuring they effortlessly meet user demands and resource constraints in today's dynamic computing landscape.</p>
<br>
<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>
<blockquote>
<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>
</blockquote>
<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>
<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href="https://www.linkedin.com/in/rajhi-saif/" target="_blank" rel="noopener noreferrer">https://www.linkedin.com/in/rajhi-saif/</a></p>
<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href="https://x.com/rajhisaifeddine" target="_blank" rel="noopener noreferrer">https://x.com/rajhisaifeddine</a></p>
<p><strong>The end ‚úåüèª</strong></p>
<h1 align="center">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>
<p><strong>üìÖ Stay updated</strong></p>
<p><strong>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</strong></p></div></div><div id="content-end"></div></article><div data-nosnippet="" class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div><br/><br/><br/></main><aside class="blogpost-sidebar"><div data-nosnippet="" class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/pack-dockerfile-less-deployment-kubernetes/">Pack: Dockerfile-less Deployment to Kubernetes with Cloud Native Buildpacks<!-- --> ‚Üí</a><a rel="prev" class="prev-post" href="/blog/cve-vulnerability-database-devsecops/">‚Üê <!-- -->CVE Vulnerability Database: What It Is and How to Use It in DevSecOps</a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer data-nosnippet=""><div class="footer-wrapper"><div data-nosnippet="" class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="linkedin" href="https://www.linkedin.com/in/rajhi-saif/" title="Saifeddine Rajhi on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="github" href="https://github.com/seifrajhi" title="Saifeddine Rajhi on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" eventCategory="social" eventAction="click" eventLabel="email" href="mailto:rajhiseif@gmail.com" title="Saifeddine Rajhi&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg><span>Email</span></a></li><li class="social-item social-bluesky"><a rel="me" itemProp="url" eventCategory="bluesky" eventAction="click" eventLabel="social" href="https://bsky.app/profile/saifrajhi.bsky.social" title="Saifeddine Rajhi on Bluesky Social" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bluesky" class="svg-inline--fa fa-bluesky fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"></path></svg><span>Bluesky Social</span></a></li><li class="social-item social-X/Twitter"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="X/Twitter" href="https://x.com/RajhiSaifeddine" title="Saifeddine Rajhi on X/Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg><span>X/Twitter</span></a></li><li class="social-item social-reddit"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="reddit" href="https://www.reddit.com/user/ScoreApprehensive992/" title="Saifeddine Rajhi on Reddit" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit-alien" class="svg-inline--fa fa-reddit-alien fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z"></path></svg><span>Reddit</span></a></li><li class="social-item social-stackoverflow"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://stackoverflow.com/users/21897244/saifeddine-rajhi" title="Saifeddine Rajhi on StackOverflow" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg><span>StackOverflow</span></a></li><li class="social-item social-Goodreads"><a rel="me" eventLabel="StackOverflow" href="https://www.goodreads.com/user/show/176103378-saifeddine" title="Saifeddine Rajhi on Goodreads" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="goodreads" class="svg-inline--fa fa-goodreads fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9 0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9 0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"></path></svg><span>Goodreads</span></a></li><li class="social-item social-osi"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://ossinsight.io/analyze/seifrajhi" title="Saifeddine Rajhi on OSSInsights" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="osi" class="svg-inline--fa fa-osi fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M8 266.44C10.3 130.64 105.4 34 221.8 18.34c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7q-26.7-69.45-53.4-139c-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8a71.47 71.47 0 0 0-64.5-82.2c-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4q-26.85 69.9-53.7 139.9c-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119-24.9-49.2-25.2-87.7-26.8-108.7zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3q22.35-58.65 45-117.3c1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6a91.64 91.64 0 0 1 45.2 90.4c-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6q22.8 58.8 45.2 117.7c1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161-13.7-117.5-119.4-214.8-255.5-198-106.1 13-195.3 102.5-197.1 225.8z"></path></svg><span>OSSInsights</span></a></li><li class="social-item social-devstats"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="StackOverflow" href="https://devstats.cluster.fun/?user=seifrajhi" title="Saifeddine Rajhi on DevStats" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-line" class="svg-inline--fa fa-chart-line fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg><span>DevStats</span></a></li><li class="social-item social-RSS"><a rel="me" itemProp="url" eventCategory="social" eventAction="click" eventLabel="RSS" href="https://seifrajhi.github.io/rss.xml" title="Subscribe to my blog post" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-beat fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg><span>RSS</span></a></li></ul></div><div class="copyright">Saifeddine Rajhi ¬© 1994 - <!-- -->2024<!-- --> <br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/saifrajhi">0C3B BABB 8BC1 EA2B</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/kubernetes-autoscaling-pods-hpa-vpa/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-a5a85b91af04696ccdc4.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88fb5c28d68e831e730a.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-83bdb4e48c18bf191297.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-fa80ec1022aa33a49efa.js\"],\"component---src-pages-cv-platform-engineer-js\":[\"/component---src-pages-cv-platform-engineer-js-f8a094a4210d77300f3f.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-ea9268b02241eb42b7ab.js\"],\"component---src-pages-talks-js\":[\"/component---src-pages-talks-js-5e077ae5e3fe948f12d0.js\"],\"component---src-pages-thoughts-js\":[\"/component---src-pages-thoughts-js-1d43cbe28697ce8b330b.js\"],\"component---src-templates-blog-template-js\":[\"/component---src-templates-blog-template-js-36418f189bad33f744db.js\"],\"component---src-templates-talk-template-js\":[\"/component---src-templates-talk-template-js-7623845caf43043e0341.js\"],\"component---src-templates-thought-template-js\":[\"/component---src-templates-thought-template-js-4e873e19a182fe3c30b3.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="d7919ed1ee0af8f5afaa";</script><script src="/webpack-runtime-414dfe370faa8e694f9b.js" async></script><script src="/framework-c989293af61a95023f7f.js" async></script><script src="/app-a5a85b91af04696ccdc4.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>