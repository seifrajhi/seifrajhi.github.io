{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/kubearmor-k8s-runtime-security/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Shield Against Cloud-Native Threats‚ò∏Ô∏è</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üß∞ Introduction</h2>\n<p>Cloud-native workloads are increasingly becoming the target of attackers. This is because cloud-native applications are often complex and distributed, and they can be difficult to secure.</p>\n<p><a href=\"https://kubearmor.io/\" target=\"_blank\" rel=\"noopener noreferrer\">KubeArmor</a> is a cloud-native runtime security enforcement system that can help you to secure your workloads. KubeArmor restricts the behavior of pods, containers, and nodes at the system level, and it can be used to enforce least-permissive policies. This helps to reduce the attack surface and make it more difficult for attackers to exploit vulnerabilities.</p>\n<p>In this blog post, we will introduce KubeArmor and discuss its key features and benefits. We will also provide some examples of how KubeArmor can be used to improve cloud-native security.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVR42mMwzzu+0C5750ezwrNNaTP/czGo1PNxu04TYwACUfspPPL28zkYoCB01Srm3Mq5ogz//zMy4ALaIQv+B6RO/qfkv/C7etqxXHabCV2cztP9eewnaXA5TivlcZyWyeM4xY7BZlqEb8ES66zGJcvTGpeZZ9QvjchqWBaZVbckNatxsXNm4zLvjPolPgxaflP/u0T1/Ffxm/1NM+NYFattfw+304xsbueZrUA8m9NxSiOP07R5LHZT5wcULazObV7SlNW0vLOgY118TuvKwuzm5UVZjcsmpDcubchuWjGHwbDi7D7j9K3fzEsutoWu+s/MZ9ErxOEyU47dcaYyp9N0aXb76QoMPjO5uC27xUDeDa1fxZZSv1gmq34VT279Yr7yjlX8aeWr+PPqV8llVywUBgBoKXUWkgWCGwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"KubeArmor\" title=\"\" src=\"/static/2a02b75cb4f505624fcaeb537cfa8b3a/c5bb3/KubeArmor.png\" srcset=\"/static/2a02b75cb4f505624fcaeb537cfa8b3a/04472/KubeArmor.png 170w,\n/static/2a02b75cb4f505624fcaeb537cfa8b3a/9f933/KubeArmor.png 340w,\n/static/2a02b75cb4f505624fcaeb537cfa8b3a/c5bb3/KubeArmor.png 680w,\n/static/2a02b75cb4f505624fcaeb537cfa8b3a/b12f7/KubeArmor.png 1020w,\n/static/2a02b75cb4f505624fcaeb537cfa8b3a/b5a09/KubeArmor.png 1360w,\n/static/2a02b75cb4f505624fcaeb537cfa8b3a/29007/KubeArmor.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>KubeArmor is a cloud-native security system that controls what pods, containers, and nodes (VMs) can do, such as running processes, accessing files, and connecting to the network. It does this at the system level, which means that it has a lot of power and flexibility.</p>\n<p>KubeArmor leverages <a href=\"https://en.wikipedia.org/wiki/Linux_Security_Modules\" target=\"_blank\" rel=\"noopener noreferrer\">Linux security modules (LSMs)</a> such as <a href=\"https://en.wikipedia.org/wiki/AppArmor\" target=\"_blank\" rel=\"noopener noreferrer\">AppArmor</a>, <a href=\"https://en.wikipedia.org/wiki/Security-Enhanced_Linux\" target=\"_blank\" rel=\"noopener noreferrer\">SELinux</a>, or <a href=\"https://docs.kernel.org/bpf/prog_lsm.html\" target=\"_blank\" rel=\"noopener noreferrer\">BPF-LSM</a> to enforce the user-specified policies. KubeArmor generates rich alerts/telemetry events with container/pod/namespace identities by leveraging eBPF.</p>\n<h3 id=\"-kubearmor-features\" style=\"position:relative;\"><a href=\"#-kubearmor-features\" aria-label=\" kubearmor features permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚ú® KubeArmor Features</h3>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.294117647058826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42nVSi26DMBDr/3/iVnWFEtY2vF95x7sclLbTdpJlEYzvzuGAVH7BNDn0Y8QwBQzExkS8VogR1hHsE869a1IdWOw1lDaYlcU0G4Y2jj6ycN6z0IXUzKMbVvSj5+fUKPw2XJYFX1mGqq7RdT1xg7br0A8DtNYsHMd0XtF5C1lJNG2DiH8mbGmiTHzjLu8sllWF8npj40c1bc1NL4VAXhTILgWdddxYKfVuOGkH2WoyUJCEqtE0taW1NWJc57DE2gSKJjBr4ylTx/Ah7LOyIWlZOCu3wcJYElJ+2hgWLhRlO6QLC5TfynFziRt2Q6NmCCFwznNa9QpRlrSWwO0u0fXDaigdGtlwdnVTc57DOP6doVILClFCfF9JNNEFTHQhI/1K8y6UdY/P0xmnc4Yj8cfxRJnmWF7y2w29p0y05RtNAqWe/Mgw0G+Tskq8IqzY3j9W/gF48ruTUaq/swAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"features\" title=\"\" src=\"/static/6c5477587726f04681a4c06b263993c0/c5bb3/features.png\" srcset=\"/static/6c5477587726f04681a4c06b263993c0/04472/features.png 170w,\n/static/6c5477587726f04681a4c06b263993c0/9f933/features.png 340w,\n/static/6c5477587726f04681a4c06b263993c0/c5bb3/features.png 680w,\n/static/6c5477587726f04681a4c06b263993c0/b12f7/features.png 1020w,\n/static/6c5477587726f04681a4c06b263993c0/b5a09/features.png 1360w,\n/static/6c5477587726f04681a4c06b263993c0/29007/features.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>KubeArmor leverages technologies like eBPF, AppArmor, or SELinux to enforce user-specified policies. eBPF is a kernel technology that allows users to program the Linux kernel without changing the kernel code. This makes eBPF ideal for runtime security enforcement, as it allows KubeArmor to intercept and modify system calls without impacting the performance of the workload.</p>\n<p>KubeArmor uses eBPF to generate detailed alerts and telemetry events that include information about the identities of the container, pod, and namespace. This information is essential for investigating and responding to security incidents.</p>\n<p>The following diagram shows the architecture of KubeArmor:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/UlEQVR42l1STWgTaRge2y1LD3UpbbFdJKJ2L55ke9ktePMgC9uTPSh48CKIrLDrFkWE7GUFBS1WDWQvZfGwqx4KWsSfqu02m03apOk0k/82M5PJJDOTmUySmSbhm4zPztSK4gsf3/N83/s+vN/3PtRm9reHpHl7tla9Ndcxfj8titVjNUV9YCqNu7pU9dUlxRdZWvEtLyz6MjTjMxXDp0jKfVmW/ZIk3cxms3spJyYfodvdqQTjDSjyzZeieGOlUbl8hbSNSzoAprVllawKaK2EeCuFnFHGmsaDfVdAk7RsJwWEEFVRlBFXx6F7qPfhglu9zsEXLqvr2i9bjTqWxGgrrbOdqMR2YvpGJ6OLnUAh7WCmU1JlUqloULWqAvD9Ew+YIxN/MCd35CbPXf5qysfO/OR9tt/lb4L81WIHSOsgMdnGzBMe82sNLG+1EMq3sCbaWNfwLm4AMWG79ueF6wMzr8Qr15cbuLYofEONjx//+tSF6e8nz5zzuILBUO6qZjbBy2WSKwh4FUwiuJ5CJJ5GluOR4zmIimTLmgquKGqRSHpw9t78Cf/j1WnvPDvsahxw1qDHs++gS/RiagqGU7T2lrTLGQjxRUiZMKRsFPnYW2hcAvR6xGYSCUhcoiLQtPuyrrExf8/o6J0vqd7eA995PGcPDQ0NHXUu9m2r/M/bqgQ6ECZqtY7gP/8it8miWBTxZG4OqXwZfwdo+6/QFnIc57S59GEoXTt/2N9/dPzw4fNjI4Oebx06QtT8Rb1pI7BpkqfBAhYiZbxYLWHewVHWQFKoIZIt2FFWgSCwqrkr6PV6u3anTP1AUd0/9vX1TTi4p61uXiQVp6N0rFlIrlqJ6IqV2whbXCJs5RjaavC0hfwCQf41mlxYYmVz+DPb7Jpn1zZtPf+r4zDYHZOQRgl6uYBWtQjLLEOXRZgKB6tdtd0cUuNUheM+9yHlgj1+v7/HJRLLnN4uJ9ItJRPQ+Y2QIcZDtcJG6COOh4xS6r+mnI7UBeZ5Mpkc+FTwf4lCRWwcBcz7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"archi\" title=\"\" src=\"/static/9e8e2112c0eff19099c3b4a8b798fe23/c5bb3/archi.png\" srcset=\"/static/9e8e2112c0eff19099c3b4a8b798fe23/04472/archi.png 170w,\n/static/9e8e2112c0eff19099c3b4a8b798fe23/9f933/archi.png 340w,\n/static/9e8e2112c0eff19099c3b4a8b798fe23/c5bb3/archi.png 680w,\n/static/9e8e2112c0eff19099c3b4a8b798fe23/5a190/archi.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>KubeArmor and AppArmor are both security modules that can be used to restrict access to particular processes or files. However, KubeArmor is specifically designed to secure containers within Kubernetes environments.</p>\n<p>Here is a recap of the key differences between KubeArmor and AppArmor:</p>\n<ul>\n<li><strong>Scope</strong>: KubeArmor operates at the Kubernetes cluster level, while AppArmor operates at the host level.</li>\n<li><strong>Policy syntax</strong>: KubeArmor uses the universally recognized YAML syntax for policy definitions, while AppArmor uses its own profile syntax.</li>\n<li><strong>Features</strong>: KubeArmor leverages Linux security modules like AppArmor to enforce policies, but it also goes beyond that by utilizing more advanced features, such as seccomp and auditd, for a more comprehensive approach to container security.</li>\n<li><strong>Integration</strong>: KubeArmor is seamlessly integrated with the Kubernetes ecosystem, while AppArmor is focused on individual applications running on a Linux system.</li>\n</ul>\n<h3 id=\"-getting-started-with-kubearmor\" style=\"position:relative;\"><a href=\"#-getting-started-with-kubearmor\" aria-label=\" getting started with kubearmor permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üöÄ Getting Started with KubeArmor</h3>\n<p>KubeArmor is a cloud-native runtime security enforcement system that can help you to secure your workloads. It is easy to use, scalable, and effective.</p>\n<p>This guide provides instructions on how to get started with KubeArmor. It assumes that you have access to a Kubernetes cluster, but it also mentions that you can use KubeArmor in non-Kubernetes mode, such as systemd mode, to protect or audit containers or processes on VMs or bare metal.</p>\n<h4 id=\"install-kubearmor\" style=\"position:relative;\"><a href=\"#install-kubearmor\" aria-label=\"install kubearmor permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install KubeArmor</h4>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-sfL</span> http://get.kubearmor.io/ <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">sh</span> <span class=\"token parameter variable\">-s</span> -- <span class=\"token parameter variable\">-b</span> /usr/local/bin\nkarmor <span class=\"token function\">install</span></code></pre></div>\n<h4 id=\"deploy-test-nginx-app\" style=\"position:relative;\"><a href=\"#deploy-test-nginx-app\" aria-label=\"deploy test nginx app permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Deploy test nginx app</h4>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl create deployment nginx <span class=\"token parameter variable\">--image</span><span class=\"token operator\">=</span>nginx\n<span class=\"token assign-left variable\">POD</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pod <span class=\"token parameter variable\">-l</span> <span class=\"token assign-left variable\">app</span><span class=\"token operator\">=</span>nginx <span class=\"token parameter variable\">-o</span> name<span class=\"token variable\">)</span></span></code></pre></div>\n<p><code class=\"language-text\">$POD</code> is used to refer to the target nginx pod in many cases below.</p>\n<h4 id=\"sample-policies\" style=\"position:relative;\"><a href=\"#sample-policies\" aria-label=\"sample policies permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Sample policies</h4>\n<p><strong>Denying Execution of Package Management Tools:</strong></p>\n<p>Package management tools, such as apt and apt-get, can be used to download new binaries to pods at runtime. This can increase the attack surface of the pods, as attackers can use package management tools to download malicious software.</p>\n<p>To prevent this, you can use a KubeArmor policy to block the execution of package management tools. This is a good practice in production environments.</p>\n<p>Here is an example of a KubeArmor policy to block the execution of package management tools:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">cat &lt;&lt;EOF <span class=\"token punctuation\">|</span> kubectl apply <span class=\"token punctuation\">-</span>f <span class=\"token punctuation\">-</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> security.kubearmor.com/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> KubeArmorPolicy\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">-</span>pkg<span class=\"token punctuation\">-</span>mgmt<span class=\"token punctuation\">-</span>tools<span class=\"token punctuation\">-</span>exec\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">process</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">matchPaths</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /usr/bin/apt\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /usr/bin/apt<span class=\"token punctuation\">-</span>get\n    <span class=\"token key atrule\">action</span><span class=\"token punctuation\">:</span>\n        Block\nEOF</code></pre></div>\n<p>Now execute the apt command to download the masscan tool.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token variable\">$POD</span> -- <span class=\"token function\">bash</span> <span class=\"token parameter variable\">-c</span> <span class=\"token string\">\"apt update &amp;&amp; apt install masscan\"</span></code></pre></div>\n<p>It will be denied permission to execute.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">sh: <span class=\"token number\">1</span>: apt: Permission denied\n<span class=\"token builtin class-name\">command</span> terminated with <span class=\"token builtin class-name\">exit</span> code <span class=\"token number\">126</span></code></pre></div>\n<h4 id=\"get-policy-violations-notifications\" style=\"position:relative;\"><a href=\"#get-policy-violations-notifications\" aria-label=\"get policy violations notifications permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Get policy violations notifications</h4>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">karmor logs <span class=\"token parameter variable\">-n</span> default <span class=\"token parameter variable\">--json</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1686516788</span><span class=\"token punctuation\">,</span> \n    <span class=\"token property\">\"UpdatedTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-10-10T19:03:08Z\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ClusterName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"HostName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ip-172-10-58-42\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"NamespaceName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"PodName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nginx-fr786gioa-9843a\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Labels\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"app=nginx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ContainerID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"9876543210abcdef1234567890abcdef\"</span><span class=\"token punctuation\">,</span> \n    <span class=\"token property\">\"ContainerName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nginx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ContainerImage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"docker.io/library/nginx:latest@sha256:af296b188c7b7df99ba960ca614439c99cb7cf252ed7bbc23e90cfda59092305\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"HostPPID\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4741922</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"HostPID\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4191928</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"PPID\"</span><span class=\"token operator\">:</span> <span class=\"token number\">677</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"PID\"</span><span class=\"token operator\">:</span> <span class=\"token number\">855</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ParentProcessName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/bin/dash\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ProcessName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/usr/bin/apt\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"PolicyName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"block-pkg-mgmt-tools-exec\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Severity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MatchedPolicy\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/bin/dash\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Operation\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Process\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/usr/bin/apt update\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Data\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"syscall=SYS_EXECVE\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Enforcer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"BPFLSM\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Block\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Result\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Permission denied\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Deny Access to Service Account Tokens:</strong></p>\n<p>Kubernetes mounts a service account token in each pod by default, even if the app does not need it. Attackers can exploit these service account tokens to move laterally across a cluster.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token variable\">$POD</span> -- <span class=\"token function\">bash</span></code></pre></div>\n<p>(inside pod)</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">curl</span> https://<span class=\"token variable\">$KUBERNETES_PORT_443_TCP_ADDR</span>/api <span class=\"token parameter variable\">--insecure</span> <span class=\"token parameter variable\">--header</span> <span class=\"token string\">\"Authorization: Bearer <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">cat</span> /run/secrets/kubernetes.io/serviceaccount/token<span class=\"token variable\">)</span></span>\"</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>                                \n    <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"APIVersions\"</span><span class=\"token punctuation\">,</span>      \n    <span class=\"token property\">\"versions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>                 \n        <span class=\"token string\">\"v1\"</span>                      \n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>                          \n    <span class=\"token property\">\"serverAddressByClientCIDRs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"clientCIDR\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.0.0/0\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"serverAddress\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ip-10-0-48-51.eu-west-1.compute.internal:443\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Thus we can see that one can use the service account token to access the Kube API server.</p>\n<p>Let's apply a policy to block access to service account token:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> kubectl apply <span class=\"token parameter variable\">-f</span> -</span>\napiVersion: security.kubearmor.com/v1\nkind: KubeArmorPolicy\nmetadata:\n    name: block-service-access-token-access\nspec:\n    selector:\n        matchLabels:\n            app: nginx\n    file:\n        matchDirectories:\n        - dir: /run/secrets/kubernetes.io/serviceaccount/\n            recursive: true\n    action:\n        Block\nEOF</span></code></pre></div>\n<p>Now when anyone tries to access to service account token, it would be Permission Denied.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">‚ùØ kubectl <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token variable\">$POD</span> -- <span class=\"token function\">bash</span>\n\n<span class=\"token punctuation\">(</span>inside pod<span class=\"token punctuation\">)</span> $ <span class=\"token function\">curl</span> https://<span class=\"token variable\">$KUBERNETES_PORT_443_TCP_ADDR</span>/api <span class=\"token parameter variable\">--insecure</span> <span class=\"token parameter variable\">--header</span> <span class=\"token string\">\"Authorization: Bearer <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">cat</span> /run/secrets/kubernetes.io/serviceaccount/token<span class=\"token variable\">)</span></span>\"</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cat: /run/secrets/kubernetes.io/serviceaccount/token: Permission denied\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"kind\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Status\"</span>,\n    <span class=\"token string\">\"apiVersion\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"v1\"</span>,\n    <span class=\"token string\">\"metadata\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n    <span class=\"token string\">\"status\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Failure\"</span>,\n    <span class=\"token string\">\"message\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"forbidden: User <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>system:anonymous<span class=\"token entity\" title=\"\\&quot;\">\\\"</span> cannot get path <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>/api<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>\"</span>,\n    <span class=\"token string\">\"reason\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Forbidden\"</span>,\n    <span class=\"token string\">\"details\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n    <span class=\"token string\">\"code\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">403</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Auditing Access to Folders/Paths:</strong></p>\n<p>KubeArmor can be used to audit access to specific folders or paths. This can be useful for compliance or reporting reasons.</p>\n<p>For instance, to audit access to the <code class=\"language-text\">/etc/nginx/</code> folder within a deployment, you can create the following KubeArmor policy:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> kubectl apply <span class=\"token parameter variable\">-f</span> -</span>\napiVersion: security.kubearmor.com/v1\nkind: KubeArmorPolicy\nmetadata:\n    name: audit-etc-nginx-access\nspec:\n    selector:\n        matchLabels:\n            app: nginx\n    file:\n        matchDirectories:\n        - dir: /etc/nginx/\n            recursive: true  \n    action:\n        Audit\nEOF</span></code></pre></div>\n<p>Note: <code class=\"language-text\">karmor logs -n default</code> would show all the audit/block operations.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Timestamp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1686516788</span><span class=\"token punctuation\">,</span> \n    <span class=\"token property\">\"UpdatedTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-10-10T19:03:08Z\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ClusterName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"HostName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ip-172-10-58-42\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"NamespaceName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"PodName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nginx-fr786gioa-9843a\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Labels\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"app=nginx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ContainerID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"9876543210abcdef1234567890abcdef\"</span><span class=\"token punctuation\">,</span> \n    <span class=\"token property\">\"ContainerName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nginx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ContainerImage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"docker.io/library/nginx:latest@sha256:af296b188c7b7df99ba960ca614439c99cb7cf252ed7bbc23e90cfda59092305\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"HostPPID\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4741922</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"HostPID\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4191928</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"PPID\"</span><span class=\"token operator\">:</span> <span class=\"token number\">677</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"PID\"</span><span class=\"token operator\">:</span> <span class=\"token number\">855</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ParentProcessName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/x86_64-bottlerocket-linux-gnu/sys-root/usr/bin/containerd-shim-runc-v2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ProcessName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/bin/cat\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"PolicyName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"audit-etc-nginx-access\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Severity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MatchedPolicy\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/bin/cat /etc/nginx/conf.d/default.conf\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Operation\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"File\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/etc/nginx/conf.d/default.conf\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Data\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"syscall=SYS_OPENAT fd=-100 flags=O_RDONLY\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Enforcer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eBPF Monitor\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Audit\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Result\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Passed\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Zero Trust Least Permissive Policy: Allow Only Nginx to Execute in the Pod, Deny Rest:</strong></p>\n<p>A least permissive policy requires you to explicitly allow certain actions or operations and deny the rest. With KubeArmor, you can specify which actions to allow and deny or audit in the policy.</p>\n<p>The security posture defines what happens to operations that are not in the allowed list. Should they be audited (allowed but alerted) or denied (blocked and alerted)?</p>\n<p>By default, the security posture is set to audit. To change the security posture to default deny, run the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl annotate ns default kubearmor-file-posture<span class=\"token operator\">=</span>block <span class=\"token parameter variable\">--overwrite</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> kubectl apply <span class=\"token parameter variable\">-f</span> -</span>\napiVersion: security.kubearmor.com/v1\nkind: KubeArmorPolicy\nmetadata:\n    name: only-allow-nginx-exec\nspec:\n    selector:\n        matchLabels:\n            app: nginx\n    file:\n        matchDirectories:\n        - dir: /\n            recursive: true  \n    process:\n        matchPaths:\n        - path: /usr/sbin/nginx\n        - path: /bin/bash\n    action:\n        Allow\nEOF</span></code></pre></div>\n<p>Observe that the policy contains Allow action. Once there is any KubeArmor policy having Allow action then the pods enter least permissive mode, allowing only explicitly allowed operations.</p>\n<p>Note: Use <code class=\"language-text\">kubectl port-forward $POD --address 0.0.0.0 8080:80</code> to access nginx and you can see that the nginx web access still works normally.</p>\n<p>Let's try to execute some other processes:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token variable\">$POD</span> -- <span class=\"token function\">bash</span> <span class=\"token parameter variable\">-c</span> <span class=\"token string\">\"chroot\"</span></code></pre></div>\n<p>Any binary other than bash and nginx would be permission denied.</p>\n<h3 id=\"Ô∏è-kubearmor-support-matrix\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-kubearmor-support-matrix\" aria-label=\"Ô∏è kubearmor support matrix permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ°Ô∏è KubeArmor Support Matrix</h3>\n<p>KubeArmor supports the following types of workloads:</p>\n<ul>\n<li><strong>K8s orchestrated</strong>: Workloads deployed as k8s orchestrated containers. In this case, Kubearmor is deployed as a <a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/\" target=\"_blank\" rel=\"noopener noreferrer\">k8s daemonset</a>. Note, KubeArmor supports policy enforcement on both k8s-pods (<a href=\"https://github.com/kubearmor/KubeArmor/blob/main/getting-started/security_policy_specification.md\" target=\"_blank\" rel=\"noopener noreferrer\">KubeArmorPolicy</a>) as well as k8s-nodes (KubeArmorHostPolicy).</li>\n<li><strong>Containerized</strong>: Workloads that are containerized but not k8s orchestrated are supported. KubeArmor installed in <a href=\"https://github.com/kubearmor/KubeArmor/blob/main/getting-started/kubearmor_vm.md\" target=\"_blank\" rel=\"noopener noreferrer\">systemd mode</a> can be used to protect such workloads.</li>\n<li><strong>VM/Bare-Metals</strong>: Workloads deployed on Virtual Machines or Bare Metal i.e. workloads directly operating as host/system processes. In this case, Kubearmor is deployed in <a href=\"https://github.com/kubearmor/KubeArmor/blob/main/getting-started/kubearmor_vm.md\" target=\"_blank\" rel=\"noopener noreferrer\">systemd mode</a>.</li>\n</ul>\n<h3 id=\"-hardening-infrastructure-with-kubearmor\" style=\"position:relative;\"><a href=\"#-hardening-infrastructure-with-kubearmor\" aria-label=\" hardening infrastructure with kubearmor permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîí Hardening Infrastructure with KubeArmor</h3>\n<p>KubeArmor is a security solution that can help you harden your Kubernetes and cloud-native infrastructure. It provides a set of out-of-the-box hardening policies that are based on industry-leading compliance and attack frameworks, such as CIS, MITRE, NIST-800‚Äì53, and STIGs. These policies can help you secure your workloads in a way that is compliant with these frameworks and recommended best practices.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACx0lEQVR42mM4ceIE38uXzza/ev3q8oe3L8+8efP63ONH98+cv3Tj6oZDL9bur7dnYSAF/P9/RWjP2Y/329f8/n/1wbe/379//9++8v3flYd//n/68vON+tBQNqhSRiINPCZ09OLre5ULv/2fs/3tn6+f3v9rXPzmD4j/4PGb6//PpLGSZuCHR0J3H724t2Lv4//X7r3++/L1m/8Pnr79e+3ht/9v3r65kZZGqoH/PwhuPXbrctX0wz8Onrr9YdOBa58v37j38fL1O3/uPnh07szMmaQZqKWlxbZjx3rZm5dOKd26dUJm27q9ym8e3ZR+cvu27KVLl8RBakJDVzFraYWygdRC6FA2Y+M01lCGUOZ6BgYmsBogGyQGYgsBsQQQi/tbaRmoqdmLoFsKVMgvLq4nJiqvJSEuriQmzi0uJqjtJsvinG3J6ZZjxu5b7sRlG22kK6crCNZQXw+x5Wx3QtCqkiwJRHD8Z/z/n4Gx3n4/C0P9TC6GsBp9Bpc0fpAcW9I0dcHEyZOFEydn8yVPreZNm+ELMez/f7Bh+z/899j16lPX1kdvW/a9+9y9/eXXIFC4AV3GraWVxQM0nZFBRoYzlIGBGaR+p6ul2F5XM6cdnqY++zyNrXe4mciCDdy/fz844R77+rf39J+///e9fffzPNBph779n7I219difnWuB0ieK++wMUPpRWeGjnvuDO0PBeMZGDhc9fS4t6mosMeIi3NbgCwDhjU8nDZc/8975P9/qZP//0sc+/9fGuhyrtvzimSPzqmWB0exy5QFDJ7TrjIEzLvNELzMECgky8zM78LAwKrDIGQvw6AWqmhsbMxKRDqoBwcJg16BL4Nu9jQG7exqBq16aERyWANpDQY5ZyUG5XBZe3vC2RSc9goLezn/19cz8ZgW28lalUqBIis0tJczN3ci+8yZZ1hDQws5QTg+fj4HACEbNVS59bUfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hardening\" title=\"\" src=\"/static/d5224c2e59a77437a17379d5b3442de9/c5bb3/Hardening.png\" srcset=\"/static/d5224c2e59a77437a17379d5b3442de9/04472/Hardening.png 170w,\n/static/d5224c2e59a77437a17379d5b3442de9/9f933/Hardening.png 340w,\n/static/d5224c2e59a77437a17379d5b3442de9/c5bb3/Hardening.png 680w,\n/static/d5224c2e59a77437a17379d5b3442de9/b12f7/Hardening.png 1020w,\n/static/d5224c2e59a77437a17379d5b3442de9/b5a09/Hardening.png 1360w,\n/static/d5224c2e59a77437a17379d5b3442de9/ce0a7/Hardening.png 1590w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>One of the key benefits of KubeArmor is that it makes it easy to apply hardening policies to your workloads. You don't have to spend time researching and configuring the policies yourself; simply apply them to your workloads and start benefiting from the added security that they provide.</p>\n<p>KubeArmor also presents hardening policies in the context of your workloads, so you can see how they will be applied and what impact they will have on your system. This allows you to make informed decisions about which policies to apply and to understand the trade-offs between security and functionality.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 2.3529411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAU0lEQVR42h3MzQpAQBRAYe//GvIIylqslLIY2ZgNIj+xYsydOrr25ztRdwTMJjSrUC9CNXvKyWOvQGxuMuvIh5di9KS9I2kf+jP8jbZq1Jpd0NcHislJHs+u0V8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"line\" title=\"\" src=\"/static/6db4b9b93a39c786f7252c04d4769030/c5bb3/line.png\" srcset=\"/static/6db4b9b93a39c786f7252c04d4769030/04472/line.png 170w,\n/static/6db4b9b93a39c786f7252c04d4769030/9f933/line.png 340w,\n/static/6db4b9b93a39c786f7252c04d4769030/c5bb3/line.png 680w,\n/static/6db4b9b93a39c786f7252c04d4769030/c54b3/line.png 727w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-takeaways\" style=\"position:relative;\"><a href=\"#-takeaways\" aria-label=\" takeaways permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìù Takeaways</h2>\n<ul>\n<li>KubeArmor is a powerful and flexible Kubernetes security tool that provides granular control over container behavior.</li>\n<li>It offers a wide range of pre-configured policies and supports custom policies, making it easy for organizations to comply with regulatory standards and protect against security threats.</li>\n<li>KubeArmor is a valuable tool for safeguarding containerized environments within Kubernetes and preventing the exploitation of vulnerabilities.</li>\n</ul>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":8,"rawMarkdownBody":"\n> **Shield Against Cloud-Native Threats‚ò∏Ô∏è**\n\n## üß∞ Introduction\n\nCloud-native workloads are increasingly becoming the target of attackers. This is because cloud-native applications are often complex and distributed, and they can be difficult to secure.\n\n[KubeArmor](https://kubearmor.io/) is a cloud-native runtime security enforcement system that can help you to secure your workloads. KubeArmor restricts the behavior of pods, containers, and nodes at the system level, and it can be used to enforce least-permissive policies. This helps to reduce the attack surface and make it more difficult for attackers to exploit vulnerabilities.\n\nIn this blog post, we will introduce KubeArmor and discuss its key features and benefits. We will also provide some examples of how KubeArmor can be used to improve cloud-native security.\n\n![KubeArmor](./KubeArmor.png)\n\nKubeArmor is a cloud-native security system that controls what pods, containers, and nodes (VMs) can do, such as running processes, accessing files, and connecting to the network. It does this at the system level, which means that it has a lot of power and flexibility.\n\nKubeArmor leverages [Linux security modules (LSMs)](https://en.wikipedia.org/wiki/Linux_Security_Modules) such as [AppArmor](https://en.wikipedia.org/wiki/AppArmor), [SELinux](https://en.wikipedia.org/wiki/Security-Enhanced_Linux), or [BPF-LSM](https://docs.kernel.org/bpf/prog_lsm.html) to enforce the user-specified policies. KubeArmor generates rich alerts/telemetry events with container/pod/namespace identities by leveraging eBPF.\n\n### ‚ú® KubeArmor Features\n\n![features](./features.png)\n\nKubeArmor leverages technologies like eBPF, AppArmor, or SELinux to enforce user-specified policies. eBPF is a kernel technology that allows users to program the Linux kernel without changing the kernel code. This makes eBPF ideal for runtime security enforcement, as it allows KubeArmor to intercept and modify system calls without impacting the performance of the workload.\n\nKubeArmor uses eBPF to generate detailed alerts and telemetry events that include information about the identities of the container, pod, and namespace. This information is essential for investigating and responding to security incidents.\n\nThe following diagram shows the architecture of KubeArmor:\n\n![archi](./archi.png)\n\nKubeArmor and AppArmor are both security modules that can be used to restrict access to particular processes or files. However, KubeArmor is specifically designed to secure containers within Kubernetes environments.\n\nHere is a recap of the key differences between KubeArmor and AppArmor:\n\n- **Scope**: KubeArmor operates at the Kubernetes cluster level, while AppArmor operates at the host level.\n- **Policy syntax**: KubeArmor uses the universally recognized YAML syntax for policy definitions, while AppArmor uses its own profile syntax.\n- **Features**: KubeArmor leverages Linux security modules like AppArmor to enforce policies, but it also goes beyond that by utilizing more advanced features, such as seccomp and auditd, for a more comprehensive approach to container security.\n- **Integration**: KubeArmor is seamlessly integrated with the Kubernetes ecosystem, while AppArmor is focused on individual applications running on a Linux system.\n\n### üöÄ Getting Started with KubeArmor\n\nKubeArmor is a cloud-native runtime security enforcement system that can help you to secure your workloads. It is easy to use, scalable, and effective.\n\nThis guide provides instructions on how to get started with KubeArmor. It assumes that you have access to a Kubernetes cluster, but it also mentions that you can use KubeArmor in non-Kubernetes mode, such as systemd mode, to protect or audit containers or processes on VMs or bare metal.\n\n#### Install KubeArmor\n\n```sh\ncurl -sfL http://get.kubearmor.io/ | sudo sh -s -- -b /usr/local/bin\nkarmor install\n```\n\n#### Deploy test nginx app\n\n```sh\nkubectl create deployment nginx --image=nginx\nPOD=$(kubectl get pod -l app=nginx -o name)\n```\n\n`$POD` is used to refer to the target nginx pod in many cases below.\n\n#### Sample policies\n\n**Denying Execution of Package Management Tools:**\n\nPackage management tools, such as apt and apt-get, can be used to download new binaries to pods at runtime. This can increase the attack surface of the pods, as attackers can use package management tools to download malicious software.\n\nTo prevent this, you can use a KubeArmor policy to block the execution of package management tools. This is a good practice in production environments.\n\nHere is an example of a KubeArmor policy to block the execution of package management tools:\n\n```yaml\ncat <<EOF | kubectl apply -f -\napiVersion: security.kubearmor.com/v1\nkind: KubeArmorPolicy\nmetadata:\n    name: block-pkg-mgmt-tools-exec\nspec:\n    selector:\n        matchLabels:\n            app: nginx\n    process:\n        matchPaths:\n        - path: /usr/bin/apt\n        - path: /usr/bin/apt-get\n    action:\n        Block\nEOF\n```\n\nNow execute the apt command to download the masscan tool.\n\n```sh\nkubectl exec -it $POD -- bash -c \"apt update && apt install masscan\"\n```\n\nIt will be denied permission to execute.\n\n```sh\nsh: 1: apt: Permission denied\ncommand terminated with exit code 126\n```\n\n#### Get policy violations notifications\n\n```sh\nkarmor logs -n default --json\n```\n\n```json\n{\n    \"Timestamp\": 1686516788, \n    \"UpdatedTime\": \"2023-10-10T19:03:08Z\",\n    \"ClusterName\": \"default\",\n    \"HostName\": \"ip-172-10-58-42\",\n    \"NamespaceName\": \"default\",\n    \"PodName\": \"nginx-fr786gioa-9843a\",\n    \"Labels\": \"app=nginx\",\n    \"ContainerID\": \"9876543210abcdef1234567890abcdef\", \n    \"ContainerName\": \"nginx\",\n    \"ContainerImage\": \"docker.io/library/nginx:latest@sha256:af296b188c7b7df99ba960ca614439c99cb7cf252ed7bbc23e90cfda59092305\",\n    \"HostPPID\": 4741922,\n    \"HostPID\": 4191928,\n    \"PPID\": 677,\n    \"PID\": 855,\n    \"ParentProcessName\": \"/bin/dash\",\n    \"ProcessName\": \"/usr/bin/apt\",\n    \"PolicyName\": \"block-pkg-mgmt-tools-exec\",\n    \"Severity\": \"1\",\n    \"Type\": \"MatchedPolicy\",\n    \"Source\": \"/bin/dash\",\n    \"Operation\": \"Process\",\n    \"Resource\": \"/usr/bin/apt update\",\n    \"Data\": \"syscall=SYS_EXECVE\",\n    \"Enforcer\": \"BPFLSM\",\n    \"Action\": \"Block\",\n    \"Result\": \"Permission denied\"\n}\n```\n\n**Deny Access to Service Account Tokens:**\n\nKubernetes mounts a service account token in each pod by default, even if the app does not need it. Attackers can exploit these service account tokens to move laterally across a cluster.\n\n```sh\nkubectl exec -it $POD -- bash\n```\n\n(inside pod)\n\n```sh\ncurl https://$KUBERNETES_PORT_443_TCP_ADDR/api --insecure --header \"Authorization: Bearer $(cat /run/secrets/kubernetes.io/serviceaccount/token)\"\n```\n\n```json\n{                                \n    \"kind\": \"APIVersions\",      \n    \"versions\": [                 \n        \"v1\"                      \n    ],                          \n    \"serverAddressByClientCIDRs\": [\n        {\n            \"clientCIDR\": \"0.0.0.0/0\",\n            \"serverAddress\": \"ip-10-0-48-51.eu-west-1.compute.internal:443\"\n        }\n    ]\n}\n```\n\nThus we can see that one can use the service account token to access the Kube API server.\n\nLet's apply a policy to block access to service account token:\n\n```shell\ncat <<EOF | kubectl apply -f -\napiVersion: security.kubearmor.com/v1\nkind: KubeArmorPolicy\nmetadata:\n    name: block-service-access-token-access\nspec:\n    selector:\n        matchLabels:\n            app: nginx\n    file:\n        matchDirectories:\n        - dir: /run/secrets/kubernetes.io/serviceaccount/\n            recursive: true\n    action:\n        Block\nEOF\n```\n\nNow when anyone tries to access to service account token, it would be Permission Denied.\n\n```sh\n‚ùØ kubectl exec -it $POD -- bash\n\n(inside pod) $ curl https://$KUBERNETES_PORT_443_TCP_ADDR/api --insecure --header \"Authorization: Bearer $(cat /run/secrets/kubernetes.io/serviceaccount/token)\"\n```\n\n```sh\ncat: /run/secrets/kubernetes.io/serviceaccount/token: Permission denied\n{\n    \"kind\": \"Status\",\n    \"apiVersion\": \"v1\",\n    \"metadata\": {},\n    \"status\": \"Failure\",\n    \"message\": \"forbidden: User \\\"system:anonymous\\\" cannot get path \\\"/api\\\"\",\n    \"reason\": \"Forbidden\",\n    \"details\": {},\n    \"code\": 403\n}\n```\n\n**Auditing Access to Folders/Paths:**\n\nKubeArmor can be used to audit access to specific folders or paths. This can be useful for compliance or reporting reasons.\n\nFor instance, to audit access to the `/etc/nginx/` folder within a deployment, you can create the following KubeArmor policy:\n\n```shell\ncat <<EOF | kubectl apply -f -\napiVersion: security.kubearmor.com/v1\nkind: KubeArmorPolicy\nmetadata:\n    name: audit-etc-nginx-access\nspec:\n    selector:\n        matchLabels:\n            app: nginx\n    file:\n        matchDirectories:\n        - dir: /etc/nginx/\n            recursive: true  \n    action:\n        Audit\nEOF\n```\n\nNote: `karmor logs -n default` would show all the audit/block operations.\n\n```json\n{\n    \"Timestamp\": 1686516788, \n    \"UpdatedTime\": \"2023-10-10T19:03:08Z\",\n    \"ClusterName\": \"default\",\n    \"HostName\": \"ip-172-10-58-42\",\n    \"NamespaceName\": \"default\",\n    \"PodName\": \"nginx-fr786gioa-9843a\",\n    \"Labels\": \"app=nginx\",\n    \"ContainerID\": \"9876543210abcdef1234567890abcdef\", \n    \"ContainerName\": \"nginx\",\n    \"ContainerImage\": \"docker.io/library/nginx:latest@sha256:af296b188c7b7df99ba960ca614439c99cb7cf252ed7bbc23e90cfda59092305\",\n    \"HostPPID\": 4741922,\n    \"HostPID\": 4191928,\n    \"PPID\": 677,\n    \"PID\": 855,\n    \"ParentProcessName\": \"/x86_64-bottlerocket-linux-gnu/sys-root/usr/bin/containerd-shim-runc-v2\",\n    \"ProcessName\": \"/bin/cat\",\n    \"PolicyName\": \"audit-etc-nginx-access\",\n    \"Severity\": \"1\",\n    \"Type\": \"MatchedPolicy\",\n    \"Source\": \"/bin/cat /etc/nginx/conf.d/default.conf\",\n    \"Operation\": \"File\",\n    \"Resource\": \"/etc/nginx/conf.d/default.conf\",\n    \"Data\": \"syscall=SYS_OPENAT fd=-100 flags=O_RDONLY\",\n    \"Enforcer\": \"eBPF Monitor\",\n    \"Action\": \"Audit\",\n    \"Result\": \"Passed\"\n}\n```\n\n**Zero Trust Least Permissive Policy: Allow Only Nginx to Execute in the Pod, Deny Rest:**\n\nA least permissive policy requires you to explicitly allow certain actions or operations and deny the rest. With KubeArmor, you can specify which actions to allow and deny or audit in the policy.\n\nThe security posture defines what happens to operations that are not in the allowed list. Should they be audited (allowed but alerted) or denied (blocked and alerted)?\n\nBy default, the security posture is set to audit. To change the security posture to default deny, run the following command:\n\n```sh\nkubectl annotate ns default kubearmor-file-posture=block --overwrite\n```\n\n```shell\ncat <<EOF | kubectl apply -f -\napiVersion: security.kubearmor.com/v1\nkind: KubeArmorPolicy\nmetadata:\n    name: only-allow-nginx-exec\nspec:\n    selector:\n        matchLabels:\n            app: nginx\n    file:\n        matchDirectories:\n        - dir: /\n            recursive: true  \n    process:\n        matchPaths:\n        - path: /usr/sbin/nginx\n        - path: /bin/bash\n    action:\n        Allow\nEOF\n```\n\nObserve that the policy contains Allow action. Once there is any KubeArmor policy having Allow action then the pods enter least permissive mode, allowing only explicitly allowed operations.\n\nNote: Use `kubectl port-forward $POD --address 0.0.0.0 8080:80` to access nginx and you can see that the nginx web access still works normally.\n\nLet's try to execute some other processes:\n\n```sh\nkubectl exec -it $POD -- bash -c \"chroot\"\n```\n\nAny binary other than bash and nginx would be permission denied.\n\n### üõ°Ô∏è KubeArmor Support Matrix\n\nKubeArmor supports the following types of workloads:\n\n- **K8s orchestrated**: Workloads deployed as k8s orchestrated containers. In this case, Kubearmor is deployed as a [k8s daemonset](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/). Note, KubeArmor supports policy enforcement on both k8s-pods ([KubeArmorPolicy](https://github.com/kubearmor/KubeArmor/blob/main/getting-started/security_policy_specification.md)) as well as k8s-nodes (KubeArmorHostPolicy).\n- **Containerized**: Workloads that are containerized but not k8s orchestrated are supported. KubeArmor installed in [systemd mode](https://github.com/kubearmor/KubeArmor/blob/main/getting-started/kubearmor_vm.md) can be used to protect such workloads.\n- **VM/Bare-Metals**: Workloads deployed on Virtual Machines or Bare Metal i.e. workloads directly operating as host/system processes. In this case, Kubearmor is deployed in [systemd mode](https://github.com/kubearmor/KubeArmor/blob/main/getting-started/kubearmor_vm.md).\n\n### üîí Hardening Infrastructure with KubeArmor\n\nKubeArmor is a security solution that can help you harden your Kubernetes and cloud-native infrastructure. It provides a set of out-of-the-box hardening policies that are based on industry-leading compliance and attack frameworks, such as CIS, MITRE, NIST-800‚Äì53, and STIGs. These policies can help you secure your workloads in a way that is compliant with these frameworks and recommended best practices.\n\n![hardening](./Hardening.png)\n\nOne of the key benefits of KubeArmor is that it makes it easy to apply hardening policies to your workloads. You don't have to spend time researching and configuring the policies yourself; simply apply them to your workloads and start benefiting from the added security that they provide.\n\nKubeArmor also presents hardening policies in the context of your workloads, so you can see how they will be applied and what impact they will have on your system. This allows you to make informed decisions about which policies to apply and to understand the trade-offs between security and functionality.\n\n![line](./line.png)\n\n## üìù Takeaways\n\n- KubeArmor is a powerful and flexible Kubernetes security tool that provides granular control over container behavior.\n- It offers a wide range of pre-configured policies and supports custom policies, making it easy for organizations to comply with regulatory standards and protect against security threats.\n- KubeArmor is a valuable tool for safeguarding containerized environments within Kubernetes and preventing the exploitation of vulnerabilities.\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":1315},"frontmatter":{"id":"249c0fe427e9897535ef5a45","path":"/blog/kubearmor-k8s-runtime-security/","humanDate":"Oct 25, 2024","fullDate":"2024-10-25","title":"KubeArmor: A Cloud-Native Runtime Security Enforcement System","keywords":["Kubernetes","Runtime Security","Cloud-Native","Threat Protection","KubeArmor"],"excerpt":"Explore KubeArmor, a great runtime security enforcement system designed to protect cloud-native applications in Kubernetes environments.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIFAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAwT/2gAMAwEAAhADEAAAAUyu8MtEkQH/xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIDEf/aAAgBAQABBQLSXF0zpql3fKEM/8QAGBEAAgMAAAAAAAAAAAAAAAAAAgMQETH/2gAIAQMBAT8BFt7H/8QAFhEAAwAAAAAAAAAAAAAAAAAAAQIQ/9oACAECAQE/ASk//8QAGxAAAgEFAAAAAAAAAAAAAAAAARAAAhESITH/2gAIAQEABj8CxdIt0zQX/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARIWGBof/aAAgBAQABPyHVBR8gR1FVlacy9ae2Auf/2gAMAwEAAgADAAAAEOv/AP/EABYRAQEBAAAAAAAAAAAAAAAAAAARUf/aAAgBAwEBPxCjSv/EABYRAQEBAAAAAAAAAAAAAAAAAAARMf/aAAgBAgEBPxCGI//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExUWGhsdH/2gAIAQEAAT8QSk6VcDtLLTRxZiFp7i0sYa4MLsvX2gmV5n//2Q=="},"images":{"fallback":{"src":"/static/c2645fb75d87c0e7b5a3407d6a3da5d7/f6810/KubeArmor-cover.jpg","srcSet":"/static/c2645fb75d87c0e7b5a3407d6a3da5d7/37bba/KubeArmor-cover.jpg 750w,\n/static/c2645fb75d87c0e7b5a3407d6a3da5d7/61c72/KubeArmor-cover.jpg 1080w,\n/static/c2645fb75d87c0e7b5a3407d6a3da5d7/d61e8/KubeArmor-cover.jpg 1366w,\n/static/c2645fb75d87c0e7b5a3407d6a3da5d7/f6810/KubeArmor-cover.jpg 1600w","sizes":"100vw"},"sources":[{"srcSet":"/static/c2645fb75d87c0e7b5a3407d6a3da5d7/a66aa/KubeArmor-cover.webp 750w,\n/static/c2645fb75d87c0e7b5a3407d6a3da5d7/65dd5/KubeArmor-cover.webp 1080w,\n/static/c2645fb75d87c0e7b5a3407d6a3da5d7/4fad6/KubeArmor-cover.webp 1366w,\n/static/c2645fb75d87c0e7b5a3407d6a3da5d7/e9d78/KubeArmor-cover.webp 1600w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5625}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/data-on-kubernetes-strimzi-kafka-6/","title":"Data on Kubernetes: Part 6- Strimzi for running Apache Kafka","date":"2024-10-26 13:06:00"},"excerpt":"Kubernetes-native data streaming powered by Apache Kafka üéÜ Introduction In this part six of my series about data on Kubernetes, we will‚Ä¶"},"nextThought":{"frontmatter":{"path":"/blog/managing-deprecated-k8s-apis/","title":"Managing Deprecated Kubernetes APIs: Best Practices and Tools¬†‚ò∏Ô∏è","date":"2024-10-25 20:22:00"},"excerpt":"Techniques for Handling Deprecated APIs¬†üê≥ üìå Introduction As new features and functionality are added, older APIs are deprecated and‚Ä¶"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}