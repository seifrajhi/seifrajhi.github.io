{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/reloader-configmap-secret/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Simple ConfigMap and Secret Updates üÜï</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üå† Introduction</h2>\n<p>Kubernetes <a href=\"https://kubernetes.io/docs/concepts/configuration/configmap/\" target=\"_blank\" rel=\"noopener noreferrer\">ConfigMaps</a> and <a href=\"https://kubernetes.io/docs/concepts/configuration/secret/\" target=\"_blank\" rel=\"noopener noreferrer\">Secrets</a> are essential for injecting environment variables and application secrets into pods. However, updating these configurations can be challenging, as changes are not automatically propagated to running pods.</p>\n<p><a href=\"https://github.com/stakater/Reloader\" target=\"_blank\" rel=\"noopener noreferrer\">Reloader</a> is a Kubernetes controller that automates the process of detecting and reflecting changes to ConfigMaps and Secrets in running pods. This eliminates the need for manual restarts or volume reattachments, and ensures that your applications are always up-to-date.</p>\n<p>In this blog post, we will discuss the benefits of using Reloader, and how to deploy and configure it in your Kubernetes cluster. We will also provide some code snippets to help you get started.</p>\n<p>There's a lot of work to do, so roll up your sleeves and get busy.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 95.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADuklEQVR42m1UaU9TQRTtb9APftAgLqjBHdC4xC8mGqNGjSTGxD2KCy4IuJvggjERU6MxLjEqRlwwBrViggjFbiCCyCJlUQpFC20flrbUrrQ93pnX9yjGaSav782dc++5c84oEDei7BcdeQ8OR9Dc40ZZg8Bni3kI/lBEXo9ExPj4PYp4wDAFBGIbms1uZNxuRtpxPRIyKjF5fxXm5eiwOr8OSlU3fv3287gh3zB+Doj/GTAHjMRSaFsdOF3Uwf932bwQ3EEK9uGFoR/rLtdj8oEqJB/WcvAFxw0o0lhw410Psh4YIeEoJLA+hx8rztViCm2q++EaRYmNQCiMgtcmzDik4ZXOytJi+kENJdBg4QkDzJRYpuwPhrHteiOmUcAMmvvutMgU2AiFo3B6xFaUfbVjzlEdZh7RIiVHj5RcPa/4dpl5BPDE43ZMoo9skWVntLRGh9jL7iDyHg9iY74dpx46YHdGUd/lxNLTNZiXrUPaMQMHZy1hhSk+NA1g6ZkazCewuRTAQCfuVSO94AscQ2FsuGjHjTculFR7sUM5gDV5dhh/enhiFsdaNJXmuF0VePXJCsUw0ekfDGDRSQMHnHbwI3IftRE1G55pnMi5N4jLxU6sv2BHXWcAy3KtKKwUUGyw4Lm+T56F6l+o7XSKlNlJptGpSb3RtIp0Kxt9WJDVj0cVHmTe+o10op2814L678HYocVpmOsxKgIyTTEZJB/RcPpMLmx4fBHkP3Ni7TkbNlywYXF2H9F3g7EK02b2ZJONXsHHTcABnX9CWHKqGlMzP2Kz8isP0Lf6seWKgPvvPVB98uKJ2oPSWi8e0LuyxA2zfVg2AxuXXv5ARfOACMiypBc0YMIeNXIL23jA0yoP0e3DmcJBmRareNc1AVsLBKib/LKklCoTPyS7KwjFSIbvGLu9HOeLO2NCjqLaGEC/Q6ykpMZGpx6E1RGF7luQdBmC6rONMxqzrZwc1i7qUHJKa+8QEkkGko3Y50gs2TdaY9q8XtqD0i9WnH3ahmVna5BELRq/uxLL82q502RhS6DX3naTUPXc8OJ38Mti09UG3t9kUkBChhqJ+6owk6w3iZ4rz39Gh+XPiJfxz7j6xoS75b3yOzM/A0iJCX8+2S2J7JlEes1+aITgCiC+qFGAknc7LB6E6C7UtzmQQG1gl8Dso1re+FRisPNmE3Qxa0r6++99KGWS1lV1Nuy51YJVdAemUoWs0tkkfuYsSTLxl+t/AeWsce9MViarF+8bBVx51YUGk2sUzXjAv8L998JgP2gfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"reload\" title=\"\" src=\"/static/df3811486b3d8d991c05d0c3218846e6/c5bb3/reload.png\" srcset=\"/static/df3811486b3d8d991c05d0c3218846e6/04472/reload.png 170w,\n/static/df3811486b3d8d991c05d0c3218846e6/9f933/reload.png 340w,\n/static/df3811486b3d8d991c05d0c3218846e6/c5bb3/reload.png 680w,\n/static/df3811486b3d8d991c05d0c3218846e6/5a6dd/reload.png 802w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"getting-to-know-reloader\" style=\"position:relative;\"><a href=\"#getting-to-know-reloader\" aria-label=\"getting to know reloader permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Getting to Know Reloader</h2>\n<p>Imagine you're in charge of keeping your applications running smoothly on a Kubernetes playground. But hey, things change, right? You might need to tweak how your apps behave‚Ää‚Äî‚Äälike telling them to use a different secret password or to play nice with updated settings.</p>\n<p>Now, meet your helpful buddy: <strong>Reloader</strong>. It's like a watchful wizard that hangs around ConfigMaps and Secrets in Kubernetes. Whenever those sneaky settings change, Reloader takes the cue and says, \"Hey, your apps need to catch up!\" It works some magic to gently update your apps, making sure they stay happy and snug in their pods. And the cool part? You don't need to wave your wand manually‚Ää‚Äî‚ÄäReloader does it for you.</p>\n<h2 id=\"deploy-reloader-to-kubernetes-cluster\" style=\"position:relative;\"><a href=\"#deploy-reloader-to-kubernetes-cluster\" aria-label=\"deploy reloader to kubernetes cluster permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Deploy Reloader to Kubernetes Cluster</h2>\n<p>There are multiple deployment options available, including using manifests and Helm. In this blog, we will explore both methods.</p>\n<h3 id=\"using-helm\" style=\"position:relative;\"><a href=\"#using-helm\" aria-label=\"using helm permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Using Helm</h3>\n<p>Add the Helm chart:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm repo <span class=\"token function\">add</span> stakater https://stakater.github.io/stakater-charts\nhelm repo update</code></pre></div>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 15.294117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdklEQVR42mWPSQoAIQwE/Y548OK+gKIgLv//ToYEHBjmUJg0pGhZzhlijOCcI0IIhPeewMxaC1prMMaAUopynDETQnxge28458AYg8AdqbVCKYW4x1fIOX/5CeecsNYCfHvvr7C1Rs1SStQIW+NvcJdS/kRX+AAguWNMhleiOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"helm\" title=\"\" src=\"/static/384086a12800470f945b7788a3efac4b/c5bb3/helm.png\" srcset=\"/static/384086a12800470f945b7788a3efac4b/04472/helm.png 170w,\n/static/384086a12800470f945b7788a3efac4b/9f933/helm.png 340w,\n/static/384086a12800470f945b7788a3efac4b/c5bb3/helm.png 680w,\n/static/384086a12800470f945b7788a3efac4b/b12f7/helm.png 1020w,\n/static/384086a12800470f945b7788a3efac4b/b5a09/helm.png 1360w,\n/static/384086a12800470f945b7788a3efac4b/29007/helm.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Deploy Reloader:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm <span class=\"token function\">install</span> reloader stakater/reloader <span class=\"token comment\"># To watch CM/secrets in all namespaces</span>\nhelm <span class=\"token function\">install</span> reloader stakater/reloader <span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">reloader.watchGlobally</span><span class=\"token operator\">=</span>false <span class=\"token parameter variable\">--namespace</span> NAMESPACENAME <span class=\"token comment\"># To watch CM/Secrets in one namespace</span></code></pre></div>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwElEQVR42o2RSarEMAxEfZ7M80DmQDYhw/1PU80zaPPh070oSpbMsyS78zx1XZemaVLTNGrbVn3f+7iua6VpqiAIFIbhV8VxLPe+r57n0b7vKstSRVGoqipfNBD+i6IokrvvW8uyeJAlzZMk8WD8P1FnCjs7YMdxaNs2jeOoeZ69D8OgdV39mdFZBY5YR9d13i0mz2TOEkBw9ocjIKwhz3P/Ov5X1LMs8116ICC6pCMABrJPsZ0iYnsAJ0dsd4B+ADFwwBPIcrAAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"install\" title=\"\" src=\"/static/c7413471d0afc2818f83c319aa1f803b/c5bb3/install.png\" srcset=\"/static/c7413471d0afc2818f83c319aa1f803b/04472/install.png 170w,\n/static/c7413471d0afc2818f83c319aa1f803b/9f933/install.png 340w,\n/static/c7413471d0afc2818f83c319aa1f803b/c5bb3/install.png 680w,\n/static/c7413471d0afc2818f83c319aa1f803b/b12f7/install.png 1020w,\n/static/c7413471d0afc2818f83c319aa1f803b/b5a09/install.png 1360w,\n/static/c7413471d0afc2818f83c319aa1f803b/29007/install.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"using-vanilla-manifests\" style=\"position:relative;\"><a href=\"#using-vanilla-manifests\" aria-label=\"using vanilla manifests permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Using Vanilla Manifests</h3>\n<p>Apply vanilla manifests by changing the <code class=\"language-text\">RELEASE-NAME</code> placeholder provided in the manifest with a proper value and apply it by running the command given below:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> https://raw.githubusercontent.com/stakater/Reloader/master/deployments/kubernetes/reloader.yaml\nkubectl apply <span class=\"token parameter variable\">-k</span> https://github.com/stakater/Reloader/deployments/kubernetes</code></pre></div>\n<p>By default, Reloader gets deployed in the default namespace and watches changes to secrets and configmaps in all namespaces.</p>\n<p>Reloader can be configured to ignore the resources secrets and configmaps by passing the following args (<code class=\"language-text\">spec.template.spec.containers.args</code>) to its container.</p>\n<p>This will create a Reloader pod and the required resources.</p>\n<p>For more details, visit the <a href=\"https://github.com/stakater/Reloader\" target=\"_blank\" rel=\"noopener noreferrer\">Reloader GitHub repository</a>.</p>\n<h2 id=\"how-to-use-reloader\" style=\"position:relative;\"><a href=\"#how-to-use-reloader\" aria-label=\"how to use reloader permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How to Use Reloader</h2>\n<p>For a Deployment called <code class=\"language-text\">foo</code>, have a ConfigMap called <code class=\"language-text\">foo-configmap</code> or Secret called <code class=\"language-text\">foo-secret</code> or both. Then add your annotation (by default <code class=\"language-text\">reloader.stakater.com/auto</code>) to the main metadata of your Deployment:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">reloader.stakater.com/auto</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        metadata<span class=\"token punctuation\">:</span></code></pre></div>\n<p>This will discover deployments, daemonsets, and statefulsets automatically where <code class=\"language-text\">foo-configmap</code> or <code class=\"language-text\">foo-secret</code> is being used either via an environment variable or from a volume mount. It will perform rolling upgrades on related pods when <code class=\"language-text\">foo-configmap</code> or <code class=\"language-text\">foo-secret</code> are updated.</p>\n<p>You can restrict this discovery to only ConfigMap or Secret objects that are tagged with a special annotation. To take advantage of that, annotate your deployments/daemonsets/statefulsets like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">reloader.stakater.com/search</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        metadata<span class=\"token punctuation\">:</span></code></pre></div>\n<p>Reloader will trigger the rolling upgrade upon modification of any ConfigMap or Secret annotated like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">reloader.stakater.com/match</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> value</code></pre></div>\n<p>provided the secret/configmap is being used in an environment variable, or a volume mount.</p>\n<blockquote>\n<p><strong>Note:</strong> <code class=\"language-text\">reloader.stakater.com/search</code> and <code class=\"language-text\">reloader.stakater.com/auto</code> do not work together. If you have the <code class=\"language-text\">reloader.stakater.com/auto: \"true\"</code> annotation on your deployment, then it will always restart upon a change in configmaps or secrets it uses, regardless of whether they have the <code class=\"language-text\">reloader.stakater.com/match: \"true\"</code> annotation or not.</p>\n</blockquote>\n<p>We can also specify a specific configmap or secret which would trigger a rolling upgrade only upon a change in our specified configmap or secret. This way, it will not trigger a rolling upgrade upon changes in all configmaps or secrets used in a deploymentconfig, deployment, daemonset, statefulset, or rollout. To do this, either set the auto annotation to \"false\" (<code class=\"language-text\">reloader.stakater.com/auto: \"false\"</code>) or remove it altogether, and use annotations for <a href=\"https://github.com/stakater/Reloader/tree/master#Configmap\" target=\"_blank\" rel=\"noopener noreferrer\">Configmap</a> or <a href=\"https://github.com/stakater/Reloader/tree/master#Secret\" target=\"_blank\" rel=\"noopener noreferrer\">Secret</a>.</p>\n<p>It's also possible to enable auto reloading for all resources by setting the <code class=\"language-text\">--auto-reload-all</code> flag. In this case, all resources that do not have the auto annotation set to \"false\" will be reloaded automatically when their ConfigMaps or Secrets are updated. Notice that setting the auto annotation to an undefined value counts as false as well.</p>\n<h2 id=\"-configmap\" style=\"position:relative;\"><a href=\"#-configmap\" aria-label=\" configmap permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üè™ ConfigMap</h2>\n<p>To perform rolling upgrades when changes happen only on specific configmaps, use the below annotation. For a Deployment called <code class=\"language-text\">foo</code>, have a ConfigMap called <code class=\"language-text\">foo-configmap</code>. Then add this annotation to the main metadata of your Deployment:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">configmap.reloader.stakater.com/reload</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"foo-configmap\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        metadata<span class=\"token punctuation\">:</span></code></pre></div>\n<p>Use a comma-separated list to define multiple configmaps:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">configmap.reloader.stakater.com/reload</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"foo-configmap,bar-configmap,baz-configmap\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        metadata<span class=\"token punctuation\">:</span></code></pre></div>\n<p>For more details, visit the <a href=\"https://github.com/stakater/Reloader\" target=\"_blank\" rel=\"noopener noreferrer\">Reloader GitHub repository</a>.</p>\n<h2 id=\"-secret\" style=\"position:relative;\"><a href=\"#-secret\" aria-label=\" secret permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîê Secret</h2>\n<p>To perform rolling upgrades when changes happen only on specific secrets, use the annotation below.</p>\n<p>For a Deployment called <code class=\"language-text\">foo</code>, have a Secret called <code class=\"language-text\">foo-secret</code>. Then add this annotation to the main metadata of your Deployment:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">secret.reloader.stakater.com/reload</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"foo-secret\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> \n        metadata<span class=\"token punctuation\">:</span></code></pre></div>\n<p>Use a comma-separated list to define multiple secrets:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">secret.reloader.stakater.com/reload</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"foo-secret,bar-secret,baz-secret\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> \n        metadata<span class=\"token punctuation\">:</span></code></pre></div>\n<h2 id=\"-notes\" style=\"position:relative;\"><a href=\"#-notes\" aria-label=\" notes permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üí´ Notes</h2>\n<p>Reloader also supports <a href=\"https://github.com/bitnami-labs/sealed-secrets\" target=\"_blank\" rel=\"noopener noreferrer\">sealed-secrets</a>. <a href=\"https://github.com/stakater/Reloader/blob/master/docs/Reloader-with-Sealed-Secrets.md\" target=\"_blank\" rel=\"noopener noreferrer\">Here</a> are the steps to use sealed-secrets with Reloader.</p>\n<p>For <a href=\"https://github.com/argoproj/argo-rollouts/\" target=\"_blank\" rel=\"noopener noreferrer\">rollouts</a>, Reloader simply triggers a change; it is up to you how you configure the rollout strategy.</p>\n<ul>\n<li><code class=\"language-text\">reloader.stakater.com/auto: \"true\"</code> will only reload the pod if the ConfigMap or Secret is used (as a volume mount or as an env) in DeploymentConfigs/Deployment/Daemonsets/Statefulsets.</li>\n<li><code class=\"language-text\">secret.reloader.stakater.com/reload</code> or <code class=\"language-text\">configmap.reloader.stakater.com/reload</code> annotation will reload the pod upon changes in the specified ConfigMap or Secret, irrespective of the usage of ConfigMap or Secret.</li>\n<li>You may override the auto annotation with the <code class=\"language-text\">--auto-annotation</code> flag.</li>\n<li>You may override the search annotation with the <code class=\"language-text\">--auto-search-annotation</code> flag and the match annotation with the <code class=\"language-text\">--search-match-annotation</code> flag.</li>\n<li>You may override the ConfigMap annotation with the <code class=\"language-text\">--configmap-annotation</code> flag.</li>\n<li>You may override the Secret annotation with the <code class=\"language-text\">--secret-annotation</code> flag.</li>\n<li>You may want to prevent watching certain namespaces with the <code class=\"language-text\">--namespaces-to-ignore</code> flag.</li>\n<li>You may want to watch only a set of namespaces with certain labels by using the <code class=\"language-text\">--namespace-selector</code> flag.</li>\n<li>You may want to watch only a set of secrets/configmaps with certain labels by using the <code class=\"language-text\">--resource-label-selector</code> flag.</li>\n<li>You may want to prevent watching certain resources with the <code class=\"language-text\">--resources-to-ignore</code> flag.</li>\n<li>You can configure logging in JSON format with the <code class=\"language-text\">--log-format=json</code> option.</li>\n<li>You can configure the \"reload strategy\" with the <code class=\"language-text\">--reload-strategy=&lt;strategy-name></code> option (details below).</li>\n</ul>\n<h3 id=\"-reload-strategies\" style=\"position:relative;\"><a href=\"#-reload-strategies\" aria-label=\" reload strategies permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üé≤ Reload Strategies</h3>\n<p>Reloader supports multiple \"reload\" strategies for performing rolling upgrades to resources. The following list describes them:</p>\n<ul>\n<li>\n<p><strong>env-vars</strong>: When a tracked <code class=\"language-text\">ConfigMap/Secret</code> is updated, this strategy attaches a Reloader-specific environment variable to any containers referencing the changed ConfigMap or Secret on the owning resource (e.g., Deployment, StatefulSet, etc.). This strategy can be specified with the <code class=\"language-text\">--reload-strategy=env-vars</code> argument. Note: This is the default reload strategy.</p>\n</li>\n<li>\n<p><strong>annotations</strong>: When a tracked <code class=\"language-text\">ConfigMap/Secret</code> is updated, this strategy attaches a <code class=\"language-text\">reloader.stakater.com/last-reloaded-from</code> pod template annotation on the owning resource (e.g., Deployment, StatefulSet, etc.). This strategy is useful when using resource syncing tools like ArgoCD, since it will not cause these tools to detect configuration drift after a resource is reloaded.</p>\n<blockquote>\n<blockquote>\n<p>Note: Since the attached pod template annotation only tracks the last reload source, this strategy will reload any tracked resource should its ConfigMap or Secret be deleted and recreated. This strategy can be specified with the <code class=\"language-text\">--reload-strategy=annotations</code> argument.</p>\n</blockquote>\n</blockquote>\n</li>\n</ul>\n<p>For more details, visit the <a href=\"https://github.com/stakater/Reloader\" target=\"_blank\" rel=\"noopener noreferrer\">Reloader GitHub repository</a>.</p>\n<h2 id=\"-test-reloader-hands-on\" style=\"position:relative;\"><a href=\"#-test-reloader-hands-on\" aria-label=\" test reloader hands on permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üåü Test Reloader: Hands-on</h2>\n<p>To test the Reloader, I will deploy a deployment that uses a ConfigMap and a Secret to inject environment variables into its pod.</p>\n<h3 id=\"create-configmap-and-secret\" style=\"position:relative;\"><a href=\"#create-configmap-and-secret\" aria-label=\"create configmap and secret permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Create ConfigMap and Secret</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>configmap\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">test_env</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"foo\"</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">pass</span><span class=\"token punctuation\">:</span> bXlwYXNzd29yZA==\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Secret\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>secret</code></pre></div>\n<h3 id=\"create-deployment\" style=\"position:relative;\"><a href=\"#create-deployment\" aria-label=\"create deployment permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Create Deployment</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>deployment\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">configmap.reloader.stakater.com/reload</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"test-configmap\"</span>\n        <span class=\"token key atrule\">secret.reloader.stakater.com/reload</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"test-secret\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n    <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n        <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n                <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.14.2\n                <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n                <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> TEST_ENV\n                    <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">configMapKeyRef</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>configmap\n                            <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> test_env\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> TEST_PASS\n                    <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">secretKeyRef</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>secret\n                            <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> pass</code></pre></div>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxUlEQVR42o2RRw6DUBBDcxx6r6GKDRsEbLn/QRy9kcgyZGF5fhl/e/5rWRbVda2iKFRVlfH7/dY4jlZnWWb7cBAE8n3/J17btmnfdx3Hoeu6dJ6n+r5X0zTibJ5nuzgMg9I0led5vwVpBjQAahznea6u68xdkiRW/yWIk7ZtrYlYgDWRqeM4/oo/xTVBGpkZTnBwz9JxHIPruuYK/kuQmDiC708gNq7KsjTxm8MwfBZc11UAkWmavj9N1CiKzDVCPMr6aYYf7FfeMdr16JMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"k-get\" title=\"\" src=\"/static/7405e66bca09b223eeb70cc30464f133/c5bb3/k-get.png\" srcset=\"/static/7405e66bca09b223eeb70cc30464f133/04472/k-get.png 170w,\n/static/7405e66bca09b223eeb70cc30464f133/9f933/k-get.png 340w,\n/static/7405e66bca09b223eeb70cc30464f133/c5bb3/k-get.png 680w,\n/static/7405e66bca09b223eeb70cc30464f133/b12f7/k-get.png 1020w,\n/static/7405e66bca09b223eeb70cc30464f133/b5a09/k-get.png 1360w,\n/static/7405e66bca09b223eeb70cc30464f133/29007/k-get.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<blockquote>\n<p><strong>Note:</strong> The annotations in the deployment are used to watch specific ConfigMap or Secret.</p>\n<ul>\n<li><code class=\"language-text\">secret.reloader.stakater.com/reload: \"test-secret\"</code> watches for the secret <code class=\"language-text\">test-secret</code>. Any changes to this secret will trigger a rolling upgrade of the deployment.</li>\n<li><code class=\"language-text\">configmap.reloader.stakater.com/reload: \"test-configmap\"</code> watches for the ConfigMap <code class=\"language-text\">test-configmap</code>. Any changes to this ConfigMap will trigger a rolling upgrade.</li>\n</ul>\n</blockquote>\n<p>There are other supported annotations that can be added to a deployment or statefulset:</p>\n<ul>\n<li><code class=\"language-text\">reloader.stakater.com/auto: \"true\"</code>: This will look for all ConfigMaps or Secrets being used either via environment variables or mounts and trigger a rolling upgrade if any changes are made to those ConfigMaps/Secrets.</li>\n</ul>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 16.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAcUlEQVR42o3OOQpEIRRE0b8dBxAMVEycBQfc/26q8QWddfODS2WHetZamHOitYYYI1JK35xz8N7Taq0pKSWEED979t4opaDWSnvx3jtCCLDWEqiUAmMMnPO/GIHnHIwxkHMm5KL33X1rjKFXF3yDXfAD1Vlhge11PbgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"check1\" title=\"\" src=\"/static/5fe722fb29c0611ac9f0b71981cc7170/c5bb3/check.png\" srcset=\"/static/5fe722fb29c0611ac9f0b71981cc7170/04472/check.png 170w,\n/static/5fe722fb29c0611ac9f0b71981cc7170/9f933/check.png 340w,\n/static/5fe722fb29c0611ac9f0b71981cc7170/c5bb3/check.png 680w,\n/static/5fe722fb29c0611ac9f0b71981cc7170/b12f7/check.png 1020w,\n/static/5fe722fb29c0611ac9f0b71981cc7170/b5a09/check.png 1360w,\n/static/5fe722fb29c0611ac9f0b71981cc7170/29007/check.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<div class=\"image-title\">Initial values of environment variables</div>\n<h3 id=\"update-configmap\" style=\"position:relative;\"><a href=\"#update-configmap\" aria-label=\"update configmap permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Update ConfigMap</h3>\n<p>Once the deployment is created, make a change in the ConfigMap. You will notice a rolling upgrade has been triggered by the deployment, and new pods come up with updated values from the ConfigMap. ‚úíÔ∏è</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVR42o2QRw6FQAxDuQ4MjMTQy9AXdMT9D+MvR+JvYWEl2Tw7dpZlwXmeGMcRbduiaRoYYxBFEZRScF0XnueJeL/JIZAwgqy1qKoKcRwjTVMURYEkSWTn9H3/HbiuK47jwL7vMnk/UJrRKAgC1HUNrfVrUmeeZwExZdd1mKYJwzCgLEuB5HmOMAzF4FPCbdukQ0Kv6xLd9y0Gfd//E1KfOmQadse++CrFdFmWyYtfQQ/wB4KpwedduOM0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"check2\" title=\"\" src=\"/static/90409b902d498953479302753ebd8438/c5bb3/check2.png\" srcset=\"/static/90409b902d498953479302753ebd8438/04472/check2.png 170w,\n/static/90409b902d498953479302753ebd8438/9f933/check2.png 340w,\n/static/90409b902d498953479302753ebd8438/c5bb3/check2.png 680w,\n/static/90409b902d498953479302753ebd8438/b12f7/check2.png 1020w,\n/static/90409b902d498953479302753ebd8438/b5a09/check2.png 1360w,\n/static/90409b902d498953479302753ebd8438/29007/check2.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<div class=\"image-title\">New pods came up after updating ConfigMap</div>\n<h3 id=\"update-secret\" style=\"position:relative;\"><a href=\"#update-secret\" aria-label=\"update secret permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Update Secret</h3>\n<p>You can also make a change in the Secret. You will notice a rolling upgrade has been triggered by the deployment, and new pods come up with updated values from the Secret. üéâ</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyklEQVR42n2RSQqFQAxEvY4jDji0syKoOHv/u5RUQPkL/Ysi6W7yUklr8zxj33eM44iiKNB1HZIkQRiGiOMYtm1D13UYhvFEyjTNV2nneaKua5RlKWqaBp7nyaNSSsBpmsL3feR5Lk14Z1nWO3BdV3FHp8uygOdt25BlGaIoQhAEcmYz5nRcVdU38DgOUBybhQQTysjxuQbe/66CTj9Hvl3R5TAM6Pv+ySmOSxAdu6776ewBTtMkkLZtpTMBLL4h3BkhjuNI/PchBF6t4MZwuv+1SwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"check3\" title=\"\" src=\"/static/600bb9d11085b6514be175b53120ddbc/c5bb3/check3.png\" srcset=\"/static/600bb9d11085b6514be175b53120ddbc/04472/check3.png 170w,\n/static/600bb9d11085b6514be175b53120ddbc/9f933/check3.png 340w,\n/static/600bb9d11085b6514be175b53120ddbc/c5bb3/check3.png 680w,\n/static/600bb9d11085b6514be175b53120ddbc/b12f7/check3.png 1020w,\n/static/600bb9d11085b6514be175b53120ddbc/b5a09/check3.png 1360w,\n/static/600bb9d11085b6514be175b53120ddbc/29007/check3.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<div class=\"image-title\">New value of environment variables loaded in pod after updating secret</div>\n<h2 id=\"-summary\" style=\"position:relative;\"><a href=\"#-summary\" aria-label=\" summary permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîö Summary</h2>\n<p>Reloader is a powerful tool that can help you automate rolling upgrades in Kubernetes. It monitors changes to ConfigMaps and Secrets, and then triggers rolling upgrades for associated pods. This eliminates the need for manual restarts or volume reattachments, and ensures that your applications are always up-to-date.</p>\n<p>In this blog post, we discussed how to deploy Reloader using manifests and Helm, and how to use it to reload ConfigMaps and Secrets. We also explored a real-world use case where Reloader was used to automate rolling upgrades based on changes in associated ConfigMaps.</p>\n<p>By leveraging Reloader's capabilities, you can enhance the reliability and efficiency of your Kubernetes deployments. When deploying Reloader, be sure to adapt the deployment method and configuration to your specific environment and requirements.</p>\n<p>For more details, visit the <a href=\"https://github.com/stakater/Reloader\" target=\"_blank\" rel=\"noopener noreferrer\">Reloader GitHub repository</a>.</p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":8,"rawMarkdownBody":"\n> **Simple ConfigMap and Secret Updates üÜï**\n\n## üå† Introduction\n\nKubernetes [ConfigMaps](https://kubernetes.io/docs/concepts/configuration/configmap/) and [Secrets](https://kubernetes.io/docs/concepts/configuration/secret/) are essential for injecting environment variables and application secrets into pods. However, updating these configurations can be challenging, as changes are not automatically propagated to running pods.\n\n[Reloader](https://github.com/stakater/Reloader) is a Kubernetes controller that automates the process of detecting and reflecting changes to ConfigMaps and Secrets in running pods. This eliminates the need for manual restarts or volume reattachments, and ensures that your applications are always up-to-date.\n\nIn this blog post, we will discuss the benefits of using Reloader, and how to deploy and configure it in your Kubernetes cluster. We will also provide some code snippets to help you get started.\n\nThere's a lot of work to do, so roll up your sleeves and get busy.\n\n![reload](./reload.png)\n\n## Getting to Know Reloader\n\nImagine you're in charge of keeping your applications running smoothly on a Kubernetes playground. But hey, things change, right? You might need to tweak how your apps behave‚Ää‚Äî‚Äälike telling them to use a different secret password or to play nice with updated settings.\n\nNow, meet your helpful buddy: **Reloader**. It's like a watchful wizard that hangs around ConfigMaps and Secrets in Kubernetes. Whenever those sneaky settings change, Reloader takes the cue and says, \"Hey, your apps need to catch up!\" It works some magic to gently update your apps, making sure they stay happy and snug in their pods. And the cool part? You don't need to wave your wand manually‚Ää‚Äî‚ÄäReloader does it for you.\n\n## Deploy Reloader to Kubernetes Cluster\n\nThere are multiple deployment options available, including using manifests and Helm. In this blog, we will explore both methods.\n\n### Using Helm\n\nAdd the Helm chart:\n\n```shell\nhelm repo add stakater https://stakater.github.io/stakater-charts\nhelm repo update\n```\n\n![helm](./helm.png)\n\nDeploy Reloader:\n\n```shell\nhelm install reloader stakater/reloader # To watch CM/secrets in all namespaces\nhelm install reloader stakater/reloader --set reloader.watchGlobally=false --namespace NAMESPACENAME # To watch CM/Secrets in one namespace\n```\n\n![install](./install.png)\n\n### Using Vanilla Manifests\n\nApply vanilla manifests by changing the `RELEASE-NAME` placeholder provided in the manifest with a proper value and apply it by running the command given below:\n\n```shell\nkubectl apply -f https://raw.githubusercontent.com/stakater/Reloader/master/deployments/kubernetes/reloader.yaml\nkubectl apply -k https://github.com/stakater/Reloader/deployments/kubernetes\n```\n\nBy default, Reloader gets deployed in the default namespace and watches changes to secrets and configmaps in all namespaces.\n\nReloader can be configured to ignore the resources secrets and configmaps by passing the following args (`spec.template.spec.containers.args`) to its container.\n\nThis will create a Reloader pod and the required resources.\n\nFor more details, visit the [Reloader GitHub repository](https://github.com/stakater/Reloader).\n\n## How to Use Reloader\n\nFor a Deployment called `foo`, have a ConfigMap called `foo-configmap` or Secret called `foo-secret` or both. Then add your annotation (by default `reloader.stakater.com/auto`) to the main metadata of your Deployment:\n\n```yaml\nkind: Deployment\nmetadata:\n    annotations:\n        reloader.stakater.com/auto: \"true\"\nspec:\n    template:\n        metadata:\n```\n\nThis will discover deployments, daemonsets, and statefulsets automatically where `foo-configmap` or `foo-secret` is being used either via an environment variable or from a volume mount. It will perform rolling upgrades on related pods when `foo-configmap` or `foo-secret` are updated.\n\nYou can restrict this discovery to only ConfigMap or Secret objects that are tagged with a special annotation. To take advantage of that, annotate your deployments/daemonsets/statefulsets like this:\n\n```yaml\nkind: Deployment\nmetadata:\n    annotations:\n        reloader.stakater.com/search: \"true\"\nspec:\n    template:\n        metadata:\n```\n\nReloader will trigger the rolling upgrade upon modification of any ConfigMap or Secret annotated like this:\n\n```yaml\nkind: ConfigMap\nmetadata:\n    annotations:\n        reloader.stakater.com/match: \"true\"\ndata:\n    key: value\n```\n\nprovided the secret/configmap is being used in an environment variable, or a volume mount.\n\n> **Note:** `reloader.stakater.com/search` and `reloader.stakater.com/auto` do not work together. If you have the `reloader.stakater.com/auto: \"true\"` annotation on your deployment, then it will always restart upon a change in configmaps or secrets it uses, regardless of whether they have the `reloader.stakater.com/match: \"true\"` annotation or not.\n\nWe can also specify a specific configmap or secret which would trigger a rolling upgrade only upon a change in our specified configmap or secret. This way, it will not trigger a rolling upgrade upon changes in all configmaps or secrets used in a deploymentconfig, deployment, daemonset, statefulset, or rollout. To do this, either set the auto annotation to \"false\" (`reloader.stakater.com/auto: \"false\"`) or remove it altogether, and use annotations for [Configmap](https://github.com/stakater/Reloader/tree/master#Configmap) or [Secret](https://github.com/stakater/Reloader/tree/master#Secret).\n\nIt's also possible to enable auto reloading for all resources by setting the `--auto-reload-all` flag. In this case, all resources that do not have the auto annotation set to \"false\" will be reloaded automatically when their ConfigMaps or Secrets are updated. Notice that setting the auto annotation to an undefined value counts as false as well.\n\n## üè™ ConfigMap\n\nTo perform rolling upgrades when changes happen only on specific configmaps, use the below annotation. For a Deployment called `foo`, have a ConfigMap called `foo-configmap`. Then add this annotation to the main metadata of your Deployment:\n\n```yaml\nkind: Deployment\nmetadata:\n    annotations:\n        configmap.reloader.stakater.com/reload: \"foo-configmap\"\nspec:\n    template:\n        metadata:\n```\n\nUse a comma-separated list to define multiple configmaps:\n\n```yaml\nkind: Deployment\nmetadata:\n    annotations:\n        configmap.reloader.stakater.com/reload: \"foo-configmap,bar-configmap,baz-configmap\"\nspec:\n    template:\n        metadata:\n```\n\nFor more details, visit the [Reloader GitHub repository](https://github.com/stakater/Reloader).\n\n## üîê Secret\n\nTo perform rolling upgrades when changes happen only on specific secrets, use the annotation below.\n\nFor a Deployment called `foo`, have a Secret called `foo-secret`. Then add this annotation to the main metadata of your Deployment:\n\n```yaml\nkind: Deployment\nmetadata:\n    annotations:\n        secret.reloader.stakater.com/reload: \"foo-secret\"\nspec:\n    template: \n        metadata:\n```\n\nUse a comma-separated list to define multiple secrets:\n\n```yaml\nkind: Deployment\nmetadata:\n    annotations:\n        secret.reloader.stakater.com/reload: \"foo-secret,bar-secret,baz-secret\"\nspec:\n    template: \n        metadata:\n```\n\n## üí´ Notes\n\nReloader also supports [sealed-secrets](https://github.com/bitnami-labs/sealed-secrets). [Here](https://github.com/stakater/Reloader/blob/master/docs/Reloader-with-Sealed-Secrets.md) are the steps to use sealed-secrets with Reloader.\n\nFor [rollouts](https://github.com/argoproj/argo-rollouts/), Reloader simply triggers a change; it is up to you how you configure the rollout strategy.\n\n- `reloader.stakater.com/auto: \"true\"` will only reload the pod if the ConfigMap or Secret is used (as a volume mount or as an env) in DeploymentConfigs/Deployment/Daemonsets/Statefulsets.\n- `secret.reloader.stakater.com/reload` or `configmap.reloader.stakater.com/reload` annotation will reload the pod upon changes in the specified ConfigMap or Secret, irrespective of the usage of ConfigMap or Secret.\n- You may override the auto annotation with the `--auto-annotation` flag.\n- You may override the search annotation with the `--auto-search-annotation` flag and the match annotation with the `--search-match-annotation` flag.\n- You may override the ConfigMap annotation with the `--configmap-annotation` flag.\n- You may override the Secret annotation with the `--secret-annotation` flag.\n- You may want to prevent watching certain namespaces with the `--namespaces-to-ignore` flag.\n- You may want to watch only a set of namespaces with certain labels by using the `--namespace-selector` flag.\n- You may want to watch only a set of secrets/configmaps with certain labels by using the `--resource-label-selector` flag.\n- You may want to prevent watching certain resources with the `--resources-to-ignore` flag.\n- You can configure logging in JSON format with the `--log-format=json` option.\n- You can configure the \"reload strategy\" with the `--reload-strategy=<strategy-name>` option (details below).\n\n### üé≤ Reload Strategies\n\nReloader supports multiple \"reload\" strategies for performing rolling upgrades to resources. The following list describes them:\n\n- **env-vars**: When a tracked `ConfigMap/Secret` is updated, this strategy attaches a Reloader-specific environment variable to any containers referencing the changed ConfigMap or Secret on the owning resource (e.g., Deployment, StatefulSet, etc.). This strategy can be specified with the `--reload-strategy=env-vars` argument. Note: This is the default reload strategy.\n- **annotations**: When a tracked `ConfigMap/Secret` is updated, this strategy attaches a `reloader.stakater.com/last-reloaded-from` pod template annotation on the owning resource (e.g., Deployment, StatefulSet, etc.). This strategy is useful when using resource syncing tools like ArgoCD, since it will not cause these tools to detect configuration drift after a resource is reloaded.\n  \n    >> Note: Since the attached pod template annotation only tracks the last reload source, this strategy will reload any tracked resource should its ConfigMap or Secret be deleted and recreated. This strategy can be specified with the `--reload-strategy=annotations` argument.\n\nFor more details, visit the [Reloader GitHub repository](https://github.com/stakater/Reloader).\n\n## üåü Test Reloader: Hands-on\n\nTo test the Reloader, I will deploy a deployment that uses a ConfigMap and a Secret to inject environment variables into its pod.\n\n### Create ConfigMap and Secret\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n    name: test-configmap\ndata:\n    test_env: \"foo\"\n---\napiVersion: v1\ndata:\n    pass: bXlwYXNzd29yZA==\nkind: Secret\nmetadata:\n    name: test-secret\n```\n\n### Create Deployment\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n    name: nginx-deployment\n    labels:\n        app: nginx\n    annotations:\n        configmap.reloader.stakater.com/reload: \"test-configmap\"\n        secret.reloader.stakater.com/reload: \"test-secret\"\nspec:\n    replicas: 3\n    selector:\n        matchLabels:\n            app: nginx\n    template:\n        metadata:\n            labels:\n                app: nginx\n        spec:\n            containers:\n            - name: nginx\n                image: nginx:1.14.2\n                ports:\n                - containerPort: 80\n                env:\n                - name: TEST_ENV\n                    valueFrom:\n                        configMapKeyRef:\n                            name: test-configmap\n                            key: test_env\n                - name: TEST_PASS\n                    valueFrom:\n                        secretKeyRef:\n                            name: test-secret\n                            key: pass\n```\n\n![k-get](./k-get.png)\n\n> **Note:** The annotations in the deployment are used to watch specific ConfigMap or Secret. \n> - `secret.reloader.stakater.com/reload: \"test-secret\"` watches for the secret `test-secret`. Any changes to this secret will trigger a rolling upgrade of the deployment.\n> - `configmap.reloader.stakater.com/reload: \"test-configmap\"` watches for the ConfigMap `test-configmap`. Any changes to this ConfigMap will trigger a rolling upgrade.\n\nThere are other supported annotations that can be added to a deployment or statefulset:\n- `reloader.stakater.com/auto: \"true\"`: This will look for all ConfigMaps or Secrets being used either via environment variables or mounts and trigger a rolling upgrade if any changes are made to those ConfigMaps/Secrets.\n\n![check1](./check.png)\n<div class=\"image-title\">Initial values of environment variables</div>\n\n### Update ConfigMap\n\nOnce the deployment is created, make a change in the ConfigMap. You will notice a rolling upgrade has been triggered by the deployment, and new pods come up with updated values from the ConfigMap. ‚úíÔ∏è\n\n![check2](./check2.png)\n<div class=\"image-title\">New pods came up after updating ConfigMap</div>\n\n### Update Secret\n\nYou can also make a change in the Secret. You will notice a rolling upgrade has been triggered by the deployment, and new pods come up with updated values from the Secret. üéâ\n\n![check3](./check3.png)\n<div class=\"image-title\">New value of environment variables loaded in pod after updating secret</div>\n\n## üîö Summary\n\nReloader is a powerful tool that can help you automate rolling upgrades in Kubernetes. It monitors changes to ConfigMaps and Secrets, and then triggers rolling upgrades for associated pods. This eliminates the need for manual restarts or volume reattachments, and ensures that your applications are always up-to-date.\n\nIn this blog post, we discussed how to deploy Reloader using manifests and Helm, and how to use it to reload ConfigMaps and Secrets. We also explored a real-world use case where Reloader was used to automate rolling upgrades based on changes in associated ConfigMaps.\n\nBy leveraging Reloader's capabilities, you can enhance the reliability and efficiency of your Kubernetes deployments. When deploying Reloader, be sure to adapt the deployment method and configuration to your specific environment and requirements.\n\nFor more details, visit the [Reloader GitHub repository](https://github.com/stakater/Reloader).\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":1503},"frontmatter":{"id":"9a0b1c2d3e4f5g6h7i8j9k0l1","path":"/blog/reloader-configmap-secret/","humanDate":"Oct 28, 2024","fullDate":"2024-10-28","title":"ConfigMap and Secret Data Reloading Made Simple with Reloader üîÑ","keywords":["Kubernetes","ConfigMaps","Platform engineering","DevOps","K8s"],"excerpt":"Learn how to simplify the updating of ConfigMaps and Secrets in Kubernetes with Reloader, ensuring your applications always use the latest configuration.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB2lVxMoGv/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEREP/aAAgBAQABBQKsrKyb/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARIRAxUf/aAAgBAQABPyFKXOQUyoh7JR5x/9oADAMBAAIAAwAAABDn7//EABYRAQEBAAAAAAAAAAAAAAAAAAEAYf/aAAgBAwEBPxBIcv/EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxCMf//EABwQAQEAAgIDAAAAAAAAAAAAAAERACEQQTFRYf/aAAgBAQABPxBhGaNzrG4vpPGAGh7lxKg5Dpx//9k="},"images":{"fallback":{"src":"/static/f587b5e7b6956dec3ed9225083636074/2560f/reloader-cover.jpg","srcSet":"/static/f587b5e7b6956dec3ed9225083636074/37bba/reloader-cover.jpg 750w,\n/static/f587b5e7b6956dec3ed9225083636074/2560f/reloader-cover.jpg 840w","sizes":"100vw"},"sources":[{"srcSet":"/static/f587b5e7b6956dec3ed9225083636074/a66aa/reloader-cover.webp 750w,\n/static/f587b5e7b6956dec3ed9225083636074/3aff9/reloader-cover.webp 840w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5630952380952381}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/chaos-engineering-kubernetes/","title":"Chaos Engineering on Kubernetes: A Beginner's Guide: Revel In Chaos","date":"2024-10-28 17:06:00"},"excerpt":"Easy Guide to Chaos Testing on Kubernetes üó∫ Overview üëÄ Making sure our systems work well is super important in today's fast world. This‚Ä¶"},"nextThought":{"frontmatter":{"path":"/blog/lazydocker-user-friendly-docker-management/","title":"LazyDocker: The Docker Management, User-Friendly Tool That Will Save Your Time üê≥","date":"2024-10-28 15:34:00"},"excerpt":"The lazy way to manage Docker üêã üóØ Introduction LazyDocker is a user-friendly CLI tool that makes it easy to manage Docker. With LazyDocker‚Ä¶"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}