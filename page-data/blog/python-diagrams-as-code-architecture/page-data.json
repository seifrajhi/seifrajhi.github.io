{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/python-diagrams-as-code-architecture/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Using diagrams tool to visualize your architectureüî•</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìä Introduction</h2>\n<p>In the software development ecosystem, clear and effective communication is key. One way to achieve this is through visual representations of software architecture.</p>\n<blockquote>\n<p>Traditionally, creating these diagrams has been a manual and time-consuming process. However, with the advent of <strong>Diagram as Code (DaC)</strong>, this task has become much simpler and more efficient.</p>\n</blockquote>\n<p>Diagram as Code allows developers to create and maintain diagrams using code, making it easier to keep them up-to-date and consistent with the actual architecture.</p>\n<p>One popular tool for this purpose is the <a href=\"https://diagrams.mingrammer.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Diagrams tool</a>. In this blog post, we will explore how the Diagrams tool can help you visualize your software architecture, making it easier to explain and communicate your technical solutions.</p>\n<h2 id=\"-why-do-we-need-diagram-as-code\" style=\"position:relative;\"><a href=\"#-why-do-we-need-diagram-as-code\" aria-label=\" why do we need diagram as code permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ü§î Why do we need Diagram as Code?</h2>\n<p>In software development, visualizing system architecture is important for clear communication and effective planning. Traditional methods of creating these diagrams can be time-consuming and prone to errors. Diagram as Code (DaC) addresses these issues by allowing developers to create and maintain diagrams using code. This approach ensures that diagrams are always up-to-date and accurately reflect the current state of the system.</p>\n<ul>\n<li><a href=\"https://diagrams.mingrammer.com/docs/getting-started/installation\" target=\"_blank\" rel=\"noopener noreferrer\">Diagrams tool documentation</a></li>\n<li><a href=\"https://github.com/mingrammer/diagrams\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub repository for Diagrams tool</a></li>\n</ul>\n<h2 id=\"how-diagram-as-code-can-be-useful\" style=\"position:relative;\"><a href=\"#how-diagram-as-code-can-be-useful\" aria-label=\"how diagram as code can be useful permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How Diagram as Code Can Be Useful</h2>\n<p>The <strong>Diagrams tool</strong> is a great solution for implementing DaC. It allows you to draw cloud system architecture using Python code, making it ideal for prototyping new designs without the need for traditional design tools. You can also use it to describe or visualize existing architectures.</p>\n<p>The tool supports major cloud providers like <strong>AWS</strong>, <strong>Azure</strong>, <strong>GCP</strong>, <strong>Kubernetes</strong>, <strong>Alibaba Cloud</strong>, and <strong>Oracle Cloud</strong>, as well as on-premise nodes, SaaS, and major programming frameworks and languages.</p>\n<h3 id=\"Ô∏è-key-benefits-of-using-dac\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-key-benefits-of-using-dac\" aria-label=\"Ô∏è key benefits of using dac permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è Key Benefits of Using DaC</h3>\n<ul>\n<li><strong>Version Control</strong>: Track changes in architecture diagrams through version control systems, making it easier to manage and review changes over time.</li>\n<li><strong>Automation</strong>: Many DaC tools can be scripted and integrated into build pipelines, enabling automatic generation of documentation. This automation saves time and reduces the risk of discrepancies between the documentation and the actual system.</li>\n<li><strong>Familiarity</strong>: DaC leverages text-based tooling, which is familiar to most software developers. This familiarity makes it easier to adopt and integrate into existing workflows, enhancing productivity and collaboration within development teams.</li>\n</ul>\n<h3 id=\"-hands-on-and-examples\" style=\"position:relative;\"><a href=\"#-hands-on-and-examples\" aria-label=\" hands on and examples permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üß∞ Hands-on and Examples</h3>\n<p>Being able to codify diagrams is a huge asset and could probably save you and your team effort and time. To get started, all you need is the <strong>Diagrams library</strong>.</p>\n<h4 id=\"prerequisites\" style=\"position:relative;\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Prerequisites</h4>\n<ul>\n<li><strong>Python 3.6 or higher</strong>: Check your Python version first.</li>\n<li><strong>Graphviz</strong>: It uses Graphviz to render the diagram, so you need to install Graphviz to use diagrams.</li>\n</ul>\n<h4 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Installation</h4>\n<ul>\n<li><strong>macOS</strong>:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">brew <span class=\"token function\">install</span> graphviz</code></pre></div>\n<ul>\n<li><strong>Windows</strong>:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">choco <span class=\"token function\">install</span> graphviz</code></pre></div>\n<p>After installing Graphviz (or if you already have it), install the diagrams library:</p>\n<ul>\n<li><strong>Using pip (pip3)</strong>:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">pip <span class=\"token function\">install</span> diagrams</code></pre></div>\n<ul>\n<li><strong>Using pipenv</strong>:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">pipenv <span class=\"token function\">install</span> diagrams</code></pre></div>\n<ul>\n<li><strong>Using poetry</strong>:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">poetry <span class=\"token function\">add</span> diagrams</code></pre></div>\n<p>For more information, visit the <a href=\"https://diagrams.mingrammer.com/docs/getting-started/installation\" target=\"_blank\" rel=\"noopener noreferrer\">Diagrams tool documentation</a> and the <a href=\"https://github.com/mingrammer/diagrams\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub repository for Diagrams tool</a>.</p>\n<h2 id=\"Ô∏è-nodes\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-nodes\" aria-label=\"Ô∏è nodes permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üñºÔ∏è Nodes</h2>\n<p>Nodes represent individual components or services in your architecture. These can be anything from a database, a server, or an application. In the Diagrams tool, nodes are defined using specific classes that correspond to different types of services or components.</p>\n<p><strong>Example:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> diagrams <span class=\"token keyword\">import</span> Diagram\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>compute <span class=\"token keyword\">import</span> EC2\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>database <span class=\"token keyword\">import</span> RDS\n\n<span class=\"token keyword\">with</span> Diagram<span class=\"token punctuation\">(</span><span class=\"token string\">\"Simple Architecture\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    ec2_instance <span class=\"token operator\">=</span> EC2<span class=\"token punctuation\">(</span><span class=\"token string\">\"Web Server\"</span><span class=\"token punctuation\">)</span>\n    rds_instance <span class=\"token operator\">=</span> RDS<span class=\"token punctuation\">(</span><span class=\"token string\">\"Database\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>In this example, <code class=\"language-text\">EC2</code> and <code class=\"language-text\">RDS</code> are nodes representing an AWS EC2 instance and an AWS RDS database, respectively.</p>\n<p>Run <code class=\"language-text\">python diagram.py</code> and it will generate the below diagram:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 125.88235294117646%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSElEQVR42qWUa2hTZxjHI5sMhg784NgYTJj4ZTiZX8acddiCAytMy2TCitRua50r7Uy11gurtl291dGJKG4tDHGyicqm4j7UftBuWmdvMWl64eTSnDT32iQnOUmT0+RnmlZoXYIn2x/+nPO+5zm/87zv+5xHwxwlkzNXtzfO51oLW3da2F5tp2Sfkx0HvBTXjlNaF8BoVtJxiST/kmbuIDEb0d0v8eHHBhp/cJC/TWDNJ2Y+2Gbj2E9+Nn8zztXb0XTcVEIlUGcIkVfYR/kega8PWNl/3EFVvRNtk4ePvnBy804kN2CfTiJvYw9l2hEOHbVR12znSIszDS0sG+OPjvAsMKkO2K8L8t76+xSXDdDQPErrRTenzrsoq7VRUGzlekdoBjilEtjT52fdhntU1gxRtF3P1lIjRTuG2PedyMYSE7+3B3MDdvdMsHJ1B+UVj1i99h5vv9/FO3ndVNSaWLt5kCu3JtQBn5ZNUIrT2DRIpVbPwcPDHGoQqDtqpabewrcnRcacsXnxWYHPyuN1IZiGEIQZe7xOnqeMwOkvT59gLBYnHJZTjiBJYSLRyfR8MlNqajL8L8oOTEyRzGCSU5k37/9lmCswmWDS3ElUf43JwRvEjFdTvkLc+BuK+U9QolnBmmeXOa2YvR9x90Ice1/EVbMAX/0r+E8sJdjyOlKDBsV4aV589jqcDYgKf2OtWIi9ZjHuxjcJXC7B37oe6WIhwe9fJfbw9CxQUQk0dWEqfwH7wWU8vvwVvrP5+C8U4W8rYOLYEia7z+UGjAx3Yqp6DfePn+I+t4XRLzV4T68jeG1navmLiP5zNjdgePAugnY5YuMa3K2f4WrJ5/GlUrzNq3BpNUQftuYINN5hpPItxFObEE8U4Pm5lLGmd7HvXYSjegFy13m1wJkWLFv60RcvxrR7BZbq5Yxq38C66yXEqpcRKzTIvb+qO+W5dRjQdSBcP4PY3ob9dhvuzl/w/HWBkO4GiZissg7nKK4ojNgcmO2ulJ2YbE6sDg8xRVH3Lz/tIF6fj/sPHjAwMIDBYEi1LYGR4WF6+3pTc4a0H+n1+MbH572XNUMllUEoFCIQCKZaVgg5EkGW5XQbk0JS+n76eTwez5jhE1nTFlYDe2IkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"example 1\" title=\"\" src=\"/static/51aa9e8c86754a090c12fe36cd1ffef9/c5bb3/example1.png\" srcset=\"/static/51aa9e8c86754a090c12fe36cd1ffef9/04472/example1.png 170w,\n/static/51aa9e8c86754a090c12fe36cd1ffef9/9f933/example1.png 340w,\n/static/51aa9e8c86754a090c12fe36cd1ffef9/c5bb3/example1.png 680w,\n/static/51aa9e8c86754a090c12fe36cd1ffef9/5ebd7/example1.png 704w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"Ô∏è-clusters\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-clusters\" aria-label=\"Ô∏è clusters permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üóÇÔ∏è Clusters</h2>\n<p>Clusters group related nodes together, making it easier to visualize and manage complex architectures. Clusters can represent different environments (e.g., development, staging, production) or different parts of a system (e.g., frontend, backend).</p>\n<p><strong>Example:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> diagrams <span class=\"token keyword\">import</span> Cluster<span class=\"token punctuation\">,</span> Diagram\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>compute <span class=\"token keyword\">import</span> EC2\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>database <span class=\"token keyword\">import</span> RDS\n\n<span class=\"token keyword\">with</span> Diagram<span class=\"token punctuation\">(</span><span class=\"token string\">\"Clustered Architecture\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Web Tier\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        web_server <span class=\"token operator\">=</span> EC2<span class=\"token punctuation\">(</span><span class=\"token string\">\"Web Server\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Database Tier\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        db_server <span class=\"token operator\">=</span> RDS<span class=\"token punctuation\">(</span><span class=\"token string\">\"Database\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Here, the Web Tier and Database Tier clusters group the web server and database server, respectively.</p>\n<p>Run <code class=\"language-text\">python diagram.py</code> and it will generate the below diagram:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 584px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 187.05882352941177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFhElEQVR42q2WeWwUVRzH8fjDCJoY8YhHiPEfwRiFaKxardUURcMZDwSaapWgvRRqIeFQG4+KVJRSBKVYQ4iGI2q8NWCEIt12t7W23S1tt93tzswe7bK7M3u02z0+vpkWI4Ls/uEkv/ze/N68z/u99+b3nZnC/3xN+XfglBblpORjwHMKu9uPcziEwxfipMvL0IiGWx1DCY2iRuOZgelUmgGfyuHWLn44buGn5nbhzZh6HBw2d3LCOoAnBpKWQhbQdCp1fmAikcStxXFH0xODwinDS8LrMTmc/vteEZmmMgGTySSKAPqToHKmhdJpw1TS+BMCLoBZZeiNjPOjKcyuA34avgrS+E2Ixm81Gr8PC4vQ8F2MX/4YxxPOkKGYXFwpuhwRCp7qIWe+jbwn+7lnyQC5TzvJXSZTUOwlv3iEhWuCWKVRfdTkuPMAzSc17pvfSd1uD6/VyuQs7OWh5YMG9K2PTlG3T2VeyQht/bHsgBYBfHDRnywstFJUYad0wxBr31Eor3azaqOHJyo8LCjz0WaPZgNMC6DKffPaKHzJRlFZL/Wfenhrm0Jd4zBlrysUr3Mzb6UiMswW2KNy79xWyqp6WP6ija27FNa/46J2l5fSjRIVb7h55DlX9kCzLURuQTP3P9LC0uIuXn/XwXv1EtW1EsVrHDz8TD/zip1Y+iLZA3PymqiptVO1qZc781vJX9TB3Y92sGmzi5p6DwUr7NkDLQJ4+11HeHxRM48ubOG2nCbm5JmYndfK/GVdLHm2l9zFPbT3h88PPF0pcnCMt9/vY2mRmRfKuyld20fpun7K1w9Sut7Js6/Y2fyJR9RyVpWSEBUQJyBmdQTCNFt7MdnswveJQxjC3DsganrcKE1FjWeu5bTI36eO4lKTOPxRAZEwCYXRrVUoTottEEmAJE2UqDpRKRn1MD6eIBAZIyT0TveReAo1Nk5Q3OuxkVBEWJix+Hh2Aiv5NX4x/cHRdqvYeInDou04FUUJi/3VEhM+rGc4xlkncq5DcQVjdDi8dAwo2EfCtNslsQVjYu+EBkaSk5YyDiXjHiaSEwLrE5P7hMK7Rye8Ej3T5Ei2AqsrttBDOZpA9gdRAipyIIQS1Axz66bHRL+ijWd+bZLim2IM+KwQd81MvFtn4/vwDoY/uAX/9lsJ7JiJWj+D4JdLxWQaqfT5DiWdQrxeKANduFZPRV59Ee5XL8ZTeSGBujsICaDWcA/h7Teh1VyCZ6iL1OS4/wCmJ4HdOKuuxVV5OXLVNEa25xI6WEzg4wcIbJtFeO9cgluuFMDObIFWBtdci6PkYnw75xM4VCag9xP6qoTgnrmEdswmsPkq3M4sgbIA2suvQX4vj+G9K1GqZzK0cgrDtXMIfbGCUEM+/revEMAslyzbu+mruAHp3Xy8u5fj3bkY16tXMNKwhMC+Ffg2TGX4zem4HVkDrfSU3Ihry2PYX74O754iRvatwv/5KpTXrkepvAhP9dXZA6W+bqzPX83QlgUG1FXzIO66BTgrpzO0ehry2stQNk4Xe/1nBiCTGcoS3WWzsBVeRn/5DOxi+YPlVzFYcinOiqm4yi5Aqr4ZxSNPAP+lOGfpoV6zrn4bvUcO0HNkP/ajh+g/dpDBE1/jNH3NUPMh5MEuo6ZT2QisXvTuBPxmc7D/VwvH+yR+bu/l124nP1qE0Ep+o18KxAz9zChfWiwupCmGNxQVFhGCG8Un2p5gBK9uelz0a6MZ/g916YpEo0ZbX8rp2fWs4/H4ZHvciBt2juUawNMDg8EgrZY2w442HTf8CZOJjs5OWsxmuqxWfm9u5rdjTZgt7aLfgrmtHU3T/v58nJFhSs8wEkEVD2hamKjIVgsLH4sxOjpqZB8TbT0W1p9TVSOmr+yfGf4FsHpdubIw+eIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"example 2\" title=\"\" src=\"/static/4a974d9e166b60f56c6a8908b7d4bea5/e05eb/example2.png\" srcset=\"/static/4a974d9e166b60f56c6a8908b7d4bea5/04472/example2.png 170w,\n/static/4a974d9e166b60f56c6a8908b7d4bea5/9f933/example2.png 340w,\n/static/4a974d9e166b60f56c6a8908b7d4bea5/e05eb/example2.png 584w\" sizes=\"(max-width: 584px) 100vw, 584px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-edges\" style=\"position:relative;\"><a href=\"#-edges\" aria-label=\" edges permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîó Edges</h2>\n<p>Edges represent the connections or relationships between nodes. They show how data flows between different components in your architecture. In the Diagrams tool, edges are automatically created when you connect nodes.</p>\n<p><strong>Example:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> diagrams <span class=\"token keyword\">import</span> Cluster<span class=\"token punctuation\">,</span> Diagram\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>compute <span class=\"token keyword\">import</span> EC2\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>database <span class=\"token keyword\">import</span> RDS\n\n<span class=\"token keyword\">with</span> Diagram<span class=\"token punctuation\">(</span><span class=\"token string\">\"Architecture with Edges\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Web Tier\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        web_server <span class=\"token operator\">=</span> EC2<span class=\"token punctuation\">(</span><span class=\"token string\">\"Web Server\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Database Tier\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        db_server <span class=\"token operator\">=</span> RDS<span class=\"token punctuation\">(</span><span class=\"token string\">\"Database\"</span><span class=\"token punctuation\">)</span>\n    \n    web_server <span class=\"token operator\">>></span> db_server</code></pre></div>\n<p>In this example, the <code class=\"language-text\">>></code> operator creates an edge between the web server and the database server, indicating a data flow from the web server to the database.</p>\n<p>Run <code class=\"language-text\">python diagram.py</code> and it will generate the below diagram:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 74.11764705882352%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAADbklEQVR42m2T22scVRjAV/APEPrmg1BBlEaFok/6VIpiNbHWNGhTRC2hbTY0kGrTNGmrEWrV1gupDWJtQIiKbz74JBSFaCTa1Cab7mavszuzs7M7O3udvc3sZH6e2d0UFQ98fGfOnO93vqvPcbaotWzqLUuITcNqd3R3b+O6Ltur0fvfbDsdXWtaXS3O24LjLZ9eaXDjz3VWgnGWA2ESholqtklXbeSK90i7c7EpDFcjCjf+CPDLrSAroSRLa2Ei2SqK6WLUrC4wLzZSpY3ScJHrLummi9qiI7IAm027c9HzQhHfmbpFRthodRut0UZvOWjCxuOIcPAZDQclr5NJx8hkJDJKWEgILb2JUqpgWt1QvPCTZYdbCYu/JJt1uc2akJsJm1DWodCwe8BikdTlp9Fm7iP77g4KHz9I+YvdmJ/sIP/jKKYXsbjo4nDpK43+16Mc9Cd57ojM/rEMh6cMjsxWkHJeyAKY1xQSk/ejjN9D7uLDlBcPUpzrw7z6CMbigPBwuyRbnDgfZ2QixhsnJfYOx3hhROaduQIHJvIEpGYvh1mV6NsPoM7uwvh6GH3uKYoL+yhf6UP/doiq5XY8tLYs3pqN8uzgGqfeSzL9QZqzlzWOzmTY79e4k+oB9YxM5PQusvODaJ/uJXXCR3FxmOJnj6Fe70cXLlqipTRDx396nRdfvc30hQRXFjQ+nNcYnVF4aVRhQ2r0gGqK8JknkS/uQfvyMPlvjpGb30fmpA914QCmvR2yy8TZEANDq4xNhvFPRvGfSTA2k2JgRPonUGbj+E6kqcdJTj+Kcq6P5PF7SR/zocw/3ytKN4dHx2/z8tAK/YM3eeiJZXbvWRVex3nmUJhAvN7Lodkk/N37hC69QvTzN4ldfY3k9RHka4eQl7/vAgWxLYA//JTrQCem73BqdpOpCzHGz8X56JqGVu5V2RD9k6g7/BxIsBRM8uumLERhVTZI1reoNrpl9sYsKwoklar8HoywtB7kt40QQTWLLh6929i2mMtKvUXJk1qzMxmmMPYmo2E7/5rluuVQE9CaaPaKmJJCtUmx5tnaWILTCfluynuGqqoSiUSIx+NIUoKY0DldJyzOkqlU518wGETLZvm/5XN7Od+WcqWCUShiFAsYRoG8YVCpVsVZgappUhCTJStpiqUS/7X1gH8DrtILayTMWnYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"example 3\" title=\"\" src=\"/static/34d4bd40735c1d1b52a3e966f5d7a03a/c5bb3/example3.png\" srcset=\"/static/34d4bd40735c1d1b52a3e966f5d7a03a/04472/example3.png 170w,\n/static/34d4bd40735c1d1b52a3e966f5d7a03a/9f933/example3.png 340w,\n/static/34d4bd40735c1d1b52a3e966f5d7a03a/c5bb3/example3.png 680w,\n/static/34d4bd40735c1d1b52a3e966f5d7a03a/764be/example3.png 806w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-data-flow\" style=\"position:relative;\"><a href=\"#-data-flow\" aria-label=\" data flow permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìà Data Flow</h2>\n<p>Data Flow illustrates how data moves through the system, from one component to another. This is crucial for understanding the interactions and dependencies within your architecture.</p>\n<p><strong>Example:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> diagrams <span class=\"token keyword\">import</span> Cluster<span class=\"token punctuation\">,</span> Diagram\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>compute <span class=\"token keyword\">import</span> EC2\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>database <span class=\"token keyword\">import</span> RDS\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>network <span class=\"token keyword\">import</span> ELB\n\n<span class=\"token keyword\">with</span> Diagram<span class=\"token punctuation\">(</span><span class=\"token string\">\"Architecture with Edges\"</span><span class=\"token punctuation\">,</span> show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Web Tier\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        web_server <span class=\"token operator\">=</span> EC2<span class=\"token punctuation\">(</span><span class=\"token string\">\"Web Server\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Database Tier\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        db_server <span class=\"token operator\">=</span> RDS<span class=\"token punctuation\">(</span><span class=\"token string\">\"Database\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"ELB Tier\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        load_balancer <span class=\"token operator\">=</span> ELB<span class=\"token punctuation\">(</span><span class=\"token string\">\"Load Balancer\"</span><span class=\"token punctuation\">)</span>\n    \n    load_balancer <span class=\"token operator\">>></span> web_server\n    web_server <span class=\"token operator\">>></span> db_server</code></pre></div>\n<p>In this example, data flows from the load balancer to the web server and then to the database server, showing the path data takes through the system.</p>\n<p>Run <code class=\"language-text\">python diagram.py</code> and it will generate the below diagram:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.764705882352935%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVR42p2Sy2sUQRCH80d48j8wR/HoxYOoIIgHJWI0CkpQgkGJGogGH0QD62GjB9H4wBw8xBhyEcEgiAg5CMZssprHxjxmd5LJZF47vTvb89jPHgVXRC8WdNNUd33166pqQlkcJ2iGTdF0sSsRlggJlS9J6hQ3LEqmjVMN1Z1ERjFJPfW7rG44aCrG9CW1KElRNKVbEMYsuYKlskCXCcVajFC+FDprSeZsiRbAcrVOWcY/BCxaZQqmw4rjU1IifOVvAFXW0UGDRz06z29tMnrXw3EiInWnv+rDeHIAa7gVc+wUwjVIQx++MLmcMejO2vQPCaU0bABFENF3Mk/Pvjz3OzSyJ3SKy+n3AhZv7mC9dyve493YA82I4pRSD+1dXzlyZoG2Lo3WSwa5Qq0B9CshmY5prrfkeNq7QrZ9mdWlGqLiURhoQb+zC/PBftYyzZS1HF414XTnFBeuFLh9r8TR8xrThaABrNYirh7/yNmdE9xoydPfNo9elKr4EfOZw6z2bqd0bRsr3VsQ6/OEdTh3Mcfeg5/Yc2iGY53fmClUG0Cpivx+osTI8BfGXs7xZlzDV0nSWi3mJ5kcH2Hq7TALk++oyAjF48Nnm2ejswyNzfF6wlJT8FtT6moMaklEkIRqSYJ6SJwk+EKwZvuseVV0L6BkCxyvrLqsOq1ipHovY0mU/BylX8C/WZrEdT0s08RzHVxbqbA3MYwNwjD643Hj+E/g/9p3/E/ODzOhRpgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"example 4\" title=\"\" src=\"/static/e865120767b2a53096f0d672a8d00a91/c5bb3/example4.png\" srcset=\"/static/e865120767b2a53096f0d672a8d00a91/04472/example4.png 170w,\n/static/e865120767b2a53096f0d672a8d00a91/9f933/example4.png 340w,\n/static/e865120767b2a53096f0d672a8d00a91/c5bb3/example4.png 680w,\n/static/e865120767b2a53096f0d672a8d00a91/b12f7/example4.png 1020w,\n/static/e865120767b2a53096f0d672a8d00a91/b5a09/example4.png 1360w,\n/static/e865120767b2a53096f0d672a8d00a91/bb27a/example4.png 1371w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-kubernetes-architecture\" style=\"position:relative;\"><a href=\"#-kubernetes-architecture\" aria-label=\" kubernetes architecture permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üåÄ Kubernetes Architecture</h2>\n<p>Creating a sophisticated Kubernetes architecture involves several components that work together to ensure scalability, reliability, and efficient management of containerized applications.</p>\n<p>Below is an example of a detailed Kubernetes architecture using the Diagrams tool.</p>\n<h3 id=\"example\" style=\"position:relative;\"><a href=\"#example\" aria-label=\"example permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Example:</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> diagrams <span class=\"token keyword\">import</span> Diagram<span class=\"token punctuation\">,</span> Cluster<span class=\"token punctuation\">,</span> Edge\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>compute <span class=\"token keyword\">import</span> EKS\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>network <span class=\"token keyword\">import</span> ELB\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>database <span class=\"token keyword\">import</span> RDS\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>storage <span class=\"token keyword\">import</span> S3\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>devtools <span class=\"token keyword\">import</span> Codepipeline<span class=\"token punctuation\">,</span> Codebuild\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>management <span class=\"token keyword\">import</span> Cloudwatch\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>security <span class=\"token keyword\">import</span> IAMRole\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>general <span class=\"token keyword\">import</span> User\n\n<span class=\"token keyword\">with</span> Diagram<span class=\"token punctuation\">(</span><span class=\"token string\">\"Refined AWS EKS Architecture\"</span><span class=\"token punctuation\">,</span> show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    users <span class=\"token operator\">=</span> User<span class=\"token punctuation\">(</span><span class=\"token string\">\"Users\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"AWS Cloud\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        eks_cluster <span class=\"token operator\">=</span> EKS<span class=\"token punctuation\">(</span><span class=\"token string\">\"EKS Cluster\"</span><span class=\"token punctuation\">)</span>\n        \n        <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"VPC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            elb <span class=\"token operator\">=</span> ELB<span class=\"token punctuation\">(</span><span class=\"token string\">\"Load Balancer\"</span><span class=\"token punctuation\">)</span>\n            eks_service <span class=\"token operator\">=</span> EKS<span class=\"token punctuation\">(</span><span class=\"token string\">\"Service\"</span><span class=\"token punctuation\">)</span>\n            \n            <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Kubernetes Components\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                app_deploy <span class=\"token operator\">=</span> EKS<span class=\"token punctuation\">(</span><span class=\"token string\">\"App Deployment\"</span><span class=\"token punctuation\">)</span>\n                app_pod <span class=\"token operator\">=</span> EKS<span class=\"token punctuation\">(</span><span class=\"token string\">\"App Pod\"</span><span class=\"token punctuation\">)</span>\n                db_statefulset <span class=\"token operator\">=</span> RDS<span class=\"token punctuation\">(</span><span class=\"token string\">\"DB StatefulSet\"</span><span class=\"token punctuation\">)</span>\n                db_pod <span class=\"token operator\">=</span> EKS<span class=\"token punctuation\">(</span><span class=\"token string\">\"DB Pod\"</span><span class=\"token punctuation\">)</span>\n                app_deploy <span class=\"token operator\">-</span> app_pod\n                db_statefulset <span class=\"token operator\">-</span> db_pod\n\n            <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Monitoring\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                cloudwatch <span class=\"token operator\">=</span> Cloudwatch<span class=\"token punctuation\">(</span><span class=\"token string\">\"CloudWatch\"</span><span class=\"token punctuation\">)</span>\n                cloudwatch <span class=\"token operator\">-</span> eks_cluster\n\n            <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"CI/CD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                codepipeline <span class=\"token operator\">=</span> Codepipeline<span class=\"token punctuation\">(</span><span class=\"token string\">\"CodePipeline\"</span><span class=\"token punctuation\">)</span>\n                codebuild <span class=\"token operator\">=</span> Codebuild<span class=\"token punctuation\">(</span><span class=\"token string\">\"CodeBuild\"</span><span class=\"token punctuation\">)</span>\n                codepipeline <span class=\"token operator\">-</span> codebuild\n                codebuild <span class=\"token operator\">-</span> eks_cluster\n\n    s3 <span class=\"token operator\">=</span> S3<span class=\"token punctuation\">(</span><span class=\"token string\">\"Persistent Storage\"</span><span class=\"token punctuation\">)</span>\n\n    users <span class=\"token operator\">>></span> elb <span class=\"token operator\">>></span> eks_service\n    eks_service <span class=\"token operator\">>></span> app_deploy\n    eks_service <span class=\"token operator\">>></span> db_statefulset\n    cloudwatch <span class=\"token operator\">>></span> Edge<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">\"firebrick\"</span><span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span><span class=\"token string\">\"dashed\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> app_deploy\n    cloudwatch <span class=\"token operator\">>></span> Edge<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">\"firebrick\"</span><span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span><span class=\"token string\">\"dashed\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> db_statefulset\n    codepipeline <span class=\"token operator\">>></span> Edge<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span><span class=\"token string\">\"dotted\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> app_deploy\n    codepipeline <span class=\"token operator\">>></span> Edge<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span><span class=\"token string\">\"dotted\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> db_statefulset\n    db_pod <span class=\"token operator\">>></span> Edge<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span><span class=\"token string\">\"solid\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> s3</code></pre></div>\n<p>Run <code class=\"language-text\">python diagram.py</code> and it will generate the below diagram:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 128.23529411764707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD/0lEQVR42q1UW2sdVRTObxDf/A0++1YQfPDFp/4A3wQfpRSs0gYCImIfpKX6IFJFECuiTaCmGGtSiqSNxsYmbS4n5zJn3+dyZubM9ZwzM5/rTNIS03PSFtyw2Btm9re/tda3vhkcrqKsYJkeOhR2lMNLR0+F+ziSIbw4g5cM6ntH18zjw6io0PZzdIIhWFSAx+WEqMAjiqwCKwCWlshH5RRAeknEBWQy3suJwcMheALwxgbsm7PQnfvI69vlZEDeH9WgE8GItdVL0SWEzsp3MO+/DP3n9weAVTGNIV0mBiKu6uCH+zhYv0A3HEFmQFc5aK6vgGmDQV3CajJg2/HBghCiH0FEEVQcH5wpeNhHNwgg6dwNI+x5MawgwWBqDYsSls2gQwYnVpCeQIdxaMeBcR1IY0NoDTtUpAIB7VvQgZzelCEB6r5dg9mxrEF83UfoZnB1Vu+hk8L2bfquoAIOFeqTAVVg6HVFOlNocxvziwH+2ogIMMbqvQDLf/SJuYGTvACg6UuEQ43VdYbXTz/EpasOeibGubkm3j5jYV8YEvkLMZQ0DQotS+PaNY61ez4CJ8dvSwbXFzRUz6HvtAfi+QHrGrkKnVYXnBlo1addg1mcUpaQAYPwLPpfHQJWT6QzEXDcGGEkdrYFmm0J7nJsPxLY+keg1RRo7HIIFkDZPgEWz25K3WXPg8eoqyqkuhJLmULzAXxKv2fIGGQIpXs1YEWTUpTFFEBqijN0wO8/woM3ZrF/eQE6MvjksyY+uKjQlSXM6gKcK6fgbvwMkSe48NM7uLI8+wzA9YfYPPUhmpfmScAKc3NbeO98CxYnA1m5Dv7RazTLP6KTB3j36ml8fOPMySmPJ4TteZDcI8EbWG0X3VaPNJnAkQlEy4VSPrLBCHmWIc1SlFWFmeoIoPRJh6GsQQ2N2L41ZtQGdzj2dxhYQ8FRBKhiqK5PNfSRDIbI85wAMxRFcYQhtd9ObfgjuhSPpUNsKR0T21Aeh20PiFlODFO4dPZ6oC5H1JTRf7vcj2Jk2YFNbvwtcXdJQFC6trcHe+1LeNYtCN8HX/0VPtVsDOg0GvDufAPdfIC8PGZfbYtESuNEfoPPL2zh/Js72NzsgW8vgp99Be4vZ8H8HpoX34Lz6aswIgC7+S30uZeg73z1tMF6vQC+H9IbFdbutnFrvgFmKF13D+z3L6B3lyBDG+z2DejlH+CRBu2dfajFr6F2ieFxg82omKPREOMJsjxGsQdBo2UnDrp9FzrxamG3uE8RQUoyWXKfJiOjNQEZ7JRJoY4jzgaIqJ7xIIcmP2RSgClVM+ZGk/WTRsnRY+pqlCb0f17fmwh4fI2lkCTJkxhnkqYpZTPCSWsG//P6F+Gmo0xLzLZdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"k8s\" title=\"\" src=\"/static/7849a533648c1009966680ee5e6bb6a3/c5bb3/k8s.png\" srcset=\"/static/7849a533648c1009966680ee5e6bb6a3/04472/k8s.png 170w,\n/static/7849a533648c1009966680ee5e6bb6a3/9f933/k8s.png 340w,\n/static/7849a533648c1009966680ee5e6bb6a3/c5bb3/k8s.png 680w,\n/static/7849a533648c1009966680ee5e6bb6a3/b12f7/k8s.png 1020w,\n/static/7849a533648c1009966680ee5e6bb6a3/75a80/k8s.png 1134w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-bonus-more-tools-for-creating-diagrams\" style=\"position:relative;\"><a href=\"#-bonus-more-tools-for-creating-diagrams\" aria-label=\" bonus more tools for creating diagrams permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üé® Bonus: More Tools for Creating Diagrams</h2>\n<p>There are other tools available for creating diagrams, each with its own unique features and capabilities. Here are some of the most popular ones:</p>\n<ol>\n<li>\n<p><strong>Structurizr</strong><br>\n<a href=\"https://www.structurizr.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Structurizr</a> is a collection of tooling to create software architecture diagrams based on the C4 model. It allows you to define your architecture models as code and visualize them in a clear and structured way.</p>\n</li>\n<li>\n<p><strong>PlantUML</strong><br>\n<a href=\"https://plantuml.com/\" target=\"_blank\" rel=\"noopener noreferrer\">PlantUML</a> is another popular tool for creating UML diagrams from plain text descriptions. It supports various diagram types, including sequence diagrams, use case diagrams, and class diagrams.</p>\n</li>\n<li>\n<p><strong>Mermaid</strong><br>\n<a href=\"https://mermaid.js.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Mermaid</a> is a JavaScript-based diagramming and charting tool that renders Markdown-inspired text definitions to create diagrams and flowcharts. It's great for embedding diagrams in Markdown files.</p>\n</li>\n<li>\n<p><strong>ASCII Editor</strong><br>\n<a href=\"https://asciiflow.com/#/\" target=\"_blank\" rel=\"noopener noreferrer\">ASCII editors</a> allow you to create simple diagrams using plain text. These are useful for quick sketches and can be easily included in code comments or documentation.</p>\n</li>\n<li>\n<p><strong>Markmap</strong><br>\n<a href=\"https://markmap.js.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Markmap</a> is a tool that converts Markdown files into interactive mind maps. It's useful for visualizing the structure of your Markdown documents.</p>\n</li>\n<li>\n<p><strong>D2 Diagrams</strong><br>\nD2 is a diagram scripting language that turns text into diagrams. It stands for Declarative Diagramming. Declarative, as in, you describe what you want diagrammed, and it generates the image.</p>\n</li>\n<li>\n<p><strong>SequenceDiagram</strong><br>\n<a href=\"https://sequencediagram.org/\" target=\"_blank\" rel=\"noopener noreferrer\">SequenceDiagram.org</a> is an online tool for creating sequence diagrams. It provides a simple interface for defining and visualizing sequence diagrams.</p>\n</li>\n<li>\n<p><strong>Visio</strong><br>\n<a href=\"https://www.microsoft.com/en-ca/microsoft-365/visio/flowchart-software\" target=\"_blank\" rel=\"noopener noreferrer\">Microsoft Visio</a> is a well-known diagramming tool that offers a wide range of templates and shapes for creating professional diagrams. It's widely used in business and engineering environments.</p>\n</li>\n<li>\n<p><strong>LucidChart</strong><br>\n<a href=\"https://lucid.co/solutions/engineering\" target=\"_blank\" rel=\"noopener noreferrer\">LucidChart</a> is a web-based diagramming tool that allows for real-time collaboration. It supports a variety of diagram types, including flowcharts, UML diagrams, and network diagrams.</p>\n</li>\n<li>\n<p><strong>Draw.io</strong><br>\n<a href=\"https://www.diagrams.net/\" target=\"_blank\" rel=\"noopener noreferrer\">Draw.io</a> (now known as diagrams.net) is a free online diagramming tool that integrates with various cloud storage services. It's versatile and easy to use, making it a popular choice for many users.</p>\n</li>\n<li>\n<p><strong>Cloudcraft</strong><br>\n<a href=\"https://www.cloudcraft.co/\" target=\"_blank\" rel=\"noopener noreferrer\">Cloudcraft</a> is a specialized tool for creating AWS architecture diagrams. It provides a drag-and-drop interface and integrates with AWS to visualize your cloud infrastructure.</p>\n</li>\n<li>\n<p><strong>Archium</strong><br>\nArchium is a tool for creating architecture diagrams and documentation. It focuses on providing a clear and structured way to document your software architecture.</p>\n</li>\n<li>\n<p><strong>Excalidraw</strong><br>\n<a href=\"https://excalidraw.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Excalidraw</a> is an open-source virtual whiteboard tool that lets you create hand-drawn-like diagrams. It's great for brainstorming and sketching ideas quickly.</p>\n</li>\n<li>\n<p><strong>CloudSkew</strong><br>\n<a href=\"https://www.cloudskew.com/\" target=\"_blank\" rel=\"noopener noreferrer\">CloudSkew</a> is an online diagramming tool for creating cloud architecture diagrams. It supports various cloud providers and offers a simple interface for designing your cloud infrastructure.</p>\n</li>\n</ol>\n<p>These tools offer a range of features to suit different needs, from simple text-based diagrams to complex, interactive visualizations. You can check a curated list of tools here: <a href=\"https://softwarearchitecture.tools/\" target=\"_blank\" rel=\"noopener noreferrer\">Software Architecture Tools</a>.</p>\n<p>For more information, visit the <a href=\"https://diagrams.mingrammer.com/docs/getting-started/installation\" target=\"_blank\" rel=\"noopener noreferrer\">Diagrams tool documentation</a> and the <a href=\"https://github.com/mingrammer/diagrams\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub repository for Diagrams tool</a>.</p>\n<h2 id=\"-closing-thoughts\" style=\"position:relative;\"><a href=\"#-closing-thoughts\" aria-label=\" closing thoughts permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîö Closing Thoughts</h2>\n<p>Using Diagrams as Code simplifies software architecture by allowing developers to visualize and document their systems through code. This approach ensures that diagrams are always up-to-date with the codebase, enhances collaboration, and improves the clarity of complex architectures. Tools like PlantUML, Mermaid, and Structurizr facilitate this process, making it easier to maintain and communicate architectural designs.</p>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ üáµüá∏</em></strong></p>\n<p><br><br></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò</p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":7,"rawMarkdownBody":"\n> **Using diagrams tool to visualize your architectureüî•**\n\n## üìä Introduction\n\nIn the software development ecosystem, clear and effective communication is key. One way to achieve this is through visual representations of software architecture.\n\n> Traditionally, creating these diagrams has been a manual and time-consuming process. However, with the advent of **Diagram as Code (DaC)**, this task has become much simpler and more efficient.\n\nDiagram as Code allows developers to create and maintain diagrams using code, making it easier to keep them up-to-date and consistent with the actual architecture.\n\nOne popular tool for this purpose is the [Diagrams tool](https://diagrams.mingrammer.com/). In this blog post, we will explore how the Diagrams tool can help you visualize your software architecture, making it easier to explain and communicate your technical solutions.\n\n## ü§î Why do we need Diagram as Code?\n\nIn software development, visualizing system architecture is important for clear communication and effective planning. Traditional methods of creating these diagrams can be time-consuming and prone to errors. Diagram as Code (DaC) addresses these issues by allowing developers to create and maintain diagrams using code. This approach ensures that diagrams are always up-to-date and accurately reflect the current state of the system.\n\n- [Diagrams tool documentation](https://diagrams.mingrammer.com/docs/getting-started/installation)\n- [GitHub repository for Diagrams tool](https://github.com/mingrammer/diagrams)\n  \n## How Diagram as Code Can Be Useful\n\nThe **Diagrams tool** is a great solution for implementing DaC. It allows you to draw cloud system architecture using Python code, making it ideal for prototyping new designs without the need for traditional design tools. You can also use it to describe or visualize existing architectures.\n\nThe tool supports major cloud providers like **AWS**, **Azure**, **GCP**, **Kubernetes**, **Alibaba Cloud**, and **Oracle Cloud**, as well as on-premise nodes, SaaS, and major programming frameworks and languages.\n\n### üõ†Ô∏è Key Benefits of Using DaC\n\n- **Version Control**: Track changes in architecture diagrams through version control systems, making it easier to manage and review changes over time.\n- **Automation**: Many DaC tools can be scripted and integrated into build pipelines, enabling automatic generation of documentation. This automation saves time and reduces the risk of discrepancies between the documentation and the actual system.\n- **Familiarity**: DaC leverages text-based tooling, which is familiar to most software developers. This familiarity makes it easier to adopt and integrate into existing workflows, enhancing productivity and collaboration within development teams.\n\n### üß∞ Hands-on and Examples\n\nBeing able to codify diagrams is a huge asset and could probably save you and your team effort and time. To get started, all you need is the **Diagrams library**.\n\n#### Prerequisites\n\n- **Python 3.6 or higher**: Check your Python version first.\n- **Graphviz**: It uses Graphviz to render the diagram, so you need to install Graphviz to use diagrams. \n\n#### Installation\n\n- **macOS**:\n  \n```sh\nbrew install graphviz\n```\n\n- **Windows**:\n  \n```sh\nchoco install graphviz\n```\n\nAfter installing Graphviz (or if you already have it), install the diagrams library:\n\n- **Using pip (pip3)**:\n  \n```sh\npip install diagrams\n```\n\n- **Using pipenv**:\n  \n```sh\npipenv install diagrams\n```\n\n- **Using poetry**:\n  \n```sh\npoetry add diagrams\n```\n\nFor more information, visit the [Diagrams tool documentation](https://diagrams.mingrammer.com/docs/getting-started/installation) and the [GitHub repository for Diagrams tool](https://github.com/mingrammer/diagrams).\n\n## üñºÔ∏è Nodes\n\nNodes represent individual components or services in your architecture. These can be anything from a database, a server, or an application. In the Diagrams tool, nodes are defined using specific classes that correspond to different types of services or components.\n\n**Example:**\n\n```python\nfrom diagrams import Diagram\nfrom diagrams.aws.compute import EC2\nfrom diagrams.aws.database import RDS\n\nwith Diagram(\"Simple Architecture\"):\n    ec2_instance = EC2(\"Web Server\")\n    rds_instance = RDS(\"Database\")\n```\n\nIn this example, `EC2` and `RDS` are nodes representing an AWS EC2 instance and an AWS RDS database, respectively.\n\nRun `python diagram.py` and it will generate the below diagram:\n\n![example 1](./example1.png)\n\n## üóÇÔ∏è Clusters\n\nClusters group related nodes together, making it easier to visualize and manage complex architectures. Clusters can represent different environments (e.g., development, staging, production) or different parts of a system (e.g., frontend, backend).\n\n**Example:**\n\n```python\nfrom diagrams import Cluster, Diagram\nfrom diagrams.aws.compute import EC2\nfrom diagrams.aws.database import RDS\n\nwith Diagram(\"Clustered Architecture\"):\n    with Cluster(\"Web Tier\"):\n        web_server = EC2(\"Web Server\")\n    with Cluster(\"Database Tier\"):\n        db_server = RDS(\"Database\")\n```\n\nHere, the Web Tier and Database Tier clusters group the web server and database server, respectively.\n\nRun `python diagram.py` and it will generate the below diagram:\n\n![example 2](./example2.png)\n\n## üîó Edges\n\nEdges represent the connections or relationships between nodes. They show how data flows between different components in your architecture. In the Diagrams tool, edges are automatically created when you connect nodes.\n\n**Example:**\n\n```python\nfrom diagrams import Cluster, Diagram\nfrom diagrams.aws.compute import EC2\nfrom diagrams.aws.database import RDS\n\nwith Diagram(\"Architecture with Edges\"):\n    with Cluster(\"Web Tier\"):\n        web_server = EC2(\"Web Server\")\n    with Cluster(\"Database Tier\"):\n        db_server = RDS(\"Database\")\n    \n    web_server >> db_server\n```\n\nIn this example, the `>>` operator creates an edge between the web server and the database server, indicating a data flow from the web server to the database.\n\nRun `python diagram.py` and it will generate the below diagram:\n\n![example 3](./example3.png)\n\n## üìà Data Flow\n\nData Flow illustrates how data moves through the system, from one component to another. This is crucial for understanding the interactions and dependencies within your architecture.\n\n**Example:**\n\n```python\nfrom diagrams import Cluster, Diagram\nfrom diagrams.aws.compute import EC2\nfrom diagrams.aws.database import RDS\nfrom diagrams.aws.network import ELB\n\nwith Diagram(\"Architecture with Edges\", show=False):\n    with Cluster(\"Web Tier\"):\n        web_server = EC2(\"Web Server\")\n    with Cluster(\"Database Tier\"):\n        db_server = RDS(\"Database\")\n    with Cluster(\"ELB Tier\"):\n        load_balancer = ELB(\"Load Balancer\")\n    \n    load_balancer >> web_server\n    web_server >> db_server\n```\n\nIn this example, data flows from the load balancer to the web server and then to the database server, showing the path data takes through the system.\n\nRun `python diagram.py` and it will generate the below diagram:\n\n![example 4](./example4.png)\n\n## üåÄ Kubernetes Architecture\n\nCreating a sophisticated Kubernetes architecture involves several components that work together to ensure scalability, reliability, and efficient management of containerized applications.\n\nBelow is an example of a detailed Kubernetes architecture using the Diagrams tool.\n\n### Example:\n\n```python\nfrom diagrams import Diagram, Cluster, Edge\nfrom diagrams.aws.compute import EKS\nfrom diagrams.aws.network import ELB\nfrom diagrams.aws.database import RDS\nfrom diagrams.aws.storage import S3\nfrom diagrams.aws.devtools import Codepipeline, Codebuild\nfrom diagrams.aws.management import Cloudwatch\nfrom diagrams.aws.security import IAMRole\nfrom diagrams.aws.general import User\n\nwith Diagram(\"Refined AWS EKS Architecture\", show=False):\n    users = User(\"Users\")\n\n    with Cluster(\"AWS Cloud\"):\n        eks_cluster = EKS(\"EKS Cluster\")\n        \n        with Cluster(\"VPC\"):\n            elb = ELB(\"Load Balancer\")\n            eks_service = EKS(\"Service\")\n            \n            with Cluster(\"Kubernetes Components\"):\n                app_deploy = EKS(\"App Deployment\")\n                app_pod = EKS(\"App Pod\")\n                db_statefulset = RDS(\"DB StatefulSet\")\n                db_pod = EKS(\"DB Pod\")\n                app_deploy - app_pod\n                db_statefulset - db_pod\n\n            with Cluster(\"Monitoring\"):\n                cloudwatch = Cloudwatch(\"CloudWatch\")\n                cloudwatch - eks_cluster\n\n            with Cluster(\"CI/CD\"):\n                codepipeline = Codepipeline(\"CodePipeline\")\n                codebuild = Codebuild(\"CodeBuild\")\n                codepipeline - codebuild\n                codebuild - eks_cluster\n\n    s3 = S3(\"Persistent Storage\")\n\n    users >> elb >> eks_service\n    eks_service >> app_deploy\n    eks_service >> db_statefulset\n    cloudwatch >> Edge(color=\"firebrick\", style=\"dashed\") >> app_deploy\n    cloudwatch >> Edge(color=\"firebrick\", style=\"dashed\") >> db_statefulset\n    codepipeline >> Edge(color=\"blue\", style=\"dotted\") >> app_deploy\n    codepipeline >> Edge(color=\"blue\", style=\"dotted\") >> db_statefulset\n    db_pod >> Edge(color=\"green\", style=\"solid\") >> s3\n```\n\nRun `python diagram.py` and it will generate the below diagram:\n\n![k8s](./k8s.png)\n\n## üé® Bonus: More Tools for Creating Diagrams\n\nThere are other tools available for creating diagrams, each with its own unique features and capabilities. Here are some of the most popular ones:\n\n1. **Structurizr**  \n    [Structurizr](https://www.structurizr.com/) is a collection of tooling to create software architecture diagrams based on the C4 model. It allows you to define your architecture models as code and visualize them in a clear and structured way.\n\n2. **PlantUML**  \n    [PlantUML](https://plantuml.com/) is another popular tool for creating UML diagrams from plain text descriptions. It supports various diagram types, including sequence diagrams, use case diagrams, and class diagrams.\n\n3. **Mermaid**  \n    [Mermaid](https://mermaid.js.org/) is a JavaScript-based diagramming and charting tool that renders Markdown-inspired text definitions to create diagrams and flowcharts. It's great for embedding diagrams in Markdown files.\n\n4. **ASCII Editor**  \n    [ASCII editors](https://asciiflow.com/#/) allow you to create simple diagrams using plain text. These are useful for quick sketches and can be easily included in code comments or documentation.\n\n5. **Markmap**  \n    [Markmap](https://markmap.js.org/) is a tool that converts Markdown files into interactive mind maps. It's useful for visualizing the structure of your Markdown documents.\n\n6. **D2 Diagrams**  \n    D2 is a diagram scripting language that turns text into diagrams. It stands for Declarative Diagramming. Declarative, as in, you describe what you want diagrammed, and it generates the image.\n\n7. **SequenceDiagram**  \n    [SequenceDiagram.org](https://sequencediagram.org/) is an online tool for creating sequence diagrams. It provides a simple interface for defining and visualizing sequence diagrams.\n\n8. **Visio**  \n    [Microsoft Visio](https://www.microsoft.com/en-ca/microsoft-365/visio/flowchart-software) is a well-known diagramming tool that offers a wide range of templates and shapes for creating professional diagrams. It's widely used in business and engineering environments.\n\n9. **LucidChart**  \n    [LucidChart](https://lucid.co/solutions/engineering) is a web-based diagramming tool that allows for real-time collaboration. It supports a variety of diagram types, including flowcharts, UML diagrams, and network diagrams.\n\n10. **Draw.io**  \n     [Draw.io](https://www.diagrams.net/) (now known as diagrams.net) is a free online diagramming tool that integrates with various cloud storage services. It's versatile and easy to use, making it a popular choice for many users.\n\n11. **Cloudcraft**  \n     [Cloudcraft](https://www.cloudcraft.co/) is a specialized tool for creating AWS architecture diagrams. It provides a drag-and-drop interface and integrates with AWS to visualize your cloud infrastructure.\n\n12. **Archium**  \n     Archium is a tool for creating architecture diagrams and documentation. It focuses on providing a clear and structured way to document your software architecture.\n\n13. **Excalidraw**  \n     [Excalidraw](https://excalidraw.com/) is an open-source virtual whiteboard tool that lets you create hand-drawn-like diagrams. It's great for brainstorming and sketching ideas quickly.\n\n14. **CloudSkew**  \n     [CloudSkew](https://www.cloudskew.com/) is an online diagramming tool for creating cloud architecture diagrams. It supports various cloud providers and offers a simple interface for designing your cloud infrastructure.\n\nThese tools offer a range of features to suit different needs, from simple text-based diagrams to complex, interactive visualizations. You can check a curated list of tools here: [Software Architecture Tools](https://softwarearchitecture.tools/).\n\nFor more information, visit the [Diagrams tool documentation](https://diagrams.mingrammer.com/docs/getting-started/installation) and the [GitHub repository for Diagrams tool](https://github.com/mingrammer/diagrams).\n\n## üîö Closing Thoughts\n\nUsing Diagrams as Code simplifies software architecture by allowing developers to visualize and document their systems through code. This approach ensures that diagrams are always up-to-date with the codebase, enhances collaboration, and improves the clarity of complex architectures. Tools like PlantUML, Mermaid, and Structurizr facilitate this process, making it easier to maintain and communicate architectural designs.\n\n**_Until next time, „Å§„Å•„Åè üéâ üáµüá∏_**\n\n<br><br>\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  \n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n  \n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":1366},"frontmatter":{"id":"8d2eb09893a27b31f1d34bee","path":"/blog/python-diagrams-as-code-architecture/","humanDate":"Oct 20, 2024","fullDate":"2024-10-20","title":"Simplify Software architecture with Diagrams as Code DaC üìà","keywords":["Diagrams as Code DaC","Python","software architecture","architecture diagrams"],"excerpt":"Simplify your software architecture with Diagrams as Code (DaC) using Python. This guide covers tools and techniques to visualize your architecture effectively.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACyElEQVR42jWSS28bdRTFvWCF6AJUVJrWUOCDsKjEokil9HMgIRaFIjYIuqsERJVgkUW6oglSSZomzgPH47hJkzpJTV6O7fgR2/FjZuza87In48ev11Mx0pmZO3Pvuecc/QOpgwT7h4dkc1kS/yVIpVOCNNs7OxweHVE4LfioVCvk8nn2DvZJHidJZ9JS5yiflTktnvr9pcIJgXRyj2cb60xPTzM1NUVocRElGpVniOebz3ky94ToWpStF1us/LvC4tKij9VIRLDKi3iciBJhdm6OEVfg5Hgfr9/H7jg4jkNWtqqaSqvdRm/ovGq3MEyDulqnVq/RaDaoVCpkTjKUyiV0qV3PFY4eDfXsDaHT7cqQSVsGQ6EQkw8nefzPY2ZmZ3wVSlTxVYxUPxIX6+JoYmKCp/NPfWLbsWlbFnpdCDMis+OeYwmhJR8dUappmp/ZSFWxVPQzqlSrfj1aatompvS63jmD4UDQZwg09RqBbOoA23VpGgYtaWoJsWGPNppiu4Ur/0YwDbHeatLtOni9HoNBj5eJhJ/3WixG7Nk65dMsgXL6gN2Wzf2qzWRsmz83XvJQc9hVm/Tdjr8ZuQ8HXf/NMzSMbIJayeWLm19x6f0rBK9+wgdjVwkvLxConhyx2TT5fi/P3aUY384r3Dsus1bVGfxPKLb6Qw+3pmNnkpiFXSzD48at24xduUYw+DGXhHB1OfRGYbxp8fXMCndDCncWInyzsoGivqJnmHRrDXpWjXMtR73QpJLK0SluS25w48tbXL4c5NpHnzIW/BAlvDQi3Ger3eWXfIMfo3EfP+U0ltUWPTk6VlnFszTU/A7VM52GLPD0gmQIn13/nLfevsCF9y7yzrsXCS/MiuXcMVsy/J0S54f5VX4Ob3BvO0n0TKXf7dAfTcpVahYxnbbYH4q6IX05u39N/83938b5dXyc3x/8weFmmNfonepVzS6WWQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/84fa89b7c3c84547d7554a4e8c8d9bc7/f0f17/dac-cover.png","srcSet":"/static/84fa89b7c3c84547d7554a4e8c8d9bc7/0f3f8/dac-cover.png 750w,\n/static/84fa89b7c3c84547d7554a4e8c8d9bc7/a02dd/dac-cover.png 1080w,\n/static/84fa89b7c3c84547d7554a4e8c8d9bc7/c89ae/dac-cover.png 1366w,\n/static/84fa89b7c3c84547d7554a4e8c8d9bc7/f0f17/dac-cover.png 1600w","sizes":"100vw"},"sources":[{"srcSet":"/static/84fa89b7c3c84547d7554a4e8c8d9bc7/602ed/dac-cover.webp 750w,\n/static/84fa89b7c3c84547d7554a4e8c8d9bc7/fd266/dac-cover.webp 1080w,\n/static/84fa89b7c3c84547d7554a4e8c8d9bc7/fd788/dac-cover.webp 1366w,\n/static/84fa89b7c3c84547d7554a4e8c8d9bc7/2c1d7/dac-cover.webp 1600w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.568125}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/eks-detect-manual-actions/","title":"Detecting Manual Actions in EKS Clusters with Terraform and SNS üïµ","date":"2024-10-20 21:36:00"},"excerpt":"Enhancing Security and Compliance in EKS through Proactive Audit Monitoring. üìå Introduction AWS Kubernetes audit logs for EKS, also known‚Ä¶","html":"<blockquote>\n<p><strong>Enhancing Security and Compliance in EKS through Proactive Audit Monitoring.</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìå Introduction</h2>\n<p>AWS Kubernetes audit logs for EKS, also known as Amazon EKS control plane logs, are retrieved through AWS CloudWatch‚Ää‚Äî‚Ääno agent is needed. It's important to keep an eye on EKS audit logs and to monitor manual changes that could impact the stability and security of the environment.</p>\n<p>In this blog post, we'll explore how to use <a href=\"https://github.com/seifrajhi/eks-auditing-bot-module\" target=\"_blank\" rel=\"noopener noreferrer\">this Terraform module</a> based on Amazon SNS to set up audit alerts and monitoring for manual actions in crucial AWS Elastic Kubernetes Service (EKS) resources, such as ClusterRoleBinding or Secret creation or deletion. By using EKS Audit Logs and SNS, we can detect and notify operators of any manual changes made to the cluster's crucial resources, helping to ensure the integrity and security of the environment.</p>\n<blockquote>\n<p><strong>Enhancing Security and Compliance in EKS Clusters through Proactive Audit Monitoring.</strong></p>\n</blockquote>\n<h3 id=\"-importance-of-eks-audit-logs-and-sns-alerts\" style=\"position:relative;\"><a href=\"#-importance-of-eks-audit-logs-and-sns-alerts\" aria-label=\" importance of eks audit logs and sns alerts permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üö® Importance of EKS Audit Logs and SNS Alerts</h3>\n<p>EKS Audit Logs are essential for monitoring and securing your Kubernetes environment, as they provide a comprehensive overview of all actions taking place within the cluster. By making use of uing <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/control-plane-logs.html\" target=\"_blank\" rel=\"noopener noreferrer\">EKS Audit Logs</a> and <a href=\"https://aws.amazon.com/sns/features/\" target=\"_blank\" rel=\"noopener noreferrer\">SNS</a> alerts, you can benefit from the following advantages:</p>\n<ul>\n<li><strong>Enhanced Security</strong>: Audit logs help you detect potentially suspicious activities in your EKS clusters, such as unauthorized access, malicious actions, or configuration changes. By monitoring these logs, you can quickly identify and respond to security incidents, ensuring the integrity of your environment.</li>\n<li><strong>Compliance</strong>: Audit logs are crucial for maintaining compliance with regulatory requirements and industry standards, such as <a href=\"https://www.pcisecuritystandards.org/\" target=\"_blank\" rel=\"noopener noreferrer\">PCI-DSS</a> or <a href=\"https://www.hhs.gov/hipaa/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">HIPAA</a>. By regularly reviewing and analyzing these logs, you can ensure that your EKS cluster adheres to the necessary regulations and guidelines.</li>\n<li><strong>Troubleshooting</strong>: Audit logs can provide valuable insights into the cause of issues or errors in your EKS cluster, allowing you to troubleshoot and resolve problems more efficiently.</li>\n<li><strong>Monitoring</strong>: By leveraging EKS Audit Logs and SNS alerts, you can monitor your EKS cluster's activities and make informed decisions based on the data provided by the audit logs. This enables you to maintain better control over your Kubernetes environment and optimize its performance.</li>\n</ul>\n<p>Enhancing Security and Compliance in EKS Clusters through Proactive Audit Monitoring.</p>\n<h2 id=\"-eks-audit-logs-audit-and-monitoring-module\" style=\"position:relative;\"><a href=\"#-eks-audit-logs-audit-and-monitoring-module\" aria-label=\" eks audit logs audit and monitoring module permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üëÆ EKS Audit Logs Audit and Monitoring Module</h2>\n<p><a href=\"https://github.com/seifrajhi/eks-auditing-bot-module\" target=\"_blank\" rel=\"noopener noreferrer\">The EKS Audit Logs audit and monitoring module</a> enables you to ingest EKS audit logs from the Kubernetes API, providing more visibility, automated threat detection, additional compliance checks, and robust reporting.</p>\n<p>By leveraging EKS Audit Logs and SNS, you can detect and notify operators of any manual changes made to the cluster's crucial resources, such as ClusterRoleBinding or Secret creation or deletion.</p>\n<p>The <code class=\"language-text\">eks-auditing-bot-module</code> can be used in conjunction with Amazon SNS and AWS Lambda to create a powerful monitoring and alerting system for your EKS cluster. By combining EKS Audit Logs, SNS, and Lambda, you can create a robust monitoring and alerting system that enhances the security, compliance, and overall management of your EKS cluster. This approach allows you to detect and respond to potential issues or threats in a timely and efficient manner, ensuring the stability and security of your Kubernetes environment.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 35.29411764705882%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABTklEQVR42k1Sy46CQBCc7MMBXYb3SxEUgRBC4GDiyauJ3+HdgwfOfINHf8Gv3CqzbJykMhTdXd1TM8I0zVzTtLWu66ssyyzwjZRyY9v22vf9H+wp0BqGUYVhuCiKQnqeFzMvTdM4z3OTGowHQZALx3FU0zROHMcev6Mo8ruuC1gshJhxr+vaRbFNDnyxcdu2IRqZbMDYxAXX5XIxjsejTUEkqNPpFACL5XLpIqwPw2A8n89P8bfGcfy43+9y4owB+sTF7XbTmTRxNqAwBTnh+XxO+r63eAr+48TMeRd8PB7zf0F2exdEwuydc0KIStd1DWK/38/BfYQkj3w4HNT1elWvZBhqsyN9ATT6QE9pNvYZBehpkiQOhL4JTDqvqoqerzgxPNyWZbl6eQjBrWVZGYIJRXEpGW+NnIW8UaVUQfDWp3+swYpYwxfCl4H47hdb+UdaSGdnPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Steps\" title=\"\" src=\"/static/efdef2fcdbafe4cb33cd9f7b4a613f4c/c5bb3/steps.png\" srcset=\"/static/efdef2fcdbafe4cb33cd9f7b4a613f4c/04472/steps.png 170w,\n/static/efdef2fcdbafe4cb33cd9f7b4a613f4c/9f933/steps.png 340w,\n/static/efdef2fcdbafe4cb33cd9f7b4a613f4c/c5bb3/steps.png 680w,\n/static/efdef2fcdbafe4cb33cd9f7b4a613f4c/5a190/steps.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"Ô∏è-terraform-configuration\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-terraform-configuration\" aria-label=\"Ô∏è terraform configuration permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è Terraform Configuration</h3>\n<p>To use the <code class=\"language-text\">eks-auditing-bot-module</code>, you can use the following Terraform configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"hcl\"><pre class=\"language-hcl\"><code class=\"language-hcl\"><span class=\"token keyword\">terraform</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">source</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"git::https://github.com/seifrajhi/eks-auditing-bot-module.git\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token property\">inputs</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">eks_bot_name</span>              <span class=\"token punctuation\">=</span> <span class=\"token string\">\"eks_audit_logs_bot\"</span>\n    <span class=\"token property\">timeout</span>                   <span class=\"token punctuation\">=</span> <span class=\"token number\">60</span>\n    <span class=\"token property\">memory_limit</span>              <span class=\"token punctuation\">=</span> <span class=\"token number\">256</span>\n    <span class=\"token property\">aws_cloudwatch_log_group</span>  <span class=\"token punctuation\">=</span> <span class=\"token string\">\"/aws/eks/cluster-name/cluster\"</span>\n    <span class=\"token property\">account_id</span>                <span class=\"token punctuation\">=</span> <span class=\"token string\">\"XXXXXXXXXX\"</span>\n    <span class=\"token property\">account_name</span>              <span class=\"token punctuation\">=</span> <span class=\"token string\">\"account-name\"</span>\n    <span class=\"token property\">sns_topic_arn</span>             <span class=\"token punctuation\">=</span> <span class=\"token string\">\"arn:aws:sns:eu-west-1:XXXXXXXXXX:alerts\"</span>\n    <span class=\"token property\">filter_pattern</span>            <span class=\"token punctuation\">=</span> <span class=\"token string\">\"{ ($.verb != \\\"get\\\" &amp;&amp; $.verb != \\\"list\\\" &amp;&amp; $.verb != \\\"watch\\\") &amp;&amp; ($.user.username = \\\"sre/*\\\" || $.user.username = \\\"ssouser/*\\\" || $.user.username = \\\"kubernetes-admin\\\" ) &amp;&amp; ((($.objectRef.namespace = \\\"kube-system\\\" || $.objectRef.namespace = \\\"consul\\\" || $.objectRef.namespace = \\\"vault\\\" || $.objectRef.namespace = \\\"consul\\\" || $.objectRef.namespace = \\\"istio-ingress\\\" || $.objectRef.namespace = \\\"ingress-system\\\" || $.objectRef.namespace = \\\"istio-system\\\" ) &amp;&amp; ($.objectRef.resource = \\\"roles\\\" || $.objectRef.resource = \\\"secrets\\\" || $.objectRef.resource = \\\"serviceaccounts\\\" || $.objectRef.resource = \\\"role\\\" || $.objectRef.resource = \\\"rolebindings\\\")) || ($.objectRef.resource = \\\"clusterroles\\\" || $.objectRef.resource = \\\"clusterrolebindings\\\") ) }\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Where:</strong></p>\n<ul>\n<li><code class=\"language-text\">eks_bot_name</code>: The name of the EKS auditing bot.</li>\n<li><code class=\"language-text\">timeout</code>: Execution timeout for the auditing bot (in seconds).</li>\n<li><code class=\"language-text\">memory_limit</code>: Memory limit for the auditing bot (in MB).</li>\n<li><code class=\"language-text\">aws_cloudwatch_log_group</code>: CloudWatch Log Group for EKS Audit Logs.</li>\n<li><code class=\"language-text\">account_id</code>: AWS account ID.</li>\n<li><code class=\"language-text\">account_name</code>: AWS account name.</li>\n<li><code class=\"language-text\">sns_topic_arn</code>: ARN of the SNS topic for sending alerts.</li>\n<li><code class=\"language-text\">filter_pattern</code>: CloudWatch Logs filter pattern for detecting manual actions.</li>\n</ul>\n<p>After messages are delivered to this topic, you can subscribe to this topic to receive the published alerts. SNS topics can be subscribed to by a variety of services and clients, including:</p>\n<ul>\n<li>üìß <strong>Email messages</strong> (through Amazon SES)</li>\n<li>üì± <strong>SMS text messages</strong></li>\n<li>üì≤ <strong>Mobile push notifications</strong></li>\n<li>üì• <strong>SQS queues</strong></li>\n<li>üõ†Ô∏è <strong>AWS Lambda functions</strong></li>\n<li>üåê <strong>HTTP/HTTPS endpoints</strong> (e.g., <a href=\"https://www.atlassian.com/software/opsgenie\" target=\"_blank\" rel=\"noopener noreferrer\">Opsgenie</a>, <a href=\"https://www.pagerduty.com/\" target=\"_blank\" rel=\"noopener noreferrer\">PagerDuty</a>)</li>\n</ul>\n<p>If you find the <code class=\"language-text\">eks-auditing-bot-module</code> helpful, don't forget to star ‚≠êÔ∏è the <a href=\"https://github.com/seifrajhi/eks-auditing-bot-module\" target=\"_blank\" rel=\"noopener noreferrer\">repository</a> to show your support for the project and the open-source community.</p>\n<p>If you have any further enhancements or specific comments, feel free to share them, and I can incorporate them into the content.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 42.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeklEQVR42o2Q227aQBRFea+A0IjGBOLW2J6xDcYXPBhfsEFBlfIfeewX9Av616vjqXqRaNQ+LJ2jo5k1s8/oy9dvlGVJf77SXD6jTle22QGxzXHDBE9XwybTpD9qlOLqfh0lrMPfOEHM6OX1lcmH94zfjbn/KLDiI3Zxxi6vPCYVc5EwDzIeNgVWmLHQvSUTlluFU3Q4eas54WS1pmJk5yGhKhB+iO/5BDIkbZ/Jzy/ERaXnQs8lQkY8rWyshwUL65HV0sZ1xQ0jv96juhMXHTeIYub6gmWwWK6e2OxyojgzSB3Jl1uDJze4fnTDyD1m5G1DXfd4ImB6N2MynTGe3DGd3fNpLVh7gcHVKf6FEZZ9R31sKQeqljjJSfODRiHD+L9lRuhpoWw6AtUj942JuEv3moIkU3oNu1/CoTquNP3PeiusMorLmWNzwdM7Gg7+ySDxRGSiq7Kh65+p6o5CVW9ELhISdSDQMtd/O9ogH9Yw/Hp4YFjF34TfAbnLC8uNO66BAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Alert\" title=\"\" src=\"/static/ae7f599223d17a5eb090ae1adf067a17/c5bb3/alert.png\" srcset=\"/static/ae7f599223d17a5eb090ae1adf067a17/04472/alert.png 170w,\n/static/ae7f599223d17a5eb090ae1adf067a17/9f933/alert.png 340w,\n/static/ae7f599223d17a5eb090ae1adf067a17/c5bb3/alert.png 680w,\n/static/ae7f599223d17a5eb090ae1adf067a17/5a190/alert.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-conclusion\" style=\"position:relative;\"><a href=\"#-conclusion\" aria-label=\" conclusion permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìò Conclusion</h2>\n<p>By using the <code class=\"language-text\">eks-auditing-bot-module</code>, you can enhance the security and compliance of your EKS clusters through proactive audit monitoring and alerting. This approach allows you to detect and respond to manual changes in crucial resources, ensuring the stability and security of your Kubernetes environment.</p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <em><strong>Until next time üéâ</strong></em></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>"},"nextThought":{"frontmatter":{"path":"/blog/eks-backup-velero/","title":"EKS Backup Simplified: A Deep Dive into Velero's Magic","date":"2024-10-20 21:06:00"},"excerpt":"Easily Backup EKS with Velero üõ≥ ‚ò∏Ô∏è Introduction Welcome to a journey to explore Velero and how it makes Kubernetes backups easy. In the‚Ä¶","html":"<blockquote>\n<p><strong>Easily Backup EKS with Velero üõ≥</strong></p>\n</blockquote>\n<h2 id=\"Ô∏è-introduction\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-introduction\" aria-label=\"Ô∏è introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚ò∏Ô∏è Introduction</h2>\n<p>Welcome to a journey to explore <strong>Velero</strong> and how it makes Kubernetes backups easy. In the world of Kubernetes, keeping your cluster safe is very important. Velero helps with its strong features and simple interface.</p>\n<p>We‚Äôll look at how Velero changes Kubernetes backups. See how it makes managing backups, snapshots, and custom resources easy.</p>\n<h3 id=\"-goals--objectives\" style=\"position:relative;\"><a href=\"#-goals--objectives\" aria-label=\" goals  objectives permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üéØ Goals &#x26; Objectives</h3>\n<p>Join us as we explore Velero‚Äôs magic, offering practical tips and best practices to easily protect your AWS Kubernetes cluster. Let‚Äôs dive into the world of simple Kubernetes backups with Velero!</p>\n<h3 id=\"-prerequisites\" style=\"position:relative;\"><a href=\"#-prerequisites\" aria-label=\" prerequisites permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üöÄ Prerequisites</h3>\n<p>Before we start, I assume you have the following:</p>\n<ul>\n<li><a href=\"https://aws.amazon.com/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS</a> and <a href=\"https://github.com/\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a> accounts.</li>\n<li><a href=\"https://www.terraform.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform</a> installed and configured.</li>\n<li>The <a href=\"https://aws.amazon.com/cli/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS CLI</a> installed and configured.</li>\n<li><a href=\"https://velero.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Velero</a> installed.</li>\n<li><a href=\"https://terragrunt.gruntwork.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Terragrunt</a></li>\n</ul>\n<h2 id=\"-the-workflow-landscape\" style=\"position:relative;\"><a href=\"#-the-workflow-landscape\" aria-label=\" the workflow landscape permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚ùÑ The Workflow Landscape</h2>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 72.94117647058825%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACx0lEQVR42m1TS2/TQBBOmluFQPBL4MIP4IJQU1SBQCCk3mggFb31HMGdG0LqmVu4cUBA2l6QOPGoUgmaNn0kju36GTv2etf2boZZx67cqiN92Z3Zb74dT3YqFTQzih95Udw59YK2S1hH96LHldxOTL9ujENb88N7RUybkAduFH/V3eDjOEq+mUH8VMYBYC4jOCRZ8Vl6PDScX7gejjzSzHPnepq97AYRDJ3gSSGojsPnyOsrhvNb8i1CV88E8aeGqOKmWm9tzOcH1SyW738CzJf9Yl/f+CT51TxWa7fbtcqZtVpzhWDZCoFCpGwz/oW47od1N4W6xWBx37AfuixdMEO2YBG2pHvkdiGacdFXJ2QJ+Qs+4s+h+gx5i5KPeff3FOtOhaQcBroBI9MGKqbApxk4igDjYqt8eYS+jJ9oBh8ZNjDkpxKYI21PNaEyibnoj3Qx0C0h92EKIkohkYRJLDbLgh7jm/KmY81IEMgXIkiECBECQOwqpqgw3IVxClEqIEK2BN6cVejH/FyFKJBVSBLOgyQFmvMpn1W4O8QK8d2Bao1Bd3wYR7EUgYPBiBMkehcE5QUxJqr2mGuOBx5NAKuG/YECHomgq6CgHVBQTEeSwCUxiqaw87fHnZCi4Pke+oxvMRRUDJurlovcBFzEzr8enGJ+V7EAGw2cTWeI+JRH6ZRjUjzrIe9cqLCT/Vl4LvkknfGlBn407w4MXrEcF/onQxioGhwPRxnQ5wkXgO3dzh9uTT78mPNtKWhYNt876MPRUIEjRQXH87Me7mtYIY7NC4cmDWNCmn3dWXcIbVgT2jADtmaE9G75HUrfJGxNnjuIHvINQl+iRgP72dxVjOVLJ6UY8nEMt0LG192ArsoV/Zvl80snJZ/lDK137SuvPny++vbLjxtZRTR+Iz9laHtUrjqhr2X8/ffu9ZWN9rUm8sv5sjX/AepoHdq2ViJUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"workflow\" title=\"\" src=\"/static/67c895ab0aa79187931427924267ce45/c5bb3/workflow.png\" srcset=\"/static/67c895ab0aa79187931427924267ce45/04472/workflow.png 170w,\n/static/67c895ab0aa79187931427924267ce45/9f933/workflow.png 340w,\n/static/67c895ab0aa79187931427924267ce45/c5bb3/workflow.png 680w,\n/static/67c895ab0aa79187931427924267ce45/5a190/workflow.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Velero is ideal for disaster recovery use cases, as well as for snapshotting your application state prior to performing system operations on your cluster (e.g., upgrades).</p>\n<h3 id=\"Ô∏è-velero-backup-workflow\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-velero-backup-workflow\" aria-label=\"Ô∏è velero backup workflow permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚≠êÔ∏è Velero Backup Workflow</h3>\n<p>When you run <code class=\"language-text\">velero backup create test-backup</code>:</p>\n<ol>\n<li>The Velero client makes a call to the Kubernetes API server to create a Backup object.</li>\n<li>The <code class=\"language-text\">BackupController</code> notices the new Backup object and performs validation.</li>\n<li>The <code class=\"language-text\">BackupController</code> begins the backup process by collecting the data to back up by querying the API server for resources.</li>\n<li>The <code class=\"language-text\">BackupController</code> makes a call to the object storage service (e.g., <a href=\"https://aws.amazon.com/s3/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS S3</a>) to upload the backup file.</li>\n</ol>\n<p>By default, <code class=\"language-text\">velero backup create</code> makes disk snapshots of any persistent volumes. You can adjust the snapshots by specifying additional flags. Run <code class=\"language-text\">velero backup create --help</code> to see available flags. Snapshots can be disabled with the option <code class=\"language-text\">--snapshot-volumes=false</code>.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACn0lEQVR42mNgmHnjIwTfRMI3UPGMm5/AGF0dXBxJD5BzBci4yjDj1jXGWTevMs68cY1hBhCDxYEYKAakr4LVQNhXoBjKvgHRD+MDic1gPP/GWobZNzcwzAXSc4A0THzmrQ1ACzYCNW0C8qHiN7Ywzr6xkQnIZppxayvQIRuBlm0CywEZExhn3prIW3d3h175k+eyZQ+vsvXdngc0vB+ooJ9h1q0ZTLNu32WeffsZUN1Chlm3+4CWdklNfLTWpu3jJ+v2T59NO98/Zpt+cwrQrD4GhoXXUsVq782L7vz8f97Ob3+bl/38b1r+7CHD9Ov5DNOvpYoserBAZe2L/2qb3v2XXPpwG8Oky8ks02+W2HZ8fmjf+umtacvLM84tX//pdb/byjDzUjoDw9KrLooFz7f1bvj9/+zd7z/3Xvj217fx3Q/2xvsZwGBw5l3wME595YPrmqsfPpFc/LCAYdZVW7X+N3UuHT/+GDc/Wa/cerPJquHpVYf2ry+ZZ94OYGBYfEVLpfBRb/r0X/9XHP71Z+KWf//tql7fF2q+7KY4aY+tYfNaD+GJRxzVOzaH6DavcVHr2eYs0HfG1rHzx2X7lg9PzWseHLCte/7dpPHJLIbZZzUZGKbelmWYfVdcN/fJYvuy5y8sip7dkcp96Cu6aotEcFl3UFRFW3hAdZ9bVFlrUEx5S1xoWXeYenu/gknHhwjHli+v7BpeP7eueXRaqvO6OsPk61IMDBNv8THMuc7LsH8/B0PuCT6G7p3cDKuOcTJ03OVX6jjDL9d+WNCgdZWoRttuYUEon6H/vADDzDNcQMzPO/mJMMOU/TwMU67wgPQwMNTvZwFh47QzrAyr/jPbg/ggNlScIXQVMxivAmKYGEwNSCw0lJnBHkkPtQEAWoOZGvusmrAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"logo\" title=\"\" src=\"/static/48361060518a22260fda230c6572a3d5/c5bb3/logo.png\" srcset=\"/static/48361060518a22260fda230c6572a3d5/04472/logo.png 170w,\n/static/48361060518a22260fda230c6572a3d5/9f933/logo.png 340w,\n/static/48361060518a22260fda230c6572a3d5/c5bb3/logo.png 680w,\n/static/48361060518a22260fda230c6572a3d5/5a190/logo.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"streamline-infrastructure-automation-with-terraform-and-terragrunt\" style=\"position:relative;\"><a href=\"#streamline-infrastructure-automation-with-terraform-and-terragrunt\" aria-label=\"streamline infrastructure automation with terraform and terragrunt permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Streamline Infrastructure Automation with Terraform and Terragrunt</h2>\n<p>Automating infrastructure provisioning with <a href=\"https://www.terraform.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform</a> is a seamless process. By leveraging the comprehensive <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest\" target=\"_blank\" rel=\"noopener noreferrer\">AWS provider</a> available in the Terraform registry, setting up EKS, OIDC, and Velero resources becomes effortless.</p>\n<p>However, before diving into infrastructure automation, it's crucial to ensure that the Terraform provider is properly configured to interact with the target AWS account. Once configured, Terraform empowers you to effortlessly orchestrate the deployment of complex infrastructure setups, enabling you to focus on higher-level tasks and freeing up valuable time and resources.</p>\n<h2 id=\"-provision-of-the-eks-oidc-and-velero-resources-on-aws\" style=\"position:relative;\"><a href=\"#-provision-of-the-eks-oidc-and-velero-resources-on-aws\" aria-label=\" provision of the eks oidc and velero resources on aws permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üåê Provision of the EKS, OIDC, and Velero Resources on AWS</h2>\n<p>The Terraform configuration is organized as shown below:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 139.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZklEQVR42q1VW26EQAybBwyTUKDstifo/S9YLZo6Ex7dfi2kHxErIXnt2DHu66P9Hme/kHcLR/u4vnEP/Cgc1om2cdSFB41tofdUqG/MoI4S5FIoNAF0SoW7YAJ1DEBOABzA7tYV5mhjKICUATgCcGgLN94umQHI2GMFbL1NsgJGSMYO5+4ANZmS1ZT8meF0PCIUzsdJGcIUplhdrkzfGh1xftDBrl8CVpeFIdyteVxH4kPyJ/IOK3nVLGUo2UOo8w05nBSM/UXJO0ORKMzImsNWGdY9bZdiAuzCwtv+5qSxMQFmAIpcgNG9U8mmYP+STPesDNP1a3k2BRVWGRrObw22V2YbOzEmeQOgsNouQ6IjRXuxF49bBmBtnOjsbSOntcfGWrA7IPaXpbFHgOZg78M9iyLbwPI5NiJ5tH0G9raRT2j96nHzD+UgmROX/zZNs84ZwD7HZZPbS2PDGHlW6fI8dYa+/ABn9VByZDykSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"code\" title=\"\" src=\"/static/1bcd7b014302897252113fefa3143695/c5bb3/code.png\" srcset=\"/static/1bcd7b014302897252113fefa3143695/04472/code.png 170w,\n/static/1bcd7b014302897252113fefa3143695/9f933/code.png 340w,\n/static/1bcd7b014302897252113fefa3143695/c5bb3/code.png 680w,\n/static/1bcd7b014302897252113fefa3143695/5a190/code.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"initialize-the-infrastructure-on-an-aws-account\" style=\"position:relative;\"><a href=\"#initialize-the-infrastructure-on-an-aws-account\" aria-label=\"initialize the infrastructure on an aws account permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Initialize the Infrastructure on an AWS Account</h3>\n<p>First, update the content of the local Terragrunt variable called <code class=\"language-text\">aws_profile</code> in the file named <a href=\"https://github.com/seifrajhi/aws-eks-irsa/blob/main/terraform/terragrunt-global-config.hcl\" target=\"_blank\" rel=\"noopener noreferrer\">terragrunt-global-config.hcl</a> to point to your AWS profile instead of mine üòâ.</p>\n<p>Once this is done, you can apply the infrastructure with Terragrunt as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">cd</span> terraform\nterragrunt run-all init\nterragrunt run-all apply</code></pre></div>\n<ul>\n<li>The first Terragrunt command will run <code class=\"language-text\">terraform init</code> in every Terraform layer in the <code class=\"language-text\">terraform</code> folder.</li>\n<li>The second Terragrunt command will run <code class=\"language-text\">terraform apply</code> in each layer.</li>\n</ul>\n<p>On the first apply, Terragrunt will ask if you want to create the Terraform states S3 bucket if it does not exist on your AWS account. It will also create a DynamoDB table for state locking.</p>\n<h3 id=\"how-is-the-aws-iam-oidc-provider-created\" style=\"position:relative;\"><a href=\"#how-is-the-aws-iam-oidc-provider-created\" aria-label=\"how is the aws iam oidc provider created permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How is the AWS IAM OIDC Provider Created?</h3>\n<p>By default, the IAM OIDC provider is created by the <a href=\"https://github.com/aws-ia/terraform-aws-eks-blueprints/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS EKS Blueprints for Terraform</a> with the input <code class=\"language-text\">enable_irsa</code> set to true.</p>\n<p>To demonstrate how it works, I set that input to false and created the OIDC provider with the AWS provider resources myself (you can find those resources in the file named <code class=\"language-text\">irsa.tf</code>).</p>\n<h3 id=\"how-are-the-velero-resources-created\" style=\"position:relative;\"><a href=\"#how-are-the-velero-resources-created\" aria-label=\"how are the velero resources created permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How are the Velero Resources Created?</h3>\n<p>The Velero resources are defined in the <code class=\"language-text\">velero.tf</code> file, where configurations for backups, restores, and other Velero functionalities are specified. This Terraform script ensures the creation and configuration of Velero-related resources, enabling efficient data backups and restores for your infrastructure within the defined AWS environment.</p>\n<h3 id=\"how-to-manage-velero-technical-aspect\" style=\"position:relative;\"><a href=\"#how-to-manage-velero-technical-aspect\" aria-label=\"how to manage velero technical aspect permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How to Manage Velero: Technical Aspect</h3>\n<p>After installing the Velero server on the EKS cluster, you can view Velero's server-side components by running:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get all <span class=\"token parameter variable\">-n</span> velero</code></pre></div>\n<p>Where <code class=\"language-text\">velero</code> is the namespace where all Velero components are running.</p>\n<p>Velero also uses a number of CRDs (Custom Resource Definitions) to represent its own resources like backups, backup schedules, etc.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get crd <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> velero</code></pre></div>\n<h3 id=\"deploy-test-application\" style=\"position:relative;\"><a href=\"#deploy-test-application\" aria-label=\"deploy test application permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Deploy Test Application</h3>\n<p>This step involves deploying a sample application to validate the infrastructure setup and ensure successful integration of the components.</p>\n<p>Create a namespace and deploy the application:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVR42pWR23KDMAxE+ZqiiyEBX4CG//8qmK2E3TSd5qUPO1rZHu2x3W2zHENiCCtUBaJ6SUWq3P9D3UeMR18WUIzgnLHHG/ZpQCgZfUwIRFBmG/4S4rrW5E9w1+d89OsKSgleedvAj8/LS6oh9NgxxhFhs5DFzq5VXIr1C265YJojJPjAUk42Op8uw1A11qohtH40bwRt/1ltX1sf3DfCkyyF5xnUEr+Jyej0fgc5tRO7tzWepnrlN2/dSQinvtI8iX7Svf9F1GjefcoXsfm3ffZK3kkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"app-test\" title=\"\" src=\"/static/ae8af3428090588d73ccc3a1fb208b9a/c5bb3/app-test.png\" srcset=\"/static/ae8af3428090588d73ccc3a1fb208b9a/04472/app-test.png 170w,\n/static/ae8af3428090588d73ccc3a1fb208b9a/9f933/app-test.png 340w,\n/static/ae8af3428090588d73ccc3a1fb208b9a/c5bb3/app-test.png 680w,\n/static/ae8af3428090588d73ccc3a1fb208b9a/5a190/app-test.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Then verify the deployed application:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 17.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAXElEQVR42pWMSw6AIAwFOQ72Q0gqKfb+pzJgBVYucTF5s3iZYAI3y/HAgR0ROgCMxcXXdwkisdUSvZTTa1U3M1dVzzkPv5yIfBy3CUzQmMGZeZFSWjtD0//EZvAF8tZbBEugTI0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"get\" title=\"\" src=\"/static/9e58f0b788a32741f2d3a634b878ee18/c5bb3/get.png\" srcset=\"/static/9e58f0b788a32741f2d3a634b878ee18/04472/get.png 170w,\n/static/9e58f0b788a32741f2d3a634b878ee18/9f933/get.png 340w,\n/static/9e58f0b788a32741f2d3a634b878ee18/c5bb3/get.png 680w,\n/static/9e58f0b788a32741f2d3a634b878ee18/5a190/get.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"-backups\" style=\"position:relative;\"><a href=\"#-backups\" aria-label=\" backups permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üíæ Backups</h3>\n<p>Now, let's look into backups in case something happens to the blog. Backups are for Kubernetes resources and persistent volumes. You can back up your entire cluster, or optionally choose a namespace or label selector to back up. They can be run one-off or scheduled. It's a good idea to have scheduled backups so you are certain you have a recent backup to easily fall back to. You can also create backup hooks if you want to execute actions before or after a backup is made. By default, the backup retention is 30 days, but you can change it with the <code class=\"language-text\">-ttl</code> flag.</p>\n<p>To see what all you can do with backups, run:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 17.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARklEQVR42mOwMtT8pWus8U9LU/uvtpbWX21tbYowg7qh0R8NE9P/6hbm/7VMTP5r6+r+B0qQjRm0dHT+gAzRAhlEoWEgAwGK0Fo1ccnynQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bckp\" title=\"\" src=\"/static/4a6c2a9b89deb93396ccab30d2dffdb8/c5bb3/bckp.png\" srcset=\"/static/4a6c2a9b89deb93396ccab30d2dffdb8/04472/bckp.png 170w,\n/static/4a6c2a9b89deb93396ccab30d2dffdb8/9f933/bckp.png 340w,\n/static/4a6c2a9b89deb93396ccab30d2dffdb8/c5bb3/bckp.png 680w,\n/static/4a6c2a9b89deb93396ccab30d2dffdb8/5a190/bckp.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Let's start with the most basic option: creating a one-off backup. It's a good idea to give it a meaningful name so you remember what it was for, unlike what is done here.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 17.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAbklEQVR42p3PsQ6DMAwEUKdJcOzQmNKZ//9HBBwGMTDQpcPTnWTJlmmyNDcLmxCtGt3ryj/UFFbid17qV1DHAh0YpWVoDPChI+8uXeItfyDxhTJ0kJGh1qFYRusZHy3oJUOOA8bn/OgnifBPHhfu9V5AJQFMezAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"example\" title=\"\" src=\"/static/cf761c976566410cf11eee26251870af/c5bb3/example.png\" srcset=\"/static/cf761c976566410cf11eee26251870af/04472/example.png 170w,\n/static/cf761c976566410cf11eee26251870af/9f933/example.png 340w,\n/static/cf761c976566410cf11eee26251870af/c5bb3/example.png 680w,\n/static/cf761c976566410cf11eee26251870af/5a190/example.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>If we want to do a backup with all namespaces included, we can remove the flag <code class=\"language-text\">--include-namespaces</code>. And to include all namespaces except specific ones, we could use <code class=\"language-text\">--exclude-namespaces</code> with the namespace(s) we don't want.</p>\n<p>Let's create a backup from a schedule.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDUlEQVR42pWRQW+CQBCFd6GpTYwUrZr2aIEKFhWppqcGFVoFRTD+/38CeZ3dJdFLDz18md2dycybt6zvR9X9dA022oK9bsCs7b/hDfLe8bPqeXVBN8jRIzRLNeZWDG43RWKQRJzjazPxNhKsFaphWpnBEb3FCYNlic70AHOeY/BRYrg848HbyVw/LKAHEVjwBTaJmvccT+EJw9UZXTpzm4aRqrrtp2CkRncSIpZRo6RGURTpb98S7pAChxTZG5lX9QnuZD5RCnU3q7l3BHMFB7BxRlCcFOB05+M9NfmRCBs0K7lZ+daOxv/2e1obM/IvLPFIqxqEiOaiQMvbw5gpO4THYr2Xzwta7u7PD/wFKUOtggMDNDkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"schedule\" title=\"\" src=\"/static/fa7c116f89fb97f998abc491e2cfbdf6/c5bb3/schedule.png\" srcset=\"/static/fa7c116f89fb97f998abc491e2cfbdf6/04472/schedule.png 170w,\n/static/fa7c116f89fb97f998abc491e2cfbdf6/9f933/schedule.png 340w,\n/static/fa7c116f89fb97f998abc491e2cfbdf6/c5bb3/schedule.png 680w,\n/static/fa7c116f89fb97f998abc491e2cfbdf6/5a190/schedule.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>See all of the backups created:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0klEQVR42lVP2w7BUBA81QrVUpcg8SIoUpe6v3hxp60SXvz/h1TG7inBw2T2zM7uzhE1dxUZ0zW0zhGKvYVobiBa2xhc/+Kj//W/PoW1wuQS5dwQunOSgt6LOdHeITsMYBKMgQ+j70Ft7yEamxjkMQcB0jTHzF6tQ/368hFV5zeo9NC6B1SoZgOn1XseUs4RSdKrizuK4wss94zy7IYcsSkP+ShNr9Kj2DsIaxg8S5Mr8uNQpuNluuPJBCqlTLCJapn2vcAahchQ4mR3Lxfx4c+XX8P2dLwPkG0YAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"result\" title=\"\" src=\"/static/e81f131c9d6961e08d7194c3f35afed0/c5bb3/result.png\" srcset=\"/static/e81f131c9d6961e08d7194c3f35afed0/04472/result.png 170w,\n/static/e81f131c9d6961e08d7194c3f35afed0/9f933/result.png 340w,\n/static/e81f131c9d6961e08d7194c3f35afed0/c5bb3/result.png 680w,\n/static/e81f131c9d6961e08d7194c3f35afed0/5a190/result.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-wreak-havoc\" style=\"position:relative;\"><a href=\"#-wreak-havoc\" aria-label=\" wreak havoc permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üí• Wreak Havoc</h2>\n<p>Now that we have a happy cluster state and that most excellent blog you created‚Ä¶ let's nuke the demo.</p>\n<p>Let's say that someone (you) accidentally (definitely intentionally) deleted the demo namespace by running the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl delete namespace demo</code></pre></div>\n<p>Try to connect to the demo again. Shoot‚Ä¶ Now the site is down and so is that super important blog post you just made. What now?</p>\n<h3 id=\"-restore\" style=\"position:relative;\"><a href=\"#-restore\" aria-label=\" restore permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîÑ Restore</h3>\n<p>Well, it's a good thing you have backups! Now it's time to look into restoring from a backup. To see what all you can do with restore, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">velero restore <span class=\"token parameter variable\">-h</span></code></pre></div>\n<p>Let's now wait for all of the resources to be gone. First, check the output of <code class=\"language-text\">get all</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get all <span class=\"token parameter variable\">-n</span> demo</code></pre></div>\n<p>Note: It might take some time until everything is properly deleted; so you may run these commands above until they give you a (somewhat ominous) \"No resources found\" output.</p>\n<p>Now to perform a restore:</p>\n<p>To take a look at what backups you have, you can run the following again:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">velero backup get</code></pre></div>\n<p>To restore from the specific backup we created first:</p>\n<p>So the big questions are:\nDid all the resources come back up?</p>\n<p>Let's find out. First, let's check to see if our resources are back and running:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 10.588235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZUlEQVR42l3KywoDIRBEUW0VtH20EXUbmP//wQGh4jAhIVmcRRVXHc2dtenFpFe0Nza//v+4JUfvT31cW7XEa0jClIxeImbNYOsRjIBNhdcPSCjoEhGI4UmQXcFzdDTeHandfb0AblUrj/egrrsAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"restore\" title=\"\" src=\"/static/a6c9b4eef35a409cb385d9618e5d3f77/c5bb3/restore.png\" srcset=\"/static/a6c9b4eef35a409cb385d9618e5d3f77/04472/restore.png 170w,\n/static/a6c9b4eef35a409cb385d9618e5d3f77/9f933/restore.png 340w,\n/static/a6c9b4eef35a409cb385d9618e5d3f77/c5bb3/restore.png 680w,\n/static/a6c9b4eef35a409cb385d9618e5d3f77/5a190/restore.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get all <span class=\"token parameter variable\">-n</span> demo</code></pre></div>\n<p>It worked üéâ</p>\n<h2 id=\"-conclusion-\" style=\"position:relative;\"><a href=\"#-conclusion-\" aria-label=\" conclusion  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üåü Conclusion üåü</h2>\n<p>This hands-on blog explored the simplified process of backing up a Kubernetes cluster using Velero. We delved into the magic of Velero, understanding its key components and how it seamlessly integrates with EKS. By following the step-by-step guide, readers can now confidently implement effective backup strategies for their EKS infrastructure, ensuring data resilience and peace of mind.</p>\n<p>Velero truly simplifies EKS backups, empowering organizations to safeguard their valuable data effortlessly.</p>\n<p>I hope you guys have enjoyed this hands-on tutorial and learned a bit more than what you knew before. Let me know if you have any questions related to this blog.</p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <em><strong>Until next time üéâ</strong></em></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}