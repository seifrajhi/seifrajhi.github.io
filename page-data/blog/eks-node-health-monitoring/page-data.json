{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/eks-node-health-monitoring/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"overiew-of-nnde-health-monitoring-and-auto-repair-for-amazon-eks\" style=\"position:relative;\"><a href=\"#overiew-of-nnde-health-monitoring-and-auto-repair-for-amazon-eks\" aria-label=\"overiew of nnde health monitoring and auto repair for amazon eks permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Overiew of Nnde health monitoring and auto-repair for Amazon EKS</h2>\n<p>Amazon Elastic Kubernetes Service (Amazon EKS) continues to innovate beyond re:Invent with <a href=\"https://aws.amazon.com/about-aws/whats-new/2024/12/node-health-monitoring-auto-repair-amazon-eks/\" target=\"_blank\" rel=\"noopener noreferrer\">the introduction of Node Health Monitoring and Auto-Repair</a>.</p>\n<p>This groundbreaking feature is designed to automatically monitor and repair EC2 instances (nodes) in your Kubernetes clusters, ensuring your infrastructure remains at peak performance.</p>\n<p>This is particularly beneficial for workloads using accelerated instances for machine learning.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAADIUlEQVR42hWSXUybBRSGv6uFUGj79ZeWlr86phNrtcDCKAodUIqMgV0tf4UW2kLZRlukrKxr64aDKQSRjnZTnJvORBaNyYxmZvHGuajL4mKIJurijYnxcndePn67OJfve973PEfIVOtZrTWQ328iX2siYzYQD0cZ8ETpcoeZPLVG7NyXxN64QyR5Bc/IIi73JIFwnJz9Bd4yaiVtFet1lbxXX4HwtkHJpUo1RbOGqyYtCbWS0YlppqNrDHhT9HgS9Pk3GJjaweVdotcTJzC1QuhkjmmrlU2xjJ2aCgqVGm7UighrklHerGXDqKFgUBMyGpgIpYktXGV6vkj/RAZ3cBtXYJuu4SzB+DvMp65zenmXIVsTF8RyLlfp2ZAMP7DoEAo1et6X5rJkmlOWcdRST5+U4mT6Fkub3+BPbtE5mcd94mMcngVS735BrvCAseg2vYecRMplXJGaFc06rj2pnK/VslWtZcmopkOj4nBzG119s/hi18h++pDFj75lML1L/9lbjL65y8pXe5za+h7X8SzOTi+HzCaiFSIr0tlu7NcjZKs1JCpVHFeU0VxTRePhTjrcUZz+C0R2/mTh638Jf/Iz/uI9ort/kPjsMcO5z2k9muDlIz5szzbwilJOQKvgkkWLMGdSMy5t8KjkvGTU8/RzLTg6/TT5P6Qr/ZD2c48IFe8S27lD98Y/HMvu0TF2k5b+E9hbBrDXWfCoFfSry1k0qxBmTE9AqInoRXqkF9BV1WNtdGH3rtM2f5/WMw8IS1Vn12/Su/kXzsyvtIeKNHb7sRxswypBnJPqDuuUjOjlCOMSnRkJSMygok+vRCbqMNbYsDoHsfvSNPoWsAVTPD+VoTVyHtvIMs3eCAeaepBr6zgovdnrRhUzEphuKaXgEBW4tSJDGpHXzEqONZQw+qKcM4F2ls8GScaHmJ8Lsro8QzLhY2lxlFRinFn3M/ga9vFqXTk+STuoV2GVlSIceaqENmMJTlGO74CC/JiM706Xcr/g4tEPq/z9Y47HPyX577cMv987zy93L7J3O83tTD3Xg/uYtMvo1ihx6EpxVJfwP/ztto+tVApUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"alt text\" title=\"\" src=\"/static/aa1c684055e0660263dbf12a2ef36050/c5bb3/eks-node-health-monitoring.png\" srcset=\"/static/aa1c684055e0660263dbf12a2ef36050/04472/eks-node-health-monitoring.png 170w,\n/static/aa1c684055e0660263dbf12a2ef36050/9f933/eks-node-health-monitoring.png 340w,\n/static/aa1c684055e0660263dbf12a2ef36050/c5bb3/eks-node-health-monitoring.png 680w,\n/static/aa1c684055e0660263dbf12a2ef36050/b12f7/eks-node-health-monitoring.png 1020w,\n/static/aa1c684055e0660263dbf12a2ef36050/b5a09/eks-node-health-monitoring.png 1360w,\n/static/aa1c684055e0660263dbf12a2ef36050/0c307/eks-node-health-monitoring.png 2526w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"overview\" style=\"position:relative;\"><a href=\"#overview\" aria-label=\"overview permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Overview</h3>\n<p>Managing the health of nodes in a Kubernetes cluster can be a daunting task, often requiring significant operational effort to ensure resilience and performance. Amazon EKS now simplifies this process with Node Health Monitoring and Auto-Repair, which continuously monitors the health of nodes and takes automatic corrective actions when issues are detected.</p>\n<h3 id=\"key-features\" style=\"position:relative;\"><a href=\"#key-features\" aria-label=\"key features permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Key Features</h3>\n<h4 id=\"node-monitoring-agent\" style=\"position:relative;\"><a href=\"#node-monitoring-agent\" aria-label=\"node monitoring agent permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Node Monitoring Agent</h4>\n<p>The Node Monitoring Agent is a powerful tool that continuously reads node logs to detect a variety of health issues specific to Kubernetes environments. This agent identifies problems such as storage and networking issues and applies dedicated NodeConditions to worker nodes. These conditions are then surfaced in the observability dashboard, providing detailed insights into the health of your nodes.</p>\n<ul>\n<li><strong>Automatic Detection</strong>: The agent parses node logs to detect failures and surface status information.</li>\n<li><strong>NodeConditions</strong>: Specific conditions are applied for detected issues, such as KernelReady, NetworkingReady, and StorageReady.</li>\n<li><strong>Observability Dashboard</strong>: Detailed descriptions of detected health issues are available for monitoring.</li>\n</ul>\n<h4 id=\"node-auto-repair\" style=\"position:relative;\"><a href=\"#node-auto-repair\" aria-label=\"node auto repair permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Node Auto Repair</h4>\n<p>Node Auto Repair works in tandem with the Node Monitoring Agent to ensure that any detected issues are promptly addressed, thereby maintaining the overall health and availability of your cluster.</p>\n<ul>\n<li><strong>Continuous Monitoring</strong>: The feature continuously monitors node health and reacts to detected problems.</li>\n<li><strong>Automatic Replacement</strong>: Nodes with issues are automatically cordoned and replaced to maintain cluster health.</li>\n<li><strong>Enhanced Reliability</strong>: Addresses intermittent node issues, such as unresponsive kubelets and increased device errors.</li>\n</ul>\n<h3 id=\"how-it-works\" style=\"position:relative;\"><a href=\"#how-it-works\" aria-label=\"how it works permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How It Works</h3>\n<p>When the Node Monitoring Agent detects a health issue, it applies a specific NodeCondition to the affected node. If Node Auto Repair is enabled, it will automatically take corrective actions based on the type of issue detected. For example, if a node is experiencing networking issues, it may be cordoned and replaced to prevent disruption to your workloads.</p>\n<h3 id=\"enabling-node-health-monitoring-and-auto-repair\" style=\"position:relative;\"><a href=\"#enabling-node-health-monitoring-and-auto-repair\" aria-label=\"enabling node health monitoring and auto repair permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Enabling Node Health Monitoring and Auto-Repair</h3>\n<p>To enable these features, you need to install the EKS node monitoring agent add-on and enable node auto-repair in the EKS managed node group APIs or AWS Console. EKS Auto Mode comes with both features enabled by default.</p>\n<ul>\n<li><strong>AWS Console</strong>: Activate the \"Enable node auto repair\" checkbox for the managed node group.</li>\n<li><strong>AWS CLI</strong>: Use the <code class=\"language-text\">--node-repair-config enabled=true</code> option with the <code class=\"language-text\">eks create nodegroup</code> or <code class=\"language-text\">eks update-nodegroup-config</code> command.</li>\n</ul>\n<h3 id=\"availability\" style=\"position:relative;\"><a href=\"#availability\" aria-label=\"availability permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Availability</h3>\n<p>Node Health Monitoring and Auto-Repair is available at no additional cost in all AWS Regions, except AWS GovCloud (US) and China Regions. This ensures that you can leverage these powerful features to maintain the health of your Kubernetes clusters without incurring extra costs.</p>\n<h3 id=\"benefits\" style=\"position:relative;\"><a href=\"#benefits\" aria-label=\"benefits permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Benefits</h3>\n<h4 id=\"improved-cluster-availability\" style=\"position:relative;\"><a href=\"#improved-cluster-availability\" aria-label=\"improved cluster availability permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Improved Cluster Availability</h4>\n<p>By automatically detecting and addressing node health issues, these features help ensure that your Kubernetes clusters remain highly available. This is particularly important for applications that require high availability and minimal downtime.</p>\n<h4 id=\"reduced-operational-overhead\" style=\"position:relative;\"><a href=\"#reduced-operational-overhead\" aria-label=\"reduced operational overhead permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Reduced Operational Overhead</h4>\n<p>Managing node health manually can be time-consuming and complex. With Node Health Monitoring and Auto-Repair, much of this work is automated, freeing up your team to focus on other critical tasks.</p>\n<h4 id=\"enhanced-performance-for-machine-learning-workloads\" style=\"position:relative;\"><a href=\"#enhanced-performance-for-machine-learning-workloads\" aria-label=\"enhanced performance for machine learning workloads permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Enhanced Performance for Machine Learning Workloads</h4>\n<p>For workloads that use accelerated instances, such as those for machine learning, maintaining node health is crucial. These features help ensure that your nodes are always in optimal condition, which is essential for performance-intensive applications.</p>\n<h3 id=\"detailed-node-health-issues\" style=\"position:relative;\"><a href=\"#detailed-node-health-issues\" aria-label=\"detailed node health issues permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Detailed Node Health Issues</h3>\n<p>The Node Monitoring Agent can detect a wide range of health issues, categorized into conditions and events. Conditions are terminal issues that warrant remediation actions like instance replacement or reboot, while events are temporary issues or sub-optimal configurations that do not trigger auto-repair actions.</p>\n<h4 id=\"kernel-node-health-issues\" style=\"position:relative;\"><a href=\"#kernel-node-health-issues\" aria-label=\"kernel node health issues permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Kernel Node Health Issues</h4>\n<ul>\n<li><strong>ForkFailedOutOfPID</strong>: A fork or exec call has failed due to the system being out of process IDs or memory.</li>\n<li><strong>AppBlocked</strong>: A task has been blocked for a long period, usually due to input/output blocking.</li>\n<li><strong>AppCrash</strong>: An application on the node has crashed.</li>\n<li><strong>ApproachingKernelPidMax</strong>: The number of processes is nearing the maximum allowed by the kernel.</li>\n<li><strong>ConntrackExceededKernel</strong>: Connection tracking exceeded the maximum for the kernel, leading to packet loss.</li>\n</ul>\n<h4 id=\"networking-node-health-issues\" style=\"position:relative;\"><a href=\"#networking-node-health-issues\" aria-label=\"networking node health issues permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Networking Node Health Issues</h4>\n<ul>\n<li><strong>InterfaceNotRunning</strong>: The network interface is not running or there are network issues.</li>\n<li><strong>IPAMDNotReady</strong>: IPAMD fails to connect to the API server.</li>\n<li><strong>BandwidthInExceeded</strong>: Inbound bandwidth exceeded the maximum for the instance, causing packet loss.</li>\n<li><strong>ConntrackExceeded</strong>: Connection tracking exceeded the maximum for the instance, leading to packet loss.</li>\n</ul>\n<h4 id=\"nvidia-node-health-issues\" style=\"position:relative;\"><a href=\"#nvidia-node-health-issues\" aria-label=\"nvidia node health issues permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>NVIDIA Node Health Issues</h4>\n<ul>\n<li><strong>NvidiaDoubleBitError</strong>: A double bit error was produced by the GPU driver, requiring node replacement.</li>\n<li><strong>NvidiaXID13Error</strong>: A graphics engine exception, requiring node reboot.</li>\n<li><strong>NvidiaXID79Error</strong>: The GPU driver found the GPU inaccessible over PCI Express, requiring node replacement.</li>\n</ul>\n<h3 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Conclusion</h3>\n<p>The introduction of Node Health Monitoring and Auto-Repair for Amazon EKS is a significant advancement in maintaining the health and performance of your Kubernetes clusters. By automating the detection and remediation of node health issues, these features help ensure that your clusters remain resilient and operational with minimal manual intervention.</p>\n<p>For more information, visit the Amazon EKS documentation.</p>\n<br>\n<br>\n<blockquote>\n<p>💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  <strong><em>Until next time 🎉</em></strong></p>\n</blockquote>\n<p>🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>♻️ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>♻️ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ✌🏻</strong></p>\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n<p><strong>📻🧡 Resources</strong></p>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/eks/latest/userguide/eks-node-health.html\" target=\"_blank\" rel=\"noopener noreferrer\">https://docs.aws.amazon.com/eks/latest/userguide/eks-node-health.html</a></li>\n<li><a href=\"https://aws.amazon.com/about-aws/whats-new/2024/12/node-health-monitoring-auto-repair-amazon-eks/\" target=\"_blank\" rel=\"noopener noreferrer\">https://aws.amazon.com/about-aws/whats-new/2024/12/node-health-monitoring-auto-repair-amazon-eks/</a></li>\n</ul>\n<p><strong>📅 Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":4,"rawMarkdownBody":"\n## Overiew of Nnde health monitoring and auto-repair for Amazon EKS\n\nAmazon Elastic Kubernetes Service (Amazon EKS) continues to innovate beyond re:Invent with [the introduction of Node Health Monitoring and Auto-Repair](https://aws.amazon.com/about-aws/whats-new/2024/12/node-health-monitoring-auto-repair-amazon-eks/).\n\nThis groundbreaking feature is designed to automatically monitor and repair EC2 instances (nodes) in your Kubernetes clusters, ensuring your infrastructure remains at peak performance.\n\nThis is particularly beneficial for workloads using accelerated instances for machine learning.\n\n\n![alt text](eks-node-health-monitoring.png)\n\n### Overview\n\nManaging the health of nodes in a Kubernetes cluster can be a daunting task, often requiring significant operational effort to ensure resilience and performance. Amazon EKS now simplifies this process with Node Health Monitoring and Auto-Repair, which continuously monitors the health of nodes and takes automatic corrective actions when issues are detected.\n\n### Key Features\n\n#### Node Monitoring Agent\n\nThe Node Monitoring Agent is a powerful tool that continuously reads node logs to detect a variety of health issues specific to Kubernetes environments. This agent identifies problems such as storage and networking issues and applies dedicated NodeConditions to worker nodes. These conditions are then surfaced in the observability dashboard, providing detailed insights into the health of your nodes.\n\n- **Automatic Detection**: The agent parses node logs to detect failures and surface status information.\n- **NodeConditions**: Specific conditions are applied for detected issues, such as KernelReady, NetworkingReady, and StorageReady.\n- **Observability Dashboard**: Detailed descriptions of detected health issues are available for monitoring.\n\n#### Node Auto Repair\n\nNode Auto Repair works in tandem with the Node Monitoring Agent to ensure that any detected issues are promptly addressed, thereby maintaining the overall health and availability of your cluster.\n\n- **Continuous Monitoring**: The feature continuously monitors node health and reacts to detected problems.\n- **Automatic Replacement**: Nodes with issues are automatically cordoned and replaced to maintain cluster health.\n- **Enhanced Reliability**: Addresses intermittent node issues, such as unresponsive kubelets and increased device errors.\n\n### How It Works\n\nWhen the Node Monitoring Agent detects a health issue, it applies a specific NodeCondition to the affected node. If Node Auto Repair is enabled, it will automatically take corrective actions based on the type of issue detected. For example, if a node is experiencing networking issues, it may be cordoned and replaced to prevent disruption to your workloads.\n\n### Enabling Node Health Monitoring and Auto-Repair\n\nTo enable these features, you need to install the EKS node monitoring agent add-on and enable node auto-repair in the EKS managed node group APIs or AWS Console. EKS Auto Mode comes with both features enabled by default.\n\n- **AWS Console**: Activate the \"Enable node auto repair\" checkbox for the managed node group.\n- **AWS CLI**: Use the `--node-repair-config enabled=true` option with the `eks create nodegroup` or `eks update-nodegroup-config` command.\n\n### Availability\n\nNode Health Monitoring and Auto-Repair is available at no additional cost in all AWS Regions, except AWS GovCloud (US) and China Regions. This ensures that you can leverage these powerful features to maintain the health of your Kubernetes clusters without incurring extra costs.\n\n### Benefits\n\n#### Improved Cluster Availability\n\nBy automatically detecting and addressing node health issues, these features help ensure that your Kubernetes clusters remain highly available. This is particularly important for applications that require high availability and minimal downtime.\n\n#### Reduced Operational Overhead\n\nManaging node health manually can be time-consuming and complex. With Node Health Monitoring and Auto-Repair, much of this work is automated, freeing up your team to focus on other critical tasks.\n\n#### Enhanced Performance for Machine Learning Workloads\n\nFor workloads that use accelerated instances, such as those for machine learning, maintaining node health is crucial. These features help ensure that your nodes are always in optimal condition, which is essential for performance-intensive applications.\n\n### Detailed Node Health Issues\n\nThe Node Monitoring Agent can detect a wide range of health issues, categorized into conditions and events. Conditions are terminal issues that warrant remediation actions like instance replacement or reboot, while events are temporary issues or sub-optimal configurations that do not trigger auto-repair actions.\n\n#### Kernel Node Health Issues\n\n- **ForkFailedOutOfPID**: A fork or exec call has failed due to the system being out of process IDs or memory.\n- **AppBlocked**: A task has been blocked for a long period, usually due to input/output blocking.\n- **AppCrash**: An application on the node has crashed.\n- **ApproachingKernelPidMax**: The number of processes is nearing the maximum allowed by the kernel.\n- **ConntrackExceededKernel**: Connection tracking exceeded the maximum for the kernel, leading to packet loss.\n\n#### Networking Node Health Issues\n\n- **InterfaceNotRunning**: The network interface is not running or there are network issues.\n- **IPAMDNotReady**: IPAMD fails to connect to the API server.\n- **BandwidthInExceeded**: Inbound bandwidth exceeded the maximum for the instance, causing packet loss.\n- **ConntrackExceeded**: Connection tracking exceeded the maximum for the instance, leading to packet loss.\n\n#### NVIDIA Node Health Issues\n\n- **NvidiaDoubleBitError**: A double bit error was produced by the GPU driver, requiring node replacement.\n- **NvidiaXID13Error**: A graphics engine exception, requiring node reboot.\n- **NvidiaXID79Error**: The GPU driver found the GPU inaccessible over PCI Express, requiring node replacement.\n\n### Conclusion\n\nThe introduction of Node Health Monitoring and Auto-Repair for Amazon EKS is a significant advancement in maintaining the health and performance of your Kubernetes clusters. By automating the detection and remediation of node health issues, these features help ensure that your clusters remain resilient and operational with minimal manual intervention.\n\nFor more information, visit the Amazon EKS documentation.\n\n<br>\n<br>\n\n> 💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  **_Until next time 🎉_**\n\n🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**♻️ LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**♻️ X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ✌🏻**\n\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n\n**📻🧡 Resources**\n\n- https://docs.aws.amazon.com/eks/latest/userguide/eks-node-health.html\n- https://aws.amazon.com/about-aws/whats-new/2024/12/node-health-monitoring-auto-repair-amazon-eks/\n\n**📅 Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":931},"frontmatter":{"id":"1543b8f3209c96b953f80638","path":"/blog/eks-node-health-monitoring/","humanDate":"Dec 23, 2024","fullDate":"2024-12-23","title":"Node Health Monitoring and Auto-Repair for Amazon EKS","keywords":["Amazon EKS","EKS","Kubernetes","Node Health Monitoring","Auto-Repair","Cloud Computing"],"excerpt":"Learn how Amazon EKS's new Node Health Monitoring and Auto-Repair features can help you maintain higher availability and reduce operational overhead for your Kubernetes clusters.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAADIUlEQVR42hWSXUybBRSGv6uFUGj79ZeWlr86phNrtcDCKAodUIqMgV0tf4UW2kLZRlukrKxr64aDKQSRjnZTnJvORBaNyYxmZvHGuajL4mKIJurijYnxcndePn67OJfve973PEfIVOtZrTWQ328iX2siYzYQD0cZ8ETpcoeZPLVG7NyXxN64QyR5Bc/IIi73JIFwnJz9Bd4yaiVtFet1lbxXX4HwtkHJpUo1RbOGqyYtCbWS0YlppqNrDHhT9HgS9Pk3GJjaweVdotcTJzC1QuhkjmmrlU2xjJ2aCgqVGm7UighrklHerGXDqKFgUBMyGpgIpYktXGV6vkj/RAZ3cBtXYJuu4SzB+DvMp65zenmXIVsTF8RyLlfp2ZAMP7DoEAo1et6X5rJkmlOWcdRST5+U4mT6Fkub3+BPbtE5mcd94mMcngVS735BrvCAseg2vYecRMplXJGaFc06rj2pnK/VslWtZcmopkOj4nBzG119s/hi18h++pDFj75lML1L/9lbjL65y8pXe5za+h7X8SzOTi+HzCaiFSIr0tlu7NcjZKs1JCpVHFeU0VxTRePhTjrcUZz+C0R2/mTh638Jf/Iz/uI9ort/kPjsMcO5z2k9muDlIz5szzbwilJOQKvgkkWLMGdSMy5t8KjkvGTU8/RzLTg6/TT5P6Qr/ZD2c48IFe8S27lD98Y/HMvu0TF2k5b+E9hbBrDXWfCoFfSry1k0qxBmTE9AqInoRXqkF9BV1WNtdGH3rtM2f5/WMw8IS1Vn12/Su/kXzsyvtIeKNHb7sRxswypBnJPqDuuUjOjlCOMSnRkJSMygok+vRCbqMNbYsDoHsfvSNPoWsAVTPD+VoTVyHtvIMs3eCAeaepBr6zgovdnrRhUzEphuKaXgEBW4tSJDGpHXzEqONZQw+qKcM4F2ls8GScaHmJ8Lsro8QzLhY2lxlFRinFn3M/ga9vFqXTk+STuoV2GVlSIceaqENmMJTlGO74CC/JiM706Xcr/g4tEPq/z9Y47HPyX577cMv987zy93L7J3O83tTD3Xg/uYtMvo1ihx6EpxVJfwP/ztto+tVApUAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/aa1c684055e0660263dbf12a2ef36050/ac84f/eks-node-health-monitoring.png","srcSet":"/static/aa1c684055e0660263dbf12a2ef36050/1fe9a/eks-node-health-monitoring.png 750w,\n/static/aa1c684055e0660263dbf12a2ef36050/34087/eks-node-health-monitoring.png 1080w,\n/static/aa1c684055e0660263dbf12a2ef36050/1c572/eks-node-health-monitoring.png 1366w,\n/static/aa1c684055e0660263dbf12a2ef36050/ac84f/eks-node-health-monitoring.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/aa1c684055e0660263dbf12a2ef36050/a6c4b/eks-node-health-monitoring.webp 750w,\n/static/aa1c684055e0660263dbf12a2ef36050/e5dd4/eks-node-health-monitoring.webp 1080w,\n/static/aa1c684055e0660263dbf12a2ef36050/1de46/eks-node-health-monitoring.webp 1366w,\n/static/aa1c684055e0660263dbf12a2ef36050/d761b/eks-node-health-monitoring.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5661458333333333}}},"coverCredits":"Photo by AWS"}}},"pageContext":{"nextThought":{"frontmatter":{"path":"/blog/aws-skill-builder/","title":"AWS Skill Builder: Build Cloud Skills with Amazon Web Services","date":"2024-12-09 08:00:00"},"excerpt":"Overview of AWS Skill Builder AWS Skill Builder is an online learning center designed to help individuals and organizations build in-demand…"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}