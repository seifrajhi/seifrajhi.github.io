{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/kubernetes-cost-optimization/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Efficient Tools for Streamlining FinOps üí∏</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üóØ Introduction</h2>\n<p>As organizations embrace Kubernetes for their containerized workloads, the need for effective cost optimization becomes paramount. To navigate the complex landscape of cloud-native infrastructure, leveraging efficient tools is key to streamlining FinOps practices and maximizing cost savings. Fortunately, a range of efficient tools exists to streamline FinOps practices and drive significant savings.</p>\n<p>In this article, we will discuss cutting-edge solutions such as <a href=\"https://www.apptio.com/products/cloudability/\" target=\"_blank\" rel=\"noopener noreferrer\">Cloudability</a>, <a href=\"https://github.com/kube-green/kube-green\" target=\"_blank\" rel=\"noopener noreferrer\">Kube-Green</a>, <a href=\"https://cloudcustodian.io/docs/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">Cloud Custodian</a>, and <a href=\"https://www.kubecost.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubecost</a>. Discover how these tools empower businesses to gain cost visibility, optimize resource utilization, and achieve financial excellence in their Kubernetes deployments. Let's dive into the world of Kubernetes cost optimization made easy. üí∏</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEuElEQVR42o2VC0wTdxzHQVjiZDMuGhMzExcXZ+Km2VzYI25zcY+w4WPzMRNFxWlwbi4zAwJuzkpw6iAIwsAWA5anpICltvIsj9Ier0JLQR590VpoodAXLS9p77673oSwRDN/yeV+d/f7ff6/+/7v97uAgGcYgEAejxdEu4H+65bmlh2HL3OkKz6NCmcCDh0KCnheY0As1jK/P9NHbIi5VcY9XUTMRVY/woqvY2KYIBYr+H9BdFXLWE9AtB/yZy7/t8jsaudPYiPY+rnHiV12LA87/3xAFgsLoMCcYuHBqFuCwbMVvbhEWKg8/ZSv3jLrTVI6EBz263MBGZ0kYsn2nzPLak+VdCBBPkHlq10+vtFD3h+ZQYMD3iSFDcG7zsYxGTt3BtOr03kIfCrsRuF91smcOjK6bQIp/R5f6RANssxB2jcCSY8JA4SKutZhRdjlMsdFrnAvsy+01v43OvTv5i3RTtO28kx2peOq3Ip06ZA3ptWKB6YpVNOVDeffg52dj+GKRvI6MYXIzI7uTz77MopOe3Hd7qI1AZtjX17Qf6G4AEMqa9WJ7ErXH4IeSGKvUJckRghN07BzCuDi5KODeIhc7TQVW+fARyf+qt26NbSeTlsnfoiDF7Llg2v3ZO9b0P8JMHXVEXaVO7GkFSWpRdTvshHU6J1Q17eDp3WhwgYkDbjxbW439p1JFb75zseDdNoaLpezt6XuAZoUE+ThBHEOfe8FBuikKzx8u9Z9J6MUwitsKl5mRvnwLJIHppDcZcX1hn68/v1VbDhwARy+ai6JXW775nT8G3Tq7pORkYBLiyHTmHXLj7yXGOCjoqxXjnKq3HEVPUjnyahzcjeqGsUQNdXjeIYQsZwyHE28jfbBEWhsIO9LdVBoXb3JaWk523eEEWbrtGLcYhqLzu8OYYBKPn/VsZv33DkCAs2dKqqiWQVnXga0TVycKOKBq+vHNZUcMz5g1A30m+cpWi9SVF2DH87H96insb+hUx/eaGhczgCHNar1pzIE0925eYDkLuUVl4DXJEShQorPecUILSlAcZ8GY1M+WN0UnLMkpmggv05KCoSVfvi8zYNzDExh8hwxTXon98TdIsUp6dAX3EBjYRZ+kUuwi1uMhLs1IDQWtI+NgTCboLI7obOOYl6phE6pRk+bymd7DMj6xiIYoNGGLSK5zrb5QBySj0X5QrdtxZ7UFETUVSKWX4Vm1Si0Fg9UZh8EagNudslR29oLKUdISsQan1JnJ5XjQPPghOi9o6yVDHR/9N8bWvUuybXkNKx/bZM3LIuN0DtcSNSj8BuhJXH+DsCuNJKJRQoyU2SAqBfoMlMgdJPe+gGHQtRuTAuPz9q4+DHea59cnSuQSB9IOqEw2r0yzTgNslPND00wOebRpocvReSkbjfZkFQqQ4G4c7xUprmakNf04bp3d6/47/wDmF4kdFg74CDbR+fp1Q0Ob0W3ATU9I9Sww0v6lTc7Sbtcb0uKiOe8H/T28a+2fREdstAh9BG02CmLQ5W2K1zxq0rLTNcE/VRpdHvGPfPTjlmS6hqaLMwRdWxc2mL+/l061Z86YP3nslbdJp5UffE7Vslb5dL+D0QthrAlMUHMdHnGL+Afp3pRTE6ca5AAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"finops\" title=\"\" src=\"/static/32c0f5eeac6b9b3897edfe08986d69f0/c5bb3/finops.png\" srcset=\"/static/32c0f5eeac6b9b3897edfe08986d69f0/04472/finops.png 170w,\n/static/32c0f5eeac6b9b3897edfe08986d69f0/9f933/finops.png 340w,\n/static/32c0f5eeac6b9b3897edfe08986d69f0/c5bb3/finops.png 680w,\n/static/32c0f5eeac6b9b3897edfe08986d69f0/00d43/finops.png 1000w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"introduction-to-kube-green-\" style=\"position:relative;\"><a href=\"#introduction-to-kube-green-\" aria-label=\"introduction to kube green  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Introduction to Kube-Green üçÄ</h2>\n<p>In the first paragraph of this tutorial, I will explain how Kube-Green was born and why it is useful for reducing the waste of resources.</p>\n<h3 id=\"the-idea-of-kube-green-\" style=\"position:relative;\"><a href=\"#the-idea-of-kube-green-\" aria-label=\"the idea of kube green  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>The Idea of Kube-Green üóØ</h3>\n<p>In a Kubernetes cluster, non-production namespaces typically operate during business hours, which amounts to approximately 40 hours per week out of a total of 168 weekly hours. However, it's common for resources to be allocated to pods in these namespaces even when they are not actively in use. This results in unnecessary consumption of CPU and memory resources.</p>\n<p><a href=\"https://github.com/kube-green/kube-green\" target=\"_blank\" rel=\"noopener noreferrer\">Kube-Green</a> offers a simple solution to address this issue by halting all pods within those namespaces, effectively optimizing resource utilization during non-business hours.</p>\n<h3 id=\"how-is-it-possible-\" style=\"position:relative;\"><a href=\"#how-is-it-possible-\" aria-label=\"how is it possible  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How is it Possible? ü§î</h3>\n<p>Kube-Green is a Kubernetes controller, which defines a Custom Resource Definition (CRD) called <code class=\"language-text\">SleepInfo</code>. The <code class=\"language-text\">SleepInfo</code> CRD defines when to stop and restart the pods in a namespace. For example, in development namespaces, it is possible to stop all the pods during non-business hours: wake up every morning from Monday to Friday and stop every night from Monday to Friday.</p>\n<h3 id=\"hands-on-\" style=\"position:relative;\"><a href=\"#hands-on-\" aria-label=\"hands on  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Hands-On üë∑</h3>\n<p>To follow this guide, you should have <a href=\"https://kubernetes.io/docs/tasks/tools/#kubectl\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl</a> and <a href=\"https://kind.sigs.k8s.io/\" target=\"_blank\" rel=\"noopener noreferrer\">kind</a> installed locally.</p>\n<ul>\n<li>The Kubernetes command line tool: <a href=\"https://kubernetes.io/docs/tasks/tools/#kubectl\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl</a></li>\n<li><a href=\"https://docs.docker.com/get-started/get-docker/\" target=\"_blank\" rel=\"noopener noreferrer\">Docker</a></li>\n<li>Kubernetes cluster</li>\n</ul>\n<p>Now you have all the tools needed, let's go!</p>\n<h3 id=\"Ô∏è-install-the-cert-manager\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-install-the-cert-manager\" aria-label=\"Ô∏è install the cert manager permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚û°Ô∏è Install the Cert-Manager</h3>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 14.117647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAf0lEQVR42m2L0Q7CIAxFKYNCC7Jp+P9/NOsbJrVsmqjx4eac9N663uGRwQ32btBi8af/DXwQvrv5V4MfjjdUakG5BL2lpL2wltVuNWhtybqo5XKGtknrVmPDw+eWp9uW0avL17RTQ6HspQaQGhexQiiC0CTC4Rzf/iL+Enbb3J/bcz9dnEft7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cert\" title=\"\" src=\"/static/cd60065cedd4846166653cbe457c2c5c/c5bb3/cert.png\" srcset=\"/static/cd60065cedd4846166653cbe457c2c5c/04472/cert.png 170w,\n/static/cd60065cedd4846166653cbe457c2c5c/9f933/cert.png 340w,\n/static/cd60065cedd4846166653cbe457c2c5c/c5bb3/cert.png 680w,\n/static/cd60065cedd4846166653cbe457c2c5c/b12f7/cert.png 1020w,\n/static/cd60065cedd4846166653cbe457c2c5c/b5a09/cert.png 1360w,\n/static/cd60065cedd4846166653cbe457c2c5c/29007/cert.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>With this command, the latest release of cert-manager will be installed. You can check the correct cert-manager deployment by verifying that all the pods are correctly running.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 10.588235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASUlEQVR42mOwM9X5qWum+UdLS/uPljYEa2ujsknBDBrGxn80TUz+axkY/AfR6hYW/w0NDf7rmhj/1wSKaWtp/QcqJArr6Oj8BwDhEDxboKZ1lQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"get-ns\" title=\"\" src=\"/static/9617f5bc987191d334570611a02ffa45/c5bb3/get-ns.png\" srcset=\"/static/9617f5bc987191d334570611a02ffa45/04472/get-ns.png 170w,\n/static/9617f5bc987191d334570611a02ffa45/9f933/get-ns.png 340w,\n/static/9617f5bc987191d334570611a02ffa45/c5bb3/get-ns.png 680w,\n/static/9617f5bc987191d334570611a02ffa45/b12f7/get-ns.png 1020w,\n/static/9617f5bc987191d334570611a02ffa45/b5a09/get-ns.png 1360w,\n/static/9617f5bc987191d334570611a02ffa45/29007/get-ns.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"install-kube-green-\" style=\"position:relative;\"><a href=\"#install-kube-green-\" aria-label=\"install kube green  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install Kube-Green „äô</h3>\n<p>Install Kube-Green with the default static install. <a href=\"https://kube-green.dev/docs/install/\" target=\"_blank\" rel=\"noopener noreferrer\">Click here</a> to see the different install methods supported.</p>\n<p>Install Kube-Green with this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl apply <span class=\"token parameter variable\">-f</span> https://github.com/kube-green/kube-green/releases/latest/download/kube-green.yaml</code></pre></div>\n<p>This command creates a <code class=\"language-text\">kube-green</code> namespace and deploys a <code class=\"language-text\">kube-green-controller-manager</code>. You can check that the pod is correctly running:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl <span class=\"token parameter variable\">-n</span> kube-green get pods</code></pre></div>\n<h3 id=\"Ô∏è-setup-kube-green-in-dev-namespace\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-setup-kube-green-in-dev-namespace\" aria-label=\"Ô∏è setup kube green in dev namespace permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚û°Ô∏è Setup Kube-Green in Dev Namespace</h3>\n<p>To setup Kube-Green, the <code class=\"language-text\">SleepInfo</code> resource must be created in the <code class=\"language-text\">dev</code> namespace. The <code class=\"language-text\">SleepInfo</code> spec contains:</p>\n<ul>\n<li><code class=\"language-text\">weekdays</code>: day of the week. <code class=\"language-text\">*</code> is every day, <code class=\"language-text\">1</code> is Monday, <code class=\"language-text\">1-5</code> is from Monday to Friday.</li>\n<li><code class=\"language-text\">sleepAt</code>: time in hours and minutes (HH:mm) when the namespace will go to sleep. Valid values are, for example, <code class=\"language-text\">19:00</code> or <code class=\"language-text\">*:*</code> for every minute and every hour. Resources sleep will be deployments (setting replicas value to 0) and, if <code class=\"language-text\">suspendCronjobs</code> option is set to true, cron jobs will be suspended.</li>\n<li><code class=\"language-text\">wakeUpAt</code> (optional): time in hours and minutes (HH:mm) when the namespace should be restored to the initial state (before sleep). Valid values are, for example, <code class=\"language-text\">19:00</code> or <code class=\"language-text\">*:*</code> for every minute and every hour. If wake up value is not set, the pod in the namespace will not be restored. So, you will need to deploy the initial namespace configuration to restore it.</li>\n<li><code class=\"language-text\">timeZone</code> (optional, default to UTC): time zone in IANA specification. For example, for Italian hour, set <code class=\"language-text\">Europe/Rome</code>.</li>\n<li><code class=\"language-text\">suspendDeployments</code> (optional, default to true): if set to false, deployments will not be suspended.</li>\n<li><code class=\"language-text\">suspendCronJobs</code> (optional, default to false): if set to true, cronjobs will be suspended.</li>\n<li><code class=\"language-text\">excludeRef</code> (optional): an array of objects containing the resource to exclude from sleep. It can specify exactly the name of the specified resource or match based on the labels. The possible formats are:\n<ul>\n<li><code class=\"language-text\">apiVersion</code>: version of the resource. Now it supports \"apps/v1\", \"batch/v1beta1\" and \"batch/v1\".</li>\n<li><code class=\"language-text\">kind</code>: the kind of resource. Now it supports \"Deployment\" and \"CronJob\".</li>\n<li><code class=\"language-text\">name</code>: the name of the resource or</li>\n<li><code class=\"language-text\">matchLabels</code>: an object of strings with labels to identify resources. <a href=\"https://kube-green.dev/docs/sleepinfo/\" target=\"_blank\" rel=\"noopener noreferrer\">Click here</a> to see an example.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"example-\" style=\"position:relative;\"><a href=\"#example-\" aria-label=\"example  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Example üèó</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>green.com/v1alpha1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> SleepInfo\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> working<span class=\"token punctuation\">-</span>hours\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">weekdays</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1-5\"</span>\n    <span class=\"token key atrule\">sleepAt</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"20:00\"</span>\n    <span class=\"token key atrule\">wakeUpAt</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"08:00\"</span>\n    <span class=\"token key atrule\">timeZone</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Europe/Rome\"</span></code></pre></div>\n<p>With this CRD, it's configured to sleep at 20:00 and wake up at 08:00 on weekdays only for Deployments.</p>\n<h2 id=\"introduction-to-opencost-by-kubecost-\" style=\"position:relative;\"><a href=\"#introduction-to-opencost-by-kubecost-\" aria-label=\"introduction to opencost by kubecost  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Introduction to OpenCost by Kubecost üí∞</h2>\n<p><a href=\"https://github.com/kubecost/kubectl-cost\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl-cost</a> is a <a href=\"https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl plugin</a> that provides easy CLI access to Kubernetes cost allocation metrics via the <a href=\"https://www.opencost.io/docs/api\" target=\"_blank\" rel=\"noopener noreferrer\">OpenCost API</a>. It allows developers, DevOps, and others to quickly determine the cost &#x26; efficiency for any Kubernetes workload.</p>\n<h3 id=\"opencost-setup\" style=\"position:relative;\"><a href=\"#opencost-setup\" aria-label=\"opencost setup permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>OpenCost Setup</h3>\n<p>OpenCost requires Prometheus for scraping metrics and data storage. Follow the steps below to install OpenCost.</p>\n<h3 id=\"quick-start-installation-\" style=\"position:relative;\"><a href=\"#quick-start-installation-\" aria-label=\"quick start installation  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Quick Start Installation üìÅ</h3>\n<p>These commands will get you started immediately with OpenCost.</p>\n<h4 id=\"install-prometheus\" style=\"position:relative;\"><a href=\"#install-prometheus\" aria-label=\"install prometheus permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install Prometheus</h4>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">helm <span class=\"token function\">install</span> my-prometheus <span class=\"token parameter variable\">--repo</span> https://prometheus-community.github.io/helm-charts prometheus <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--namespace</span> prometheus --create-namespace <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">pushgateway.enabled</span><span class=\"token operator\">=</span>false <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">alertmanager.enabled</span><span class=\"token operator\">=</span>false <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">-f</span> https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/prometheus/extraScrapeConfigs.yaml</code></pre></div>\n<h4 id=\"install-opencost\" style=\"position:relative;\"><a href=\"#install-opencost\" aria-label=\"install opencost permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install OpenCost</h4>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl apply <span class=\"token parameter variable\">--namespace</span> opencost <span class=\"token parameter variable\">-f</span> https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/opencost.yaml</code></pre></div>\n<h4 id=\"install-kubecost\" style=\"position:relative;\"><a href=\"#install-kubecost\" aria-label=\"install kubecost permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install Kubecost</h4>\n<p>This software requires that you have a running deployment of Kubecost in your cluster. The recommended path is to use Helm, but there are <a href=\"https://docs.kubecost.com/install\" target=\"_blank\" rel=\"noopener noreferrer\">alternative install options</a>.</p>\n<h5 id=\"helm-3\" style=\"position:relative;\"><a href=\"#helm-3\" aria-label=\"helm 3 permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Helm 3</h5>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">helm repo <span class=\"token function\">add</span> kubecost https://kubecost.github.io/cost-analyzer/\nhelm upgrade <span class=\"token parameter variable\">-i</span> --create-namespace kubecost kubecost/cost-analyzer <span class=\"token parameter variable\">--namespace</span> kubecost <span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">kubecostToken</span><span class=\"token operator\">=</span><span class=\"token string\">\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"</span></code></pre></div>\n<h4 id=\"install-kubectl-cost\" style=\"position:relative;\"><a href=\"#install-kubectl-cost\" aria-label=\"install kubectl cost permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install kubectl-cost</h4>\n<h5 id=\"krew\" style=\"position:relative;\"><a href=\"#krew\" aria-label=\"krew permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Krew</h5>\n<p>If you have <a href=\"https://krew.sigs.k8s.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Krew</a>, the kubectl plugin manager, installed:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl krew <span class=\"token function\">install</span> cost</code></pre></div>\n<p>The Krew manifest can be found <a href=\"https://github.com/kubecost/kubectl-cost/blob/master/krew.yaml\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.</p>\n<h3 id=\"example-usage\" style=\"position:relative;\"><a href=\"#example-usage\" aria-label=\"example usage permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Example Usage</h3>\n<p>Kube-Green offers aggregation-based cost monitoring with subcommands like namespace, deployment, controller, label, pod, and node. These subcommands provide cost information aggregated by their respective names. There are two modes: rate (default) and non-rate (historical). Rate mode shows projected monthly cost based on activity, while non-rate mode displays total cost for the specified window duration.</p>\n<h4 id=\"show-the-projected-monthly-rate-for-each-namespace\" style=\"position:relative;\"><a href=\"#show-the-projected-monthly-rate-for-each-namespace\" aria-label=\"show the projected monthly rate for each namespace permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Show the Projected Monthly Rate for Each Namespace</h4>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl cost namespace --show-all-resources</code></pre></div>\n<p>Output:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n<span class=\"token operator\">|</span> NAMESPACE         <span class=\"token operator\">|</span> CPU       <span class=\"token operator\">|</span> CPU EFF. <span class=\"token operator\">|</span> MEMORY   <span class=\"token operator\">|</span> MEMORY EFF. <span class=\"token operator\">|</span> GPU      <span class=\"token operator\">|</span> PV       <span class=\"token operator\">|</span> NETWORK  <span class=\"token operator\">|</span> SHARED COST <span class=\"token operator\">|</span> MONTHLY RATE <span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span>\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n<span class=\"token operator\">|</span> kube-system       <span class=\"token operator\">|</span> <span class=\"token number\">29.366083</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.066780</span> <span class=\"token operator\">|</span> <span class=\"token number\">5.226317</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.928257</span>    <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">137.142857</span>  <span class=\"token operator\">|</span>         <span class=\"token number\">171.735257</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> kubecost-stage    <span class=\"token operator\">|</span> <span class=\"token number\">6.602761</span>  <span class=\"token operator\">|</span> <span class=\"token number\">0.158069</span> <span class=\"token operator\">|</span> <span class=\"token number\">1.824703</span> <span class=\"token operator\">|</span> <span class=\"token number\">1.594699</span>    <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">2.569600</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">137.142857</span>  <span class=\"token operator\">|</span>         <span class=\"token number\">148.139922</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> kubecost          <span class=\"token operator\">|</span> <span class=\"token number\">6.499445</span>  <span class=\"token operator\">|</span> <span class=\"token number\">0.116629</span> <span class=\"token operator\">|</span> <span class=\"token number\">1.442334</span> <span class=\"token operator\">|</span> <span class=\"token number\">1.461370</span>    <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">2.569600</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">137.142857</span>  <span class=\"token operator\">|</span>         <span class=\"token number\">147.654236</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> default           <span class=\"token operator\">|</span> <span class=\"token number\">3.929377</span>  <span class=\"token operator\">|</span> <span class=\"token number\">0.000457</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.237937</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.283941</span>    <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">137.142857</span>  <span class=\"token operator\">|</span>         <span class=\"token number\">141.310171</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> logging           <span class=\"token operator\">|</span> <span class=\"token number\">0.770976</span>  <span class=\"token operator\">|</span> <span class=\"token number\">0.003419</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.645843</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.260154</span>    <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">137.142857</span>  <span class=\"token operator\">|</span>         <span class=\"token number\">138.559676</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> frontend-services <span class=\"token operator\">|</span> <span class=\"token number\">0.710425</span>  <span class=\"token operator\">|</span> <span class=\"token number\">0.003660</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.595008</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.244802</span>    <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">137.142857</span>  <span class=\"token operator\">|</span>         <span class=\"token number\">138.448290</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> data-science      <span class=\"token operator\">|</span> <span class=\"token number\">0.000284</span>  <span class=\"token operator\">|</span> <span class=\"token number\">2.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.009500</span> <span class=\"token operator\">|</span> <span class=\"token number\">2.000000</span>    <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">137.142857</span>  <span class=\"token operator\">|</span>         <span class=\"token number\">137.152641</span> <span class=\"token operator\">|</span>\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n<span class=\"token operator\">|</span> SUMMED            <span class=\"token operator\">|</span> <span class=\"token number\">47.879350</span> <span class=\"token operator\">|</span>          <span class=\"token operator\">|</span> <span class=\"token number\">9.981644</span> <span class=\"token operator\">|</span>             <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">5.139200</span> <span class=\"token operator\">|</span> <span class=\"token number\">0.000000</span> <span class=\"token operator\">|</span> <span class=\"token number\">960.000000</span>  <span class=\"token operator\">|</span>        <span class=\"token number\">1023.000194</span> <span class=\"token operator\">|</span>\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+</code></pre></div>\n<h2 id=\"-introduction-to-cloud-custodian\" style=\"position:relative;\"><a href=\"#-introduction-to-cloud-custodian\" aria-label=\" introduction to cloud custodian permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üåê Introduction to Cloud Custodian</h2>\n<p>Organizations can utilize <a href=\"https://cloudcustodian.io/docs/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">Custodian</a> as a powerful tool to effectively manage their cloud environments, with a strong emphasis on cost management. With Custodian, businesses can ensure compliance with security policies, enforce tag policies, perform garbage collection of unused resources, and actively manage costs‚Ää‚Äî‚Ääall within a unified and comprehensive solution.</p>\n<p>By incorporating Custodian into their cloud operations, organizations gain the ability to optimize resource utilization, eliminate unnecessary expenses, and achieve greater control over their cloud costs, ultimately contributing to improved financial efficiency and savings.</p>\n<h3 id=\"Ô∏è-install-kubernetes-plugin\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-install-kubernetes-plugin\" aria-label=\"Ô∏è install kubernetes plugin permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è Install Kubernetes Plugin</h3>\n<p>The Kubernetes Provider (Alpha) is an optional package which can be installed to enable writing policies that interact with Kubernetes related resources.</p>\n<p>First, ensure you have installed <a href=\"https://cloudcustodian.io/docs/quickstart/index.html#install-cc\" target=\"_blank\" rel=\"noopener noreferrer\">the base Cloud Custodian application</a>. Cloud Custodian is a Python application and must run on an actively supported version.</p>\n<p>Once the base install is complete, you are now ready to install the Kubernetes provider package using one of the following options:</p>\n<h4 id=\"option-1-install-released-packages-to-local-python-environment\" style=\"position:relative;\"><a href=\"#option-1-install-released-packages-to-local-python-environment\" aria-label=\"option 1 install released packages to local python environment permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Option 1: Install Released Packages to Local Python Environment</h4>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">pip <span class=\"token function\">install</span> c7n\npip <span class=\"token function\">install</span> c7n_kube</code></pre></div>\n<h4 id=\"option-2-install-the-latest-from-the-repository\" style=\"position:relative;\"><a href=\"#option-2-install-the-latest-from-the-repository\" aria-label=\"option 2 install the latest from the repository permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Option 2: Install the Latest from the Repository</h4>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">git</span> clone https://github.com/cloud-custodian/cloud-custodian.git\npip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-e</span> ./cloud-custodian\npip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-e</span> ./cloud-custodian/tools/c7n_kube</code></pre></div>\n<h3 id=\"-connecting-to-your-cluster\" style=\"position:relative;\"><a href=\"#-connecting-to-your-cluster\" aria-label=\" connecting to your cluster permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîó Connecting to Your Cluster</h3>\n<p>The Custodian Kubernetes provider automatically uses your Kubectl configuration or the config file set by the environment variable <code class=\"language-text\">KUBECONFIG</code>. <a href=\"https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/\" target=\"_blank\" rel=\"noopener noreferrer\">See the Kubernetes Docs</a> for more information.</p>\n<h3 id=\"-write-your-first-policy\" style=\"position:relative;\"><a href=\"#-write-your-first-policy\" aria-label=\" write your first policy permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚ö° Write Your First Policy</h3>\n<p>A policy is the primary way that Custodian is configured to manage cloud resources. It is a YAML file that follows a predetermined schema to describe what you want Custodian to do.</p>\n<p>In the example below, we will write a policy that filters for pods with the label \"custodian\" and deletes it:</p>\n<p>First, let's create a pod resource that we want to target with the policy:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">kubectl run nginx <span class=\"token parameter variable\">--image</span><span class=\"token operator\">=</span>nginx <span class=\"token parameter variable\">--labels</span><span class=\"token operator\">=</span>name<span class=\"token operator\">=</span>custodian\nkubectl get pod <span class=\"token parameter variable\">-o</span> wide --show-labels</code></pre></div>\n<p>Output:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">NAME    READY   STATUS    RESTARTS   AGE   IP           NODE     NOMINATED NODE   READINESS GATES   LABELS\nnginx   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          24s   <span class=\"token number\">10.0</span>.1.224   worker   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>           <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>            <span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span>custodian</code></pre></div>\n<p>Now in the example below, we will write a policy that filters for pods with the label \"custodian\" and deletes it:</p>\n<p><strong>Filename: custodian.yml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">policies</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>first<span class=\"token punctuation\">-</span>policy\n        <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n            Deletes pods with label name:custodian</span>\n        <span class=\"token key atrule\">resource</span><span class=\"token punctuation\">:</span> k8s.pod\n        <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> value\n                <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> metadata.labels.name\n                <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> custodian\n        <span class=\"token key atrule\">actions</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> delete</code></pre></div>\n<p>Next, run the following command to execute the policy with Custodian:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">custodian run --output-dir<span class=\"token operator\">=</span>output custodian.yml --cache-period <span class=\"token number\">0</span> <span class=\"token parameter variable\">-v</span></code></pre></div>\n<h2 id=\"-introduction-to-cloudability\" style=\"position:relative;\"><a href=\"#-introduction-to-cloudability\" aria-label=\" introduction to cloudability permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üåü Introduction to Cloudability</h2>\n<p><a href=\"https://www.apptio.com/products/cloudability/\" target=\"_blank\" rel=\"noopener noreferrer\">Apptio Cloudability</a> streamlines Kubernetes cost management by automatically discovering and mapping cloud resources associated with each cluster, providing comprehensive billing data. Their interactive tool empowers users to gain insights into cluster costs and resource consumption within a chosen timeframe.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.294117647058826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHu1UwK/8QAGBAAAgMAAAAAAAAAAAAAAAAAABARIUH/2gAIAQEAAQUCLIe//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEg/9oACAEBAAY/ApZ//8QAGxABAAICAwAAAAAAAAAAAAAAAQAhESAxUZH/2gAIAQEAAT8hs4JnoexC3of/2gAMAwEAAgADAAAAEC8f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQIBAT8QV//EAB0QAQABAwUAAAAAAAAAAAAAAAEAEBGxIVFx0fD/2gAIAQEAAT8Q1LAm62ngdRMgXmhMhgn/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Cloudability\" title=\"\" src=\"/static/55bbf8b29567b9fa7b8cddb55a8f5b26/7bf67/Cloudability.jpg\" srcset=\"/static/55bbf8b29567b9fa7b8cddb55a8f5b26/651be/Cloudability.jpg 170w,\n/static/55bbf8b29567b9fa7b8cddb55a8f5b26/d30a3/Cloudability.jpg 340w,\n/static/55bbf8b29567b9fa7b8cddb55a8f5b26/7bf67/Cloudability.jpg 680w,\n/static/55bbf8b29567b9fa7b8cddb55a8f5b26/990cb/Cloudability.jpg 1020w,\n/static/55bbf8b29567b9fa7b8cddb55a8f5b26/c44b8/Cloudability.jpg 1360w,\n/static/55bbf8b29567b9fa7b8cddb55a8f5b26/b17f8/Cloudability.jpg 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"-automatically-map-cluster-costs\" style=\"position:relative;\"><a href=\"#-automatically-map-cluster-costs\" aria-label=\" automatically map cluster costs permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîç Automatically Map Cluster Costs</h3>\n<p>Apptio Cloudability can automatically discover all the cloud resources backing each of your Kubernetes clusters and map this information back to detailed billing data. Users are provided with a specialized interactive tool that allows them to quickly understand the full cost of each cluster and underlying resource consumption within a definable time window.</p>\n<h3 id=\"-intelligently-allocate-spend\" style=\"position:relative;\"><a href=\"#-intelligently-allocate-spend\" aria-label=\" intelligently allocate spend permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üí° Intelligently Allocate Spend</h3>\n<p>Sophisticated algorithms analyze resource utilization metrics on each node‚Ää‚Äî‚ÄäCPU, memory, network, and disk‚Ää‚Äî‚Ääand evaluate pod-level Quality of Service settings so that these cluster costs can be split out and fairly allocated across Kubernetes constructs of Namespaces and Labels.</p>\n<h2 id=\"-conclusion\" style=\"position:relative;\"><a href=\"#-conclusion\" aria-label=\" conclusion permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üåü Conclusion</h2>\n<p>In order to maximize the return on investment in cloud adoption, it is crucial to effectively manage Kubernetes costs. Conventional methods of calculating resource consumption and associated expenses often prove insufficient. As organizations progress, they may seek to enhance cost efficiency by utilizing resources strategically. üíÆ</p>\n<p>I hope this blog post has been helpful.</p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":8,"rawMarkdownBody":"\n> **Efficient Tools for Streamlining FinOps üí∏**\n\n## üóØ Introduction\n\nAs organizations embrace Kubernetes for their containerized workloads, the need for effective cost optimization becomes paramount. To navigate the complex landscape of cloud-native infrastructure, leveraging efficient tools is key to streamlining FinOps practices and maximizing cost savings. Fortunately, a range of efficient tools exists to streamline FinOps practices and drive significant savings.\n\nIn this article, we will discuss cutting-edge solutions such as [Cloudability](https://www.apptio.com/products/cloudability/), [Kube-Green](https://github.com/kube-green/kube-green), [Cloud Custodian](https://cloudcustodian.io/docs/index.html), and [Kubecost](https://www.kubecost.com/). Discover how these tools empower businesses to gain cost visibility, optimize resource utilization, and achieve financial excellence in their Kubernetes deployments. Let's dive into the world of Kubernetes cost optimization made easy. üí∏\n\n![finops](./finops.png)\n\n## Introduction to Kube-Green üçÄ\n\nIn the first paragraph of this tutorial, I will explain how Kube-Green was born and why it is useful for reducing the waste of resources.\n\n### The Idea of Kube-Green üóØ\n\nIn a Kubernetes cluster, non-production namespaces typically operate during business hours, which amounts to approximately 40 hours per week out of a total of 168 weekly hours. However, it's common for resources to be allocated to pods in these namespaces even when they are not actively in use. This results in unnecessary consumption of CPU and memory resources.\n\n[Kube-Green](https://github.com/kube-green/kube-green) offers a simple solution to address this issue by halting all pods within those namespaces, effectively optimizing resource utilization during non-business hours.\n\n### How is it Possible? ü§î\n\nKube-Green is a Kubernetes controller, which defines a Custom Resource Definition (CRD) called `SleepInfo`. The `SleepInfo` CRD defines when to stop and restart the pods in a namespace. For example, in development namespaces, it is possible to stop all the pods during non-business hours: wake up every morning from Monday to Friday and stop every night from Monday to Friday.\n\n### Hands-On üë∑\n\nTo follow this guide, you should have [kubectl](https://kubernetes.io/docs/tasks/tools/#kubectl) and [kind](https://kind.sigs.k8s.io/) installed locally.\n\n- The Kubernetes command line tool: [kubectl](https://kubernetes.io/docs/tasks/tools/#kubectl)\n- [Docker](https://docs.docker.com/get-started/get-docker/)\n- Kubernetes cluster\n\nNow you have all the tools needed, let's go!\n\n### ‚û°Ô∏è Install the Cert-Manager\n\n![cert](./cert.png)\n\nWith this command, the latest release of cert-manager will be installed. You can check the correct cert-manager deployment by verifying that all the pods are correctly running.\n\n![get-ns](./get-ns.png)\n\n### Install Kube-Green „äô\n\nInstall Kube-Green with the default static install. [Click here](https://kube-green.dev/docs/install/) to see the different install methods supported.\n\nInstall Kube-Green with this command:\n```sh\nkubectl apply -f https://github.com/kube-green/kube-green/releases/latest/download/kube-green.yaml\n```\nThis command creates a `kube-green` namespace and deploys a `kube-green-controller-manager`. You can check that the pod is correctly running:\n```sh\nkubectl -n kube-green get pods\n```\n\n### ‚û°Ô∏è Setup Kube-Green in Dev Namespace\n\nTo setup Kube-Green, the `SleepInfo` resource must be created in the `dev` namespace. The `SleepInfo` spec contains:\n\n- `weekdays`: day of the week. `*` is every day, `1` is Monday, `1-5` is from Monday to Friday.\n- `sleepAt`: time in hours and minutes (HH:mm) when the namespace will go to sleep. Valid values are, for example, `19:00` or `*:*` for every minute and every hour. Resources sleep will be deployments (setting replicas value to 0) and, if `suspendCronjobs` option is set to true, cron jobs will be suspended.\n- `wakeUpAt` (optional): time in hours and minutes (HH:mm) when the namespace should be restored to the initial state (before sleep). Valid values are, for example, `19:00` or `*:*` for every minute and every hour. If wake up value is not set, the pod in the namespace will not be restored. So, you will need to deploy the initial namespace configuration to restore it.\n- `timeZone` (optional, default to UTC): time zone in IANA specification. For example, for Italian hour, set `Europe/Rome`.\n- `suspendDeployments` (optional, default to true): if set to false, deployments will not be suspended.\n- `suspendCronJobs` (optional, default to false): if set to true, cronjobs will be suspended.\n- `excludeRef` (optional): an array of objects containing the resource to exclude from sleep. It can specify exactly the name of the specified resource or match based on the labels. The possible formats are:\n    - `apiVersion`: version of the resource. Now it supports \"apps/v1\", \"batch/v1beta1\" and \"batch/v1\".\n    - `kind`: the kind of resource. Now it supports \"Deployment\" and \"CronJob\".\n    - `name`: the name of the resource or\n    - `matchLabels`: an object of strings with labels to identify resources. [Click here](https://kube-green.dev/docs/sleepinfo/) to see an example.\n\n### Example üèó\n\n```yaml\napiVersion: kube-green.com/v1alpha1\nkind: SleepInfo\nmetadata:\n    name: working-hours\nspec:\n    weekdays: \"1-5\"\n    sleepAt: \"20:00\"\n    wakeUpAt: \"08:00\"\n    timeZone: \"Europe/Rome\"\n```\n\nWith this CRD, it's configured to sleep at 20:00 and wake up at 08:00 on weekdays only for Deployments.\n\n## Introduction to OpenCost by Kubecost üí∞\n\n[kubectl-cost](https://github.com/kubecost/kubectl-cost) is a [kubectl plugin](https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/) that provides easy CLI access to Kubernetes cost allocation metrics via the [OpenCost API](https://www.opencost.io/docs/api). It allows developers, DevOps, and others to quickly determine the cost & efficiency for any Kubernetes workload.\n\n### OpenCost Setup\n\nOpenCost requires Prometheus for scraping metrics and data storage. Follow the steps below to install OpenCost.\n\n### Quick Start Installation üìÅ\n\nThese commands will get you started immediately with OpenCost.\n\n#### Install Prometheus\n\n```sh\nhelm install my-prometheus --repo https://prometheus-community.github.io/helm-charts prometheus \\\n    --namespace prometheus --create-namespace \\\n    --set pushgateway.enabled=false \\\n    --set alertmanager.enabled=false \\\n    -f https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/prometheus/extraScrapeConfigs.yaml\n```\n\n#### Install OpenCost\n\n```sh\nkubectl apply --namespace opencost -f https://raw.githubusercontent.com/opencost/opencost/develop/kubernetes/opencost.yaml\n```\n\n#### Install Kubecost\n\nThis software requires that you have a running deployment of Kubecost in your cluster. The recommended path is to use Helm, but there are [alternative install options](https://docs.kubecost.com/install).\n\n##### Helm 3\n\n```sh\nhelm repo add kubecost https://kubecost.github.io/cost-analyzer/\nhelm upgrade -i --create-namespace kubecost kubecost/cost-analyzer --namespace kubecost --set kubecostToken=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n```\n\n#### Install kubectl-cost\n\n##### Krew\n\nIf you have [Krew](https://krew.sigs.k8s.io/), the kubectl plugin manager, installed:\n\n```sh\nkubectl krew install cost\n```\n\nThe Krew manifest can be found [here](https://github.com/kubecost/kubectl-cost/blob/master/krew.yaml).\n\n### Example Usage\n\nKube-Green offers aggregation-based cost monitoring with subcommands like namespace, deployment, controller, label, pod, and node. These subcommands provide cost information aggregated by their respective names. There are two modes: rate (default) and non-rate (historical). Rate mode shows projected monthly cost based on activity, while non-rate mode displays total cost for the specified window duration.\n\n#### Show the Projected Monthly Rate for Each Namespace\n\n```sh\nkubectl cost namespace --show-all-resources\n```\n\nOutput:\n\n```shell\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n| NAMESPACE         | CPU       | CPU EFF. | MEMORY   | MEMORY EFF. | GPU      | PV       | NETWORK  | SHARED COST | MONTHLY RATE (ALL) |\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n| kube-system       | 29.366083 | 0.066780 | 5.226317 | 0.928257    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         171.735257 |\n| kubecost-stage    | 6.602761  | 0.158069 | 1.824703 | 1.594699    | 0.000000 | 2.569600 | 0.000000 | 137.142857  |         148.139922 |\n| kubecost          | 6.499445  | 0.116629 | 1.442334 | 1.461370    | 0.000000 | 2.569600 | 0.000000 | 137.142857  |         147.654236 |\n| default           | 3.929377  | 0.000457 | 0.237937 | 0.283941    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         141.310171 |\n| logging           | 0.770976  | 0.003419 | 0.645843 | 0.260154    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         138.559676 |\n| frontend-services | 0.710425  | 0.003660 | 0.595008 | 0.244802    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         138.448290 |\n| data-science      | 0.000284  | 2.000000 | 0.009500 | 2.000000    | 0.000000 | 0.000000 | 0.000000 | 137.142857  |         137.152641 |\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n| SUMMED            | 47.879350 |          | 9.981644 |             | 0.000000 | 5.139200 | 0.000000 | 960.000000  |        1023.000194 |\n+-------------------+-----------+----------+----------+-------------+----------+----------+----------+-------------+--------------------+\n```\n\n## üåê Introduction to Cloud Custodian\n\nOrganizations can utilize [Custodian](https://cloudcustodian.io/docs/index.html) as a powerful tool to effectively manage their cloud environments, with a strong emphasis on cost management. With Custodian, businesses can ensure compliance with security policies, enforce tag policies, perform garbage collection of unused resources, and actively manage costs‚Ää‚Äî‚Ääall within a unified and comprehensive solution.\n\nBy incorporating Custodian into their cloud operations, organizations gain the ability to optimize resource utilization, eliminate unnecessary expenses, and achieve greater control over their cloud costs, ultimately contributing to improved financial efficiency and savings.\n\n### üõ†Ô∏è Install Kubernetes Plugin\n\nThe Kubernetes Provider (Alpha) is an optional package which can be installed to enable writing policies that interact with Kubernetes related resources.\n\nFirst, ensure you have installed [the base Cloud Custodian application](https://cloudcustodian.io/docs/quickstart/index.html#install-cc). Cloud Custodian is a Python application and must run on an actively supported version.\n\nOnce the base install is complete, you are now ready to install the Kubernetes provider package using one of the following options:\n\n#### Option 1: Install Released Packages to Local Python Environment\n\n```sh\npip install c7n\npip install c7n_kube\n```\n\n#### Option 2: Install the Latest from the Repository\n\n```sh\ngit clone https://github.com/cloud-custodian/cloud-custodian.git\npip install -e ./cloud-custodian\npip install -e ./cloud-custodian/tools/c7n_kube\n```\n\n### üîó Connecting to Your Cluster\n\nThe Custodian Kubernetes provider automatically uses your Kubectl configuration or the config file set by the environment variable `KUBECONFIG`. [See the Kubernetes Docs](https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/) for more information.\n\n### ‚ö° Write Your First Policy\n\nA policy is the primary way that Custodian is configured to manage cloud resources. It is a YAML file that follows a predetermined schema to describe what you want Custodian to do.\n\nIn the example below, we will write a policy that filters for pods with the label \"custodian\" and deletes it:\n\nFirst, let's create a pod resource that we want to target with the policy:\n\n```sh\nkubectl run nginx --image=nginx --labels=name=custodian\nkubectl get pod -o wide --show-labels\n```\n\nOutput:\n\n```sh\nNAME    READY   STATUS    RESTARTS   AGE   IP           NODE     NOMINATED NODE   READINESS GATES   LABELS\nnginx   1/1     Running   0          24s   10.0.1.224   worker   <none>           <none>            name=custodian\n```\n\nNow in the example below, we will write a policy that filters for pods with the label \"custodian\" and deletes it:\n\n**Filename: custodian.yml**\n\n```yaml\npolicies:\n    - name: my-first-policy\n        description: |\n            Deletes pods with label name:custodian\n        resource: k8s.pod\n        filters:\n            - type: value\n                key: metadata.labels.name\n                value: custodian\n        actions:\n            - type: delete\n```\n\nNext, run the following command to execute the policy with Custodian:\n\n```sh\ncustodian run --output-dir=output custodian.yml --cache-period 0 -v\n```\n\n## üåü Introduction to Cloudability\n\n[Apptio Cloudability](https://www.apptio.com/products/cloudability/) streamlines Kubernetes cost management by automatically discovering and mapping cloud resources associated with each cluster, providing comprehensive billing data. Their interactive tool empowers users to gain insights into cluster costs and resource consumption within a chosen timeframe.\n\n![Cloudability](./Cloudability.jpg)\n\n### üîç Automatically Map Cluster Costs\n\nApptio Cloudability can automatically discover all the cloud resources backing each of your Kubernetes clusters and map this information back to detailed billing data. Users are provided with a specialized interactive tool that allows them to quickly understand the full cost of each cluster and underlying resource consumption within a definable time window.\n\n### üí° Intelligently Allocate Spend\n\nSophisticated algorithms analyze resource utilization metrics on each node‚Ää‚Äî‚ÄäCPU, memory, network, and disk‚Ää‚Äî‚Ääand evaluate pod-level Quality of Service settings so that these cluster costs can be split out and fairly allocated across Kubernetes constructs of Namespaces and Labels.\n\n## üåü Conclusion\n\nIn order to maximize the return on investment in cloud adoption, it is crucial to effectively manage Kubernetes costs. Conventional methods of calculating resource consumption and associated expenses often prove insufficient. As organizations progress, they may seek to enhance cost efficiency by utilizing resources strategically. üíÆ\n\nI hope this blog post has been helpful.\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":1430},"frontmatter":{"id":"f5d677c2bfbec60f0779c219","path":"/blog/kubernetes-cost-optimization/","humanDate":"Oct 28, 2024","fullDate":"2024-10-28","title":"Kubernetes Cost Optimization Made Easy: Efficient Tools for Streamlining FinOps üí∞","keywords":["Kubernetes","cost optimization","FinOps","cloud costs","K8s","DevOps"],"excerpt":"Discover effective strategies and tools for optimizing costs in your Kubernetes environment, making FinOps simpler and more efficient.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAADB0lEQVR42iWS20+aBxiHudn+gV3uetmyrMnSrWvSZVnrXGrWg6WiYs2Qo0ApU9EyUdACq9Hh2Vr9+JSTQilYRBFbrLRWC9SKTZzbdIfuYlfLsv/h2Ve9+OV9r54870H2eq/M05VF5oRJlu/NsRAJcD8okk1EWY7Ps55JopBXcPbUhzSc/wSH+gvGPCaGHY101H6Mz/QlYmc12gsnaPy2Dtkv28+Jz05zT0o8IEgwP6m5wFEfFe8SmB7n/Il3mTUpCA/0MCSOEEkG8Vgv0nL5PXwtcmwWDVVX67C7+5Ed7BRZX0oSmZ7gQWSWsFRjM1NHsIxkmIuFEMxy4tYGtkQf5l4n9mkRlXuQq/V1nNa2cK5Rj97WxeDUDLLDconDnefS2CnJVGApFj6yW01G2S8+o/xkFX3lSTxVn5LoNtFW8xnGa19R1WShsl+g+R84Y3NhbW1nKBA5NtwvblB6nJWMpB2GZ0iGZ8mlEhyWX/A4JlL9wTv47RY6rzfTZdWg0jUhvFnFxDx1pb+otDmpVtTT1tV7DPy5tEnmfpTQ1BjByTESQYG4OEYhnyMf9fNDzef0iAsYPXcwDEyhdA3QJwooLK2o9BouyeXUKq9hMJqPgX+Un/Hby6fHV5YM84tRXm2k+Htvl+R8iHZvH3r3KIYeHx1CDIXdTYWxjWqVDp3BiLqlFW8qw+BiBtnvu0VWsttksjv8uVvgVWkLf3aNH1MPSa+ts7Kc5juXG4dVi0KppL2zg8amJjTtvagsNmqarcil1N8ewTohItveLOEM/Ysz/B97WwVyG3ka5rNcT+QYTj9iMfUA/c3veRjysRbyMn6rmVvmy9wwXEIpgWu0JiobtHx07hvUDi+yX18WCCzsE1w4IP1ojfd77vCW1sXb6m4u9kmvk0pyRa3jZMXXdLdZSDvNZNxKCsNn+WnBjr/vBopaOWqVEoNJ9+Ztihy8eMLr8iYzqTTWUYEucY7WoUmWVrMsS4a1iir6dacYVZ8mYddQ8I+zcdfFiFOHt9eGw3ObfMTDQfIm/wOloUS8d3ynaAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png","srcSet":"/static/aa89597a3e00977bbce465bb28732f25/38de2/image.png 750w,\n/static/aa89597a3e00977bbce465bb28732f25/be7fa/image.png 1080w,\n/static/aa89597a3e00977bbce465bb28732f25/ee3cf/image.png 1366w,\n/static/aa89597a3e00977bbce465bb28732f25/3089c/image.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/aa89597a3e00977bbce465bb28732f25/45f0d/image.webp 750w,\n/static/aa89597a3e00977bbce465bb28732f25/eedfa/image.webp 1080w,\n/static/aa89597a3e00977bbce465bb28732f25/e048d/image.webp 1366w,\n/static/aa89597a3e00977bbce465bb28732f25/37915/image.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5588541666666667}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/kubernetes-networking-istio-sidecarless/","title":"Kubernetes Networking with Ambient: Istio's Sidecarless Innovation ‚ò∏","date":"2024-10-28 21:30:00"},"excerpt":"The Sidecarless Approach to Connect K8s Services ‚öõ üóØ Introduction Istio with Envoy sidecars has been a great service mesh solution‚Ä¶"},"nextThought":{"frontmatter":{"path":"/blog/kubernetes-pod-priority-preemption/","title":"Kubernetes Pod Priority and Preemption: How to Ensure Your Critical Pods Get the Resources They Need üöÄ","date":"2024-10-28 20:30:00"},"excerpt":"A Guide to Managing Pod Priorities üìä üóØ Introduction When running a Kubernetes cluster, it's important to ensure that your critical pods‚Ä¶"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}