{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/lambda-container-image-deployment/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Go beyond built-in¬†runtimes</strong></p>\n</blockquote>\n<h2 id=\"‚ÑπÔ∏è-overview\" style=\"position:relative;\"><a href=\"#%E2%84%B9%EF%B8%8F-overview\" aria-label=\"‚ÑπÔ∏è overview permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚ÑπÔ∏è Overview</h2>\n<p>AWS Lambda allows you to run your code inside Docker containers! This feature opens up a lot of possibilities. You can use any programming language or framework by packaging it into a container image.</p>\n<p>There are no limitations from Lambda's built-in runtimes. Deploying Lambda functions also becomes much easier.</p>\n<p>Instead of zipping up code and dependencies, we can build a Docker image with everything our function needs. Just push the image to Amazon's container registry and configure Lambda to use it.</p>\n<p>In this blog post, we'll show you how to create a Lambda function that runs in a Docker container.</p>\n<h3 id=\"amazon-ecr\" style=\"position:relative;\"><a href=\"#amazon-ecr\" aria-label=\"amazon ecr permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><strong>Amazon ECR:</strong></h3>\n<p>Amazon Elastic Container Registry (ECR) is a fully managed container registry provided by AWS. It allows you to store, manage, and deploy container images securely.</p>\n<p><strong>Key points about ECR:</strong></p>\n<ul>\n<li>üõ†Ô∏è Eliminates the need to operate your own container repository.</li>\n<li>üîó Integrates natively with other AWS services like ECS, EKS, and Lambda.</li>\n<li>üöÄ Provides high-performance hosting for your images.</li>\n<li>üîí Automatically encrypts images at rest and transfers them over HTTPS.</li>\n<li>üìù Offers resource-based permissions and lifecycle policies for images.</li>\n</ul>\n<h2 id=\"using-ecr-with-awslambda\" style=\"position:relative;\"><a href=\"#using-ecr-with-awslambda\" aria-label=\"using ecr with awslambda permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Using ECR with AWS¬†Lambda</h2>\n<p>Traditionally, you deployed Lambda functions by uploading a ZIP file containing your code and dependencies. However, AWS now allows you to package your Lambda function code as a container image and deploy it from ECR.</p>\n<p>The main benefits of using container images for Lambda functions include:</p>\n<ul>\n<li>üåê Use any programming language, framework, or base image by customizing the container.</li>\n<li>üì¶ Larger deployment packages up to 10GB compared to 50MB zipped archives.</li>\n<li>üõ†Ô∏è Easier dependency management and code organization within the container.</li>\n<li>üîÑ Consistent build and deployment process across different environments.</li>\n</ul>\n<p>To use a container image for your Lambda function, you first build and push the Docker image to an ECR repository. Then, you create the Lambda function and specify the ECR image URI as the deployment package.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 7.0588235294117645%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAR0lEQVR42h3LwQkAIQwAweu/HzHRRwJCRFF/1rMHfpfZb85JRHDOwd0REcyMlBK1VsYYr/fen7v30loj54yqstZ6bymFvTc/W3NBueEIZggAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"steps\" title=\"\" src=\"/static/1fe011f1f462d0e3501c9340ce1ee528/c5bb3/steps.png\" srcset=\"/static/1fe011f1f462d0e3501c9340ce1ee528/04472/steps.png 170w,\n/static/1fe011f1f462d0e3501c9340ce1ee528/9f933/steps.png 340w,\n/static/1fe011f1f462d0e3501c9340ce1ee528/c5bb3/steps.png 680w,\n/static/1fe011f1f462d0e3501c9340ce1ee528/b12f7/steps.png 1020w,\n/static/1fe011f1f462d0e3501c9340ce1ee528/c1b63/steps.png 1200w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"hands-on-walkthrough\" style=\"position:relative;\"><a href=\"#hands-on-walkthrough\" aria-label=\"hands on walkthrough permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Hands-On Walkthrough</h2>\n<p>To show how this works in practice, this walkthrough uses an environment with the <a href=\"https://aws.amazon.com/cli/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS CLI</a>, <a href=\"https://www.python.org/downloads/\" target=\"_blank\" rel=\"noopener noreferrer\">Python</a>, and <a href=\"https://docs.docker.com/get-docker/\" target=\"_blank\" rel=\"noopener noreferrer\">Docker</a> installed.</p>\n<p>Create a <code class=\"language-text\">Dockerfile</code> file and paste the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> amazon/aws-lambda-python:3.10</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> app.py ./</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"app.handler\"</span>]</span></code></pre></div>\n<p>Create <code class=\"language-text\">app.py</code> as lambda handler:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> sys\n<span class=\"token keyword\">def</span> <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello from AWS Lambda using Python container image'</span> <span class=\"token operator\">+</span> sys<span class=\"token punctuation\">.</span>version <span class=\"token operator\">+</span> <span class=\"token string\">'!'</span></code></pre></div>\n<p>Next, run the following command in the console to authenticate to the ECR registry. Replace with the account ID of the AWS account you are using and with the code of the region you are using.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">aws ecr get-login-password <span class=\"token parameter variable\">--region</span> <span class=\"token operator\">&lt;</span>Region<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token function\">docker</span> login <span class=\"token parameter variable\">--username</span> AWS --password-stdin <span class=\"token operator\">&lt;</span>Account-ID<span class=\"token operator\">></span>.dkr.ecr.<span class=\"token operator\">&lt;</span>Region<span class=\"token operator\">></span>.amazonaws.com</code></pre></div>\n<p>Create a new repository in ECR and push the Docker image to the repo.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">aws ecr create-repository --repository-name demo-lambda --image-scanning-configuration <span class=\"token assign-left variable\">scanOnPush</span><span class=\"token operator\">=</span>true</code></pre></div>\n<p>After that, run the following command to create the container image:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-t</span> demo-lambda <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>Then, run the following commands to tag and push the image:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">docker</span> tag get-customer:latest <span class=\"token operator\">&lt;</span>Account-ID<span class=\"token operator\">></span>.dkr.ecr.<span class=\"token operator\">&lt;</span>Region<span class=\"token operator\">></span>.amazonaws.com/get-customer:latest\n\n<span class=\"token function\">docker</span> push <span class=\"token operator\">&lt;</span>Account-ID<span class=\"token operator\">></span>.dkr.ecr.<span class=\"token operator\">&lt;</span>Region<span class=\"token operator\">></span>.amazonaws.com/get-customer:latest</code></pre></div>\n<p>Next step is to create the Lambda function:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">aws lambda create-function <span class=\"token punctuation\">\\</span>\n    --function-name demo-lambda <span class=\"token punctuation\">\\</span>\n    --package-type Image <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--code</span> <span class=\"token assign-left variable\">ImageUri</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>Account-ID<span class=\"token operator\">></span>.dkr.ecr.<span class=\"token operator\">&lt;</span>Region<span class=\"token operator\">></span>.amazonaws.com/demo-lambda:latest <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--role</span> arn:aws:iam::<span class=\"token operator\">&lt;</span>Account-ID<span class=\"token operator\">></span>:role/execution_role <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--region</span> <span class=\"token operator\">&lt;</span>Region<span class=\"token operator\">></span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--timeout</span> <span class=\"token number\">15</span> <span class=\"token punctuation\">\\</span>\n    --memory-size <span class=\"token number\">512</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--description</span> <span class=\"token string\">\"A Lambda function created using a container image.\"</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">--function-name</code>: The name you want to assign to your Lambda function (demo-lambda).</li>\n<li><code class=\"language-text\">--package-type Image</code>: Specifies that the deployment package is a container image.</li>\n<li><code class=\"language-text\">--code ImageUri=...</code>: The URI of the container image in ECR.</li>\n<li><code class=\"language-text\">--role</code>: The ARN of the IAM role that Lambda assumes when it executes your function. Ensure this role has the necessary permissions.</li>\n<li><code class=\"language-text\">--region</code>: The AWS region where you want to create the Lambda function.</li>\n<li><code class=\"language-text\">--timeout</code>: The maximum execution time in seconds for the function.</li>\n<li><code class=\"language-text\">--memory-size</code>: The amount of memory available to the function at runtime.</li>\n<li><code class=\"language-text\">--description</code>: A description of the function.</li>\n</ul>\n<p>Make sure to replace placeholders like with your actual values.</p>\n<p>After, you can invoke the container image as a Lambda function:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">aws lambda invoke --function-name demo-lambda <span class=\"token parameter variable\">--region</span> <span class=\"token operator\">&lt;</span>Region<span class=\"token operator\">></span> outfile                                                                                                                          \n<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"StatusCode\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">200</span>,\n    <span class=\"token string\">\"ExecutedVersion\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"<span class=\"token variable\">$LATEST</span>\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">cat</span> outfile                                                                                                                                                                                                    \n<span class=\"token string\">\"Hello from AWS Lambda using Python3.10.2 (default, June 01 2024, 09:22:02) <span class=\"token entity\" title=\"\\n\">\\n</span>[GCC 8.3.0]!\"</span></code></pre></div>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Conclusion</h2>\n<p>This blog post showed an easy way to use Docker containers with AWS Lambda functions.</p>\n<p>By building a Docker image with your code, you can run any programming language or tools on Lambda. Deploying is simple‚Ää-‚Ääjust upload your container image to AWS. Give it a try to make Lambda more flexible for your apps!</p>\n<h2 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>References</h2>\n<ul>\n<li><a href=\"https://dev.to/vumdao/deploy-python-lambda-functions-with-container-image-5hgj\" target=\"_blank\" rel=\"noopener noreferrer\">Deploy Python Lambda Functions with Container Image</a></li>\n<li><a href=\"https://www.pluralsight.com/resources/blog/cloud/packaging-aws-lambda-functions-as-container-images\" target=\"_blank\" rel=\"noopener noreferrer\">Packaging AWS Lambda Functions as Container Images</a></li>\n<li><a href=\"https://community.aws/content/2Z4KyWJP5qXDD6StOWJZFXzoRZq/creating-a-lambda-function-with-a-container-based-runtime\" target=\"_blank\" rel=\"noopener noreferrer\">Creating a Lambda Function with a Container-Based Runtime</a></li>\n</ul>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p><strong>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</strong></p>","timeToRead":4,"rawMarkdownBody":"\n\n> **Go beyond built-in¬†runtimes**\n\n## ‚ÑπÔ∏è Overview\n\nAWS Lambda allows you to run your code inside Docker containers! This feature opens up a lot of possibilities. You can use any programming language or framework by packaging it into a container image.\n\nThere are no limitations from Lambda's built-in runtimes. Deploying Lambda functions also becomes much easier.\n\nInstead of zipping up code and dependencies, we can build a Docker image with everything our function needs. Just push the image to Amazon's container registry and configure Lambda to use it.\n\nIn this blog post, we'll show you how to create a Lambda function that runs in a Docker container.\n\n### **Amazon ECR:**\n\nAmazon Elastic Container Registry (ECR) is a fully managed container registry provided by AWS. It allows you to store, manage, and deploy container images securely.\n\n**Key points about ECR:**\n\n- üõ†Ô∏è Eliminates the need to operate your own container repository.\n- üîó Integrates natively with other AWS services like ECS, EKS, and Lambda.\n- üöÄ Provides high-performance hosting for your images.\n- üîí Automatically encrypts images at rest and transfers them over HTTPS.\n- üìù Offers resource-based permissions and lifecycle policies for images.\n\n## Using ECR with AWS¬†Lambda\n\nTraditionally, you deployed Lambda functions by uploading a ZIP file containing your code and dependencies. However, AWS now allows you to package your Lambda function code as a container image and deploy it from ECR.\n\nThe main benefits of using container images for Lambda functions include:\n\n- üåê Use any programming language, framework, or base image by customizing the container.\n- üì¶ Larger deployment packages up to 10GB compared to 50MB zipped archives.\n- üõ†Ô∏è Easier dependency management and code organization within the container.\n- üîÑ Consistent build and deployment process across different environments.\n\nTo use a container image for your Lambda function, you first build and push the Docker image to an ECR repository. Then, you create the Lambda function and specify the ECR image URI as the deployment package.\n\n![steps](./steps.png)\n\n## Hands-On Walkthrough\n\nTo show how this works in practice, this walkthrough uses an environment with the [AWS CLI](https://aws.amazon.com/cli/), [Python](https://www.python.org/downloads/), and [Docker](https://docs.docker.com/get-docker/) installed.\n\nCreate a `Dockerfile` file and paste the following code:\n\n```dockerfile\nFROM amazon/aws-lambda-python:3.10\n\nCOPY app.py ./\n\nCMD [\"app.handler\"]\n```\n\nCreate `app.py` as lambda handler:\n\n```python\nimport sys\ndef handler(event, context):\n    return 'Hello from AWS Lambda using Python container image' + sys.version + '!'\n```\n\nNext, run the following command in the console to authenticate to the ECR registry. Replace with the account ID of the AWS account you are using and with the code of the region you are using.\n\n```sh\naws ecr get-login-password --region <Region> | docker login --username AWS --password-stdin <Account-ID>.dkr.ecr.<Region>.amazonaws.com\n```\n\nCreate a new repository in ECR and push the Docker image to the repo.\n\n```sh\naws ecr create-repository --repository-name demo-lambda --image-scanning-configuration scanOnPush=true\n```\n\nAfter that, run the following command to create the container image:\n\n```sh\ndocker build -t demo-lambda .\n```\n\nThen, run the following commands to tag and push the image:\n\n```sh\ndocker tag get-customer:latest <Account-ID>.dkr.ecr.<Region>.amazonaws.com/get-customer:latest\n\ndocker push <Account-ID>.dkr.ecr.<Region>.amazonaws.com/get-customer:latest\n```\n\nNext step is to create the Lambda function:\n\n```sh\naws lambda create-function \\\n    --function-name demo-lambda \\\n    --package-type Image \\\n    --code ImageUri=<Account-ID>.dkr.ecr.<Region>.amazonaws.com/demo-lambda:latest \\\n    --role arn:aws:iam::<Account-ID>:role/execution_role \\\n    --region <Region> \\\n    --timeout 15 \\\n    --memory-size 512 \\\n    --description \"A Lambda function created using a container image.\"\n```\n\n- `--function-name`: The name you want to assign to your Lambda function (demo-lambda).\n- `--package-type Image`: Specifies that the deployment package is a container image.\n- `--code ImageUri=...`: The URI of the container image in ECR.\n- `--role`: The ARN of the IAM role that Lambda assumes when it executes your function. Ensure this role has the necessary permissions.\n- `--region`: The AWS region where you want to create the Lambda function.\n- `--timeout`: The maximum execution time in seconds for the function.\n- `--memory-size`: The amount of memory available to the function at runtime.\n- `--description`: A description of the function.\n\nMake sure to replace placeholders like with your actual values.\n\nAfter, you can invoke the container image as a Lambda function:\n\n```sh\naws lambda invoke --function-name demo-lambda --region <Region> outfile                                                                                                                          \n{\n    \"StatusCode\": 200,\n    \"ExecutedVersion\": \"$LATEST\"\n}\ncat outfile                                                                                                                                                                                                    \n\"Hello from AWS Lambda using Python3.10.2 (default, June 01 2024, 09:22:02) \\n[GCC 8.3.0]!\"\n```\n\n## Conclusion\n\nThis blog post showed an easy way to use Docker containers with AWS Lambda functions.\n\nBy building a Docker image with your code, you can run any programming language or tools on Lambda. Deploying is simple‚Ää-‚Ääjust upload your container image to AWS. Give it a try to make Lambda more flexible for your apps!\n\n## References\n\n- [Deploy Python Lambda Functions with Container Image](https://dev.to/vumdao/deploy-python-lambda-functions-with-container-image-5hgj)\n- [Packaging AWS Lambda Functions as Container Images](https://www.pluralsight.com/resources/blog/cloud/packaging-aws-lambda-functions-as-container-images)\n- [Creating a Lambda Function with a Container-Based Runtime](https://community.aws/content/2Z4KyWJP5qXDD6StOWJZFXzoRZq/creating-a-lambda-function-with-a-container-based-runtime)\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\n**Subscribe to our newsletter for more insights on AWS cloud computing and containers.**\n","wordCount":{"words":679},"frontmatter":{"id":"c7d4f5ad157875f3c8fc4777","path":"/blog/lambda-container-image-deployment/","humanDate":"Oct 27, 2024","fullDate":"2024-10-27","title":"How to Package and Deploy a Lambda Function as a Container Image","keywords":["AWS Lambda","Container Images","DevOps","Serverless","Platform engineering"],"excerpt":"How to package and deploy AWS Lambda functions as container images, enabling greater flexibility and customization beyond built-in runtimes.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACWUlEQVR42m2Sa08TURCG+1f57L/wgxpDQjCGCMqtDYKVklpLgZZykZtiCCiEolwtUC7t9uzu2d12u4XH2UX0g3x4MyezM++Z8+zEBjMBicmA3JLPVslh/1jzdduhsGqz/s2hUlEEDRNPKxquScOpy/lODW3gWjVc25Aai5ZnEjspa2pVje/WSSXjJAZ7WCxmyec+kJ9OEx/sJfV+jLnCFMV8jv7Xr5iVmEqOMpIYYmlxNsq3xLAtihGYEGiMqzOK0pRJp9jd3mRteVHO4+SyaT6vLESGC8VplsVgY32F9ESSmVyG1aV55iWvqhVufE2s6SjAjz50d3WSHBthYS7PyxddPH3ymPjwAPmZHAP9fRQk5qeyDL7pZXQkHk3Y+fwZfa962C99h7ZHLHx7qKbw0cLDEy62usKxqtGNpZ1NRt/GmRgfY2oyTaV8EDFtCDfXrglThTavI36hz1/De7WbVoQginLj0UFJDBOkU+/4KDjKvw5pB00ani01tvTcR+thw1CnNQPHMbmRQt+64LYlTW0f23HQjsYUXqpe48tJDdMK66z/DcO/REtzaRh0ZA75UbmWCRvs9TyiWujFCwJMVeM2cPnZ3YFaS2I0WihVf9jQdxWeXcVQBnunFerSTOBxsbOMdbJNu+VJTqFsLbk1zPNDtOth/Znw1peBRDFPwIbLadevsIzweTqaNOQSctSy0K4oPN+2LK4rB5TL+5wclbgSU9p3rzOVTVX2OWbXL6ONDxWatDwrUuDd/6R/0M8rDhs7mvUtk8NjRfnMYnPXI/vJZzgbMJQJ+A2UMhjHoZMIiwAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/6f73fde3d44f20f2eedb2af215ace8d1/d4479/lambda-container-cover.png","srcSet":"/static/6f73fde3d44f20f2eedb2af215ace8d1/38de2/lambda-container-cover.png 750w,\n/static/6f73fde3d44f20f2eedb2af215ace8d1/f79fe/lambda-container-cover.png 1080w,\n/static/6f73fde3d44f20f2eedb2af215ace8d1/d4479/lambda-container-cover.png 1200w","sizes":"100vw"},"sources":[{"srcSet":"/static/6f73fde3d44f20f2eedb2af215ace8d1/45f0d/lambda-container-cover.webp 750w,\n/static/6f73fde3d44f20f2eedb2af215ace8d1/3c63c/lambda-container-cover.webp 1080w,\n/static/6f73fde3d44f20f2eedb2af215ace8d1/160d6/lambda-container-cover.webp 1200w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5583333333333333}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/kubernetes-storage-deep-dive/","title":"Understanding storage in Kubernetes üíæ","date":"2024-10-28 10:20:00"},"excerpt":"A Deep Dive into Kubernetes Storage üíø üóØ Introduction Managing data within Kubernetes pods can be challenging, as pods are temporary and‚Ä¶"},"nextThought":{"frontmatter":{"path":"/blog/kubernetes-cluster-autoscaler-cost-effective/","title":"Kubernetes Cluster autoscaler: automatically scale your AWS EKS cluster for cost savings and performance","date":"2024-10-27 20:34:00"},"excerpt":"Optimal AWS EKS resource utilization üåÉ Introduction Kubernetes Cluster Autoscaler is an excellent tool that can help you save money and‚Ä¶"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}