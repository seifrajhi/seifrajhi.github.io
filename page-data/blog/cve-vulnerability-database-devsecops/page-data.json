{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/cve-vulnerability-database-devsecops/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Shifting Security Left</strong>\n<strong>üîÑ Shifting Security Left</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìå Introduction</h2>\n<p>Common Vulnerabilities and Exposures (CVE) is a standardized dictionary of publicly known information security vulnerabilities and exposures. It is maintained by <a href=\"https://www.mitre.org/\" target=\"_blank\" rel=\"noopener noreferrer\">MITRE</a> and is used by many security-related products and services, including vulnerability management and remediation, intrusion detection, and incident management.</p>\n<p>In <a href=\"https://www.devsecops.org/\" target=\"_blank\" rel=\"noopener noreferrer\">DevSecOps</a>, the <a href=\"https://cve.mitre.org/\" target=\"_blank\" rel=\"noopener noreferrer\">CVE</a> vulnerability database is an essential tool for tracking and responding to vulnerabilities in software and systems. By integrating the CVE database into your DevSecOps pipeline, you can identify and fix vulnerabilities early in the development process, before they can be exploited by attackers.</p>\n<p>This blog post will explain what the CVE vulnerability database is, how to use it in DevSecOps, and how to respond to CVEs in builds. We will also discuss CVE severity and how to prioritize remediation efforts.</p>\n<h2 id=\"-rationale\" style=\"position:relative;\"><a href=\"#-rationale\" aria-label=\" rationale permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üß† Rationale</h2>\n<p>Reacting to CVEs in the real world requires careful consideration. You need to assess whether each CVE is serious enough to warrant the rejection of a build and a delay of a release. This is a careful balancing act, as you don't want to release code with serious known vulnerabilities, but you also don't want to cause constant delays due to unexpected CVE announcements.</p>\n<h3 id=\"the-cve-system\" style=\"position:relative;\"><a href=\"#the-cve-system\" aria-label=\"the cve system permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>The CVE System</h3>\n<p>The CVE List is a set of records that describe specific vulnerabilities or exposures. It is maintained by a large community of trusted entities and individuals.</p>\n<ul>\n<li><strong>Vulnerability</strong>: A flaw in a software, firmware, hardware, or service component that can be exploited to cause a negative impact to the confidentiality, integrity, or availability of an impacted component or components.</li>\n<li><strong>Exposure</strong>: A code or configuration error that can be exploited to gain indirect and often hard-to-discover access to application data such as customer information.</li>\n</ul>\n<h3 id=\"assessing-cve-severity\" style=\"position:relative;\"><a href=\"#assessing-cve-severity\" aria-label=\"assessing cve severity permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Assessing CVE Severity</h3>\n<p>There are a number of factors to consider when assessing the severity of a CVE, including:</p>\n<ul>\n<li><strong>Exploitability</strong>: How easy is it for an attacker to exploit the vulnerability?</li>\n<li><strong>Impact</strong>: What is the potential impact of the vulnerability if it is exploited?</li>\n<li><strong>Prevalence</strong>: How widespread is the vulnerability?</li>\n<li><strong>Patch Availability</strong>: Is there a patch available to fix the vulnerability?</li>\n</ul>\n<p>You can use these factors to prioritize remediation efforts and decide which CVEs warrant the rejection of a build and a delay of a release.</p>\n<h3 id=\"cve-security-and-beyond\" style=\"position:relative;\"><a href=\"#cve-security-and-beyond\" aria-label=\"cve security and beyond permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>CVE, Security and Beyond</h3>\n<p>The CVE List plays a vital role in the cybersecurity world as an essential resource around which security products and services can share standardized information. However, the CVE List alone is not sufficient for building an effective vulnerability remediation program. Other information sources as well as advanced analytic capabilities are required in order to achieve the risk assessment and actionable remediation guidelines that are the hallmarks of a cutting-edge vulnerability remediation solution.</p>\n<h3 id=\"quick-cve-recap\" style=\"position:relative;\"><a href=\"#quick-cve-recap\" aria-label=\"quick cve recap permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Quick CVE Recap</h3>\n<p>First, though, a brief definition of CVEs. Short for Common Vulnerabilities and Exposures, a CVE is a known vulnerability in a certain piece of software.</p>\n<p>The concept of CVEs was introduced in 1999 in an effort to provide a universal framework for identifying security issues. The idea is that whenever a vulnerability is discovered, a CVE entry will be created for it. The CVE entry can then be accessed and shared by the public. The <a href=\"https://www.cve.org/\" target=\"_blank\" rel=\"noopener noreferrer\">official CVE list</a> is maintained by MITRE, a nonprofit group also known for the <a href=\"https://www.splunk.com/en_us/data-insider/what-is-the-mitre-att-and-ck-framework.html\" target=\"_blank\" rel=\"noopener noreferrer\">MITRE ATT&#x26;CK methodology</a>.</p>\n<p>The big caveat here is that the official CVE list does not include an assessment of the severity of each CVE. Other organizations that maintain their own lists of CVEs, most notably <a href=\"https://nvd.nist.gov/\" target=\"_blank\" rel=\"noopener noreferrer\">NIST's National Vulnerability Database</a>, assign severity categories (such as \"medium,\" \"high,\" and \"critical\") and/or numerical severity scores to CVEs.</p>\n<p><a href=\"https://www.nist.gov/\" target=\"_blank\" rel=\"noopener noreferrer\">NIST</a> (National Institute of Standards and Technology) is a non-regulatory agency of the U.S. Department of Commerce that promotes innovation and industrial competitiveness by advancing measurement science, standards, and technology in ways that enhance economic security and improve our quality of life.</p>\n<p>NIST plays an important role in the CVE program by providing funding and technical support. NIST also maintains the National Vulnerability Database (NVD), which is a comprehensive database of vulnerabilities that includes CVE information.</p>\n<p>The NVD is used by organizations around the world to track and respond to vulnerabilities. NIST also develops and maintains a number of other resources related to vulnerabilities, such as the Common Weakness Enumeration (CWE) and the CVSS vulnerability scoring system.</p>\n<h2 id=\"-how-to-react-to-a-cve\" style=\"position:relative;\"><a href=\"#-how-to-react-to-a-cve\" aria-label=\" how to react to a cve permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìå How to React to a CVE</h2>\n<p>There are a variety of tools that will automatically monitor and scan <a href=\"https://www.splunk.com/en_us/data-insider/what-is-source-code-management.html\" target=\"_blank\" rel=\"noopener noreferrer\">your application code</a>, dependencies, or environments in an effort to detect components that are subject to known CVEs, then alert you to them. Thus, it's relatively easy to find CVEs that are relevant to an application you develop or manage.</p>\n<p>The harder task is what to do when you discover a CVE that impacts your application. As noted above, it's not always practical to delay the release of your application until the CVE is addressed. Importantly, though, patches to correct CVEs sometimes appear almost as quickly as a CVE is announced. In some cases, it can take months or longer before a CVE solution becomes available (and it's not always clear how long it's going to take for a fix to arrive). You may not be able to wait that long.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdsJIP/EABYQAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAQABBQKI7//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAQMf/aAAgBAQAGPwJU/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARITH/2gAIAQEAAT8h3LZTXY3ACf/aAAwDAQACAAMAAAAQjD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhMUFRof/aAAgBAQABPxAFahNhzKcLN+RY9QzP/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"scan\" title=\"\" src=\"/static/5a14f70da52f7044b7fb7240ae5fa7c3/7bf67/scan.jpg\" srcset=\"/static/5a14f70da52f7044b7fb7240ae5fa7c3/651be/scan.jpg 170w,\n/static/5a14f70da52f7044b7fb7240ae5fa7c3/d30a3/scan.jpg 340w,\n/static/5a14f70da52f7044b7fb7240ae5fa7c3/7bf67/scan.jpg 680w,\n/static/5a14f70da52f7044b7fb7240ae5fa7c3/990cb/scan.jpg 1020w,\n/static/5a14f70da52f7044b7fb7240ae5fa7c3/15ae0/scan.jpg 1092w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Also, you may simply get so many CVE alerts that <a href=\"https://www.splunk.com/en_us/blog/learn/devops-release-management.html\" target=\"_blank\" rel=\"noopener noreferrer\">delaying a release</a> in response to each one is not feasible. If your application is complex and has lots of dependencies, you could get multiple CVE alerts each week. Delaying your release pipeline in response to each one would create a lot of confusion and impact your ability to deliver continuously.</p>\n<h2 id=\"-devsecops\" style=\"position:relative;\"><a href=\"#-devsecops\" aria-label=\" devsecops permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üëÆ DevSecOps</h2>\n<p>DevSecOps stands for Development, Security, and Operations. In the most basic meaning, it's defined as an approach that promotes security in the SDLC (Software Development Life Cycle). The primary goal is to shift-to-left the responsibility. Security tools are integrated early in the development cycle, usually in CI/CD pipelines, to let Devs find vulnerabilities as early as possible and fix them before reaching production environments.</p>\n<h3 id=\"Ô∏è-shift-to-left\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-shift-to-left\" aria-label=\"Ô∏è shift to left permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚óÄÔ∏è Shift-to-left</h3>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.70588235294118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAdtbocwuF//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhESMf/aAAgBAQABBQJtmpEbppMxE4f/xAAVEQEBAAAAAAAAAAAAAAAAAAABAP/aAAgBAwEBPwFGL//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAABAiEQMTJBkf/aAAgBAQAGPwLRdpJKGKcp/8QAGxABAAICAwAAAAAAAAAAAAAAAQAREDEhYfH/2gAIAQEAAT8hIPIZ6Ea0X1NIOFACgqf/2gAMAwEAAgADAAAAEG8P/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxB7xhhjf//EABYRAQEBAAAAAAAAAAAAAAAAAAEQQf/aAAgBAgEBPxATZ//EABwQAAMAAgMBAAAAAAAAAAAAAAABESFBMVFhkf/aAAgBAQABPxDl7cV6pd+nUZ271sN6w9VEh4+QnElsR//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Shift-to-left\" title=\"\" src=\"/static/184cc666bc517be49b078ac9ea273044/7bf67/Shift-to-left.jpg\" srcset=\"/static/184cc666bc517be49b078ac9ea273044/651be/Shift-to-left.jpg 170w,\n/static/184cc666bc517be49b078ac9ea273044/d30a3/Shift-to-left.jpg 340w,\n/static/184cc666bc517be49b078ac9ea273044/7bf67/Shift-to-left.jpg 680w,\n/static/184cc666bc517be49b078ac9ea273044/990cb/Shift-to-left.jpg 1020w,\n/static/184cc666bc517be49b078ac9ea273044/e5166/Shift-to-left.jpg 1200w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Maybe you heard it, maybe not, let me explain what it means. Shifting security controls to the left means putting the security tools more left in the pipelines, and by consequence, in the development process. The more left it's, the better because remediation is easier and it's done before reaching production.</p>\n<h3 id=\"devsecops-best-practices\" style=\"position:relative;\"><a href=\"#devsecops-best-practices\" aria-label=\"devsecops best practices permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>DevSecOps Best Practices</h3>\n<ul>\n<li><strong>üîÑ Automate as much as you can</strong>: Automation is the key to successfully leveraging security in the pipelines.</li>\n<li><strong>‚úÖ Define must-checks to deploy</strong>: If you have some must-pass security checks, define them in the CI/CD pipelines, especially for production.</li>\n<li><strong>üìö Encourage and train</strong>: Whenever possible, promote security training to your Devs. They'll be more motivated and with the knowledge to fix vulnerabilities and avoid them in the future.</li>\n</ul>\n<p>The advantages are pretty clear, automation is the key like it's in common DevOps practices, and we benefit from it by adding the compliance checks in our pipelines. Some of those checks will be mandatory, so you're gonna put your barriers of trust in the automation, ensuring that nothing will go through those controls unless it has the level of trust you've defined.</p>\n<h3 id=\"Ô∏è-infrastructure-as-code\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-infrastructure-as-code\" aria-label=\"Ô∏è infrastructure as code permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üèóÔ∏è Infrastructure-As-Code</h3>\n<p>One of the best open-source tools to analyze IaC is <a href=\"https://github.com/Checkmarx/kics\" target=\"_blank\" rel=\"noopener noreferrer\">Kics</a>. It's a tool designed to find security vulnerabilities, compliance issues, and infrastructure misconfigurations. It supports multiple platforms, such as Terraform, Kubernetes, Docker, Helm. It comes with a lot of predefined checks to assess your infrastructure, containers, and deployments.</p>\n<p>One of the key benefits of this tool is that it's designed to let you expand the analyzing capabilities. Using the extensible query configuration, you can create your checks, adapted to your staff and environment, and disable the ones that are less important to the company.</p>\n<h3 id=\"-dependency-checks\" style=\"position:relative;\"><a href=\"#-dependency-checks\" aria-label=\" dependency checks permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üì¶ Dependency Checks</h3>\n<p>You didn't write all the code of your applications, nobody does it in WebApps today. You use libraries, and probably a lot of them. Like any piece of code, it has its vulnerabilities, and you should check them. Dependency checking is the process of finding what vulnerable versions of third-party you're using. Most tools do that by comparing the version with popular vuln databases, such as <a href=\"https://nvd.nist.gov/\" target=\"_blank\" rel=\"noopener noreferrer\">NIST</a> and <a href=\"https://cve.mitre.org/\" target=\"_blank\" rel=\"noopener noreferrer\">CVE</a>.</p>\n<h3 id=\"Ô∏è-static-application-security-testing-sast\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-static-application-security-testing-sast\" aria-label=\"Ô∏è static application security testing sast permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è Static Application Security Testing (SAST)</h3>\n<p>These tools are designed to scan your code to find flaws in your project. It could help to find SQL Injection, Buffer Overflows, Memory Leaks, XSS (Cross-Site-Scripting), and more. SAST is known as white-box scanning because it works by analyzing your source code and finding vulnerabilities based on your implementation.</p>\n<p>The downside is that they aren't perfect, they have a lot of false positives, and the worst: false negatives. Despite its shortcomings, it's another layer of defense to add to our pipelines.</p>\n<ul>\n<li><a href=\"https://github.com/PyCQA/bandit\" target=\"_blank\" rel=\"noopener noreferrer\">Bandit</a>: SAST tool for Python.</li>\n<li><a href=\"https://brakemanscanner.org/\" target=\"_blank\" rel=\"noopener noreferrer\">BrakeMan</a>: SAST tool for Ruby on Rails.</li>\n<li><a href=\"https://rubygems.org/gems/dawnscanner\" target=\"_blank\" rel=\"noopener noreferrer\">DawnScanner</a>: Another SAST tool for Ruby, but in this case with support for the most MVC frameworks, like Rails, Padrino, and Sinatra. It provides more than 150 security checks, with remediation suggestions.</li>\n<li><a href=\"https://find-sec-bugs.github.io/\" target=\"_blank\" rel=\"noopener noreferrer\">FindSecBugs</a>: SAST tool for Java code. Includes 100 security checks and supports all major Java frameworks.</li>\n<li><a href=\"https://github.com/ZupIT/horusec\" target=\"_blank\" rel=\"noopener noreferrer\">HoruSec</a>: It supports multiple languages, and it has an extension for VSCode. Very interesting tool. You must give it a shot.</li>\n</ul>\n<h3 id=\"-dynamic-application-security-testing-dast\" style=\"position:relative;\"><a href=\"#-dynamic-application-security-testing-dast\" aria-label=\" dynamic application security testing dast permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîç Dynamic Application Security Testing (DAST)</h3>\n<p>In comparison with SAST, as its name suggests, it dynamically analyzes your live application and performs different types of attacks against it, to find vulnerabilities. It's also known as black-box scanning since it doesn't analyze your code, it analyzes the live web server.</p>\n<p>The best way to integrate these kinds of tools in pipelines is after deployment in lower environments, like Dev or Stage. After the deployment step in the CD process, you should have another step to perform the scanning, and if the results are not good enough, revert the deployment and flag the artifact as vulnerable to prevent production deployments.</p>\n<ul>\n<li><a href=\"https://www.zaproxy.org/getting-started/\" target=\"_blank\" rel=\"noopener noreferrer\">ZedAttackProxy (ZAP)</a>: It's a well-known tool to do pentesting, but it also has a lot of automated scanning capabilities to test your app. It could be deployed using GithubActions too.</li>\n<li><a href=\"https://www.arachni-scanner.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Arachni</a>: DAST tool with high performance and multiple types of integrations, including a WebServer where you can check scanning results.</li>\n</ul>\n<h2 id=\"-final-words\" style=\"position:relative;\"><a href=\"#-final-words\" aria-label=\" final words permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìù Final Words</h2>\n<p>The CVE vulnerability database is an essential tool for tracking and responding to vulnerabilities in software and systems. By integrating the CVE database into your DevSecOps pipeline, you can shift security to the left and identify and fix vulnerabilities early in the development process.</p>\n<p><strong>Thank You üñ§</strong></p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>\n<h2 id=\"-introduction-1\" style=\"position:relative;\"><a href=\"#-introduction-1\" aria-label=\" introduction 1 permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìå Introduction</h2>\n<p>Common Vulnerabilities and Exposures (CVE) is a standardized dictionary of publicly known information security vulnerabilities and exposures. It is maintained by MITRE and is used by many security-related products and services, including vulnerability management and remediation, intrusion detection, and incident management.\nIn <a href=\"https://www.devsecops.org/\" target=\"_blank\" rel=\"noopener noreferrer\">DevSecOps</a>, the <a href=\"https://cve.mitre.org/\" target=\"_blank\" rel=\"noopener noreferrer\">CVE</a> vulnerability database is an essential tool for tracking and responding to vulnerabilities in software and systems. By integrating the CVE database into your DevSecOps pipeline, you can identify and fix vulnerabilities early in the development process, before they can be exploited by attackers.\nThis blog post will explain what the CVE vulnerability database is, how to use it in DevSecOps, and how to respond to CVEs in builds. We will also discuss CVE severity and how to prioritize remediation efforts.</p>\n<h2 id=\"-rationale-1\" style=\"position:relative;\"><a href=\"#-rationale-1\" aria-label=\" rationale 1 permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üß† Rationale</h2>\n<p>Reacting to CVEs in the real world requires careful consideration. You need to assess whether each CVE is serious enough to warrant the rejection of a build and a delay of a release. This is a careful balancing act, as you don't want to release code with serious known vulnerabilities, but you also don't want to cause constant delays due to unexpected CVE announcements.\nThe CVE System:\nThe CVE List is a set of records that describe specific vulnerabilities or exposures. It is maintained by a large community of trusted entities and individuals.\nA vulnerability is a flaw in a software, firmware, hardware, or service component that can be exploited to cause a negative impact to the confidentiality, integrity, or availability of an impacted component or components.\nAn exposure is a code or configuration error that can be exploited to gain indirect and often hard-to-discover access to application data such as customer information.\nAssessing CVE Severity:\nThere are a number of factors to consider when assessing the severity of a CVE, including:\nThe exploitability of the CVE: How easy is it for an attacker to exploit the vulnerability?\nThe impact of the CVE: What is the potential impact of the vulnerability if it is exploited?\nThe prevalence of the CVE: How widespread is the vulnerability?\nThe availability of a patch: Is there a patch available to fix the vulnerability?</p>\n<p>You can use these factors to prioritize remediation efforts and decide which CVEs warrant the rejection of a build and a delay of a release.\nCVE, Security and¬†Beyond:\nThe CVE List plays a vital role in the cybersecurity world as an essential resource around which security products and services can share standardized information. However, the CVE List alone is not sufficient for building an effective vulnerability remediation program. Other information sources as well as advanced analytic capabilities are required in order to achieve the risk assessment and actionable remediation guidelines that are the hallmarks of a cutting-edge vulnerability remediation solution.\nQuick CVE¬†recap:\nFirst, though, a brief definition of CVEs. Short for Common Vulnerabilities and Exposures, a CVE is a known vulnerability in a certain piece of software.\nThe concept of CVEs were introduced in 1999 in an effort to provide a universal framework for identifying security issues. The idea is that whenever a vulnerability is discovered, a CVE entry will be created for it. The CVE entry can then be accessed and shared by the public. The <a href=\"https://www.cve.org/\" target=\"_blank\" rel=\"noopener noreferrer\">official CVE list</a> is maintained by MITRE, a nonprofit group who's also known for the <a href=\"https://www.splunk.com/en_us/data-insider/what-is-the-mitre-att-and-ck-framework.html\" target=\"_blank\" rel=\"noopener noreferrer\">MITRE ATT&#x26;CK methodology</a>.\nThe big caveat here is that the official CVE list does not include an assessment of the severity of each CVE. Other organizations that maintain their own lists of CVEs, most notably <a href=\"https://nvd.nist.gov/\" target=\"_blank\" rel=\"noopener noreferrer\">NIST's National Vulnerability Database</a>, assign severity categories (such as \"medium,\" \"high\" and \"critical\") and/or numerical severity scores to CVEs.\nNIST (National Institute of Standards and Technology) is a non-regulatory agency of the U.S. Department of Commerce that promotes innovation and industrial competitiveness by advancing measurement science, standards, and technology in ways that enhance economic security and improve our quality of life.\nNIST plays an important role in the CVE program by providing funding and technical support. NIST also maintains the National Vulnerability Database (NVD), which is a comprehensive database of vulnerabilities that includes CVE information.\nThe NVD is used by organizations around the world to track and respond to vulnerabilities. NIST also develops and maintains a number of other resources related to vulnerabilities, such as the Common Weakness Enumeration (CWE) and the CVSS vulnerability scoring system.\nüìå How to react to a¬†CVE:\nThere are a variety of tools that will automatically monitor and scan <a href=\"https://www.splunk.com/en_us/data-insider/what-is-source-code-management.html\" target=\"_blank\" rel=\"noopener noreferrer\">your application code</a>, dependencies or environments in an effort to detect components that are subject to known CVEs, then alert you to them. Thus, it's relatively easy to find CVEs that are relevant to an application you develop or manage.</p>\n<p>The harder task is what to do when you discover a CVE that impacts your application. As noted above, it's not always practical to delay the release of your application until the CVE is addressed. Importantly, though, patches to correct CVEs sometimes appear almost as quickly as a CVE is announced. In some cases, it can take months or longer before a CVE solution becomes available (and it's not always clear how long it's going to take for a fix to arrive). You may not be able to wait that long.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdsJIP/EABYQAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAQABBQKI7//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAQMf/aAAgBAQAGPwJU/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARITH/2gAIAQEAAT8h3LZTXY3ACf/aAAwDAQACAAMAAAAQjD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhMUFRof/aAAgBAQABPxAFahNhzKcLN+RY9QzP/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"scan\" title=\"\" src=\"/static/5a14f70da52f7044b7fb7240ae5fa7c3/7bf67/scan.jpg\" srcset=\"/static/5a14f70da52f7044b7fb7240ae5fa7c3/651be/scan.jpg 170w,\n/static/5a14f70da52f7044b7fb7240ae5fa7c3/d30a3/scan.jpg 340w,\n/static/5a14f70da52f7044b7fb7240ae5fa7c3/7bf67/scan.jpg 680w,\n/static/5a14f70da52f7044b7fb7240ae5fa7c3/990cb/scan.jpg 1020w,\n/static/5a14f70da52f7044b7fb7240ae5fa7c3/15ae0/scan.jpg 1092w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Also, you may simply get so many CVE alerts that <a href=\"https://www.splunk.com/en_us/blog/learn/devops-release-management.html\" target=\"_blank\" rel=\"noopener noreferrer\">delaying a release</a> in response to each one is not feasible. If your application is complex and has lots of dependencies, you could get multiple CVE alerts each week. Delaying your release pipeline in response to each one would create a lot of confusion and impact your ability to deliver continuously.</p>\n<p><strong>Thank You üñ§</strong></p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":11,"rawMarkdownBody":"\n> **Shifting Security Left**\n> **üîÑ Shifting Security Left**\n\n## üìå Introduction\n\nCommon Vulnerabilities and Exposures (CVE) is a standardized dictionary of publicly known information security vulnerabilities and exposures. It is maintained by [MITRE](https://www.mitre.org/) and is used by many security-related products and services, including vulnerability management and remediation, intrusion detection, and incident management.\n\nIn [DevSecOps](https://www.devsecops.org/), the [CVE](https://cve.mitre.org/) vulnerability database is an essential tool for tracking and responding to vulnerabilities in software and systems. By integrating the CVE database into your DevSecOps pipeline, you can identify and fix vulnerabilities early in the development process, before they can be exploited by attackers.\n\nThis blog post will explain what the CVE vulnerability database is, how to use it in DevSecOps, and how to respond to CVEs in builds. We will also discuss CVE severity and how to prioritize remediation efforts.\n\n## üß† Rationale\n\nReacting to CVEs in the real world requires careful consideration. You need to assess whether each CVE is serious enough to warrant the rejection of a build and a delay of a release. This is a careful balancing act, as you don't want to release code with serious known vulnerabilities, but you also don't want to cause constant delays due to unexpected CVE announcements.\n\n### The CVE System\n\nThe CVE List is a set of records that describe specific vulnerabilities or exposures. It is maintained by a large community of trusted entities and individuals.\n\n- **Vulnerability**: A flaw in a software, firmware, hardware, or service component that can be exploited to cause a negative impact to the confidentiality, integrity, or availability of an impacted component or components.\n- **Exposure**: A code or configuration error that can be exploited to gain indirect and often hard-to-discover access to application data such as customer information.\n\n### Assessing CVE Severity\n\nThere are a number of factors to consider when assessing the severity of a CVE, including:\n\n- **Exploitability**: How easy is it for an attacker to exploit the vulnerability?\n- **Impact**: What is the potential impact of the vulnerability if it is exploited?\n- **Prevalence**: How widespread is the vulnerability?\n- **Patch Availability**: Is there a patch available to fix the vulnerability?\n\nYou can use these factors to prioritize remediation efforts and decide which CVEs warrant the rejection of a build and a delay of a release.\n\n### CVE, Security and Beyond\n\nThe CVE List plays a vital role in the cybersecurity world as an essential resource around which security products and services can share standardized information. However, the CVE List alone is not sufficient for building an effective vulnerability remediation program. Other information sources as well as advanced analytic capabilities are required in order to achieve the risk assessment and actionable remediation guidelines that are the hallmarks of a cutting-edge vulnerability remediation solution.\n\n### Quick CVE Recap\n\nFirst, though, a brief definition of CVEs. Short for Common Vulnerabilities and Exposures, a CVE is a known vulnerability in a certain piece of software.\n\nThe concept of CVEs was introduced in 1999 in an effort to provide a universal framework for identifying security issues. The idea is that whenever a vulnerability is discovered, a CVE entry will be created for it. The CVE entry can then be accessed and shared by the public. The [official CVE list](https://www.cve.org/) is maintained by MITRE, a nonprofit group also known for the [MITRE ATT&CK methodology](https://www.splunk.com/en_us/data-insider/what-is-the-mitre-att-and-ck-framework.html).\n\nThe big caveat here is that the official CVE list does not include an assessment of the severity of each CVE. Other organizations that maintain their own lists of CVEs, most notably [NIST's National Vulnerability Database](https://nvd.nist.gov/), assign severity categories (such as \"medium,\" \"high,\" and \"critical\") and/or numerical severity scores to CVEs.\n\n[NIST](https://www.nist.gov/) (National Institute of Standards and Technology) is a non-regulatory agency of the U.S. Department of Commerce that promotes innovation and industrial competitiveness by advancing measurement science, standards, and technology in ways that enhance economic security and improve our quality of life.\n\nNIST plays an important role in the CVE program by providing funding and technical support. NIST also maintains the National Vulnerability Database (NVD), which is a comprehensive database of vulnerabilities that includes CVE information.\n\nThe NVD is used by organizations around the world to track and respond to vulnerabilities. NIST also develops and maintains a number of other resources related to vulnerabilities, such as the Common Weakness Enumeration (CWE) and the CVSS vulnerability scoring system.\n\n## üìå How to React to a CVE\n\nThere are a variety of tools that will automatically monitor and scan [your application code](https://www.splunk.com/en_us/data-insider/what-is-source-code-management.html), dependencies, or environments in an effort to detect components that are subject to known CVEs, then alert you to them. Thus, it's relatively easy to find CVEs that are relevant to an application you develop or manage.\n\nThe harder task is what to do when you discover a CVE that impacts your application. As noted above, it's not always practical to delay the release of your application until the CVE is addressed. Importantly, though, patches to correct CVEs sometimes appear almost as quickly as a CVE is announced. In some cases, it can take months or longer before a CVE solution becomes available (and it's not always clear how long it's going to take for a fix to arrive). You may not be able to wait that long.\n\n![scan](./scan.jpg)\n\nAlso, you may simply get so many CVE alerts that [delaying a release](https://www.splunk.com/en_us/blog/learn/devops-release-management.html) in response to each one is not feasible. If your application is complex and has lots of dependencies, you could get multiple CVE alerts each week. Delaying your release pipeline in response to each one would create a lot of confusion and impact your ability to deliver continuously.\n\n## üëÆ DevSecOps\n\nDevSecOps stands for Development, Security, and Operations. In the most basic meaning, it's defined as an approach that promotes security in the SDLC (Software Development Life Cycle). The primary goal is to shift-to-left the responsibility. Security tools are integrated early in the development cycle, usually in CI/CD pipelines, to let Devs find vulnerabilities as early as possible and fix them before reaching production environments.\n\n### ‚óÄÔ∏è Shift-to-left\n\n![Shift-to-left](./Shift-to-left.jpg)\n\nMaybe you heard it, maybe not, let me explain what it means. Shifting security controls to the left means putting the security tools more left in the pipelines, and by consequence, in the development process. The more left it's, the better because remediation is easier and it's done before reaching production.\n\n### DevSecOps Best Practices\n\n- **üîÑ Automate as much as you can**: Automation is the key to successfully leveraging security in the pipelines.\n- **‚úÖ Define must-checks to deploy**: If you have some must-pass security checks, define them in the CI/CD pipelines, especially for production.\n- **üìö Encourage and train**: Whenever possible, promote security training to your Devs. They'll be more motivated and with the knowledge to fix vulnerabilities and avoid them in the future.\n\nThe advantages are pretty clear, automation is the key like it's in common DevOps practices, and we benefit from it by adding the compliance checks in our pipelines. Some of those checks will be mandatory, so you're gonna put your barriers of trust in the automation, ensuring that nothing will go through those controls unless it has the level of trust you've defined.\n\n### üèóÔ∏è Infrastructure-As-Code\n\nOne of the best open-source tools to analyze IaC is [Kics](https://github.com/Checkmarx/kics). It's a tool designed to find security vulnerabilities, compliance issues, and infrastructure misconfigurations. It supports multiple platforms, such as Terraform, Kubernetes, Docker, Helm. It comes with a lot of predefined checks to assess your infrastructure, containers, and deployments.\n\nOne of the key benefits of this tool is that it's designed to let you expand the analyzing capabilities. Using the extensible query configuration, you can create your checks, adapted to your staff and environment, and disable the ones that are less important to the company.\n\n### üì¶ Dependency Checks\n\nYou didn't write all the code of your applications, nobody does it in WebApps today. You use libraries, and probably a lot of them. Like any piece of code, it has its vulnerabilities, and you should check them. Dependency checking is the process of finding what vulnerable versions of third-party you're using. Most tools do that by comparing the version with popular vuln databases, such as [NIST](https://nvd.nist.gov/) and [CVE](https://cve.mitre.org/).\n\n### üõ†Ô∏è Static Application Security Testing (SAST)\n\nThese tools are designed to scan your code to find flaws in your project. It could help to find SQL Injection, Buffer Overflows, Memory Leaks, XSS (Cross-Site-Scripting), and more. SAST is known as white-box scanning because it works by analyzing your source code and finding vulnerabilities based on your implementation.\n\nThe downside is that they aren't perfect, they have a lot of false positives, and the worst: false negatives. Despite its shortcomings, it's another layer of defense to add to our pipelines.\n\n- [Bandit](https://github.com/PyCQA/bandit): SAST tool for Python.\n- [BrakeMan](https://brakemanscanner.org/): SAST tool for Ruby on Rails.\n- [DawnScanner](https://rubygems.org/gems/dawnscanner): Another SAST tool for Ruby, but in this case with support for the most MVC frameworks, like Rails, Padrino, and Sinatra. It provides more than 150 security checks, with remediation suggestions.\n- [FindSecBugs](https://find-sec-bugs.github.io/): SAST tool for Java code. Includes 100 security checks and supports all major Java frameworks.\n- [HoruSec](https://github.com/ZupIT/horusec): It supports multiple languages, and it has an extension for VSCode. Very interesting tool. You must give it a shot.\n\n### üîç Dynamic Application Security Testing (DAST)\n\nIn comparison with SAST, as its name suggests, it dynamically analyzes your live application and performs different types of attacks against it, to find vulnerabilities. It's also known as black-box scanning since it doesn't analyze your code, it analyzes the live web server.\n\nThe best way to integrate these kinds of tools in pipelines is after deployment in lower environments, like Dev or Stage. After the deployment step in the CD process, you should have another step to perform the scanning, and if the results are not good enough, revert the deployment and flag the artifact as vulnerable to prevent production deployments.\n\n- [ZedAttackProxy (ZAP)](https://www.zaproxy.org/getting-started/): It's a well-known tool to do pentesting, but it also has a lot of automated scanning capabilities to test your app. It could be deployed using GithubActions too.\n- [Arachni](https://www.arachni-scanner.com/): DAST tool with high performance and multiple types of integrations, including a WebServer where you can check scanning results.\n\n## üìù Final Words\n\nThe CVE vulnerability database is an essential tool for tracking and responding to vulnerabilities in software and systems. By integrating the CVE database into your DevSecOps pipeline, you can shift security to the left and identify and fix vulnerabilities early in the development process.\n\n**Thank You üñ§**\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** [https://www.linkedin.com/in/rajhi-saif/](https://www.linkedin.com/in/rajhi-saif/)\n\n**‚ôªÔ∏è X/Twitter:** [https://x.com/rajhisaifeddine](https://x.com/rajhisaifeddine)\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n## üìå Introduction\n\nCommon Vulnerabilities and Exposures (CVE) is a standardized dictionary of publicly known information security vulnerabilities and exposures. It is maintained by MITRE and is used by many security-related products and services, including vulnerability management and remediation, intrusion detection, and incident management.\nIn [DevSecOps](https://www.devsecops.org/), the [CVE](https://cve.mitre.org/) vulnerability database is an essential tool for tracking and responding to vulnerabilities in software and systems. By integrating the CVE database into your DevSecOps pipeline, you can identify and fix vulnerabilities early in the development process, before they can be exploited by attackers.\nThis blog post will explain what the CVE vulnerability database is, how to use it in DevSecOps, and how to respond to CVEs in builds. We will also discuss CVE severity and how to prioritize remediation efforts.\n\n## üß† Rationale\n\nReacting to CVEs in the real world requires careful consideration. You need to assess whether each CVE is serious enough to warrant the rejection of a build and a delay of a release. This is a careful balancing act, as you don't want to release code with serious known vulnerabilities, but you also don't want to cause constant delays due to unexpected CVE announcements.\nThe CVE System:\nThe CVE List is a set of records that describe specific vulnerabilities or exposures. It is maintained by a large community of trusted entities and individuals.\nA vulnerability is a flaw in a software, firmware, hardware, or service component that can be exploited to cause a negative impact to the confidentiality, integrity, or availability of an impacted component or components.\nAn exposure is a code or configuration error that can be exploited to gain indirect and often hard-to-discover access to application data such as customer information.\nAssessing CVE Severity:\nThere are a number of factors to consider when assessing the severity of a CVE, including:\nThe exploitability of the CVE: How easy is it for an attacker to exploit the vulnerability?\nThe impact of the CVE: What is the potential impact of the vulnerability if it is exploited?\nThe prevalence of the CVE: How widespread is the vulnerability?\nThe availability of a patch: Is there a patch available to fix the vulnerability?\n\nYou can use these factors to prioritize remediation efforts and decide which CVEs warrant the rejection of a build and a delay of a release.\nCVE, Security and¬†Beyond:\nThe CVE List plays a vital role in the cybersecurity world as an essential resource around which security products and services can share standardized information. However, the CVE List alone is not sufficient for building an effective vulnerability remediation program. Other information sources as well as advanced analytic capabilities are required in order to achieve the risk assessment and actionable remediation guidelines that are the hallmarks of a cutting-edge vulnerability remediation solution.\nQuick CVE¬†recap:\nFirst, though, a brief definition of CVEs. Short for Common Vulnerabilities and Exposures, a CVE is a known vulnerability in a certain piece of software.\nThe concept of CVEs were introduced in 1999 in an effort to provide a universal framework for identifying security issues. The idea is that whenever a vulnerability is discovered, a CVE entry will be created for it. The CVE entry can then be accessed and shared by the public. The [official CVE list](https://www.cve.org/) is maintained by MITRE, a nonprofit group who's also known for the [MITRE ATT&CK methodology](https://www.splunk.com/en_us/data-insider/what-is-the-mitre-att-and-ck-framework.html).\nThe big caveat here is that the official CVE list does not include an assessment of the severity of each CVE. Other organizations that maintain their own lists of CVEs, most notably [NIST's National Vulnerability Database](https://nvd.nist.gov/), assign severity categories (such as \"medium,\" \"high\" and \"critical\") and/or numerical severity scores to CVEs.\nNIST (National Institute of Standards and Technology) is a non-regulatory agency of the U.S. Department of Commerce that promotes innovation and industrial competitiveness by advancing measurement science, standards, and technology in ways that enhance economic security and improve our quality of life.\nNIST plays an important role in the CVE program by providing funding and technical support. NIST also maintains the National Vulnerability Database (NVD), which is a comprehensive database of vulnerabilities that includes CVE information.\nThe NVD is used by organizations around the world to track and respond to vulnerabilities. NIST also develops and maintains a number of other resources related to vulnerabilities, such as the Common Weakness Enumeration (CWE) and the CVSS vulnerability scoring system.\nüìå How to react to a¬†CVE:\nThere are a variety of tools that will automatically monitor and scan [your application code](https://www.splunk.com/en_us/data-insider/what-is-source-code-management.html), dependencies or environments in an effort to detect components that are subject to known CVEs, then alert you to them. Thus, it's relatively easy to find CVEs that are relevant to an application you develop or manage.\n\nThe harder task is what to do when you discover a CVE that impacts your application. As noted above, it's not always practical to delay the release of your application until the CVE is addressed. Importantly, though, patches to correct CVEs sometimes appear almost as quickly as a CVE is announced. In some cases, it can take months or longer before a CVE solution becomes available (and it's not always clear how long it's going to take for a fix to arrive). You may not be able to wait that long.\n\n![scan](./scan.jpg)\n\nAlso, you may simply get so many CVE alerts that [delaying a release](https://www.splunk.com/en_us/blog/learn/devops-release-management.html) in response to each one is not feasible. If your application is complex and has lots of dependencies, you could get multiple CVE alerts each week. Delaying your release pipeline in response to each one would create a lot of confusion and impact your ability to deliver continuously.\n\n\n\n**Thank You üñ§**\n\n<br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  **_Until next time üéâ_**\n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":2784},"frontmatter":{"id":"c11357856a6e173c2a08b85f","path":"/blog/cve-vulnerability-database-devsecops/","humanDate":"Oct 27, 2024","fullDate":"2024-10-27","title":"CVE Vulnerability Database: What It Is and How to Use It in DevSecOps","keywords":["CVE","Vulnerability Database","DevSecOps","Security Practices","Shifting Left"],"excerpt":"Discover the importance of the CVE Vulnerability Database in DevSecOps and learn how to effectively integrate it into your security practices.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACW0lEQVR42iVSS28ScRzcD+DBmx79EMZbb8aDBxMP2jSxNW0VymtXCuzyXHaXR+h2gYIrdlmksDyKJVrK0pYKAgZi7Rpj2mr6iA+wVdpSK+qBq39iMof5TWbyO8xARrNZZzDAWq3JYkUxI26xOAiyD5J0UZSTJByEnbRZcYsZ0+sMKGqzEzhBgBRqNEIGDHO6XLG44HK7xmUTV24pBu5i1yaIG1r6tpkddkRHPWlFIKePVuBQQWMws2yQpqfAP8xkgpQwklstNw/biezi0Mjo+YGhi9cV567KL9w0Xhp2X57k7wSLg2xtMLo1Et9GMFws1RZK6w9ZVqvTQTKVhksuFGv1AB9HTdZQds0/X0SmY4gvZeHzdKa6WP8o7bWFxud7TEahRtKFijdTTiST/bAGhgti/uT4KC7ErDghbe6+32l++XrQOe6cnZ6edTqHBz8OWt+3tj+EI1GZfMLv9UmStL+/TzMMpFSpxLzYbLXCXHh87P5aqXbU6bbbp7+6f36e/Qbodv9+OzzZ3fsEAharTamG8+Ky9EaKCQI0Njaeyy31er1AICiXqwBfWSmm558l01khtQCQSGUzT5/n88scx2s0sFKpjsXiO7t7HB+BNAhCkpQoFqYZZk5IVepSqbZeqW9UG9Lyi9rSarnaePuyvgHEV6/f+WZYGIblCiUfeeL2eCDQmBqBKaeTcrrcnik29Dg0y4X5CMfPeWfCjJ/jwnPACsRHoVma8Vpx+4PJSYVapUfRfphyOGw4DghonyApcFJOB/D5Z1jwimZ8QAGynSBsdjvYEmj4/0j+ASdEYR22S/XpAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/9864c05ec934e5a51b6826c64b0f469a/6b6cc/devsecops-cover.png","srcSet":"/static/9864c05ec934e5a51b6826c64b0f469a/5b584/devsecops-cover.png 750w,\n/static/9864c05ec934e5a51b6826c64b0f469a/6b6cc/devsecops-cover.png 768w","sizes":"100vw"},"sources":[{"srcSet":"/static/9864c05ec934e5a51b6826c64b0f469a/73e0d/devsecops-cover.webp 750w,\n/static/9864c05ec934e5a51b6826c64b0f469a/7970e/devsecops-cover.webp 768w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5247395833333334}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/kubernetes-cluster-autoscaler-cost-effective/","title":"Kubernetes Cluster autoscaler: automatically scale your AWS EKS cluster for cost savings and performance","date":"2024-10-27 20:34:00"},"excerpt":"Optimal AWS EKS resource utilization üåÉ Introduction Kubernetes Cluster Autoscaler is an excellent tool that can help you save money and‚Ä¶","html":"<blockquote>\n<p><strong>Optimal AWS EKS resource utilization</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üåÉ Introduction</h2>\n<p>Kubernetes <a href=\"https://github.com/kubernetes/autoscaler\" target=\"_blank\" rel=\"noopener noreferrer\">Cluster Autoscaler</a> is an excellent tool that can help you save money and improve the performance of your Kubernetes cluster. By automatically scaling the number of nodes in your cluster based on the demand of your workloads, Cluster Autoscaler can help you avoid over-provisioning resources, which can lead to wasted costs.</p>\n<p>Additionally, Cluster Autoscaler can help ensure that your pods have the resources they need to run at peak performance.</p>\n<p>In this blog post, we will discuss how Cluster Autoscaler works, the benefits of using it, and how to configure it for your Kubernetes cluster.</p>\n<p>We will also provide a hands-on guide to deploying Cluster Autoscaler on <a href=\"https://aws.amazon.com/eks/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS Elastic Kubernetes Service (EKS)</a>.</p>\n<h2 id=\"-what-is-cluster-autoscaler-ca\" style=\"position:relative;\"><a href=\"#-what-is-cluster-autoscaler-ca\" aria-label=\" what is cluster autoscaler ca permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìà What is Cluster Autoscaler (CA)?</h2>\n<p><a href=\"https://github.com/kubernetes/autoscaler\" target=\"_blank\" rel=\"noopener noreferrer\">Cluster Autoscaler</a> is a Kubernetes add-on that automatically scales the number of nodes in a cluster based on the resource requests of pods. It does not directly measure CPU or memory usage, but instead checks for pods in a pending state, which means that they cannot be scheduled to run on any of the existing nodes. When CA detects pending pods, it will add new nodes to the cluster until all pods are scheduled.</p>\n<h3 id=\"how-does-cluster-autoscaler-work\" style=\"position:relative;\"><a href=\"#how-does-cluster-autoscaler-work\" aria-label=\"how does cluster autoscaler work permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How does Cluster Autoscaler work?</h3>\n<p>The following are the steps involved in how Cluster Autoscaler works:</p>\n<ol>\n<li><strong>CA checks for pending pods every 10 seconds.</strong></li>\n<li><strong>If there are any pending pods, CA will add a new node to the cluster, as long as it is within the constraints configured by the administrator.</strong></li>\n<li><strong>Kubernetes registers the newly provisioned node with the control plane.</strong></li>\n<li><strong>The Kubernetes scheduler then allocates the pending pods to the new node.</strong></li>\n</ol>\n<h3 id=\"limitations-of-ca\" style=\"position:relative;\"><a href=\"#limitations-of-ca\" aria-label=\"limitations of ca permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Limitations of CA</h3>\n<p>Cluster Autoscaler has a couple of limitations:</p>\n<ul>\n<li><strong>It does not make scaling decisions based on CPU or memory usage.</strong> This means that it may not scale the cluster up even if there are pods that are not scheduled due to resource shortages.</li>\n<li><strong>There is a delay between when CA requests a new node from the cloud provider and when the node is actually provisioned.</strong> This delay can cause performance degradation for pods that are waiting to be scheduled.</li>\n</ul>\n<h2 id=\"eks-example-how-to-implement-cluster-autoscaler\" style=\"position:relative;\"><a href=\"#eks-example-how-to-implement-cluster-autoscaler\" aria-label=\"eks example how to implement cluster autoscaler permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>EKS Example: How to implement Cluster Autoscaler</h2>\n<p>To implement Cluster Autoscaler on AWS Elastic Kubernetes Service (EKS), you can follow these steps:</p>\n<ol>\n<li><strong>Review the prerequisites for Cluster Autoscaler.</strong></li>\n<li><strong>Create an EKS cluster in AWS.</strong></li>\n<li><strong>Create an IAM OIDC provider.</strong></li>\n<li><strong>Create an IAM policy for Cluster Autoscaler.</strong></li>\n<li><strong>Create an IAM role for Cluster Autoscaler.</strong></li>\n<li><strong>Deploy Kubernetes Cluster Autoscaler.</strong></li>\n<li><strong>Create an Nginx deployment to test the CA functionality.</strong></li>\n</ol>\n<h3 id=\"prerequisites\" style=\"position:relative;\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Prerequisites</h3>\n<p>Cluster Autoscaler relies on the following tags to identify the AWS Auto Scaling groups that it should manage:</p>\n<ul>\n<li><code class=\"language-text\">k8s.io/cluster-autoscaler/enabled</code>: This tag must be set to true for CA to manage the Auto Scaling group.</li>\n<li><code class=\"language-text\">k8s.io/cluster-autoscaler/&lt;cluster-name>: \"owned\"</code>: This tag specifies the name of the node group that CA should manage.</li>\n</ul>\n<p>If these tags are not present, CA will not discover the Auto Scaling group and will not add or remove nodes from the EKS cluster.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">k8s.io/cluster<span class=\"token punctuation\">-</span>autoscaler/enabled=true\n<span class=\"token key atrule\">k8s.io/cluster-autoscaler/&lt;cluster-name></span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"owned\"</span></code></pre></div>\n<p>These tags are correct and CA will be able to discover and manage this Auto Scaling group.</p>\n<h3 id=\"create-an-eks-cluster\" style=\"position:relative;\"><a href=\"#create-an-eks-cluster\" aria-label=\"create an eks cluster permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Create an EKS cluster</h3>\n<p>This walkthrough will create an EKS cluster in AWS with two Auto Scaling groups to demonstrate how Cluster Autoscaler uses the autoscaling group to manage the EKS cluster.</p>\n<h4 id=\"steps\" style=\"position:relative;\"><a href=\"#steps\" aria-label=\"steps permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Steps</h4>\n<p>Create an EKS cluster configuration file using the content shown below:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> eksctl.io/v1alpha5\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterConfig\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>cluster\n    <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> eu<span class=\"token punctuation\">-</span>west<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n<span class=\"token key atrule\">nodeGroups</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> default\n        <span class=\"token key atrule\">minSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n        <span class=\"token key atrule\">maxSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n        <span class=\"token key atrule\">nodeSelector</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">beta.kubernetes.io/os</span><span class=\"token punctuation\">:</span> linux\n        <span class=\"token comment\"># The following tags are required by Cluster Autoscaler to discover the Auto Scaling group.</span>\n        <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">k8s.io/cluster-autoscaler/enabled</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n            <span class=\"token key atrule\">k8s.io/cluster-autoscaler/node-group-name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"default\"</span></code></pre></div>\n<p>Create the EKS cluster using the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">eksctl create cluster <span class=\"token parameter variable\">-f</span> cluster.yaml</code></pre></div>\n<p>Wait for the EKS cluster to be created. This may take a few minutes.</p>\n<h3 id=\"create-an-iam-oidc-provider\" style=\"position:relative;\"><a href=\"#create-an-iam-oidc-provider\" aria-label=\"create an iam oidc provider permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Create an IAM OIDC provider</h3>\n<p>IAM OIDC is used to authorize the Cluster Autoscaler to launch or terminate instances under an Auto Scaling group. In this section, we will see how to configure it with the EKS cluster.</p>\n<p><strong>Steps</strong></p>\n<ol>\n<li><strong>In the EKS cluster console, navigate to the configuration tab and copy the OpenID connect URL.</strong></li>\n<li><strong>Go to the IAM console, and select Identity providers.</strong></li>\n<li><strong>Click Add provider, select OpenID Connect, and click Get thumbprint.</strong></li>\n<li><strong>In the Audience field, enter the following value: <code class=\"language-text\">sts.amazonaws.com</code></strong></li>\n<li><strong>Click Add provider.</strong></li>\n</ol>\n<h3 id=\"create-an-iam-policy\" style=\"position:relative;\"><a href=\"#create-an-iam-policy\" aria-label=\"create an iam policy permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Create an IAM policy</h3>\n<p>Next, we need to create an IAM policy that allows the Cluster Autoscaler to increase or decrease the number of nodes in the cluster.</p>\n<p>To create the policy with the necessary permissions, save the following JSON file as <code class=\"language-text\">AmazonEKSClusterAutoscalerPolicy.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2012-10-17\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Statement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"autoscaling:DescribeAutoScalingGroups\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"autoscaling:DescribeAutoScalingInstances\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"autoscaling:DescribeLaunchConfigurations\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"autoscaling:DescribeTags\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"autoscaling:SetDesiredCapacity\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"autoscaling:TerminateInstanceInAutoScalingGroup\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeLaunchTemplateVersions\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Allow\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then, create the policy by running the following AWS CLI command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">aws iam create-policy --policy-name AmazonEKSClusterAutoscalerPolicy --policy-document file://AmazonEKSClusterAutoscalerPolicy.json</code></pre></div>\n<p>To verify that the policy was created successfully, run the following AWS CLI command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">aws iam list-policies --max-items <span class=\"token number\">1</span></code></pre></div>\n<p>The output of this command should include a policy named <code class=\"language-text\">AmazonEKSClusterAutoscalerPolicy</code> that was created on the current date.</p>\n<h3 id=\"iam-policy-permissions\" style=\"position:relative;\"><a href=\"#iam-policy-permissions\" aria-label=\"iam policy permissions permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>IAM policy permissions</h3>\n<p>The IAM policy that you created allows the Cluster Autoscaler to perform the following actions:</p>\n<ul>\n<li><strong>Describe Auto Scaling groups</strong></li>\n<li><strong>Describe Auto Scaling instances</strong></li>\n<li><strong>Describe launch configurations</strong></li>\n<li><strong>Describe tags</strong></li>\n<li><strong>Set the desired capacity of an Auto Scaling group</strong></li>\n<li><strong>Terminate an instance in an Auto Scaling group</strong></li>\n<li><strong>Describe launch template versions</strong></li>\n</ul>\n<p>These permissions are necessary for the Cluster Autoscaler to manage the number of nodes in the cluster.</p>\n<h3 id=\"configuring-the-iam-role-for-the-provider\" style=\"position:relative;\"><a href=\"#configuring-the-iam-role-for-the-provider\" aria-label=\"configuring the iam role for the provider permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Configuring the IAM Role for the Provider</h3>\n<p>Following our previous discussion, a critical task lies ahead ‚Äî establishing an IAM role and linking it to the provider that was set up in Step 3 of our process.</p>\n<ol>\n<li><strong>Access the IAM service:</strong> Begin by accessing the console of the AWS Identity and Access Management (IAM) service.</li>\n<li><strong>Role Establishment:</strong> Opt for creating a fresh role. Specify that the trusted entity is a web identity.</li>\n<li><strong>Target Audience Selection:</strong> Pick <code class=\"language-text\">sts.amazonaws.com</code> as the intended audience. This choice establishes a secure and dependable connection.</li>\n<li><strong>Policy Connection:</strong> Associate the meticulously crafted policy with this role. This policy dictates the permissions and access rights of the role.</li>\n<li><strong>Validation:</strong> Prior to moving forward, it‚Äôs imperative to validate the role and confirm the accurate attachment of the policy.</li>\n<li><strong>Refining Trust Relationships:</strong> Proceed to modify the trust relationships of the role that was generated.</li>\n<li><strong>Adjusting OIDC Settings:</strong> In this stage, enhance the settings for OIDC (OpenID Connect). Integrate the provided code snippet into the existing configuration:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"Condition\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"StringEquals\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"oidc.eks.AWS_REGION.amazonaws.com/id/EXAMPLED539D4633E53DE1B716D3041E:aud\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sts.amazonaws.com\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"oidc.eks.AWS_REGION.amazonaws.com/id/EXAMPLED539D4633E53DE1B716D3041E:sub\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"system:serviceaccount:SERVICE_ACCOUNT_NAMESPACE:SERVICE_ACCOUNT_NAME\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"8\">\n<li><strong>Save Your Modifications:</strong> After implementing these adjustments, preserve the updated trust policy. Your IAM role is now fully equipped with the necessary configurations to operate seamlessly.</li>\n</ol>\n<h3 id=\"deploy-cluster-autoscaler\" style=\"position:relative;\"><a href=\"#deploy-cluster-autoscaler\" aria-label=\"deploy cluster autoscaler permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Deploy Cluster Autoscaler</h3>\n<p>Deploying Cluster Autoscaler is the next step. This involves using the Amazon Resource Names (ARN) number of the previously created IAM role.</p>\n<p>To deploy Cluster Autoscaler, follow these steps:</p>\n<ol>\n<li><strong>Save the content provided below after the command into a file.</strong></li>\n<li><strong>Run the command provided below using the saved file:</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> cluster-autoscaler.yaml</code></pre></div>\n<p>Ensure you copy the entire content:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">k8s-addon</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler.addons.k8s.io\n    <span class=\"token key atrule\">k8s-app</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">eks.amazonaws.com/role-arn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>847845718389<span class=\"token punctuation\">:</span>role/AmazonEKSClusterAutoscalerRole\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>system\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRole\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">k8s-addon</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler.addons.k8s.io\n    <span class=\"token key atrule\">k8s-app</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"events\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"endpoints\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"create\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"patch\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"pods/eviction\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"create\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"pods/status\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"update\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"endpoints\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resourceNames</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"cluster-autoscaler\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"update\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"nodes\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"update\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"pods\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"services\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"replicationcontrollers\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"persistentvolumeclaims\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"persistentvolumes\"</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"get\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"extensions\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"replicasets\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"daemonsets\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"get\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"policy\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"poddisruptionbudgets\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"apps\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"statefulsets\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"replicasets\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"daemonsets\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"get\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"storage.k8s.io\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"storageclasses\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"csinodes\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"get\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"batch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"extensions\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"jobs\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"patch\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"coordination.k8s.io\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"leases\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"create\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"coordination.k8s.io\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resourceNames</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"cluster-autoscaler\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"leases\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"update\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Role\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>system\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">k8s-addon</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler.addons.k8s.io\n    <span class=\"token key atrule\">k8s-app</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"configmaps\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"create\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"configmaps\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">resourceNames</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"cluster-autoscaler-status\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cluster-autoscaler-priority-expander\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"delete\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"update\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRoleBinding\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">k8s-addon</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler.addons.k8s.io\n    <span class=\"token key atrule\">k8s-app</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n<span class=\"token key atrule\">roleRef</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">apiGroup</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io\n  <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRole\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n<span class=\"token key atrule\">subjects</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>system\n\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> RoleBinding\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>system\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">k8s-addon</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler.addons.k8s.io\n    <span class=\"token key atrule\">k8s-app</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n<span class=\"token key atrule\">roleRef</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">apiGroup</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io\n  <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Role\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n<span class=\"token key atrule\">subjects</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>system\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>system\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n      <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">cluster-autoscaler.kubernetes.io/safe-to-evict</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'false'</span>\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">serviceAccountName</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> k8s.gcr.io/autoscaling/cluster<span class=\"token punctuation\">-</span>autoscaler<span class=\"token punctuation\">:</span>v1.20.0\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 500Mi\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 500Mi\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> ./cluster<span class=\"token punctuation\">-</span>autoscaler\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>v=4\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>stderrthreshold=info\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>cloud<span class=\"token punctuation\">-</span>provider=aws\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>skip<span class=\"token punctuation\">-</span>nodes<span class=\"token punctuation\">-</span>with<span class=\"token punctuation\">-</span>local<span class=\"token punctuation\">-</span>storage=false\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>expander=least<span class=\"token punctuation\">-</span>waste\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>node<span class=\"token punctuation\">-</span>group<span class=\"token punctuation\">-</span>auto<span class=\"token punctuation\">-</span>discovery=asg<span class=\"token punctuation\">:</span>tag=k8s.io/cluster<span class=\"token punctuation\">-</span>autoscaler/enabled<span class=\"token punctuation\">,</span>k8s.io/cluster<span class=\"token punctuation\">-</span>autoscaler/demo<span class=\"token punctuation\">-</span>ca<span class=\"token punctuation\">-</span>cluster\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>balance<span class=\"token punctuation\">-</span>similar<span class=\"token punctuation\">-</span>node<span class=\"token punctuation\">-</span>groups\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>skip<span class=\"token punctuation\">-</span>nodes<span class=\"token punctuation\">-</span>with<span class=\"token punctuation\">-</span>system<span class=\"token punctuation\">-</span>pods=false\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ssl<span class=\"token punctuation\">-</span>certs\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /etc/ssl/certs/ca<span class=\"token punctuation\">-</span>certificates.crt <span class=\"token comment\">#/etc/ssl/certs/ca-bundle.crt for Amazon Linux Worker Nodes</span>\n              <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Always\"</span>\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ssl<span class=\"token punctuation\">-</span>certs\n          <span class=\"token key atrule\">hostPath</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/etc/ssl/certs/ca-bundle.crt\"</span></code></pre></div>\n<p>Next, verify the logs by issuing this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl logs <span class=\"token parameter variable\">-l</span> <span class=\"token assign-left variable\">app</span><span class=\"token operator\">=</span>cluster-autoscaler <span class=\"token parameter variable\">-n</span> kube-system <span class=\"token parameter variable\">-f</span></code></pre></div>\n<p>CA will now check for unscheduled pods and try to schedule them. You can see those actions from the logs. Check the status of the pods by issuing the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pods <span class=\"token parameter variable\">-n</span> kube-system</code></pre></div>\n<h3 id=\"Ô∏è-create-an-nginx-deployment-to-test-autoscaler-functionality\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-create-an-nginx-deployment-to-test-autoscaler-functionality\" aria-label=\"Ô∏è create an nginx deployment to test autoscaler functionality permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è Create an Nginx Deployment to Test Autoscaler Functionality</h3>\n<p>We are going to create two deployments: one for the managed node group, and another deployment for the unmanaged node group.</p>\n<h4 id=\"managed-node-group-deployment\" style=\"position:relative;\"><a href=\"#managed-node-group-deployment\" aria-label=\"managed node group deployment permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Managed Node Group Deployment</h4>\n<p>Create a configuration file based on the content below:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>managed\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>managed\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>managed\n        <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>managed\n                <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>latest\n                <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n            <span class=\"token key atrule\">affinity</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">nodeAffinity</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">requiredDuringSchedulingIgnoredDuringExecution</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">nodeSelectorTerms</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> role\n                                <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In\n                                <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n                                <span class=\"token punctuation\">-</span> managed<span class=\"token punctuation\">-</span>nodes\n                <span class=\"token key atrule\">podAntiAffinity</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">requiredDuringSchedulingIgnoredDuringExecution</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">labelSelector</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> app\n                                <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In\n                                <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n                                <span class=\"token punctuation\">-</span> nginx<span class=\"token punctuation\">-</span>managed\n                        <span class=\"token key atrule\">topologyKey</span><span class=\"token punctuation\">:</span> kubernetes.io/hostname\n                        <span class=\"token key atrule\">namespaces</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token punctuation\">-</span> default</code></pre></div>\n<blockquote>\n<p><strong>Note:</strong> The above configurations make use of <code class=\"language-text\">nodeAffinity</code> to select the node group with the label <code class=\"language-text\">role=managed-nodes</code> to help control where the scheduler provisions the pods.</p>\n</blockquote>\n<p>Apply the changes:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> <span class=\"token number\">1</span>-nginx-managed.yaml</code></pre></div>\n<h4 id=\"unmanaged-node-group-deployment\" style=\"position:relative;\"><a href=\"#unmanaged-node-group-deployment\" aria-label=\"unmanaged node group deployment permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Unmanaged Node Group Deployment</h4>\n<p>For the unmanaged node group, create a configuration file using the content below:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>unmanaged\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>unmanaged\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>unmanaged\n        <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>unmanaged\n                <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.14.2\n                <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n            <span class=\"token key atrule\">affinity</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">nodeAffinity</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">requiredDuringSchedulingIgnoredDuringExecution</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">nodeSelectorTerms</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> role\n                                <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In\n                                <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n                                <span class=\"token punctuation\">-</span> unmanaged<span class=\"token punctuation\">-</span>nodes\n                <span class=\"token key atrule\">podAntiAffinity</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">requiredDuringSchedulingIgnoredDuringExecution</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">labelSelector</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> app\n                                <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In\n                                <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n                                <span class=\"token punctuation\">-</span> nginx<span class=\"token punctuation\">-</span>unmanaged\n                        <span class=\"token key atrule\">topologyKey</span><span class=\"token punctuation\">:</span> kubernetes.io/hostname\n                        <span class=\"token key atrule\">namespaces</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token punctuation\">-</span> default</code></pre></div>\n<p>Apply the changes:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> <span class=\"token number\">2</span>-nginx-unmanaged.yaml</code></pre></div>\n<p>Check the status of the pods:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pods <span class=\"token parameter variable\">-n</span> default</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">NAME                               READY   STATUS    RESTARTS   AGE\nnginx-managed-7cf8b6449c-mctsg     <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          60s\nnginx-managed-7cf8b6449c-vjvxf     <span class=\"token number\">0</span>/1     Pending   <span class=\"token number\">0</span>          60s\nnginx-unmanaged-67dcfb44c9-gvjg4   <span class=\"token number\">0</span>/1     Pending   <span class=\"token number\">0</span>          52s\nnginx-unmanaged-67dcfb44c9-wqnvr   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          52s</code></pre></div>\n<p>Now, you can see two of the four pods are running because we have only two nodes in the cluster. Please note that we have used a <a href=\"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity\" target=\"_blank\" rel=\"noopener noreferrer\">pod AntiAffinity</a> configuration to prevent Kubernetes from provisioning multiple pods of this deployment on the same node (thereby avoiding the need for the additional capacity required to demonstrate CA‚Äôs functionality).</p>\n<p>The Cluster Autoscaler will check the state of the pods, discover that some are in a ‚Äúpending‚Äù state, and try to provision new nodes in the cluster. In a few minutes, you will see a third node provisioned.</p>\n<p>One pod is still in a pending state because we did not add the label when we created the EKS cluster with managed/unmanaged node groups. If the label is not present in the Auto Scaling group, then the Cluster Autoscaler will not discover the Auto Scaling group to scale the cluster.</p>\n<h2 id=\"-summary\" style=\"position:relative;\"><a href=\"#-summary\" aria-label=\" summary permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîö Summary</h2>\n<p>Kubernetes Cluster Autoscaler (CA) is a tool that automatically scales up or down the number of nodes in a Kubernetes cluster based on the number of pods that are running. This can help to improve resource utilization and reduce costs.</p>\n<p>In this blog post, we discussed how CA works and how to deploy it in your cluster. We also looked at some of the best practices for configuring CA to optimize resource utilization and performance.</p>\n<p>By following the tips in this blog post, you can use CA to automatically scale your cluster and ensure that you are only paying for the resources that you need. This can help you to save money and improve the performance of your applications.</p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p><strong>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</strong></p>"},"nextThought":{"frontmatter":{"path":"/blog/kubernetes-autoscaling-pods-hpa-vpa/","title":"Kubernetes Autoscaling: Achieving Scalability and Efficiency","date":"2024-10-27 20:00:00"},"excerpt":"How to Scale Pods Vertically and Horizontally in Kubernetes üåê üê≥ Introduction Kubernetes embodies resilience and scalability by deploying‚Ä¶","html":"<blockquote>\n<p><strong>How to Scale Pods Vertically and Horizontally in Kubernetes üåê</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üê≥ Introduction</h2>\n<p><a href=\"https://kubernetes.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubernetes</a> embodies resilience and scalability by deploying diverse pods with varying resource allocations, ensuring application redundancy. While manual adjustments suffice, Kubernetes elevates scaling with Horizontal Pod Autoscaling (HPA). This self-regulating loop dynamically expands or contracts resources (app Pods) based on real-time demands. Simply deploy a <a href=\"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/\" target=\"_blank\" rel=\"noopener noreferrer\">HorizontalPodAutoscaler (HPA)</a> resource for auto-scaling, leaving the automation to it.</p>\n<p>Moreover, in addition to HPA, the <a href=\"https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler\" target=\"_blank\" rel=\"noopener noreferrer\">Vertical Pod Autoscaler (VPA)</a> offers a distinct approach. Unlike HPA's horizontal scaling, VPA modifies a Pod's resources.requests, prompting the Kubernetes Scheduler to shift Pods across WorkerNodes as needed. VPA incessantly monitors container resource usage, automatically tweaking requests to prevent waste and ensure sufficient CPU and memory allocation. This synergy of HPA and VPA empowers Kubernetes users to effortlessly achieve efficient, tailored scaling.</p>\n<p>This blog explores the universe of Kubernetes autoscaling, casting a spotlight on these two powerful tools: HPA and VPA. We'll uncover how they work, their distinctions, and how they can collaborate to enhance resource utilization and application performance.</p>\n<p>Join us on a quest to become proficient in the art of scaling within Kubernetes.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB5VUzGVGA/wD/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIREjH/2gAIAQEAAQUCXWyxSibVaR//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAEQEQIjH/2gAIAQEABj8CMwoR2k6//8QAHBAAAwACAwEAAAAAAAAAAAAAAAERMVFhkaHw/9oACAEBAAE/IawFNNs5npe3ZRmDkZItJnzWf//aAAwDAQACAAMAAAAQ6C//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QhX//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCn/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARITFBUXH/2gAIAQEAAT8Qvp23WkL1zilfHEFu036jLVRyhZWmwDg/ciftw//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hpa-vpa\" title=\"\" src=\"/static/063a135be697a2c366aa6efcd27d818a/7bf67/hpa-vpa.jpg\" srcset=\"/static/063a135be697a2c366aa6efcd27d818a/651be/hpa-vpa.jpg 170w,\n/static/063a135be697a2c366aa6efcd27d818a/d30a3/hpa-vpa.jpg 340w,\n/static/063a135be697a2c366aa6efcd27d818a/7bf67/hpa-vpa.jpg 680w,\n/static/063a135be697a2c366aa6efcd27d818a/990cb/hpa-vpa.jpg 1020w,\n/static/063a135be697a2c366aa6efcd27d818a/e5166/hpa-vpa.jpg 1200w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-horizontalpodautoscaler-hpa-scaling-horizontally\" style=\"position:relative;\"><a href=\"#-horizontalpodautoscaler-hpa-scaling-horizontally\" aria-label=\" horizontalpodautoscaler hpa scaling horizontally permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìà HorizontalPodAutoscaler (HPA): Scaling Horizontally</h2>\n<p>Under the hood, HPA is powered by a dedicated Kubernetes controller. You create an HPA YAML targeting your app's Deployment and use <code class=\"language-text\">kubectl</code> to apply it.</p>\n<h2 id=\"-vertical-pod-autoscaler-vpa-scaling-vertically\" style=\"position:relative;\"><a href=\"#-vertical-pod-autoscaler-vpa-scaling-vertically\" aria-label=\" vertical pod autoscaler vpa scaling vertically permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìâ Vertical Pod Autoscaler (VPA): Scaling Vertically</h2>\n<p>VPA involves three pods:</p>\n<ul>\n<li><strong>Recommender</strong>: <a href=\"https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/recommender/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">Analyzes</a> Pod resource usage and recommends CPU/memory requests.</li>\n<li><strong>Updater</strong>: <a href=\"https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/updater/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">Monitors</a> and aligns Pod requests with recommendations, recreating if needed.</li>\n<li><strong>Admission-plugin</strong>: <a href=\"https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/pkg/admission-controller/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">Sets</a> request values for new/updated Pods.</li>\n</ul>\n<h3 id=\"Ô∏è-vpa-limitations\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-vpa-limitations\" aria-label=\"Ô∏è vpa limitations permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚ö†Ô∏è VPA Limitations</h3>\n<ul>\n<li>VPA doesn't oversee Pod recreation post-eviction, needing tools like Cluster Autoscaler.</li>\n<li>It can't be used with HPA for CPU/memory scaling, but custom metrics are compatible.</li>\n<li>VPA's Pod recreation might cause service downtime without fault-tolerant solutions.</li>\n</ul>\n<p>HPA and VPA require a <a href=\"https://github.com/kubernetes-sigs/metrics-server\" target=\"_blank\" rel=\"noopener noreferrer\">metrics server</a>, like Kubernetes Metrics Server, to gather CPU/memory metrics for scaling decisions.</p>\n<h3 id=\"-metrics-api-types\" style=\"position:relative;\"><a href=\"#-metrics-api-types\" aria-label=\" metrics api types permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìä Metrics API Types</h3>\n<ul>\n<li><strong>metrics.k8s.io</strong>: Default metrics, provided by the <a href=\"https://github.com/kubernetes-sigs/metrics-server\" target=\"_blank\" rel=\"noopener noreferrer\">metrics-server</a>.</li>\n<li><strong>custom.metrics.k8s.io</strong>: Metrics provided by adapters from inside a cluster, e.g., <a href=\"https://github.com/Azure/azure-k8s-metrics-adapter\" target=\"_blank\" rel=\"noopener noreferrer\">Microsoft Azure Adapter</a>, <a href=\"https://github.com/GoogleCloudPlatform/k8s-stackdriver\" target=\"_blank\" rel=\"noopener noreferrer\">Google Stackdriver</a>, <a href=\"https://github.com/kubernetes-sigs/prometheus-adapter\" target=\"_blank\" rel=\"noopener noreferrer\">Prometheus Adapter</a>.</li>\n<li><strong>external.metrics.k8s.io</strong>: Similar to the Custom Metrics API, but metrics are provided by an external system, such as <a href=\"https://aws.amazon.com/cloudwatch/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS CloudWatch</a>.</li>\n</ul>\n<p>In a nutshell, <code class=\"language-text\">metrics.k8s.io</code> encompasses default metrics from the metrics-server, while <code class=\"language-text\">custom.metrics.k8s.io</code> involves internal cluster adapters like Microsoft Azure or Google Stackdriver, and <code class=\"language-text\">external.metrics.k8s.io</code> pertains to external systems like AWS CloudWatch, providing adaptable metrics.</p>\n<h2 id=\"Ô∏è-deploy-metrics-server-using-helm\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-deploy-metrics-server-using-helm\" aria-label=\"Ô∏è deploy metrics server using helm permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚òÅÔ∏è Deploy Metrics Server Using Helm</h2>\n<p>To initiate the process, integrate the metrics-server repository into your helm package collection. Employ the <code class=\"language-text\">helm repo add</code> command as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm repo <span class=\"token function\">add</span> metrics-server https://kubernetes-sigs.github.io/metrics-server</code></pre></div>\n<p>Then, employ <code class=\"language-text\">helm repo update</code> to refresh the pool of accessible packages:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ helm repo update metrics-server\n\nHang tight <span class=\"token keyword\">while</span> we grab the latest from your chart repositories<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.Successfully got an update from the <span class=\"token string\">\"metrics-server\"</span> chart repository\nUpdate Complete. ‚éàHappy Helming<span class=\"token operator\">!</span>‚éà\n\n$ helm search repo metrics-server</code></pre></div>\n<h3 id=\"Ô∏è-repository-integration-complete-metrics-server-deployment\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-repository-integration-complete-metrics-server-deployment\" aria-label=\"Ô∏è repository integration complete metrics server deployment permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚ò∏Ô∏è Repository Integration Complete: Metrics Server Deployment</h3>\n<p>With the repository successfully added to Helm, you're poised to include metrics-server in your Kubernetes deployments. Here's how you can create your deployment configuration:</p>\n<p>Clone the Kubernetes Starter Kit Git repository:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://github.com/seifrajhi/K8s-Workload-Scaling-Strategies.git</code></pre></div>\n<p>Locate the metrics-server configuration in the following path:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">cd</span> K8s-Workload-Scaling-Strategies\n<span class=\"token function\">vim</span> assets/manifests/metrics-server-values-v3.11.0.yaml</code></pre></div>\n<p>By following these steps, you'll seamlessly integrate metrics-server into your Kubernetes environment and have the flexibility to tailor your deployment configuration to your needs.</p>\n<p>It contains a few stock parameters. Note that replicas is a fixed value, 2.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">## Ref: https://github.com/kubernetes-sigs/metrics-server/blob/metrics-server-helm-chart-3.8.2/charts/metrics-server</span>\n<span class=\"token comment\"># Number of metrics-server replicas to run</span>\nreplicas: <span class=\"token number\">2</span>\n\napiService:\n    <span class=\"token comment\"># Specifies if the v1beta1.metrics.k8s.io API service should be created.</span>\n    create: <span class=\"token boolean\">true</span>\n\nhostNetwork:\n    <span class=\"token comment\"># Specifies if metrics-server should be started in hostNetwork mode.</span>\n    enabled: <span class=\"token boolean\">false</span></code></pre></div>\n<p>You can check the Metrics Server chart page for explanations of the available values for metrics-server.</p>\n<p>Then, you can install the Kubernetes Metrics Server using Helm (a dedicated metrics-server namespace will be created as well):</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm <span class=\"token function\">install</span> metrics-server metrics-server/metrics-server <span class=\"token parameter variable\">--version</span> <span class=\"token number\">3.11</span>.0<span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--namespace</span> metrics-server <span class=\"token punctuation\">\\</span>\n    --create-namespace <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">-f</span> <span class=\"token string\">\"assets/manifests/metrics-server-v3.11.0.yaml\"</span></code></pre></div>\n<p>This will deploy metrics-server to your configured Kubernetes cluster.</p>\n<p>After deploying, you can use <code class=\"language-text\">helm ls</code> to verify that metrics-server has been added to your deployment:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm <span class=\"token function\">ls</span> <span class=\"token parameter variable\">-n</span> metrics-server</code></pre></div>\n<p>Next, you can check the status of all of the Kubernetes resources deployed to the metrics-server namespace:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get all <span class=\"token parameter variable\">-n</span> metrics-server</code></pre></div>\n<p>Finally, check if the <code class=\"language-text\">kubectl top</code> command works (similar to Linux top command - prints current resource usage, such as CPU and memory). Below command displays current resource usage for all Pods in the kube-system namespace:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl <span class=\"token function\">top</span> pods <span class=\"token parameter variable\">-n</span> kube-system</code></pre></div>\n<p>You have now deployed metrics-server into your Kubernetes cluster. In the next step, you'll review some of the parameters of a HorizontalPodAutoscaler Custom Resource Definition.</p>\n<h2 id=\"introducing-hpas-the-key-to-dynamic-scaling\" style=\"position:relative;\"><a href=\"#introducing-hpas-the-key-to-dynamic-scaling\" aria-label=\"introducing hpas the key to dynamic scaling permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Introducing HPAs: The Key to Dynamic Scaling</h2>\n<p>So far, you've been manually configuring the number of pods in your Kubernetes deployments. This is fine for simple cases, but it can be a pain to keep up with as your application grows and traffic fluctuates.</p>\n<p>That's where <strong>HorizontalPodAutoscalers (HPAs)</strong> come in. HPAs are a Kubernetes feature that automatically scales your deployments up or down based on metrics like CPU usage and memory utilization. This means that you can focus on building great applications, and let HPAs take care of the scaling for you.</p>\n<h3 id=\"how-an-hpa-works\" style=\"position:relative;\"><a href=\"#how-an-hpa-works\" aria-label=\"how an hpa works permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>How an HPA Works</h3>\n<ol>\n<li><strong>Metric Monitoring</strong>: The HPA watches a metric, such as CPU usage.</li>\n<li><strong>Threshold Exceeded</strong>: When the metric exceeds a threshold, the HPA triggers a scale operation.</li>\n<li><strong>Scaling</strong>: The scale operation either increases or decreases the number of pods in the deployment.</li>\n</ol>\n<h3 id=\"hpa-crd-custom-resource-definition\" style=\"position:relative;\"><a href=\"#hpa-crd-custom-resource-definition\" aria-label=\"hpa crd custom resource definition permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>HPA CRD (Custom Resource Definition)</h3>\n<p>The HPA CRD is a YAML file that specifies the configuration of the HPA. The CRD includes the following fields:</p>\n<ul>\n<li><strong>Target</strong>: The name of the Kubernetes object that the HPA is monitoring.</li>\n<li><strong>Metrics</strong>: The metrics that the HPA is watching.</li>\n<li><strong>Scaling Policies</strong>: The rules for how the HPA scales the deployment.</li>\n</ul>\n<p>Here's an example of an HPA CRD:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> autoscaling/v2beta2\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> HorizontalPodAutoscaler\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> demo<span class=\"token punctuation\">-</span>hpa\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">scaleTargetRef</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>deployment\n    <span class=\"token key atrule\">minReplicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token key atrule\">maxReplicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n    <span class=\"token key atrule\">metrics</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Resource\n            <span class=\"token key atrule\">resource</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cpu\n                <span class=\"token key atrule\">target</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Utilization\n                    <span class=\"token key atrule\">averageUtilization</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<h3 id=\"explanation-of-the-configuration\" style=\"position:relative;\"><a href=\"#explanation-of-the-configuration\" aria-label=\"explanation of the configuration permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Explanation of the Configuration</h3>\n<ul>\n<li><strong>spec.scaleTargetRef</strong>: Specifies the Kubernetes object that the HPA is monitoring. In this case, it is the <code class=\"language-text\">my-deployment</code> deployment.</li>\n<li><strong>spec.minReplicas</strong>: Specifies the lower limit for the number of replicas in the deployment. The HPA will never scale the deployment down below 1 pod.</li>\n<li><strong>spec.maxReplicas</strong>: Specifies the upper limit for the number of replicas in the deployment. The HPA will never scale the deployment up above 3 pods.</li>\n<li><strong>spec.metrics.type</strong>: Specifies the type of metric that the HPA is using to calculate the desired replica count. Here, it is using the <code class=\"language-text\">Resource</code> type, which means it is scaling the deployment based on the average CPU utilization.</li>\n<li><strong>spec.metrics.resource.name</strong>: Specifies the name of the resource that the HPA is monitoring. In this case, it is the <code class=\"language-text\">cpu</code> resource.</li>\n<li><strong>spec.metrics.resource.averageUtilization</strong>: Specifies the threshold value for the metric. The HPA will scale the deployment up if the average CPU utilization exceeds 80%.</li>\n</ul>\n<h3 id=\"creating-an-hpa\" style=\"position:relative;\"><a href=\"#creating-an-hpa\" aria-label=\"creating an hpa permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Creating an HPA</h3>\n<p>There are two ways to create an HPA for your application deployment. You can use the <code class=\"language-text\">kubectl autoscale</code> command on an existing deployment, or you can create an HPA YAML manifest.</p>\n<h4 id=\"using-code-classlanguage-textkubectl-autoscalecode-command\" style=\"position:relative;\"><a href=\"#using-code-classlanguage-textkubectl-autoscalecode-command\" aria-label=\"using code classlanguage textkubectl autoscalecode command permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Using <code class=\"language-text\">kubectl autoscale</code> Command</h4>\n<p>To create an HPA using the <code class=\"language-text\">kubectl autoscale</code> command, you need to specify the name of the deployment and the target CPU utilization. For example, the following command would create an HPA for the <code class=\"language-text\">myapp-test</code> deployment with a target CPU utilization of 80%:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> myapp<span class=\"token punctuation\">-</span>test\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> myapp<span class=\"token punctuation\">-</span>test\n    <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> myapp<span class=\"token punctuation\">-</span>test\n        <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> busybox\n                    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> busybox\n                    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n                        <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 20m\n                    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"sh\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-c\"</span><span class=\"token punctuation\">]</span>\n                    <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token punctuation\">-</span> while <span class=\"token punctuation\">[</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">]</span>; do\n                            echo \"Test\";\n                            sleep 0.01;\n                            done</code></pre></div>\n<p>Note the last few lines of this file. They contain some shell syntax to repeatedly print \"Test\" a hundred times a second, to simulate load. Once you are done reviewing the file, you can deploy it into your cluster using <code class=\"language-text\">kubectl</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> assets/manifests/hpa/metrics-server/myapp-test.yaml</code></pre></div>\n<p>Finally, create a HorizontalPodAutoscaler targeting the <code class=\"language-text\">myapp-test</code> deployment:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl autoscale deployment hpa-test --cpu-percent<span class=\"token operator\">=</span><span class=\"token number\">80</span> <span class=\"token parameter variable\">--min</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token parameter variable\">--max</span><span class=\"token operator\">=</span><span class=\"token number\">3</span></code></pre></div>\n<p>You can check if the HPA resource was created by running:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get hpa</code></pre></div>\n<p>The <code class=\"language-text\">TARGETS</code> column of the output will eventually show a figure of current usage%/target usage%.</p>\n<p>You can also observe the logged events that an HPA generates by using:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl describe hpa hpa-test</code></pre></div>\n<p>In a real-world scenario, you will want to use a dedicated YAML manifest to define each HPA. This way, you can track the changes by having the manifest committed in a Git repository, as well as come back to it later and perform changes.</p>\n<h3 id=\"scaling-applications-automatically-with-metrics-server\" style=\"position:relative;\"><a href=\"#scaling-applications-automatically-with-metrics-server\" aria-label=\"scaling applications automatically with metrics server permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Scaling Applications Automatically with Metrics Server</h3>\n<p>In this last step, you will experiment with two different ways of generating server load and scaling your applications automatically via a YAML manifest.</p>\n<h4 id=\"application-deployment\" style=\"position:relative;\"><a href=\"#application-deployment\" aria-label=\"application deployment permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Application Deployment</h4>\n<p>One way to generate server load is to create an application deployment that performs some CPU-intensive computations. This will cause the pods in the deployment to use more CPU resources, which will trigger the HorizontalPodAutoscaler (HPA) to scale the deployment up.</p>\n<h4 id=\"shell-script\" style=\"position:relative;\"><a href=\"#shell-script\" aria-label=\"shell script permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Shell Script</h4>\n<p>Another way to generate server load is to use a shell script. This script can be configured to perform fast successive HTTP calls to a web application. This will cause the web application to use more CPU resources, which will also trigger the HPA to scale the deployment up.</p>\n<h4 id=\"constant-load-test\" style=\"position:relative;\"><a href=\"#constant-load-test\" aria-label=\"constant load test permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Constant Load Test</h4>\n<p>In this scenario, you will create a sample application that performs some CPU-intensive computations. This application is implemented in Python and is included in one of the example manifests from the starter kit. You can open the manifest, called <code class=\"language-text\">constant-load.yaml</code>, using nano or your favorite text editor.</p>\n<p>The manifest defines a deployment that creates a pod that runs the Python application. The application will continuously perform CPU-intensive computations, which will cause the pod to use more CPU resources. This will trigger the HorizontalPodAutoscaler (HPA) to scale the deployment up.</p>\n<p>Once you have opened the manifest, you can edit it to change the number of replicas in the deployment. The default number of replicas is 1, but you can increase this number to create more pods. The more pods you create, the more CPU resources will be used, and the more the HPA will scale the deployment up.</p>\n<p>Once you have edited the manifest, you can save it and apply it to your cluster using the <code class=\"language-text\">kubectl apply</code> command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> assets/manifests/hpa/metrics-server/constant-load.yaml</code></pre></div>\n<p>Once the manifest has been applied, the HPA will start monitoring the CPU usage of the deployment. If the CPU usage exceeds the target utilization, the HPA will scale the deployment up to add more pods.</p>\n<p>Verify that the deployment was created successfully, and that it's up and running:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get deployments</code></pre></div>\n<p>Next, you will need to deploy another HorizontalPodAutoscaler (HPA) to this cluster. There is an example HPA that is matched to this scenario in the file <code class=\"language-text\">constant-load-hpa.yaml</code>.</p>\n<p>The <code class=\"language-text\">constant-load-hpa.yaml</code> file defines an HPA that monitors the CPU usage of the constant-load deployment. The HPA will scale the deployment up if the CPU usage exceeds the target utilization, which is set to 80% by default.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">cat</span> assets/manifests/hpa/metrics-server/constant-load-hpa.yaml</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> autoscaling/v2beta2\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> HorizontalPodAutoscaler\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> constant<span class=\"token punctuation\">-</span>load\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">scaleTargetRef</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> constant<span class=\"token punctuation\">-</span>load<span class=\"token punctuation\">-</span>deployment\n    <span class=\"token key atrule\">minReplicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token key atrule\">maxReplicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n    <span class=\"token key atrule\">metrics</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Resource\n            <span class=\"token key atrule\">resource</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cpu\n                <span class=\"token key atrule\">target</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Utilization\n                    <span class=\"token key atrule\">averageUtilization</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> constant-load-hpa.yaml</code></pre></div>\n<p>Once the HPA has been applied, it will start monitoring the CPU usage of the constant-load deployment. If the CPU usage exceeds the target utilization, the HPA will scale the deployment up to add more pods.</p>\n<h2 id=\"running-vertical-pod-autoscaler\" style=\"position:relative;\"><a href=\"#running-vertical-pod-autoscaler\" aria-label=\"running vertical pod autoscaler permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Running Vertical Pod Autoscaler</h2>\n<p>For the VPA to work, it relies on the Kubernetes Metrics Server to get a Pod's CPU/Memory values. However, it can also use Prometheus. See <a href=\"https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler#using-prometheus\" target=\"_blank\" rel=\"noopener noreferrer\">How can I use Prometheus for the VPA recommender</a>.</p>\n<h3 id=\"Ô∏è-installing-vertical-pod-autoscaler\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-installing-vertical-pod-autoscaler\" aria-label=\"Ô∏è installing vertical pod autoscaler permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è Installing Vertical Pod Autoscaler</h3>\n<p>Let's use the Helm chart <code class=\"language-text\">cowboysysop/vertical-pod-autoscaler</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm repo <span class=\"token function\">add</span> cowboysysop https://cowboysysop.github.io/charts/\nhelm <span class=\"token parameter variable\">-n</span> kube-system upgrade <span class=\"token parameter variable\">--install</span> vertical-pod-autoscaler cowboysysop/vertical-pod-autoscaler</code></pre></div>\n<p>Then, you can check VPA's Pods:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl <span class=\"token parameter variable\">-n</span> kube-system get pod <span class=\"token parameter variable\">-l</span> app.kubernetes.io/name<span class=\"token operator\">=</span>vertical-pod-autoscaler</code></pre></div>\n<p>And its CustomResourceDefinitions:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get crds\nNAME                                                   CREATED AT\nverticalpodautoscalercheckpoints.autoscaling.k8s.io  <span class=\"token number\">2023</span>-08-26T10:45:46Z\nverticalpodautoscalers.autoscaling.k8s.io            <span class=\"token number\">2023</span>-08-26T10:45:46Z</code></pre></div>\n<p>Now everything is ready to start using it.</p>\n<h3 id=\"-examples-of-work-with-vertical-pod-autoscaler\" style=\"position:relative;\"><a href=\"#-examples-of-work-with-vertical-pod-autoscaler\" aria-label=\" examples of work with vertical pod autoscaler permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìÑ Examples of Work with Vertical Pod Autoscaler</h3>\n<p>In the <a href=\"https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler\" target=\"_blank\" rel=\"noopener noreferrer\">VPA repository</a>, there is a directory named <code class=\"language-text\">vpa</code>, which contains examples of manifests. In the <code class=\"language-text\">hamster.yaml</code> file, there is an example of a configured VPA and a test Deployment. But let's create our manifests and deploy resources separately.</p>\n<h4 id=\"-first-describe-a-deployment\" style=\"position:relative;\"><a href=\"#-first-describe-a-deployment\" aria-label=\" first describe a deployment permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üêπ First, Describe a Deployment</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hamster\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> hamster\n    <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> hamster\n        <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">securityContext</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">runAsNonRoot</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n                <span class=\"token key atrule\">runAsUser</span><span class=\"token punctuation\">:</span> <span class=\"token number\">65534</span> <span class=\"token comment\"># nobody</span>\n            <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hamster\n                    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> registry.k8s.io/ubuntu<span class=\"token punctuation\">-</span>slim<span class=\"token punctuation\">:</span><span class=\"token number\">0.1</span>\n                    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n                            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n                            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 50Mi\n                    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"/bin/sh\"</span><span class=\"token punctuation\">]</span>\n                    <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token punctuation\">-</span> <span class=\"token string\">\"-c\"</span>\n                        <span class=\"token punctuation\">-</span> <span class=\"token string\">\"while true; do timeout 0.5s yes >/dev/null; sleep 0.5s; done\"</span></code></pre></div>\n<p>Here we have to create two Pods with requests at 100 Milli CPU and 50 Megabyte memory. Deploy it:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> assets/manifests/vpa/hamster.yaml\ndeployment.apps/hamster created</code></pre></div>\n<p>A few minutes later, check the resources that are actually consumed by the Pods:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl <span class=\"token function\">top</span> pod\nNAME                       CPU<span class=\"token punctuation\">(</span>cores<span class=\"token punctuation\">)</span>   MEMORY<span class=\"token punctuation\">(</span>bytes<span class=\"token punctuation\">)</span>\nhamster-65cd4dd797-fq9lq   498m         0Mi\nhamster-65cd4dd797-lnpks   499m         0Mi</code></pre></div>\n<h4 id=\"now-add-a-vpa\" style=\"position:relative;\"><a href=\"#now-add-a-vpa\" aria-label=\"now add a vpa permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Now, Add a VPA</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"autoscaling.k8s.io/v1\"</span>\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> VerticalPodAutoscaler\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hamster<span class=\"token punctuation\">-</span>vpa\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">targetRef</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"apps/v1\"</span>\n        <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hamster\n    <span class=\"token key atrule\">resourcePolicy</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">containerPolicies</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span>\n                <span class=\"token key atrule\">minAllowed</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n                    <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 50Mi\n                <span class=\"token key atrule\">maxAllowed</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n                    <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 500Mi\n                <span class=\"token key atrule\">controlledResources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"cpu\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"memory\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Deploy it:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> assets/manifests/vpa/vpa.yaml\nverticalpodautoscaler.autoscaling.k8s.io/hamster-vpa created</code></pre></div>\n<p>Check the VPA object:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get vpa\nNAME         MODE CPU MEM PROVIDED AGE\nhamster-vpa   Auto                 14s</code></pre></div>\n<p>And in a minute or two, the Recommender starts working:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get vpa\nNAME          MODE  CPU   MEM     PROVIDED AGE\nhamster-vpa   Auto  587m  262144k  True    43s</code></pre></div>\n<p>And in another minute, check the Updater work‚Ää‚Äî‚Ääit kills old Pods to apply new recommended values for the requests:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pod\nNAME                       READY   STATUS        RESTARTS   AGE\nhamster-65cd4dd797-fq9lq   <span class=\"token number\">1</span>/1     Terminating   <span class=\"token number\">0</span>          3m43s\nhamster-65cd4dd797-hc9cn   <span class=\"token number\">1</span>/1     Running       <span class=\"token number\">0</span>          13s\nhamster-65cd4dd797-lnpks   <span class=\"token number\">1</span>/1     Running       <span class=\"token number\">0</span>          3m43s</code></pre></div>\n<p>Check the value requests of the new Pod:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pod hamster-65cd4dd797-hc9cn <span class=\"token parameter variable\">-o</span> yaml <span class=\"token operator\">|</span> yq <span class=\"token string\">'.spec.containers[].resources'</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"requests\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"cpu\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"587m\"</span>,\n        <span class=\"token string\">\"memory\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"262144k\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>That's all for now. üéâ</p>\n<h2 id=\"-closing-notes\" style=\"position:relative;\"><a href=\"#-closing-notes\" aria-label=\" closing notes permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìï Closing Notes</h2>\n<p>Kubernetes autoscaling is a pivotal strategy for achieving seamless scalability and operational efficiency in your containerized applications. By mastering the art of vertical and horizontal pod autoscaling, you unlock the ability to adapt to varying workloads while optimizing resource utilization. Whether it's boosting performance through vertical scaling or accommodating increased traffic with horizontal scaling, Kubernetes provides the tools to strike a balance between performance and cost-effectiveness. Harness the power of autoscaling to elevate your applications, ensuring they effortlessly meet user demands and resource constraints in today's dynamic computing landscape.</p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p><strong>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</strong></p>"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}