{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/dapr-kubernetes-event-driven-runtime-part1/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>A Beginner's Guide 📗</strong></p>\n</blockquote>\n<p>Distributed applications are becoming increasingly popular, as they offer a number of advantages over traditional monolithic applications. However, building and running distributed applications can be complex and challenging.</p>\n<p><a href=\"https://docs.dapr.io/getting-started/\" target=\"_blank\" rel=\"noopener noreferrer\">Dapr</a> is a portable, event-driven runtime that makes it easy to build and run distributed applications across the cloud and edge. It provides a set of building blocks that developers can use to easily build and run microservices, event-driven applications, and stateful applications.</p>\n<p>In this blog post, we will introduce Dapr and discuss its benefits and features. We will also show you how to get started with Dapr by building a simple microservices application.</p>\n<h2 id=\"what-is-dapr\" style=\"position:relative;\"><a href=\"#what-is-dapr\" aria-label=\"what is dapr permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>What is Dapr?</h2>\n<p><a href=\"https://docs.dapr.io/getting-started/\" target=\"_blank\" rel=\"noopener noreferrer\">Dapr</a> is a portable, event-driven runtime that makes it easy for any developer to build resilient, stateless, and stateful applications that run on the cloud and edge and embraces the diversity of languages and developer frameworks. Leveraging the benefits of a sidecar architecture, Dapr helps you tackle the challenges that come with building microservices and keeps your code platform agnostic.</p>\n<h3 id=\"introduction-to-the-distributed-application-runtime\" style=\"position:relative;\"><a href=\"#introduction-to-the-distributed-application-runtime\" aria-label=\"introduction to the distributed application runtime permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Introduction to the Distributed Application Runtime</h3>\n<p>Dapr is a portable, event-driven runtime that makes it easy for any developer to build resilient, stateless, and stateful applications that run on the cloud and edge and embraces the diversity of languages and developer frameworks.</p>\n<h3 id=\"any-language-any-framework-anywhere\" style=\"position:relative;\"><a href=\"#any-language-any-framework-anywhere\" aria-label=\"any language any framework anywhere permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Any Language, Any Framework, Anywhere</h3>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.8235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLUlEQVR42jWSS2gTQRjH9yBIwcehhx5KEUXwQS8t6LF6tiCiBym5qAdLBaGHFhTx0oIHD/VgkEoOtVQvLa2P2EcS4pKqpDHQNLG0hrax2zw2dje7Mzs7O7NvZxP95uOb+R4/+PMxnOd5ruu2ous6jhNk7DKaZlrEadWCltOcYjEYwBhzlFJd1xFCBiGImoQSjJFpWTu7u8K+sLdTocS0WZFQg5gI6YRSVVUty9Y0jWMvRVEOJUnR9CI0gY5EqUopaSiSjo2NNIAAs0GhDiqStr0tKCrieZ4hhBDObhoT4vv/3fM0g0mgvmvajqUalu16vs/8nzHpTG8At/LknvEqo0bW/kS+VyOpUji+9XIpN7mUnf6UmZxLTc0nZhYS03PLM7PRyJvZL6k0QyDUuGyuVi5J92KIGxc6JorHn2bahmPHBt8dDYXbbj07NfC8q3+088rd9su323uunzzfd+Ti1dDIGIMBhJysGBTRoYX9E4/XTo997XwU7xqJnnv49sz9192D4d47Ly4NjPfcHL3QP9x97cHZvlBH742hJxMBDCDnOLbvOdlccX7lxyJfWOQ3llP5+GohmlyPfdt8n1j/zOeS6a0oX/iYzK2sFj4k8/lfZUYFsmVsAWqbbB22phwUkI5Miut1EagNIApQLDVkdiDRAaZ2WbUMDIlhsB0DADgZUYUw3jX1xu/iZk0UMdZVoLEfYmkNGx5iTCt1pV6vSSr6eQCr1aoky2zbGOO/izHuVWmm7x8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"dapr\" title=\"\" src=\"/static/caaacddf29da2b8effa217adcaa7d4bb/c5bb3/dapr.png\" srcset=\"/static/caaacddf29da2b8effa217adcaa7d4bb/04472/dapr.png 170w,\n/static/caaacddf29da2b8effa217adcaa7d4bb/9f933/dapr.png 340w,\n/static/caaacddf29da2b8effa217adcaa7d4bb/c5bb3/dapr.png 680w,\n/static/caaacddf29da2b8effa217adcaa7d4bb/5a190/dapr.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>With the current wave of cloud adoption, web + database application architectures (such as classic 3-tier designs) are trending more toward microservice application architectures, which are inherently distributed. You shouldn't have to become a distributed systems expert just to create microservices applications.</p>\n<p>This is where Dapr comes in. Dapr codifies the best practices for building microservice applications into open, independent APIs called <a href=\"https://docs.dapr.io/concepts/overview/#microservice-building-blocks-for-cloud-and-edge\" target=\"_blank\" rel=\"noopener noreferrer\">building blocks</a>.</p>\n<h3 id=\"daprs-building-blocks\" style=\"position:relative;\"><a href=\"#daprs-building-blocks\" aria-label=\"daprs building blocks permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Dapr's Building Blocks</h3>\n<ul>\n<li>Enable you to build portable applications using the language and framework of your choice.</li>\n<li>Are completely independent.</li>\n<li>Have no limit to how many you use in your application.</li>\n</ul>\n<p>Using Dapr, you can incrementally migrate your existing applications to a microservices architecture, thereby adopting cloud-native patterns such as scale out/in, resiliency, and independent deployments.</p>\n<p>Dapr is platform agnostic, meaning you can run your applications:</p>\n<ul>\n<li>Locally</li>\n<li>On any Kubernetes cluster</li>\n<li>On virtual or physical machines</li>\n<li>In other hosting environments that Dapr integrates with.</li>\n</ul>\n<p>This enables you to build microservice applications that can run on the cloud and edge.</p>\n<h3 id=\"hosting-environments\" style=\"position:relative;\"><a href=\"#hosting-environments\" aria-label=\"hosting environments permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Hosting Environments</h3>\n<p>Dapr can be hosted in multiple environments, including:</p>\n<ul>\n<li>Self-hosted on a Windows/Linux/macOS machine for local development.</li>\n<li>On Kubernetes or clusters of physical or virtual machines in production.</li>\n</ul>\n<h4 id=\"self-hosted-local-development\" style=\"position:relative;\"><a href=\"#self-hosted-local-development\" aria-label=\"self hosted local development permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Self-Hosted Local Development</h4>\n<p>In <a href=\"https://docs.dapr.io/operations/hosting/self-hosted/self-hosted-overview/\" target=\"_blank\" rel=\"noopener noreferrer\">self-hosted mode</a>, Dapr runs as a separate sidecar process, which your service code can call via HTTP or gRPC. Each running service has a Dapr runtime process (or sidecar) configured to use state stores, pub/sub, binding components, and other building blocks.</p>\n<p>You can use the <a href=\"https://github.com/dapr/cli#launch-dapr-and-your-app\" target=\"_blank\" rel=\"noopener noreferrer\">Dapr CLI</a> to run a Dapr-enabled application on your local machine. In the following diagram, Dapr's local development environment gets configured with the CLI init command. Try this out with <a href=\"https://docs.dapr.io/getting-started/\" target=\"_blank\" rel=\"noopener noreferrer\">the getting started samples</a>.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3ZRAf//EABcQAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQEAAQUCpRaj/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARIRAxcf/aAAgBAQABPyE0+wSuNEpXUo5f/9oADAMBAAIAAwAAABBYz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQVFhgZH/2gAIAQEAAT8QVBLqkN6sFpvyQexzHNjbbDW37Mhvuf/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"example\" title=\"\" src=\"/static/200455aca73b826a56c3691eb7e7ab2a/7bf67/example.jpg\" srcset=\"/static/200455aca73b826a56c3691eb7e7ab2a/651be/example.jpg 170w,\n/static/200455aca73b826a56c3691eb7e7ab2a/d30a3/example.jpg 340w,\n/static/200455aca73b826a56c3691eb7e7ab2a/7bf67/example.jpg 680w,\n/static/200455aca73b826a56c3691eb7e7ab2a/4b190/example.jpg 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h4 id=\"kubernetes\" style=\"position:relative;\"><a href=\"#kubernetes\" aria-label=\"kubernetes permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Kubernetes</h4>\n<p>Kubernetes can be used for either:</p>\n<ul>\n<li><strong>Local development</strong> (for example, with <a href=\"https://minikube.sigs.k8s.io/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">minikube</a> and <a href=\"https://k3s.io/\" target=\"_blank\" rel=\"noopener noreferrer\">k3S</a>)</li>\n<li><strong>Production</strong> (see <a href=\"https://docs.dapr.io/operations/hosting/kubernetes/\" target=\"_blank\" rel=\"noopener noreferrer\">production hosting</a>)</li>\n</ul>\n<p>In container hosting environments such as Kubernetes, Dapr runs as a sidecar container with the application container in the same pod. Dapr's <code class=\"language-text\">dapr-sidecar-injector</code> and <code class=\"language-text\">dapr-operator</code> control plane services provide first-class integration to:</p>\n<ul>\n<li>Launch Dapr as a sidecar container in the same pod as the service container</li>\n<li>Provide notifications of Dapr component updates provisioned in the cluster</li>\n</ul>\n<p>The <code class=\"language-text\">dapr-sentry</code> service is a certificate authority that enables mutual TLS between Dapr sidecar instances for secure data encryption, as well as providing identity via Spiffe. For more information on the Sentry service, <a href=\"https://docs.dapr.io/concepts/security-concept/#dapr-to-dapr-communication\" target=\"_blank\" rel=\"noopener noreferrer\">read the security overview</a>.</p>\n<p>Deploying and running a Dapr-enabled application into your Kubernetes cluster is as simple as adding a few annotations to the deployment schemes.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7klEQVR42l2R22rcMBCG/bR9pT5GodCUEnKTvUhpaFi2m81u9hDZXtnWWdbBsg62a6eFQn/+i5lffMMwyqY/Gsd3T//JdN734V8/TrBqHzcNAARWIhvGKb1Ts+cipCkOi+dcx+lhdwUApmnJh3mWCXWt7lcXCKExKivF9LhD293z02ZXwnqe7sLg4uiHpVDW+2Hs0xjHJcHCU6qRsBBWfd9n3MTHDc5z6qx5K8XLUVjTzQ+67fKr3p95DEFwu92zClvWBoSUta4oCmNMJkz49BWsN9R1fv3MPn8rKLXW9k2jv/8kN3d5CPOq9svt9WlLlI2E6jWWoCillFk/TJzK4/Gc58Da7nA4n06vgmBMakyJYBpjtN+/HF8vrk81doio+4pRIY3WmUtTZ4NzPqUU40AIJ4TkTDWYwGtlrI8xcs4R4qaLRWXntYXu2bsW2HUhpfmWU0xD6v2rDB/u6OpNT2My9u8/WevTMBLhCdZMu6Is27ZdYIxoDmBV80uhSSNPtf54C1YPwGinlG+lVaozer76hLln3AIkqrpxzmVU9YdLudkd14fqx8Eg1mkXlfbgqhruEe9PBQNXOWNYhrzUDVa/YM2FWGAusNKt7XolWecsF5JSTigjhCLCjGAjh1ZgwqRslRSmoeYGtRUmnLHfpLxl97+GXnkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"k8s\" title=\"\" src=\"/static/6ec20cc311f84b150d3050ac84958f56/c5bb3/k8s.png\" srcset=\"/static/6ec20cc311f84b150d3050ac84958f56/04472/k8s.png 170w,\n/static/6ec20cc311f84b150d3050ac84958f56/9f933/k8s.png 340w,\n/static/6ec20cc311f84b150d3050ac84958f56/c5bb3/k8s.png 680w,\n/static/6ec20cc311f84b150d3050ac84958f56/5a190/k8s.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"hands-on-and-getting-started\" style=\"position:relative;\"><a href=\"#hands-on-and-getting-started\" aria-label=\"hands on and getting started permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Hands-On and Getting Started</h2>\n<p>The project is surprisingly easy to get up and running regardless of your developer background and language of choice. I was able to follow the <a href=\"https://docs.dapr.io/getting-started/\" target=\"_blank\" rel=\"noopener noreferrer\">getting started guides</a> and run various quickstarts in no time on my macOS. Here are roughly the steps I followed:</p>\n<h3 id=\"install-dapr-cli-️\" style=\"position:relative;\"><a href=\"#install-dapr-cli-%EF%B8%8F\" aria-label=\"install dapr cli ️ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install Dapr CLI 🛠️</h3>\n<p>Dapr CLI is the main tool for performing Dapr-related tasks such as running an application with Dapr, viewing logs, running the Dapr dashboard, or deploying to Kubernetes.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">brew <span class=\"token function\">install</span> dapr/tap/dapr-cli</code></pre></div>\n<p>With the CLI installed, we have a few different options for installing and running Dapr. I'll start from the least demanding and flexible option and progress from there.</p>\n<p><strong>Option 1: Install Dapr without Docker:</strong></p>\n<p>This is the lightest but not the most useful way to run Dapr.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr init <span class=\"token parameter variable\">--slim</span></code></pre></div>\n<p>In this slim mode, only <code class=\"language-text\">daprd</code> and <code class=\"language-text\">placement</code> binaries are installed on the machine, which is sufficient for running Dapr sidecars locally.</p>\n<h3 id=\"️-run-a-dapr-sidecar\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-run-a-dapr-sidecar\" aria-label=\"️ run a dapr sidecar permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>🛠️ Run a Dapr Sidecar</h3>\n<p>The following command will start a Dapr sidecar called <code class=\"language-text\">no-app</code> listening on HTTP port 3500 and a random gRPC port.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr run --app-id no-app --dapr-http-port <span class=\"token number\">3500</span></code></pre></div>\n<p>Congratulations, you have your first Dapr sidecar running. You can see the sidecar instance through this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr list</code></pre></div>\n<p>Or query its health status:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-i</span> http://localhost:3500/v1.0/healthz</code></pre></div>\n<p>Dapr sidecars are supposed to run next to an application and not on their own. Let's stop this instance and run it with an application.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr stop --app-id no-app</code></pre></div>\n<h3 id=\"-run-a-simple-app-with-a-dapr-sidecar\" style=\"position:relative;\"><a href=\"#-run-a-simple-app-with-a-dapr-sidecar\" aria-label=\" run a simple app with a dapr sidecar permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>🚀 Run a Simple App with a Dapr Sidecar</h3>\n<p>For more details, refer to the <a href=\"https://docs.dapr.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Dapr documentation</a>.</p>\n<p>For this demonstration, we will use a <a href=\"https://github.com/dapr/samples/tree/master/hello-dapr-slim\" target=\"_blank\" rel=\"noopener noreferrer\">simple NodeJS application</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://github.com/dapr/samples.git\n<span class=\"token builtin class-name\">cd</span> samples/hello-dapr-slim\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></div>\n<p>This is a Hello World the Dapr way and here is the gist of it:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">app<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/neworder'</span><span class=\"token punctuation\">,</span> bodyParser<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">const</span> orderId <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>orderId<span class=\"token punctuation\">;</span> \n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got a new order! Order ID: \"</span> <span class=\"token operator\">+</span> orderId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For more examples and detailed guides, check out the <a href=\"https://github.com/dapr/samples\" target=\"_blank\" rel=\"noopener noreferrer\">Dapr Samples Repository</a>.</p>\n<p>The application has one <code class=\"language-text\">/neworder</code> endpoint listening on port 3000. We can run this application and the sidecar with the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr run --app-id nodeapp --app-port <span class=\"token number\">3000</span> --dapr-http-port <span class=\"token number\">3500</span> <span class=\"token function\">node</span> app.js</code></pre></div>\n<p>The command starts the NodeJS application on port 3000 and Dapr HTTP endpoint on 3500. Once you see in the logs that the app has started successfully, we can interact with it. Instead of hitting the <code class=\"language-text\">/neworder</code> endpoint directly on port 3000, we will interact with the application through the sidecar using the Dapr CLI:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr invoke <span class=\"token parameter variable\">--verb</span> POST --app-id nodeapp <span class=\"token parameter variable\">--method</span> neworder <span class=\"token parameter variable\">--data</span> <span class=\"token string\">'{\"data\": { \"orderId\": \"41\" } }'</span></code></pre></div>\n<p>For more information on Dapr CLI commands, refer to the <a href=\"https://docs.dapr.io/reference/cli/dapr-cli-overview/\" target=\"_blank\" rel=\"noopener noreferrer\">Dapr CLI documentation</a>.</p>\n<p>You can also use a curl command to achieve the same result:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-XPOST</span> <span class=\"token parameter variable\">-d</span> @sample.json <span class=\"token parameter variable\">-H</span> <span class=\"token string\">\"Content-Type:application/json\"</span> http://localhost:3500/v1.0/invoke/nodeapp/method/neworder</code></pre></div>\n<p>This command uses Dapr's service invocation API to interact with the application. Here is a visual representation of what just happened:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 37.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABnUlEQVR42nVRTS8DQRie+qhIE3FAnMXFUeLgD/SAi4OTUImTgzghvdWVODjgLwjBgaNE41JZqe8GKbKltbq73dndUf3Ynenr3bYiEd7kmWfeyeSZZ56XAIAvGo02eUzqhftGj9OKMiRc5xr7UwAhIUvMNKVMJiMZhiG5rvuNGOf8Xtf1RfJXfQtSXZ8U2LwXQGhFAK0EYOULwJgNxSIe/JTrLaZpbhJFUfrwtZlkMtkWiUSaEjsRfyy201oTpqHVExXI3IXjD99wMn/JD29zHKDCHZfzz3yem/YHNyxWqguuE9u2N72GMTbqiaxH1e6DB9aBWx9AbnrlxACycCv6157AF07A9tkbMCMLOWpC4TMPz+l3eHzNVh1Sig41TeunlIZlWW5HkUDL4ERv18BIT81hYXz5CB3OXLmdS3eCzF6K/XPNS0GgQ2FZlkjJsnhJyWVPEH+68Ts+P6I5GAwGqoKcTh6nXBjbUsTUXhZCu1m4VmrZiQr8nSFyA+K/KQ8Lp5jA+2cATtwDTj1ecpy4g8DpVrlcLks45aSqquEvYFmDJ1VslScAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Invoking an endpoint through Dapr sidecar\" title=\"\" src=\"/static/492fde26f0f51f028a477293e667a12a/c5bb3/dapr-invoke.png\" srcset=\"/static/492fde26f0f51f028a477293e667a12a/04472/dapr-invoke.png 170w,\n/static/492fde26f0f51f028a477293e667a12a/9f933/dapr-invoke.png 340w,\n/static/492fde26f0f51f028a477293e667a12a/c5bb3/dapr-invoke.png 680w,\n/static/492fde26f0f51f028a477293e667a12a/5a190/dapr-invoke.png 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>With Dapr on the request path, we get benefits such as resiliency policies (retries, timeouts, circuit breakers), observability enhancements (metrics, tracing, logs), and security enhancements (mTLS, <a href=\"https://docs.dapr.io/operations/configuration/invoke-allowlist/\" target=\"_blank\" rel=\"noopener noreferrer\">allow lists</a>). You can explore metadata, metrics endpoints, <a href=\"https://docs.dapr.io/operations/configuration/configuration-overview/\" target=\"_blank\" rel=\"noopener noreferrer\">configuration options</a>, or see your microservice in the Dapr dashboard:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr dashboard</code></pre></div>\n<p>The slim mode we are running is good for the Hello World scenario but not ideal for local development as it lacks state store, pub/sub, and metric server. Let's stop the nodeapp and remove the slim Dapr binary:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr stop --app-id nodeapp\ndapr uninstall</code></pre></div>\n<p>Note that this command will not remove the default configuration and component specification files usually located in the <code class=\"language-text\">~/.dapr</code> folder. If you follow other tutorials and change those files, they will remain and get applied with every <code class=\"language-text\">dapr run</code> command in the future (unless overridden). Keep this in mind to avoid confusion.</p>\n<h3 id=\"option-2-install-dapr-with-docker-\" style=\"position:relative;\"><a href=\"#option-2-install-dapr-with-docker-\" aria-label=\"option 2 install dapr with docker  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><strong>Option 2: Install Dapr with Docker 🐳</strong></h3>\n<p>This is the preferred way for running <a href=\"https://docs.dapr.io/getting-started/install-dapr-selfhost/\" target=\"_blank\" rel=\"noopener noreferrer\">Dapr locally</a> for development purposes, but it requires Docker. Let's set it up:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr init</code></pre></div>\n<p>The command will download and run 3 containers:</p>\n<ul>\n<li><strong>Dapr placement container</strong>: Used with actors (I wish this was an optional feature).</li>\n<li><strong>Zipkin</strong>: For collecting tracing information from our sidecars.</li>\n<li><strong>Redis</strong>: A single node Redis container used for state store, pub/sub, and distributed-lock implementations.</li>\n</ul>\n<p>You can verify when these containers are running and you are ready to go:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker</span> <span class=\"token function\">ps</span></code></pre></div>\n<h3 id=\"run-the-quickstarts-\" style=\"position:relative;\"><a href=\"#run-the-quickstarts-\" aria-label=\"run the quickstarts  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><strong>Run the Quickstarts 🚀</strong></h3>\n<p>My next step from here was to try out the <a href=\"https://docs.dapr.io/getting-started/quickstarts/\" target=\"_blank\" rel=\"noopener noreferrer\">quickstarts</a> that demonstrate the building blocks for service invocation, pub/sub, state store, bindings, etc. The awesome thing about these quickstarts is that they demonstrate the same example in multiple ways:</p>\n<ul>\n<li>With Dapr SDK and without any dependency on Dapr SDK (i.e., using HTTP only).</li>\n<li>In multiple languages: Java, JavaScript, .NET, Go, Python, etc.</li>\n</ul>\n<p>You can mix and match different languages and interaction methods (SDK or native) for the same example, which demonstrates Dapr's polyglot nature.</p>\n<h3 id=\"option-3-install-dapr-on-kubernetes-️\" style=\"position:relative;\"><a href=\"#option-3-install-dapr-on-kubernetes-%EF%B8%8F\" aria-label=\"option 3 install dapr on kubernetes ️ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><strong>Option 3: Install Dapr on Kubernetes ☸️</strong></h3>\n<p>If you have come this far, you should have a good high-level understanding of what Dapr can do for you. The next step would be to deploy Dapr on Kubernetes where most of the Dapr functionalities are available and closest to a production deployment. For this purpose, I used <a href=\"https://minikube.sigs.k8s.io/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">minikube</a> locally with default settings and no custom tuning.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dapr init <span class=\"token parameter variable\">--kubernetes</span> <span class=\"token parameter variable\">--wait</span></code></pre></div>\n<p>If successful, this command will start the following pods in the <code class=\"language-text\">dapr-system</code> namespace:</p>\n<ul>\n<li><strong>dapr-operator</strong>: Manages all components for state store, pub/sub, configuration, etc.</li>\n<li><strong>dapr-sidecar-injector</strong>: Injects Dapr sidecars into annotated deployment pods.</li>\n<li><strong>dapr-placement</strong>: Required with actors only.</li>\n<li><strong>dapr-sentry</strong>: Manages mTLS between services and acts as a certificate authority.</li>\n<li><strong>dapr-dashboard</strong>: A simple web app to explore what is running within a Dapr cluster.</li>\n</ul>\n<p>These Pods collectively represent the <a href=\"https://docs.dapr.io/concepts/dapr-services/\" target=\"_blank\" rel=\"noopener noreferrer\">Dapr control plane.</a></p>\n<h3 id=\"injecting-a-sidecar-️\" style=\"position:relative;\"><a href=\"#injecting-a-sidecar-%EF%B8%8F\" aria-label=\"injecting a sidecar ️ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><strong>Injecting a Sidecar 🛠️</strong></h3>\n<p>From here on, adding a Dapr sidecar to an application (this would be Dapr dataplane) is as easy as adding the <a href=\"https://docs.dapr.io/reference/arguments-annotations-overview/\" target=\"_blank\" rel=\"noopener noreferrer\">following annotations</a> to your Kubernetes Deployments:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">dapr.io/enabled</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n    <span class=\"token key atrule\">dapr.io/app-id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"nodeapp\"</span>\n    <span class=\"token key atrule\">dapr.io/app-port</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3000\"</span></code></pre></div>\n<p>The <code class=\"language-text\">dapr-sidecar-injector</code> service watches for new Pods with the <code class=\"language-text\">dapr.io/enabled</code> annotation and injects a container with the <code class=\"language-text\">daprd</code> process within the pod. It also adds <code class=\"language-text\">DAPR_HTTP_PORT</code> and <code class=\"language-text\">DAPR_GRPC_PORT</code> environment variables to your container so that it can easily communicate with Dapr without hard-coding Dapr port values.</p>\n<p>To deploy a complete application on Kubernetes, I suggest this <a href=\"https://github.com/dapr/quickstarts/tree/master/tutorials/hello-kubernetes\" target=\"_blank\" rel=\"noopener noreferrer\">step-by-step example</a>. It has provider and consumer services and it worked the first time for me.</p>\n<h3 id=\"transparent-vs-explicit-proxy-\" style=\"position:relative;\"><a href=\"#transparent-vs-explicit-proxy-\" aria-label=\"transparent vs explicit proxy  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><strong>Transparent vs Explicit Proxy 🔍</strong></h3>\n<p>Notice that Dapr sidecar injection is less intrusive than a typical service mesh with a transparent sidecar such as Istio's Envoy. To inject a transparent proxy, typically the Pods also get injected with an init-container that runs at the start of the Pod and re-configures the Pod's networking rules so that all ingress and egress traffic of your application container goes through the sidecar. With Dapr, that is not the case. There is a sidecar injected, but your application is in control of when and how to interact with Dapr over its well-defined explicit (non-transparent) APIs.</p>\n<p>Transparent service mesh proxies operate at lower network layers typically used by operations teams, whereas Dapr provides application layer primitives needed by developers. If you are interested in this topic, here is a good <a href=\"https://docs.dapr.io/concepts/service-mesh/\" target=\"_blank\" rel=\"noopener noreferrer\">explanation of the differences and overlaps of Dapr with service meshes</a>.</p>\n<h2 id=\"summary-\" style=\"position:relative;\"><a href=\"#summary-\" aria-label=\"summary  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a><strong>Summary 📝</strong></h2>\n<p>Dapr emerges as a versatile and event-driven runtime, providing a beginner-friendly solution for constructing distributed applications. With its portable nature and emphasis on simplifying development complexities, Dapr empowers newcomers to seamlessly navigate the intricacies of building distributed systems. As a beginner's guide, this post sheds light on Dapr's fundamental features, offering a gateway for developers to embark on their journey into the realm of distributed application development.</p>\n<br>\n<p><strong><em>Until next time, つづく 🎉</em></strong></p>\n<blockquote>\n<p>💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  <em><strong>Until next time 🎉</strong></em></p>\n</blockquote>\n<p>🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>♻️ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>♻️ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ✌🏻</strong></p>\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n<p><strong>📅 Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":8,"rawMarkdownBody":"> **A Beginner's Guide 📗**\n\nDistributed applications are becoming increasingly popular, as they offer a number of advantages over traditional monolithic applications. However, building and running distributed applications can be complex and challenging.\n\n[Dapr](https://docs.dapr.io/getting-started/) is a portable, event-driven runtime that makes it easy to build and run distributed applications across the cloud and edge. It provides a set of building blocks that developers can use to easily build and run microservices, event-driven applications, and stateful applications.\n\nIn this blog post, we will introduce Dapr and discuss its benefits and features. We will also show you how to get started with Dapr by building a simple microservices application.\n\n## What is Dapr?\n\n[Dapr](https://docs.dapr.io/getting-started/) is a portable, event-driven runtime that makes it easy for any developer to build resilient, stateless, and stateful applications that run on the cloud and edge and embraces the diversity of languages and developer frameworks. Leveraging the benefits of a sidecar architecture, Dapr helps you tackle the challenges that come with building microservices and keeps your code platform agnostic.\n\n### Introduction to the Distributed Application Runtime\n\nDapr is a portable, event-driven runtime that makes it easy for any developer to build resilient, stateless, and stateful applications that run on the cloud and edge and embraces the diversity of languages and developer frameworks.\n\n### Any Language, Any Framework, Anywhere\n\n![dapr](./dapr.png)\n\nWith the current wave of cloud adoption, web + database application architectures (such as classic 3-tier designs) are trending more toward microservice application architectures, which are inherently distributed. You shouldn't have to become a distributed systems expert just to create microservices applications.\n\nThis is where Dapr comes in. Dapr codifies the best practices for building microservice applications into open, independent APIs called [building blocks](https://docs.dapr.io/concepts/overview/#microservice-building-blocks-for-cloud-and-edge).\n\n### Dapr's Building Blocks\n\n- Enable you to build portable applications using the language and framework of your choice.\n- Are completely independent.\n- Have no limit to how many you use in your application.\n\nUsing Dapr, you can incrementally migrate your existing applications to a microservices architecture, thereby adopting cloud-native patterns such as scale out/in, resiliency, and independent deployments.\n\nDapr is platform agnostic, meaning you can run your applications:\n\n- Locally\n- On any Kubernetes cluster\n- On virtual or physical machines\n- In other hosting environments that Dapr integrates with.\n\nThis enables you to build microservice applications that can run on the cloud and edge.\n\n### Hosting Environments\n\nDapr can be hosted in multiple environments, including:\n\n- Self-hosted on a Windows/Linux/macOS machine for local development.\n- On Kubernetes or clusters of physical or virtual machines in production.\n\n#### Self-Hosted Local Development\n\nIn [self-hosted mode](https://docs.dapr.io/operations/hosting/self-hosted/self-hosted-overview/), Dapr runs as a separate sidecar process, which your service code can call via HTTP or gRPC. Each running service has a Dapr runtime process (or sidecar) configured to use state stores, pub/sub, binding components, and other building blocks.\n\nYou can use the [Dapr CLI](https://github.com/dapr/cli#launch-dapr-and-your-app) to run a Dapr-enabled application on your local machine. In the following diagram, Dapr's local development environment gets configured with the CLI init command. Try this out with [the getting started samples](https://docs.dapr.io/getting-started/).\n\n![example](./example.jpg)\n\n#### Kubernetes\n\nKubernetes can be used for either:\n\n- **Local development** (for example, with [minikube](https://minikube.sigs.k8s.io/docs/) and [k3S](https://k3s.io/))\n- **Production** (see [production hosting](https://docs.dapr.io/operations/hosting/kubernetes/))\n\nIn container hosting environments such as Kubernetes, Dapr runs as a sidecar container with the application container in the same pod. Dapr's `dapr-sidecar-injector` and `dapr-operator` control plane services provide first-class integration to:\n\n- Launch Dapr as a sidecar container in the same pod as the service container\n- Provide notifications of Dapr component updates provisioned in the cluster\n\nThe `dapr-sentry` service is a certificate authority that enables mutual TLS between Dapr sidecar instances for secure data encryption, as well as providing identity via Spiffe. For more information on the Sentry service, [read the security overview](https://docs.dapr.io/concepts/security-concept/#dapr-to-dapr-communication).\n\nDeploying and running a Dapr-enabled application into your Kubernetes cluster is as simple as adding a few annotations to the deployment schemes.\n\n![k8s](./k8s.png)\n\n## Hands-On and Getting Started \n\nThe project is surprisingly easy to get up and running regardless of your developer background and language of choice. I was able to follow the [getting started guides](https://docs.dapr.io/getting-started/) and run various quickstarts in no time on my macOS. Here are roughly the steps I followed:\n\n### Install Dapr CLI 🛠️\n\nDapr CLI is the main tool for performing Dapr-related tasks such as running an application with Dapr, viewing logs, running the Dapr dashboard, or deploying to Kubernetes.\n\n```shell\nbrew install dapr/tap/dapr-cli\n```\n\nWith the CLI installed, we have a few different options for installing and running Dapr. I'll start from the least demanding and flexible option and progress from there.\n\n**Option 1: Install Dapr without Docker:**\n\nThis is the lightest but not the most useful way to run Dapr.\n\n```shell\ndapr init --slim\n```\n\nIn this slim mode, only `daprd` and `placement` binaries are installed on the machine, which is sufficient for running Dapr sidecars locally.\n\n### 🛠️ Run a Dapr Sidecar\n\nThe following command will start a Dapr sidecar called `no-app` listening on HTTP port 3500 and a random gRPC port.\n\n```shell\ndapr run --app-id no-app --dapr-http-port 3500\n```\n\nCongratulations, you have your first Dapr sidecar running. You can see the sidecar instance through this command:\n\n```shell\ndapr list\n```\n\nOr query its health status:\n\n```shell\ncurl -i http://localhost:3500/v1.0/healthz\n```\n\nDapr sidecars are supposed to run next to an application and not on their own. Let's stop this instance and run it with an application.\n\n```shell\ndapr stop --app-id no-app\n```\n\n### 🚀 Run a Simple App with a Dapr Sidecar\n\nFor more details, refer to the [Dapr documentation](https://docs.dapr.io/).\n\nFor this demonstration, we will use a [simple NodeJS application](https://github.com/dapr/samples/tree/master/hello-dapr-slim):\n\n```shell\ngit clone https://github.com/dapr/samples.git\ncd samples/hello-dapr-slim\nnpm install\n```\n\nThis is a Hello World the Dapr way and here is the gist of it:\n\n```javascript\napp.post('/neworder', bodyParser.json(), (req, res) => { \n    const data = req.body.data; \n    const orderId = data.orderId; \n    res.status(200).send(\"Got a new order! Order ID: \" + orderId); \n});\n```\n\nFor more examples and detailed guides, check out the [Dapr Samples Repository](https://github.com/dapr/samples).\n\nThe application has one `/neworder` endpoint listening on port 3000. We can run this application and the sidecar with the following command:\n\n```shell\ndapr run --app-id nodeapp --app-port 3000 --dapr-http-port 3500 node app.js\n```\n\nThe command starts the NodeJS application on port 3000 and Dapr HTTP endpoint on 3500. Once you see in the logs that the app has started successfully, we can interact with it. Instead of hitting the `/neworder` endpoint directly on port 3000, we will interact with the application through the sidecar using the Dapr CLI:\n\n```shell\ndapr invoke --verb POST --app-id nodeapp --method neworder --data '{\"data\": { \"orderId\": \"41\" } }'\n```\n\nFor more information on Dapr CLI commands, refer to the [Dapr CLI documentation](https://docs.dapr.io/reference/cli/dapr-cli-overview/).\n\nYou can also use a curl command to achieve the same result:\n\n```shell\ncurl -XPOST -d @sample.json -H \"Content-Type:application/json\" http://localhost:3500/v1.0/invoke/nodeapp/method/neworder\n```\n\nThis command uses Dapr's service invocation API to interact with the application. Here is a visual representation of what just happened:\n\n![Invoking an endpoint through Dapr sidecar](./dapr-invoke.png)\n\nWith Dapr on the request path, we get benefits such as resiliency policies (retries, timeouts, circuit breakers), observability enhancements (metrics, tracing, logs), and security enhancements (mTLS, [allow lists](https://docs.dapr.io/operations/configuration/invoke-allowlist/)). You can explore metadata, metrics endpoints, [configuration options](https://docs.dapr.io/operations/configuration/configuration-overview/), or see your microservice in the Dapr dashboard:\n\n```shell\ndapr dashboard\n```\n\nThe slim mode we are running is good for the Hello World scenario but not ideal for local development as it lacks state store, pub/sub, and metric server. Let's stop the nodeapp and remove the slim Dapr binary:\n\n```shell\ndapr stop --app-id nodeapp\ndapr uninstall\n```\n\nNote that this command will not remove the default configuration and component specification files usually located in the `~/.dapr` folder. If you follow other tutorials and change those files, they will remain and get applied with every `dapr run` command in the future (unless overridden). Keep this in mind to avoid confusion.\n\n### **Option 2: Install Dapr with Docker 🐳**\n\nThis is the preferred way for running [Dapr locally](https://docs.dapr.io/getting-started/install-dapr-selfhost/) for development purposes, but it requires Docker. Let's set it up:\n\n```shell\ndapr init\n```\n\nThe command will download and run 3 containers:\n\n- **Dapr placement container**: Used with actors (I wish this was an optional feature).\n- **Zipkin**: For collecting tracing information from our sidecars.\n- **Redis**: A single node Redis container used for state store, pub/sub, and distributed-lock implementations.\n\nYou can verify when these containers are running and you are ready to go:\n\n```shell\ndocker ps\n```\n\n### **Run the Quickstarts 🚀**\n\nMy next step from here was to try out the [quickstarts](https://docs.dapr.io/getting-started/quickstarts/) that demonstrate the building blocks for service invocation, pub/sub, state store, bindings, etc. The awesome thing about these quickstarts is that they demonstrate the same example in multiple ways:\n\n- With Dapr SDK and without any dependency on Dapr SDK (i.e., using HTTP only).\n- In multiple languages: Java, JavaScript, .NET, Go, Python, etc.\n\nYou can mix and match different languages and interaction methods (SDK or native) for the same example, which demonstrates Dapr's polyglot nature.\n\n### **Option 3: Install Dapr on Kubernetes ☸️**\n\nIf you have come this far, you should have a good high-level understanding of what Dapr can do for you. The next step would be to deploy Dapr on Kubernetes where most of the Dapr functionalities are available and closest to a production deployment. For this purpose, I used [minikube](https://minikube.sigs.k8s.io/docs/) locally with default settings and no custom tuning.\n\n```shell\ndapr init --kubernetes --wait\n```\n\nIf successful, this command will start the following pods in the `dapr-system` namespace:\n\n- **dapr-operator**: Manages all components for state store, pub/sub, configuration, etc.\n- **dapr-sidecar-injector**: Injects Dapr sidecars into annotated deployment pods.\n- **dapr-placement**: Required with actors only.\n- **dapr-sentry**: Manages mTLS between services and acts as a certificate authority.\n- **dapr-dashboard**: A simple web app to explore what is running within a Dapr cluster.\n\nThese Pods collectively represent the [Dapr control plane.](https://docs.dapr.io/concepts/dapr-services/)\n\n### **Injecting a Sidecar 🛠️**\n\nFrom here on, adding a Dapr sidecar to an application (this would be Dapr dataplane) is as easy as adding the [following annotations](https://docs.dapr.io/reference/arguments-annotations-overview/) to your Kubernetes Deployments:\n\n```yaml\nannotations:\n    dapr.io/enabled: \"true\"\n    dapr.io/app-id: \"nodeapp\"\n    dapr.io/app-port: \"3000\"\n```\n\nThe `dapr-sidecar-injector` service watches for new Pods with the `dapr.io/enabled` annotation and injects a container with the `daprd` process within the pod. It also adds `DAPR_HTTP_PORT` and `DAPR_GRPC_PORT` environment variables to your container so that it can easily communicate with Dapr without hard-coding Dapr port values.\n\nTo deploy a complete application on Kubernetes, I suggest this [step-by-step example](https://github.com/dapr/quickstarts/tree/master/tutorials/hello-kubernetes). It has provider and consumer services and it worked the first time for me.\n\n### **Transparent vs Explicit Proxy 🔍**\n\nNotice that Dapr sidecar injection is less intrusive than a typical service mesh with a transparent sidecar such as Istio's Envoy. To inject a transparent proxy, typically the Pods also get injected with an init-container that runs at the start of the Pod and re-configures the Pod's networking rules so that all ingress and egress traffic of your application container goes through the sidecar. With Dapr, that is not the case. There is a sidecar injected, but your application is in control of when and how to interact with Dapr over its well-defined explicit (non-transparent) APIs.\n\nTransparent service mesh proxies operate at lower network layers typically used by operations teams, whereas Dapr provides application layer primitives needed by developers. If you are interested in this topic, here is a good [explanation of the differences and overlaps of Dapr with service meshes](https://docs.dapr.io/concepts/service-mesh/).\n\n## **Summary 📝**\n\nDapr emerges as a versatile and event-driven runtime, providing a beginner-friendly solution for constructing distributed applications. With its portable nature and emphasis on simplifying development complexities, Dapr empowers newcomers to seamlessly navigate the intricacies of building distributed systems. As a beginner's guide, this post sheds light on Dapr's fundamental features, offering a gateway for developers to embark on their journey into the realm of distributed application development.\n\n<br>\n\n**_Until next time, つづく 🎉_**\n\n> 💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  _**Until next time 🎉**_\n\n🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**♻️ LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**♻️ X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ✌🏻**\n\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n\n**📅 Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":1844},"frontmatter":{"id":"33c75abd3129708b9b4a3f55","path":"/blog/dapr-kubernetes-event-driven-runtime-part1/","humanDate":"Oct 20, 2024","fullDate":"2024-10-20","title":"Dapr: A portable, Event-Driven runtime for building distributed applications; Part1","keywords":["Dapr","Kubernetes","event-driven runtime","distributed applications","cloud-native"],"excerpt":"Explore how Dapr provides a portable, event-driven runtime for building distributed applications on Kubernetes. Learn about its features, benefits, and best practices for leveraging Dapr in your cloud-native projects.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHsaFSsn//EABkQAAIDAQAAAAAAAAAAAAAAAAEQABESIf/aAAgBAQABBQLu7gRX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAACEgMTJR/9oACAEBAAY/AtLgi4f/xAAbEAEAAgIDAAAAAAAAAAAAAAABACEQETFBUf/aAAgBAQABPyGm6K9JblAhe0Q8wLn/2gAMAwEAAgADAAAAEBMf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFhcVH/2gAIAQEAAT8QtHFG2d+yhTT7XErzJb5i1UL5MmQAtBe5/9k="},"images":{"fallback":{"src":"/static/28d4927b6cfeb4d4da3886f0a0a9ee2d/dde1c/dapr-cover.jpg","srcSet":"/static/28d4927b6cfeb4d4da3886f0a0a9ee2d/dde1c/dapr-cover.jpg 318w","sizes":"100vw"},"sources":[{"srcSet":"/static/28d4927b6cfeb4d4da3886f0a0a9ee2d/83109/dapr-cover.webp 318w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/botkube-kubernetes-monitoring-automation/","title":"Botkube: Making Kubernetes management and automation easier","date":"2024-10-20 22:10:00"},"excerpt":"Making cluster operation automation simple for everyone 📗 📕 Introduction Botkube helps operators manage k8s by sending alerts and…"},"nextThought":{"frontmatter":{"path":"/blog/eks-avoid-ip-exhaustion-practices/","title":"Tackling IPv4 Address Exhaustion in Amazon EKS Clusters","date":"2024-10-20 21:45:00"},"excerpt":"Avoid IP Exhaustion Problem with few practices 🕸 Introduction Each Amazon EC2 instance supports a maximum number of elastic network…"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}