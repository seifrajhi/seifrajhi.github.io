{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/pre-commit-hooks-terraform-code-quality/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Automate Terraform Code Checks and and Security Standards ‚Ü™Ô∏è</strong></p>\n</blockquote>\n<h2 id=\"Ô∏è-introduction\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-introduction\" aria-label=\"Ô∏è introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚òÅÔ∏è Introduction</h2>\n<p>In the ever-changing world of tech, it is essential to ensure the quality and security of your code. However, manually running command-line checks before every commit can be a time-consuming and tedious task. In this blog post, we will introduce you to Pre-commit hooks, a powerful tool that can help you automate code quality checks. Pre-commit hooks for Terraform are scripts that run automatically before you commit your code.</p>\n<p>They can be used to check for a variety of errors, such as linting errors, security vulnerabilities, and formatting issues.</p>\n<p>This blog post is designed for both experienced and inexperienced Terraform users. We will cover the basics of <a href=\"https://github.com/antonbabenko/pre-commit-terraform\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform pre-commit hooks</a> and how to use them with Terraform. We will also provide some tips on how to choose the right hooks for your needs.</p>\n<p>Let's get started! üí™</p>\n<h2 id=\"-what-is-pre-commit\" style=\"position:relative;\"><a href=\"#-what-is-pre-commit\" aria-label=\" what is pre commit permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìç What is pre-commit</h2>\n<p><a href=\"https://pre-commit.com/#install\" target=\"_blank\" rel=\"noopener noreferrer\">Pre-commit hooks</a> are essential scripts that automatically execute before committing your code changes. They serve a critical role in identifying various types of issues, including linting errors, security vulnerabilities, and formatting inconsistencies. This robust pre-commit process ensures the highest quality and safety of your code, making it ready for deployment.</p>\n<p><a href=\"https://developer.hashicorp.com/terraform/downloads\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform</a>, on the other hand, is a powerful open-source infrastructure as code (IaC) tool that empowers users to create, modify, and enhance infrastructure in a reliable and predictable manner. It achieves this by converting infrastructure into a configuration language, which can be efficiently managed using version control tools.</p>\n<p>Now, let's explore some of the most popular <a href=\"https://github.com/antonbabenko/pre-commit-terraform\" target=\"_blank\" rel=\"noopener noreferrer\">pre-commit hooks tailored for Terraform</a>:</p>\n<ul>\n<li><strong><a href=\"https://github.com/terraform-docs/terraform-docs\" target=\"_blank\" rel=\"noopener noreferrer\">terraform-docs</a></strong>: This hook meticulously inspects your Terraform configuration files, detecting and correcting documentation errors.</li>\n<li><strong><a href=\"https://github.com/terraform-linters/tflint\" target=\"_blank\" rel=\"noopener noreferrer\">tflint</a></strong>: With this hook, your Terraform configurations undergo a thorough linting process to identify and rectify errors.</li>\n<li><strong><a href=\"https://github.com/aquasecurity/tfsec\" target=\"_blank\" rel=\"noopener noreferrer\">tfsec</a></strong>: Ensuring security is paramount, and tfsec specializes in scanning Terraform configurations for potential vulnerabilities.</li>\n<li><strong><a href=\"https://github.com/bridgecrewio/checkov\" target=\"_blank\" rel=\"noopener noreferrer\">checkov</a></strong>: This hook evaluates your Terraform configurations against a predefined set of security best practices, ensuring robust security posture.</li>\n<li><strong><a href=\"https://github.com/tenable/terrascan\" target=\"_blank\" rel=\"noopener noreferrer\">terrascan</a></strong>: Compliance with security standards is vital, and terrascan evaluates your configurations for adherence to these standards.</li>\n<li><strong><a href=\"https://github.com/infracost/infracost\" target=\"_blank\" rel=\"noopener noreferrer\">infracost</a></strong>: Providing financial insights, this hook estimates the cost implications of running your Terraform configurations.</li>\n<li><strong><a href=\"https://github.com/minamijoyo/tfupdate\" target=\"_blank\" rel=\"noopener noreferrer\">tfupdate</a></strong>: Stay up-to-date with Terraform providers by using this hook to check for updates and improvements.</li>\n<li><strong><a href=\"https://github.com/minamijoyo/hcledit\" target=\"_blank\" rel=\"noopener noreferrer\">minamijoyo/hcledit</a></strong>: Code readability and maintainability are enhanced with this hook, which refines your Terraform configurations.</li>\n<li><strong><a href=\"https://github.com/jqlang/jq\" target=\"_blank\" rel=\"noopener noreferrer\">jq</a></strong>: A versatile command-line JSON processor, jq is used to manipulate and refine Terraform configuration files as needed.</li>\n<li><strong><a href=\"https://terragrunt.gruntwork.io/docs/getting-started/quick-start/\" target=\"_blank\" rel=\"noopener noreferrer\">Terragrunt</a></strong>: A thin wrapper that provides extra tools for keeping your configurations DRY, working with multiple Terraform modules, and managing remote state.</li>\n<li><strong><a href=\"https://www.terraform.io/docs/commands/validate.html\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform Validate</a></strong>: A native Terraform command that validates the configuration files in a directory, referring only to the configuration and not accessing any remote services such as remote state, provider APIs, etc.</li>\n<li><strong><a href=\"https://www.terraform.io/docs/commands/fmt.html\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform Fmt</a></strong>: A Terraform command that is available natively and is used to rewrite Terraform configuration files to a canonical format and style. This command applies a subset of the <a href=\"https://www.terraform.io/docs/configuration/style.html\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform language style conventions</a>, along with other minor adjustments for readability.</li>\n</ul>\n<h3 id=\"Ô∏è-setting-up-pre-commit-hooks-for-terraform\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-setting-up-pre-commit-hooks-for-terraform\" aria-label=\"Ô∏è setting up pre commit hooks for terraform permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è Setting Up Pre-commit Hooks for Terraform</h3>\n<p>To globally install the pre-commit hook and configure it for use with Terraform, follow these steps:</p>\n<ol>\n<li><strong>Install Pre-Commit Globally (Not Needed if Using Docker Image):</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token assign-left variable\">DIR</span><span class=\"token operator\">=~</span>/.git-template\n<span class=\"token function\">git</span> config <span class=\"token parameter variable\">--global</span> init.templateDir <span class=\"token variable\">${DIR}</span>\npre-commit init-templatedir <span class=\"token parameter variable\">-t</span> pre-commit <span class=\"token variable\">${DIR}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">*Note: If you're already using a Docker image, you can skip this step.*</code></pre></div>\n<ol start=\"2\">\n<li><strong>Add Configurations and Hooks:</strong></li>\n</ol>\n<p>Navigate to the repository where you want to set up the pre-commit hooks, and perform the following steps:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">git</span> init\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> .pre-commit-config.yaml</span>\ndefault_install_hook_types:\n    - pre-commit\n    - commit-msg\n\nrepos:\n# BASIC CONF FOR ALL PRE-COMMITS REPO TYPE\n    - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.4.0\n    hooks:\n        - id: trailing-whitespace\n        stages: [commit]\n        - id: end-of-file-fixer\n        exclude: /secrets\n        stages: [commit]\n        - id: check-added-large-files\n        stages: [commit]\n        - id: check-yaml\n        args:\n        - '--allow-multiple-documents'\n        exclude: /templates|/secrets\n        stages: [commit]\n        - id: check-json\n        stages: [commit]\n        - id: check-toml\n        stages: [commit]\n        - id: check-shebang-scripts-are-executable\n        stages: [commit]\n\n    - repo: https://github.com/compilerla/conventional-pre-commit\n    rev: v2.1.1\n    hooks:\n        - id: conventional-pre-commit\n        stages: [commit-msg]\n\n    - repo: https://github.com/gitleaks/gitleaks\n        rev: v8.16.1\n        hooks:\n        - id: gitleaks\n\n# SPECIFIC CONF FOR TERRAFORM MODULE REPOSITORIES\n    - repo: https://github.com/antonbabenko/pre-commit-terraform\n    rev: v1.77.1\n    hooks:\n        - id: terraform_fmt\n        args:\n        - --args=-diff\n        - --args=-write=true\n        stages: [commit]\n        - id: terraform_docs\n        stages: [commit]\n        - id: terraform_tflint\n        files: \\.tf$\n        args:\n            - --args=--config=__GIT_WORKING_DIR__/.tflint.hcl\n        stages: [commit]\n        - id: terraform_tfsec\n        files: \\.tf$\n        args:\n            - >\n            --args=--config-file=__GIT_WORKING_DIR__/.tfsec.yml\n            --var-file tests/terraform.tfvars\n        stages: [commit]\nEOF</span></code></pre></div>\n<p>Make sure to replace <code class=\"language-text\">&lt;VERSION></code> with the latest available version from the provided URL.</p>\n<ol start=\"3\">\n<li><strong>Running the Pre-Commit Hook:</strong></li>\n</ol>\n<p>After configuring the pre-commit hook, you can either install it globally or run it manually. In this example, we'll manually run the pre-commit hook:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">pre-commit run <span class=\"token parameter variable\">-a</span></code></pre></div>\n<h2 id=\"-closing-thoughts\" style=\"position:relative;\"><a href=\"#-closing-thoughts\" aria-label=\" closing thoughts permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìö Closing Thoughts</h2>\n<p>By leveraging pre-commit hooks, you can seamlessly integrate various open-source and Terraform-native tools into your workflow, all through a unified automation tool. This approach shifts the responsibility of enforcing code quality to pre-commit hooks, reducing the workload on downstream continuous integration (CI) systems. Additionally, it allows for the swift identification and resolution of minor issues with each commit, resulting in cleaner pull requests and reduced review time.</p>\n<p><br><br></p>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò</p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":4,"rawMarkdownBody":"\n> **Automate Terraform Code Checks and and Security Standards ‚Ü™Ô∏è**\n\n## ‚òÅÔ∏è Introduction\n\nIn the ever-changing world of tech, it is essential to ensure the quality and security of your code. However, manually running command-line checks before every commit can be a time-consuming and tedious task. In this blog post, we will introduce you to Pre-commit hooks, a powerful tool that can help you automate code quality checks. Pre-commit hooks for Terraform are scripts that run automatically before you commit your code.\n\nThey can be used to check for a variety of errors, such as linting errors, security vulnerabilities, and formatting issues.\n\nThis blog post is designed for both experienced and inexperienced Terraform users. We will cover the basics of [Terraform pre-commit hooks](https://github.com/antonbabenko/pre-commit-terraform) and how to use them with Terraform. We will also provide some tips on how to choose the right hooks for your needs.\n\nLet's get started! üí™\n\n## üìç What is pre-commit\n\n[Pre-commit hooks](https://pre-commit.com/#install) are essential scripts that automatically execute before committing your code changes. They serve a critical role in identifying various types of issues, including linting errors, security vulnerabilities, and formatting inconsistencies. This robust pre-commit process ensures the highest quality and safety of your code, making it ready for deployment.\n\n[Terraform](https://developer.hashicorp.com/terraform/downloads), on the other hand, is a powerful open-source infrastructure as code (IaC) tool that empowers users to create, modify, and enhance infrastructure in a reliable and predictable manner. It achieves this by converting infrastructure into a configuration language, which can be efficiently managed using version control tools.\n\nNow, let's explore some of the most popular [pre-commit hooks tailored for Terraform](https://github.com/antonbabenko/pre-commit-terraform):\n\n- **[terraform-docs](https://github.com/terraform-docs/terraform-docs)**: This hook meticulously inspects your Terraform configuration files, detecting and correcting documentation errors.\n- **[tflint](https://github.com/terraform-linters/tflint)**: With this hook, your Terraform configurations undergo a thorough linting process to identify and rectify errors.\n- **[tfsec](https://github.com/aquasecurity/tfsec)**: Ensuring security is paramount, and tfsec specializes in scanning Terraform configurations for potential vulnerabilities.\n- **[checkov](https://github.com/bridgecrewio/checkov)**: This hook evaluates your Terraform configurations against a predefined set of security best practices, ensuring robust security posture.\n- **[terrascan](https://github.com/tenable/terrascan)**: Compliance with security standards is vital, and terrascan evaluates your configurations for adherence to these standards.\n- **[infracost](https://github.com/infracost/infracost)**: Providing financial insights, this hook estimates the cost implications of running your Terraform configurations.\n- **[tfupdate](https://github.com/minamijoyo/tfupdate)**: Stay up-to-date with Terraform providers by using this hook to check for updates and improvements.\n- **[minamijoyo/hcledit](https://github.com/minamijoyo/hcledit)**: Code readability and maintainability are enhanced with this hook, which refines your Terraform configurations.\n- **[jq](https://github.com/jqlang/jq)**: A versatile command-line JSON processor, jq is used to manipulate and refine Terraform configuration files as needed.\n- **[Terragrunt](https://terragrunt.gruntwork.io/docs/getting-started/quick-start/)**: A thin wrapper that provides extra tools for keeping your configurations DRY, working with multiple Terraform modules, and managing remote state.\n- **[Terraform Validate](https://www.terraform.io/docs/commands/validate.html)**: A native Terraform command that validates the configuration files in a directory, referring only to the configuration and not accessing any remote services such as remote state, provider APIs, etc.\n- **[Terraform Fmt](https://www.terraform.io/docs/commands/fmt.html)**: A Terraform command that is available natively and is used to rewrite Terraform configuration files to a canonical format and style. This command applies a subset of the [Terraform language style conventions](https://www.terraform.io/docs/configuration/style.html), along with other minor adjustments for readability.\n\n### üõ†Ô∏è Setting Up Pre-commit Hooks for Terraform\n\nTo globally install the pre-commit hook and configure it for use with Terraform, follow these steps:\n\n1. **Install Pre-Commit Globally (Not Needed if Using Docker Image):**\n\n```sh\nDIR=~/.git-template\ngit config --global init.templateDir ${DIR}\npre-commit init-templatedir -t pre-commit ${DIR}\n```\n    *Note: If you're already using a Docker image, you can skip this step.*\n\n2. **Add Configurations and Hooks:**\nNavigate to the repository where you want to set up the pre-commit hooks, and perform the following steps:\n\n```sh\ngit init\ncat <<EOF > .pre-commit-config.yaml\ndefault_install_hook_types:\n    - pre-commit\n    - commit-msg\n\nrepos:\n# BASIC CONF FOR ALL PRE-COMMITS REPO TYPE\n    - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.4.0\n    hooks:\n        - id: trailing-whitespace\n        stages: [commit]\n        - id: end-of-file-fixer\n        exclude: /secrets\n        stages: [commit]\n        - id: check-added-large-files\n        stages: [commit]\n        - id: check-yaml\n        args:\n        - '--allow-multiple-documents'\n        exclude: /templates|/secrets\n        stages: [commit]\n        - id: check-json\n        stages: [commit]\n        - id: check-toml\n        stages: [commit]\n        - id: check-shebang-scripts-are-executable\n        stages: [commit]\n\n    - repo: https://github.com/compilerla/conventional-pre-commit\n    rev: v2.1.1\n    hooks:\n        - id: conventional-pre-commit\n        stages: [commit-msg]\n\n    - repo: https://github.com/gitleaks/gitleaks\n        rev: v8.16.1\n        hooks:\n        - id: gitleaks\n\n# SPECIFIC CONF FOR TERRAFORM MODULE REPOSITORIES\n    - repo: https://github.com/antonbabenko/pre-commit-terraform\n    rev: v1.77.1\n    hooks:\n        - id: terraform_fmt\n        args:\n        - --args=-diff\n        - --args=-write=true\n        stages: [commit]\n        - id: terraform_docs\n        stages: [commit]\n        - id: terraform_tflint\n        files: \\.tf$\n        args:\n            - --args=--config=__GIT_WORKING_DIR__/.tflint.hcl\n        stages: [commit]\n        - id: terraform_tfsec\n        files: \\.tf$\n        args:\n            - >\n            --args=--config-file=__GIT_WORKING_DIR__/.tfsec.yml\n            --var-file tests/terraform.tfvars\n        stages: [commit]\nEOF\n```\n\n Make sure to replace `<VERSION>` with the latest available version from the provided URL.\n\n3. **Running the Pre-Commit Hook:**\n\nAfter configuring the pre-commit hook, you can either install it globally or run it manually. In this example, we'll manually run the pre-commit hook:\n\n```sh\npre-commit run -a\n```\n\n## üìö Closing Thoughts\n\nBy leveraging pre-commit hooks, you can seamlessly integrate various open-source and Terraform-native tools into your workflow, all through a unified automation tool. This approach shifts the responsibility of enforcing code quality to pre-commit hooks, reducing the workload on downstream continuous integration (CI) systems. Additionally, it allows for the swift identification and resolution of minor issues with each commit, resulting in cleaner pull requests and reduced review time.\n\n<br><br>\n\n**_Until next time, „Å§„Å•„Åè üéâ_**\n\n> üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  \n\nüöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**‚ôªÔ∏è LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**‚ôªÔ∏è X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ‚úåüèª**\n\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n\n  \n**üìÖ Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":733},"frontmatter":{"id":"1efbed99ec76873a51674ec1","path":"/blog/pre-commit-hooks-terraform-code-quality/","humanDate":"Oct 24, 2024","fullDate":"2024-10-24","title":"A Guide to using Pre-commit hooks for Terraform: Save time and improve code quality ü™ù","keywords":["Terraform","Pre-commit Hooks","Code Quality","Automation"],"excerpt":"Learn how to automate Terraform code checks and enforce security standards using pre-commit hooks, saving time and improving code quality.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBAgQG/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAdtVMkOTmhn/xAAZEAADAQEBAAAAAAAAAAAAAAAAAQIRAxP/2gAIAQEAAQUCvFPFMqoT96Y6qTT/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAESEf/aAAgBAgEBPwG3pbP/xAAbEAACAgMBAAAAAAAAAAAAAAAAEQECEBIhMv/aAAgBAQAGPwIl22FNqwLjPWP/xAAZEAEBAQEBAQAAAAAAAAAAAAABEQBRITH/2gAIAQEAAT8haJ97vXMryTVzOXDxUvKmuoksblLV3//aAAwDAQACAAMAAAAQ8x//xAAWEQEBAQAAAAAAAAAAAAAAAAABEQD/2gAIAQMBAT8QAkmhv//EABYRAAMAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAgEBPxA2L//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQWFx/9oACAEBAAE/ECBBYfBeWpyGhcnp81VxKA7WsKFHCrmGBSnhbXnI7QrtXc//2Q=="},"images":{"fallback":{"src":"/static/a37c47bb7edc1113626ed9fee6a2d52d/d95aa/hooks-cover.jpg","srcSet":"/static/a37c47bb7edc1113626ed9fee6a2d52d/d95aa/hooks-cover.jpg 602w","sizes":"100vw"},"sources":[{"srcSet":"/static/a37c47bb7edc1113626ed9fee6a2d52d/804c8/hooks-cover.webp 602w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.7059800664451827}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/sysdig-docker-scout-cloud-native-security/","title":"Sysdig and Docker Forge Alliance to Accelerate Cloud-Native Security: Docker Scoutüê≥","date":"2024-10-24 21:36:00"},"excerpt":"Shift Left and Shield Right with Prioritized Risk and Improved Security Posture üêã Introduction Docker and Sysdig are teaming up to make‚Ä¶","html":"<blockquote>\n<p><strong>Shift Left and Shield Right with Prioritized Risk and Improved Security Posture</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üêã Introduction</h2>\n<p><a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Docker</a> and <a href=\"https://sysdig.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Sysdig</a> are teaming up to make cloud-native app delivery faster and safer. This partnership brings Sysdig's runtime insights into Docker Scout, giving developers useful information to manage risks and boost security.</p>\n<p>This collaboration is important for the cloud-native community because it combines two popular tools for container security and app delivery. Sysdig provides deep visibility into container environments, while Docker Scout helps find and fix security issues in container images.</p>\n<p>By merging these tools, Sysdig and Docker are helping developers secure their cloud-native apps throughout the development process. This is crucial in today's fast-moving and constantly changing threat landscape.</p>\n<blockquote>\n<p>TL;DR: <a href=\"https://www.docker.com/products/docker-scout/\" target=\"_blank\" rel=\"noopener noreferrer\">Docker Scout</a> is a set of software supply chain features integrated into Docker's user interfaces and CLI. These features offer comprehensive visibility into the structure and security of container images.</p>\n</blockquote>\n<h2 id=\"-goals-and-objectives\" style=\"position:relative;\"><a href=\"#-goals-and-objectives\" aria-label=\" goals and objectives permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ü•Ö Goals and Objectives</h2>\n<p>In this blog post, we'll explore the new partnership between Sysdig and Docker and how it helps developers speed up and secure cloud-native app delivery.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.70588235294118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABF0lEQVR42q2R207CQBCGeSOFtnveVkO0rUVFkXipgHolgkK80fgORvAOSXwTEh9D3sW/mbBIQ0xMaP5OdqfzzaklLjUT6r8KuJTaljYD4+AklCn4/4JhKz4rewG0XfG3yh6uFOeuAHwmIBxWYC/g2eHxSaPZaJ5ftNq33V799EwZ6zF+2eoMho9pVrPRLsmEO0BymDpE+m6vP/mYvr6NRuP3yRTPZ1JPojiczb6+5/O7/j1SPAyGT88vV9c3KLYys5C6uhfDBSH3Qe2IS/hlnGb7SYq2tY0gfEI9NF/ctpsHQm7GFU0EIYz8iFkujNqGzYsv7NIptQqNNGb9tvFSnAOcXfiJ12tgF1f4yb/gnJehFVrTIA7+ATMno4tkPtuPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"scout\" title=\"\" src=\"/static/5171f27d03a9bb56c37fe3eea1c45e57/c5bb3/docker.png\" srcset=\"/static/5171f27d03a9bb56c37fe3eea1c45e57/04472/docker.png 170w,\n/static/5171f27d03a9bb56c37fe3eea1c45e57/9f933/docker.png 340w,\n/static/5171f27d03a9bb56c37fe3eea1c45e57/c5bb3/docker.png 680w,\n/static/5171f27d03a9bb56c37fe3eea1c45e57/b12f7/docker.png 1020w,\n/static/5171f27d03a9bb56c37fe3eea1c45e57/690c6/docker.png 1201w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"Ô∏è-sysdig-runtime-insights-and-docker-scout\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-sysdig-runtime-insights-and-docker-scout\" aria-label=\"Ô∏è sysdig runtime insights and docker scout permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>‚ò∏Ô∏è Sysdig Runtime Insights and Docker Scout</h2>\n<p>Sysdig and Docker have announced an integration at <a href=\"https://www.dockercon.com/\" target=\"_blank\" rel=\"noopener noreferrer\">DockerCon</a>, <a href=\"https://www.docker.com/press-release/announces-new-local-cloud-products-to-accelerate-delivery-of-secure-apps/\" target=\"_blank\" rel=\"noopener noreferrer\">merging Sysdig runtime insights with Docker Scout</a>. This collaboration helps developers prioritize risk assessment within their CLI and simplifies vulnerability identification in container-based applications. Docker Scout, an event-based tool, enhances the development process by providing integrations with Sysdig, JFrog Artifactory, AWS ECR, BastionZero, GitHub, GitLab, CircleCI, and Jenkins, optimizing DevSecOps workflows.</p>\n<p>Eric Carter, a senior product marketing manager at Sysdig, highlights the importance of Docker Scout as a conduit for Sysdig's container image insights through its cloud-native application protection platform (CNAPP).</p>\n<p>During DockerCon, Docker, Inc. made <a href=\"https://docs.docker.com/scout/\" target=\"_blank\" rel=\"noopener noreferrer\">Docker Scout</a> generally available, marking a pivotal moment in streamlining the developer's inner-loop process for creating container-based applications. The goal is to improve developer productivity, reduce post-deployment vulnerabilities, and expedite image creation, potentially saving developers up to an hour per day per project.</p>\n<p>Furthermore, Docker, Inc. introduced Docker Debug and an enhanced Docker Build tool, which offers substantially improved speed and allows for cloud service offloading.</p>\n<h2 id=\"Ô∏è-what-is-docker-scout\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-what-is-docker-scout\" aria-label=\"Ô∏è what is docker scout permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è What is Docker Scout</h2>\n<p>Docker Scout is designed to generate actionable insights for the software supply chain. It offers a layer-by-layer view of image dependencies, vulnerabilities, comparisons, and remediation paths. Docker announced the general availability of Docker Scout this week at DockerCon. You can check out their announcement <a href=\"https://www.docker.com/blog/introducing-docker-scout/\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.</p>\n<h2 id=\"-what-are-sysdig-runtime-insights\" style=\"position:relative;\"><a href=\"#-what-are-sysdig-runtime-insights\" aria-label=\" what are sysdig runtime insights permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîç What are Sysdig Runtime Insights</h2>\n<p>Sysdig's deep runtime security visibility uses system calls at the kernel level to identify container activity. This is critical for <a href=\"https://sysdig.com/solutions/cloud-threat-detection-and-response/\" target=\"_blank\" rel=\"noopener noreferrer\">threat detection</a> but also enables Sysdig Secure to identify running containers and the packages loaded at runtime. Often, containers include packages to accommodate potential dependencies that are never used. <a href=\"https://sysdig.com/why-runtime-insights/\" target=\"_blank\" rel=\"noopener noreferrer\">Runtime insights</a> help you clearly see what's in use and what's not.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABU0lEQVR42lVR2W7CMBDk/z8JqRJKi0Slipb2gZZyFQIhcZzDdry+6YaEQufBsrQ7mmMH5wuMtcroRit8jbPWufMdQghCiDynUkqttbtOB90sKYtNmn7G8TbNdiRPSxbCjeycXyy+o+hxtVqXVdVIeSPHhDxM36PXr2j2E81OozcyfC5SYroNLprpx1yhN/Tjgw/BX15ES2Zc7A8JyTLGeM0lF0BrULr3RotqOBqDNkw0itfQCJDcaRk6ZVw8nvKM1rRkCsB7D1XhDHTkoqzGk5dWQzTHlO4zvowF6vW2AdRqtV0vN4RQzhmaY1msJOvIhBajpwl+0PU+h/mOjWasZBj7YhvTVFXNakwnsQzvvAHurO7I6OuQpF2veAsudUIxhO2V/4A1gMGbGeOd0jYj9SkrD0mBqzZo7ZUL5n7/H7njW4/aLUAZCVo04Nqa26avZ+/JvwGxBDeTiZlXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"insights\" title=\"\" src=\"/static/1fba8b2561c3e949f130d257be658641/c5bb3/insights.png\" srcset=\"/static/1fba8b2561c3e949f130d257be658641/04472/insights.png 170w,\n/static/1fba8b2561c3e949f130d257be658641/9f933/insights.png 340w,\n/static/1fba8b2561c3e949f130d257be658641/c5bb3/insights.png 680w,\n/static/1fba8b2561c3e949f130d257be658641/b12f7/insights.png 1020w,\n/static/1fba8b2561c3e949f130d257be658641/105d8/insights.png 1170w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-enhanced-security-with-docker-scout-and-sysdig\" style=\"position:relative;\"><a href=\"#-enhanced-security-with-docker-scout-and-sysdig\" aria-label=\" enhanced security with docker scout and sysdig permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîí Enhanced Security with Docker Scout and Sysdig</h2>\n<p>Docker Scout and Sysdig together provide a robust solution for managing container security. By leveraging the strengths of both tools, developers can gain deeper insights into their container images and prioritize remediation efforts effectively.</p>\n<h3 id=\"-prioritize-risks-using-sboms-and-runtime-insights\" style=\"position:relative;\"><a href=\"#-prioritize-risks-using-sboms-and-runtime-insights\" aria-label=\" prioritize risks using sboms and runtime insights permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üß© Prioritize Risks Using SBOMs and Runtime Insights</h3>\n<p>Container images are often built from layers of other container images and software packages. These layers and packages can contain vulnerabilities that make your containers and the applications they run vulnerable to attack. Docker Scout can proactively help you find and fix these vulnerabilities, helping you create a more secure software supply chain. It does this by analyzing your images and creating a full inventory of the packages and layers called a <a href=\"https://ntia.gov/sites/default/files/publications/sbom_at_a_glance_apr2021_0.pdf\" target=\"_blank\" rel=\"noopener noreferrer\">Software Bill of Materials (SBOM)</a>. It then correlates this inventory with a continuously updated vulnerability database to identify vulnerabilities in your images.</p>\n<h3 id=\"-what-is-sbom\" style=\"position:relative;\"><a href=\"#-what-is-sbom\" aria-label=\" what is sbom permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìú What is SBOM?</h3>\n<p>A Software Bill of Materials (SBOM) is key when shifting security left. SBOMs provide an artifact that contains a comprehensive list of software assets and dependencies that make up a piece of software. SBOMs are also handy for knowing details such as the licensing covering each package. In terms of security, an SBOM is key for staying on top of security risks. It helps maintain an accurate and updated correlation between package dependencies, which makes the detection task easier.</p>\n<h3 id=\"Ô∏è-docker-scout-and-sysdig-to-manage-container-security\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-docker-scout-and-sysdig-to-manage-container-security\" aria-label=\"Ô∏è docker scout and sysdig to manage container security permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ°Ô∏è Docker Scout and Sysdig to Manage Container Security</h3>\n<p>Docker Scout is a tool that helps Docker users manage container security. It provides a unified software analysis view to help users understand their image composition, correlates security risks with the image's SBOM, and gives contextual remediation advice. Sysdig is a container security platform that provides runtime insights into containerized applications. It can be integrated with Docker Scout to provide additional information about CVE data and in-use vulnerabilities.</p>\n<h4 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Installation</h4>\n<p>The Docker Scout CLI plugin comes pre-installed with Docker Desktop.</p>\n<p>If you run Docker Engine without Docker Desktop, Docker Scout doesn't come pre-installed, but you can install it as a standalone binary.</p>\n<p><strong>Installation script</strong></p>\n<p>To install the latest version of the plugin, run the following commands:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-fsSL</span> https://raw.githubusercontent.com/docker/scout-cli/main/install.sh <span class=\"token parameter variable\">-o</span> install-scout.sh</code></pre></div>\n<p><strong>Container image</strong></p>\n<p>The Docker Scout CLI plugin is also available as <a href=\"https://hub.docker.com/r/docker/scout-cli\" target=\"_blank\" rel=\"noopener noreferrer\">a container image</a>. Use the docker/scout-cli to run docker scout commands without installing the CLI plugin on your host.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-it</span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">DOCKER_SCOUT_HUB_USER</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your Docker Hub user name<span class=\"token operator\">></span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">DOCKER_SCOUT_HUB_PASSWORD</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your Docker Hub PAT<span class=\"token operator\">></span>  <span class=\"token punctuation\">\\</span>\n  docker/scout-cli <span class=\"token operator\">&lt;</span>command<span class=\"token operator\">></span></code></pre></div>\n<p><strong>GitHub Action</strong>\nThe Docker Scout CLI plugin is also available as a <a href=\"https://github.com/docker/scout-action\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub action</a>. You can use it in your GitHub workflows to automatically analyze images and evaluate policy compliance with each push.</p>\n<p>Docker Scout also integrates with many more CI/CD tools, such as Jenkins, GitLab, and Azure DevOps.</p>\n<p>For more details how to install the scout CLI, follow the steps in the <a href=\"https://docs.docker.com/scout/install/\" target=\"_blank\" rel=\"noopener noreferrer\">documentation</a></p>\n<h4 id=\"use-case-1-cve-data-and-in-use-vulnerabilities\" style=\"position:relative;\"><a href=\"#use-case-1-cve-data-and-in-use-vulnerabilities\" aria-label=\"use case 1 cve data and in use vulnerabilities permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Use Case 1: CVE Data and In-Use Vulnerabilities</h4>\n<p>Docker Scout can get CVE information from the SBOM, but it does not know which packages are actually in use. The Sysdig integration allows developers to see which CVE data impacts in-use packages, so they can prioritize remediation efforts.</p>\n<p>Run the below command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker</span> scout cves nginx</code></pre></div>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2UlEQVR42qVTuY7bQBSzLuu+PJKtyzpsy5aP9e4iRaoA6VKn3zZVkP8vGY7jDRDAASRs8SDh6YlD8nFmsVchCRuIqES6WGOZbhAEBVRVg6apmM1m0+pbvsDb0xU/vl7x6/sLfr59wedPZ9RNi82mI3gAz/MQhuHt3XEc+L4PwzAeA0a+B+E6EIGPssiR5ytEUQjTNGHbNlzX/VsS2LKsG6imaY8BdX5YZxmassSu77Hb7dB0Heq65gEFhBD///lRSertHWBF4CxJMGy36Pd7+JR4G1KU8YCqqsKmDEX+xDqkAqc0QUmfluwHuo7EMpFQvjoO+N9GRekdGXdNjSxNkVCyPZ9DJ5gyhqEcDA0NoW0hy3MU9C2KIui04n2jUsUkDwf6dTodcT6fseViTpcLXl5fGZ0GIcEnL0UykxmzyKiJI1zyDNVyCZdSVQ6ZBLRZyjjQ2Z+F3BvH9RqXtsG+LNCIBbIogHBsxOZ83FLkqZKFxmHJNhbJrRx6Z8swk7k6STKHa26zLUoMw4CeHlZkmTGTK8qO7x4qUzzsDwdsGOaCkano5zMX9HS9YsGQa8yhMjXY8n6+Nw6JwJFV8N6mDHRgyGBbSD8S7KZtUfO5YqhFHMOkCm1ksH8DR1JjVzqIaZkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"alt text\" title=\"\" src=\"/static/eff8e035c1b3e95bf09ebda24cdfbc34/c5bb3/image.png\" srcset=\"/static/eff8e035c1b3e95bf09ebda24cdfbc34/04472/image.png 170w,\n/static/eff8e035c1b3e95bf09ebda24cdfbc34/9f933/image.png 340w,\n/static/eff8e035c1b3e95bf09ebda24cdfbc34/c5bb3/image.png 680w,\n/static/eff8e035c1b3e95bf09ebda24cdfbc34/b12f7/image.png 1020w,\n/static/eff8e035c1b3e95bf09ebda24cdfbc34/b5a09/image.png 1360w,\n/static/eff8e035c1b3e95bf09ebda24cdfbc34/a8a6f/image.png 1516w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Vulnerabilities are ordered and summarized by priority, from the highest (CRITICAL) to the lowest (LOW). With the Sysdig integration, developers also get information about whether a vulnerability impacts in-use packages or not.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB90lEQVR42o2SSY7TQBSGy0OS8lRlu1yeYjsTjQSIDTkAO5Q9yg3gAhyAg7BHQrCFFRLdrLkAWy7QwAIJKyE/r0zMAvWCkn7VINX3/jewe7HEw+UCjx7cwu2LNfKigNYaZVkiyzL4vg8hBKIo+hVLiURGz7bbrc+UqoM8L4Ig+CtaOXMcB2WeY960g6q6RkZA7nlgjMGyrEEGulQpNmnyQ3J+LTj/Gp4lPe9aeN73VIgvBHSRpAk830NJDjZVhSSKMLVtzCiYxzkEvcdxjPubNe6sVtg0c9ztWugohBYRVOCf5HQKFQbfmM0s2GcnDaW5IJVpCkUQ33XhEtQmeBiGp4KCVU3zeblev6/a9qpp28u26y79SHywHPtjEIZvmWs7mFPdFi2l3DaoKbou8qF2Y8rn/Wh20hP2ZznspuUQMKQUXXeCVCdYXCygMoUJ3V1yaNyZnWr9f0DXsqGo4JoaU5uGqGzocEppn1M1MAMagU/HryTrH9ErNWVOoCIvoHKFbt0RXA8wA+IzjjRJISJxNG+TyWRwuN/vb3ZoW3ZPH3s69olK+7qte5q/nuaqD8LgKLRAXMfIan0yneacf5JSvqS5fEN6TedXpHc0u49HZj6KIIMIWO12u5lS6kW37NCtup9FVRxocA8ylifjfJxP0sHcqTTPDe03ciuxljPBO6wAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"vulnerabilities\" title=\"\" src=\"/static/28444e9bf38b41bfc894b4c2b2fd1f53/c5bb3/vulnerabilities.png\" srcset=\"/static/28444e9bf38b41bfc894b4c2b2fd1f53/04472/vulnerabilities.png 170w,\n/static/28444e9bf38b41bfc894b4c2b2fd1f53/9f933/vulnerabilities.png 340w,\n/static/28444e9bf38b41bfc894b4c2b2fd1f53/c5bb3/vulnerabilities.png 680w,\n/static/28444e9bf38b41bfc894b4c2b2fd1f53/b12f7/vulnerabilities.png 1020w,\n/static/28444e9bf38b41bfc894b4c2b2fd1f53/2bef9/vulnerabilities.png 1024w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h4 id=\"use-case-2-compare-vulnerabilities-between-releases\" style=\"position:relative;\"><a href=\"#use-case-2-compare-vulnerabilities-between-releases\" aria-label=\"use case 2 compare vulnerabilities between releases permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Use Case 2: Compare Vulnerabilities Between Releases</h4>\n<p>At software development time, it is important to have visibility into the differences between the code being developed and the code that is deployed in production. Docker Scout can be used to compare a local image to an image that is currently running in a cluster, and to identify any vulnerabilities that exist in the newer image but not in the older image. This information can then be used to prioritize remediation efforts and to minimize security blind spots in production. In addition to identifying new vulnerabilities, the \"compare\" approach can also be used to identify packages that are no longer in use. These packages can then be removed from the image, which can help to reduce the attack surface and make the image more lean and efficient.</p>\n<p>The below command can perform the comparison:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker</span> scout compare nginx:1.27.2 nginx:1.26.2</code></pre></div>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 42.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABbUlEQVR42n1S206DQBQElvtFoFsuQmmrUAqmTRuNqcH4A7X6oG+mif//FeNZEoykiQ+TQ+bsDnPmrKRqDjTNhayokGUJkiSBMQbLtmE7oqf1nCzLfRV83yMM3Ai6rkFAURRYlgUehCjSFE21Qruqschy4gKExCd8inVVUa/CuiyRRREm1BsJu66LFV00DAOaruOlbfD93KGrS9xGITbFNaaBj7vZDOeuw3G/Q5VwNFmMKo0x8byxQ1VVkZKjMAzh0hgH7uFz3eBjV+N4yHE+7WFYOirHxOuywHtb4/SQ4eu4RX0TjeL4FYzIushN5MU5p3oFXbXBFBmayqDQBd/3KRq9v6QypYdC/YscTdNEHMcQVYgW9D0nDAsaMKWsSprEpnMXi/gL4Urk2P+Z3LqUCafxxZKGQ0Lcth3iJzAp638FhWXxBDwScuiZbAyGMklw3xZ4eyyQ57nIBUuNYcsDzBcFPp/maMs5LMe9EPwBnxy6d3MfdVYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"alt text\" title=\"\" src=\"/static/8394af75add308875773963a94287a13/c5bb3/image-1.png\" srcset=\"/static/8394af75add308875773963a94287a13/04472/image-1.png 170w,\n/static/8394af75add308875773963a94287a13/9f933/image-1.png 340w,\n/static/8394af75add308875773963a94287a13/c5bb3/image-1.png 680w,\n/static/8394af75add308875773963a94287a13/b12f7/image-1.png 1020w,\n/static/8394af75add308875773963a94287a13/b5a09/image-1.png 1360w,\n/static/8394af75add308875773963a94287a13/b4904/image-1.png 1768w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h4 id=\"use-case-3-view-image-insights-in-your-cicd-pipeline\" style=\"position:relative;\"><a href=\"#use-case-3-view-image-insights-in-your-cicd-pipeline\" aria-label=\"use case 3 view image insights in your cicd pipeline permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Use Case 3: View Image Insights in Your CI/CD Pipeline</h4>\n<p>Docker Scout can be integrated into the CI/CD pipeline workflow to get vulnerability and runtime insights when building and pushing images. This can be done using a variety of CI/CD tools, including GitHub, GitLab, CircleCI, Microsoft Azure DevOps Pipelines, and Jenkins. Specifically for GitHub, Docker Scout can be integrated using the popular Docker Build and Push GitHub Action. This action allows developers to build and push images to Docker Hub from their GitHub workflows.</p>\n<h3 id=\"Ô∏è-view-and-manage-security-issues\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-view-and-manage-security-issues\" aria-label=\"Ô∏è view and manage security issues permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ†Ô∏è View and Manage Security Issues</h3>\n<p>Docker Scout results can be viewed and managed across various interfaces, including Docker Desktop, the Docker CLI, Docker Hub, and the Docker Scout Dashboard. The Docker Scout Dashboard provides a unified view of discovered vulnerabilities, as well as extended information about CVEs and recommendations on how to remediate them by updating to a different base image. The Docker Scout Dashboard web console gives developers a view into discovered vulnerabilities but also provides extended information about CVEs along with recommendations on how to bypass vulnerabilities by updating to a different base image.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLElEQVR42nVRXUsDMRC8//+btLSCIpRSFR+E0ooifag975qvzSabxMldvYrgPuQmYWZndq9h5lQrO/InbTgCliSCpxhjKQUncBkq5ywiOMdr45wDE4jZj+wBMzARge6ARfAImda6bVulFAhV3OmgXdVwnDoWzwwlGBLDx3LVvSxZv8P/HFPEByFOzWfnoEcWBJ7EzpE1FhXYb2eLr8cFqx3mkVgz55xCTNan5tjToWfHSdLF2VpnjFFKs6fd7Ob4MGe1rWI5i+FsSJr25HsTsKTfYmSGrTGWnH27u2+fb716HZzj5Oxq7J6UC3XOkP44n5QyWm2v54fVle83l9jpx7lTpOm8sEmNhfG4M0/79VO/WUe7H1RpcM5oUhdW/qlphpGN74jRMYRQf37O3+GTCrnXKUN/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"issues\" title=\"\" src=\"/static/82aa560044b27db7604ae1558b2002dc/c5bb3/issues.png\" srcset=\"/static/82aa560044b27db7604ae1558b2002dc/04472/issues.png 170w,\n/static/82aa560044b27db7604ae1558b2002dc/9f933/issues.png 340w,\n/static/82aa560044b27db7604ae1558b2002dc/c5bb3/issues.png 680w,\n/static/82aa560044b27db7604ae1558b2002dc/b12f7/issues.png 1020w,\n/static/82aa560044b27db7604ae1558b2002dc/105d8/issues.png 1170w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"-ship-more-secure-images\" style=\"position:relative;\"><a href=\"#-ship-more-secure-images\" aria-label=\" ship more secure images permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üöÄ Ship More Secure Images</h3>\n<p>The ability to compare images during the build phase with those running in production gives developers a new lens to help build better images. Beyond remediating in-use vulnerabilities, teams can see which packages are unused and consider if they can be removed to address \"container bloat.\" Leaner container images have a reduced attack surface with the added benefit of being able to scale more quickly.</p>\n<h2 id=\"-conclusion\" style=\"position:relative;\"><a href=\"#-conclusion\" aria-label=\" conclusion permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üèÅ Conclusion</h2>\n<p>It is essential to identify, prioritize, and fix security issues across the software supply chain in order to avoid security breaches when software is released into production. Docker and Sysdig help teams to do this more effectively by providing real-time security information throughout the development and deployment process. The integration of Sysdig Secure and Docker Scout offers users new and powerful ways to stay on top of known CVEs and ensure the security of their software supply chain.</p>\n<br>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâ</em></strong></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>"},"nextThought":{"frontmatter":{"path":"/blog/authenticate-apps-on-k8s-okta-istio-oauth2/","title":"Authenticate applications on Kubernetes: Okta(OIDC), Istio, and OAuth2-Proxy integration. üîù","date":"2024-10-24 20:55:00"},"excerpt":"Secure authentication and authorization for Kubernetes apps üëÆ‚Äç‚ôÄ üìë Introduction Authenticating applications on Kubernetes can be a complex‚Ä¶","html":"<blockquote>\n<p><strong>Secure authentication and authorization for Kubernetes apps üëÆ‚Äç‚ôÄ</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üìë Introduction</h2>\n<p>Authenticating applications on Kubernetes can be a complex process, but integrating <a href=\"https://www.okta.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Okta</a>, <a href=\"https://istio.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Istio</a>, and <a href=\"https://github.com/oauth2-proxy/oauth2-proxy\" target=\"_blank\" rel=\"noopener noreferrer\">OAuth2-Proxy</a> provides a powerful solution.</p>\n<p>This guide will walk you through the steps to establish a robust and secure authentication framework for your Kubernetes-based applications.</p>\n<p>From using Istio for <a href=\"https://openid.net/\" target=\"_blank\" rel=\"noopener noreferrer\">OpenID Connect (OIDC)</a> authentication to leveraging OAuth2-Proxy for seamless interaction with identity providers like Okta, this integration allows you to enforce user authentication and authorization with confidence.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 71.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAklEQVR42oWSzW7TQBDH/Ua8BA/AI/AIHLj0jFB5gF6Q4ITKBakXhJpDFZWiQtQCTUCQlDYyUfyR2nETO7b3w/b+2V1/1JSEjjTa1X9nfzszOwaUCVEuLEa0+wCLnXugl10UUss4Q1EUWC6XmM/nCIJAr3Ecaz3P88aF5BglrwQWLIHz/CEm2/exGn5AJjVGiQ72fR+macKyLNi2raFZloFSCsYYOOd6r4GtJEEDF7FjQmQM/7OiENrbpsCG0tJcBlRnKht1UJt6mRDSeJoSiJzhbOjioDfG0fsuTk5PdazK2OAS1vklcOaWxFyKTKZeGyEUuexVAaFbU2c1Muf4+tOFPZ3C8/zmcWO4ENg6Ap7upyCpyiBFFEU6S9UTpZVg0jRf7TmnoIzomHY1xrELPPvM0emHa0uOBcfHzMUomsGfXSG4DrTuhg72Dvfwen8Xg0n/BsjlZXvqgFeQ28AJSfDit4NPgY2L4TmuPE/ry2SB7+NvGFz2YQXTG6BqierKpk9RvZMThiRNmvHaZBrYHpl6Jssecf1rCs4Yxype6X7VOs94dVbO4D9zeNvUJeVlVgJhGDYar9a2q8qUbQTW5f248DAYzTQ0L8SdZRvrYdUM0gyPtzt49OQd3nbPsfOqh5dvvsCahX89eiewHXzYM3FwPMZ1mMJyQwmLkBBexqzJ8A+QMzYNgoFPeAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"OIDC\" title=\"\" src=\"/static/96f4c0b9876573c4b6b927a49ec2ce44/c5bb3/oidc.png\" srcset=\"/static/96f4c0b9876573c4b6b927a49ec2ce44/04472/oidc.png 170w,\n/static/96f4c0b9876573c4b6b927a49ec2ce44/9f933/oidc.png 340w,\n/static/96f4c0b9876573c4b6b927a49ec2ce44/c5bb3/oidc.png 680w,\n/static/96f4c0b9876573c4b6b927a49ec2ce44/d0cc0/oidc.png 732w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"workflow-and-architecture-diagram\" style=\"position:relative;\"><a href=\"#workflow-and-architecture-diagram\" aria-label=\"workflow and architecture diagram permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Workflow and Architecture Diagram</h2>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.294117647058826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABm0lEQVR42o1Sy3KjMBD0/9f+QK573l/JKS5wrV3GwUkw4iWEJJAQ6h1p144fSdVO1YAQUk93z6xwFd57zPMc87y21sZclgX34fEYqzNQCCkltrsdNkmCtq7R9wI7+j4ej9Ba3xT2/yC9Xy73L4DXBx2xKgTHvm/BygIVAYdCxpiY4ziia2oIIbD94DiUnBSYrwEjKEnTxoJPEziXBDChLBnSNMXLeo0sO0AOEkqPeK8VikZGa24Ar/1xtGx7jcU52DmwBmbaVHLEIDSxcZiDknAnvOnf7O4kGzNRRQUuO+hqQLFm+PH0jPR3CcZK6NGiahny0yu01FBbhqwYkWQVJNlj509Cq+DbMAzRB+MMxEeL06bEz18bbPcNqopFBi1vkBevUL1CkxwJXONwEpi0pLvLLUNH8qJ0om/Jj2l2UaqxHobWQaYQirouEZRaeiwxfSzmFjw2JTBt2xbZPqMGbPD29o6m4cjzHEmSxmYopT7Hxv/1934eH7tMp8J4dCStqht0XXcZ9Ot5+y5WX20GOaeqj+PCGPsvoDPgH2UNVuaNM6l8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Workflow\" title=\"\" src=\"/static/73cc4e8079a0f7f1382ba4c99b5d4357/c5bb3/workflow.png\" srcset=\"/static/73cc4e8079a0f7f1382ba4c99b5d4357/04472/workflow.png 170w,\n/static/73cc4e8079a0f7f1382ba4c99b5d4357/9f933/workflow.png 340w,\n/static/73cc4e8079a0f7f1382ba4c99b5d4357/c5bb3/workflow.png 680w,\n/static/73cc4e8079a0f7f1382ba4c99b5d4357/b12f7/workflow.png 1020w,\n/static/73cc4e8079a0f7f1382ba4c99b5d4357/d8817/workflow.png 1238w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<ol>\n<li>An employee tries to access an internal application (e.g., admin-service).</li>\n<li>The employee connects to the application URL, and the request is sent to the Istio service mesh inside our Kubernetes cluster.</li>\n<li>The request arrives via the <a href=\"https://istio.io/latest/docs/tasks/traffic-management/ingress/ingress-control/\" target=\"_blank\" rel=\"noopener noreferrer\">Istio Ingress Gateway</a>.</li>\n<li>We have an Istio authorization policy that limits access to the admin service.</li>\n<li>The authorization policy points to the custom extension provider, OAuth2-Proxy. OAuth2-Proxy is set up to connect with our identity provider, Okta.</li>\n<li>When the user is authenticated successfully with our IdP, OAuth2-Proxy gets a JWT back and looks into the \"groups\" claim. This will be evaluated against any groups we have configured, let's say \"admins\". If the \"admins\" group is found in the JWT groups claim, OAuth2-Proxy puts the token into a cookie and sends it back to the requesting client‚Ää‚Äî‚Ääour user.</li>\n<li>The employee's request is redirected to Okta for login. On successful authentication, it passes through the Istio authorization policy and connects with the admin service.</li>\n<li>The user will now be forwarded to the actual application. If the application supports it (e.g., <a href=\"https://grafana.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Grafana</a>), we can configure the application to look into the headers we inject with OAuth2-Proxy. This allows us to set, for example, the <code class=\"language-text\">preferred_username</code> or <code class=\"language-text\">email</code> attributes in the application - info we get from the ID token claims.</li>\n</ol>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdklEQVR42nWS627CMAyFef/34x8ImEaB3tI0bXMP+5psFWibVVmJ6+Nz7Hgn+uBcijHEGJVav+e7KeXb1sQcHqVrGmNMqmttbdoZE5fF1HU9jsqYYO2aRSHnXAiBs3ORnFLI+8SZQkavfpdS2kgIUFYIcT6f9/v98Xjsum5ZFu/9llPyi9+hVykFQEpprfM+hBg4N02Dh5/IK0GKL2Bn3ZiN1HmeSR2GAeTj8aAitIinqP2x0ss32GjTZgMgxFDypmlCMFVg3gCF9o35VdIz0fZ6JRsVIPlLX/BXVXW5XPq+j69g7zw93+/30+l0u90gJANPI8jWmrEmChHkSvANzHzQ/JGN1wp5YEglD0Lmj4oCeJt2/Ed2eWTmBy1/h0EiRI7yT/B6L8adISFkE8/Mr9dPVGT+dVybX8GsAG8ZsnGeZ6v10mRj7ZjF4XCqqoZGvHfTpKVctKYpvW6YEKHsD8Qs9vRrt5c5DsKX5iblRWetSV1LtfQFfb7y/E97Ij0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"States\" title=\"\" src=\"/static/abc397bd0035b68786a7ed9ee85730e0/c5bb3/states.png\" srcset=\"/static/abc397bd0035b68786a7ed9ee85730e0/04472/states.png 170w,\n/static/abc397bd0035b68786a7ed9ee85730e0/9f933/states.png 340w,\n/static/abc397bd0035b68786a7ed9ee85730e0/c5bb3/states.png 680w,\n/static/abc397bd0035b68786a7ed9ee85730e0/72aae/states.png 964w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"technologies-used\" style=\"position:relative;\"><a href=\"#technologies-used\" aria-label=\"technologies used permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Technologies Used</h3>\n<ul>\n<li><img src=\"https://img.icons8.com/color/48/000000/amazon-web-services.png\" alt=\"AWS EKS\" loading=\"lazy\">\n           AWS EKS Kubernetes</li>\n<li><img src=\"https://img.icons8.com/color/48/000000/istio.png\" alt=\"Istio\" loading=\"lazy\">\n           Istio</li>\n<li><img src=\"https://img.icons8.com/color/48/000000/oauth.png\" alt=\"OAuth2-Proxy\" loading=\"lazy\">\n           OAuth2-Proxy</li>\n<li><img src=\"https://img.icons8.com/color/48/000000/helm.png\" alt=\"Helm\" loading=\"lazy\">\n           Helm</li>\n<li><img src=\"https://img.icons8.com/color/48/000000/okta.png\" alt=\"Okta\" loading=\"lazy\">\n           Okta</li>\n<li><img src=\"https://img.icons8.com/color/48/000000/grafana.png\" alt=\"Grafana\" loading=\"lazy\">\n           <a href=\"https://grafana.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Grafana</a></li>\n</ul>\n<h2 id=\"setup-okta-application-for-oauth2-proxy\" style=\"position:relative;\"><a href=\"#setup-okta-application-for-oauth2-proxy\" aria-label=\"setup okta application for oauth2 proxy permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Setup Okta Application for OAuth2-Proxy</h2>\n<p>This Okta application will allow for access management to your application.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 30.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVR42nWRbYvDIBCE8/9/Y/uhF8jRpDZe1FXXl7ndHKXtlQwsgg6PzjhM04RxHNFaQ+/9Y1JK8CEgxoicGcyMWqus5W30TP3Duq4gIqge0FcVMSeBqYcogATOOeNIg7UW27YdArk3LOQRPOF0nnD+uuB7uYn3AGjMHcvNQDG1fgKJEuwmwEBwXuLLaz1FWOskZoZzDt77vYa/F/5EXGeLxECUJLX9B7L0xyhFe0p7fAVpBY9Vp9ayJxy07Hme5abnLa/SPe3ZGLN/0JG4dPF2/AL2vdYBEuM0OQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"okta-app\" title=\"\" src=\"/static/c3160ec5d169f1db1695c053e89fbb6d/c5bb3/okta-app.png\" srcset=\"/static/c3160ec5d169f1db1695c053e89fbb6d/04472/okta-app.png 170w,\n/static/c3160ec5d169f1db1695c053e89fbb6d/9f933/okta-app.png 340w,\n/static/c3160ec5d169f1db1695c053e89fbb6d/c5bb3/okta-app.png 680w,\n/static/c3160ec5d169f1db1695c053e89fbb6d/b12f7/okta-app.png 1020w,\n/static/c3160ec5d169f1db1695c053e89fbb6d/b5a09/okta-app.png 1360w,\n/static/c3160ec5d169f1db1695c053e89fbb6d/2cefc/okta-app.png 1400w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVR42p2UiXKDMAxE/f8/mU6OgYQrYGwug5Ln1CklTErKjIAR8kparVB1XUsURXI+n+V4PEpZlvLpNY4ieemk6ydRxhiJ41gul4sHrarqY8BpEqnNKIObAVKl1vo7YJL/Xspa6ysDNE3TlwqHYfA04O+67plwzcZ774obhzDnnHcuAYuikOv1KiTnO3Ehdmm+QvjLsuzXQELb+j40c4/Z3HLbtr4CgNe447vWlRhjBb6Jw0L7L4B933t+mqZZDbC2lSguJElQwUMJeZ77RKuAWzSWFbWcTic5HA6eHnhdG84T8C+ZWGtkt/vy1SVJ4g1gVBF80AaO2kI0nO33e3+Qwb0rQP209hj7mr6QCFzDGzaXyTJWscvwE7KuAb5fuwVg0CFrBzhGRfPKUQB+YsI7hoyWi6DQUwhGPjzngEyULUH4YTV5Rzo8SeAcmzZJP2wYCgnpgIEAwFQDOD5+KlmWim2cVHqUG4Jn5erocHhhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"app-settings\" title=\"\" src=\"/static/05b1c4f7527e2e525028b7b8d31163b7/c5bb3/app-settings.png\" srcset=\"/static/05b1c4f7527e2e525028b7b8d31163b7/04472/app-settings.png 170w,\n/static/05b1c4f7527e2e525028b7b8d31163b7/9f933/app-settings.png 340w,\n/static/05b1c4f7527e2e525028b7b8d31163b7/c5bb3/app-settings.png 680w,\n/static/05b1c4f7527e2e525028b7b8d31163b7/b12f7/app-settings.png 1020w,\n/static/05b1c4f7527e2e525028b7b8d31163b7/b5a09/app-settings.png 1360w,\n/static/05b1c4f7527e2e525028b7b8d31163b7/2cefc/app-settings.png 1400w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Be sure to include the URL of your internal application as the sign-in redirect URI in Okta. This allows Okta to redirect to your internal app after authenticating an employee.</p>\n<p>You can also add other internal app URLs to this application. However, be aware that any Okta users or groups added to this Okta application will be able to access every internal application URL listed.</p>\n<p>If you need to control access to an application for specific groups, such as allowing only the finance team to access an application, you will need to create a separate OAuth2-Proxy app in Okta for each application you want to customize access to.</p>\n<h3 id=\"deploy-oauth2-proxy-to-kubernetes\" style=\"position:relative;\"><a href=\"#deploy-oauth2-proxy-to-kubernetes\" aria-label=\"deploy oauth2 proxy to kubernetes permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Deploy OAuth2-Proxy to Kubernetes</h3>\n<p>OAuth2-Proxy is an open-source software handling the authentication flow needed for OAuth2 or in this case OIDC. This will handle the authentication flow and pass the needed token back to the application.</p>\n<p>Install by replacing <code class=\"language-text\">oauth2-proxy-values.yaml</code> with your value then apply with:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm repo <span class=\"token function\">add</span> oauth2-proxy https://oauth2-proxy.github.io/manifests\nhelm repo update\nhelm <span class=\"token function\">install</span> <span class=\"token parameter variable\">--values</span> oauth2-proxy-values.yaml oauth2-proxy oauth2-proxy/oauth2-proxy</code></pre></div>\n<p>Where <code class=\"language-text\">oauth2-proxy-values.yaml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">clientID</span><span class=\"token punctuation\">:</span> xx\n  <span class=\"token key atrule\">clientSecret</span><span class=\"token punctuation\">:</span> xx\n  <span class=\"token key atrule\">cookieSecret</span><span class=\"token punctuation\">:</span> xx\n  <span class=\"token key atrule\">configFile</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n\n<span class=\"token key atrule\">extraArgs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> oidc\n  <span class=\"token key atrule\">cookie-secure</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">cookie-samesite</span><span class=\"token punctuation\">:</span> lax\n  <span class=\"token key atrule\">cookie-refresh</span><span class=\"token punctuation\">:</span> 1h\n  <span class=\"token key atrule\">cookie-expire</span><span class=\"token punctuation\">:</span> 4h\n  <span class=\"token key atrule\">cookie-name</span><span class=\"token punctuation\">:</span> _oauth2_proxy_istio_ingressgateway\n  <span class=\"token key atrule\">set-authorization-header</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">email-domain</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*\"</span>\n  <span class=\"token key atrule\">http-address</span><span class=\"token punctuation\">:</span> 0.0.0.0<span class=\"token punctuation\">:</span><span class=\"token number\">4180</span>\n  <span class=\"token key atrule\">upstream</span><span class=\"token punctuation\">:</span> static<span class=\"token punctuation\">:</span>//200\n  <span class=\"token key atrule\">skip-provider-button</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">oidc-issuer-url</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Values <span class=\"token punctuation\">|</span> get \"charts.oauth2<span class=\"token punctuation\">-</span>proxy.issuer\" \"https<span class=\"token punctuation\">:</span>//your<span class=\"token punctuation\">-</span>okta.com\" <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">portNumber</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4180</span>\n\n<span class=\"token key atrule\">serviceAccount</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n\n<span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n    <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 300Mi\n  <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n    <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 300Mi\n\n<span class=\"token key atrule\">livenessProbe</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\n<span class=\"token key atrule\">readinessProbe</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n  <span class=\"token key atrule\">successThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\n<span class=\"token key atrule\">metrics</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Enable Prometheus metrics endpoint</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n\n<span class=\"token key atrule\">replicaCount</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n\n<span class=\"token key atrule\">podDisruptionBudget</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">minAvailable</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\n<span class=\"token key atrule\">topologySpreadConstraints</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">maxSkew</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token key atrule\">topologyKey</span><span class=\"token punctuation\">:</span> topology.kubernetes.io/zone\n    <span class=\"token key atrule\">whenUnsatisfiable</span><span class=\"token punctuation\">:</span> ScheduleAnyway\n    <span class=\"token key atrule\">labelSelector</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Release.Name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"add-oauth2-proxy-as-an-extension-provider-in-istio\" style=\"position:relative;\"><a href=\"#add-oauth2-proxy-as-an-extension-provider-in-istio\" aria-label=\"add oauth2 proxy as an extension provider in istio permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Add OAuth2-Proxy as an Extension Provider in Istio</h3>\n<p>Inside your Istio mesh config, you will need to add an <a href=\"https://istio.io/latest/docs/tasks/security/authorization/authz-custom/#define-the-external-authorizer\" target=\"_blank\" rel=\"noopener noreferrer\">extension provider</a>. This will reference the OAuth2-Proxy deployment and will allow us to use OAuth2-Proxy as a CUSTOM action in our Istio Authorization Policy.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">meshConfig</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">extensionProviders</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> oauth2<span class=\"token punctuation\">-</span>proxy\n    <span class=\"token key atrule\">envoyExtAuthzHttp</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> oauth2<span class=\"token punctuation\">-</span>proxy.oauth2<span class=\"token punctuation\">-</span>proxy.svc.cluster.local\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4180</span>\n      <span class=\"token key atrule\">headersToDownstreamOnDeny</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> content<span class=\"token punctuation\">-</span>type\n      <span class=\"token punctuation\">-</span> set<span class=\"token punctuation\">-</span>cookie\n      <span class=\"token key atrule\">headersToUpstreamOnAllow</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> authorization\n      <span class=\"token punctuation\">-</span> path\n      <span class=\"token punctuation\">-</span> x<span class=\"token punctuation\">-</span>auth<span class=\"token punctuation\">-</span>request<span class=\"token punctuation\">-</span>user\n      <span class=\"token punctuation\">-</span> x<span class=\"token punctuation\">-</span>auth<span class=\"token punctuation\">-</span>request<span class=\"token punctuation\">-</span>email\n      <span class=\"token punctuation\">-</span> x<span class=\"token punctuation\">-</span>auth<span class=\"token punctuation\">-</span>request<span class=\"token punctuation\">-</span>access<span class=\"token punctuation\">-</span>token\n      <span class=\"token key atrule\">includeHeadersInCheck</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> authorization\n      <span class=\"token punctuation\">-</span> cookie\n  <span class=\"token key atrule\">defaultConfig</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">terminationDrainDuration</span><span class=\"token punctuation\">:</span> 310s</code></pre></div>\n<p>This config is creating a new provider with the name <code class=\"language-text\">oauth2-proxy</code>. This can later be used in the authorization-policy to route requests through the OAuth2-Proxy. The rest of this config is basically what headers to include to make sure the correct tokens are passed along.</p>\n<h3 id=\"Ô∏è-add-istio-authorization-policy\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-add-istio-authorization-policy\" aria-label=\"Ô∏è add istio authorization policy permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üõ°Ô∏è Add Istio Authorization Policy</h3>\n<p>Finally, apply the authorization policy to tell Istio what requests should be routed through the OAuth2-Proxy. This CUSTOM authorization policy allows us to restrict access to the host specified and authenticate via Okta and the OAuth2-Proxy. See the <a href=\"https://istio.io/latest/docs/tasks/security/authorization/authz-custom/\" target=\"_blank\" rel=\"noopener noreferrer\">Istio reference document</a> for more info.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> security.istio.io/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> AuthorizationPolicy\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> oauth<span class=\"token punctuation\">-</span>policy\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>system\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">istio</span><span class=\"token punctuation\">:</span> ingressgateway\n  <span class=\"token key atrule\">action</span><span class=\"token punctuation\">:</span> CUSTOM\n  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"oauth2-proxy\"</span>\n  <span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">to</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">operation</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> &lt;INTERNAL APPLICATION HOST<span class=\"token punctuation\">></span></code></pre></div>\n<p>The most important part of this config is the provider name which has to match the provider created in the <code class=\"language-text\">meshConfig</code> part of the <code class=\"language-text\">istio-controlplane.yaml</code> and the hosts list which is the host names that the policy applies to.</p>\n<p>Apply by replacing <code class=\"language-text\">&lt;INTERNAL APPLICATION HOST></code> with your app URL in <code class=\"language-text\">authorization-policy.yaml</code> then run:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> authorization-policy.yaml</code></pre></div>\n<h3 id=\"-authentication-and-authorization\" style=\"position:relative;\"><a href=\"#-authentication-and-authorization\" aria-label=\" authentication and authorization permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üîê Authentication and Authorization</h3>\n<p>If you have made it this far, you have probably heard of authentication vs authorization before. I just want to make it clear that this use case of Istio is only used for authentication. Istio will route to the authentication service and if a valid token is presented, it will pass you on to the application. This provides some security for all the applications, but the application will still have to be responsible for authorization and any form of RBAC.</p>\n<h2 id=\"-final-notes\" style=\"position:relative;\"><a href=\"#-final-notes\" aria-label=\" final notes permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>üñã Final Notes</h2>\n<p>This blog post aims to provide a clear understanding of how to use Istio and OAuth2-Proxy for authentication in Kubernetes applications. By following the steps outlined in the guide, you can ensure that your applications are secure and that user authentication and authorization are enforced with confidence.</p>\n<p>The integration of Okta, Istio, and OAuth2-Proxy allows you to leverage the power of these tools to create a robust and secure authentication framework for your Kubernetes-based applications.</p>\n<p><strong>References:</strong></p>\n<ul>\n<li><a href=\"https://istio.io/latest/docs/tasks/security/authorization/authz-custom/\" target=\"_blank\" rel=\"noopener noreferrer\">Istio: External Authorization</a></li>\n<li><a href=\"https://oauth2-proxy.github.io/oauth2-proxy/\" target=\"_blank\" rel=\"noopener noreferrer\">Welcome to OAuth2 Proxy | OAuth2 Proxy</a></li>\n<li><a href=\"https://events.istio.io/istiocon-2021/slides/d8p-DeepDiveAuthPolicies-LawrenceGadban.pdf\" target=\"_blank\" rel=\"noopener noreferrer\">Deep Dive Auth Policies - Lawrence Gadban</a></li>\n<li><a href=\"https://oauth2-proxy.github.io/oauth2-proxy/configuration/alpha-config\" target=\"_blank\" rel=\"noopener noreferrer\">Alpha Configuration | OAuth2 Proxy</a></li>\n<li><a href=\"https://developers.onelogin.com/openid-connect/scopes\" target=\"_blank\" rel=\"noopener noreferrer\">OpenId Connect Scopes</a></li>\n<li><a href=\"https://aws.amazon.com/blogs/apn/saas-identity-and-routing-with-istio-service-mesh-and-amazon-eks/\" target=\"_blank\" rel=\"noopener noreferrer\">SaaS Identity and Routing with Istio Service Mesh and Amazon EKS | Amazon Web Services</a></li>\n<li><a href=\"https://venafi.com/blog/istio-oidc/\" target=\"_blank\" rel=\"noopener noreferrer\">Istio OIDC Authentication | Jetstack Blog</a></li>\n<li><a href=\"https://elastisys.com/istio-and-oauth2-proxy-in-kubernetes-for-microservice-authentication/\" target=\"_blank\" rel=\"noopener noreferrer\">Istio and OAuth2-Proxy in Kubernetes for Microservice Authentication</a></li>\n<li>Alternative to OAuth2-Proxy: <a href=\"https://github.com/istio-ecosystem/authservice\" target=\"_blank\" rel=\"noopener noreferrer\">Authservice</a></li>\n<li>Alternative to OAuth2-Proxy: <a href=\"http://openpolicyagent.org\" target=\"_blank\" rel=\"noopener noreferrer\">Open Policy Agent</a></li>\n</ul>\n<p><strong><em>Until next time, „Å§„Å•„Åè üéâüáµüá∏</em></strong></p>\n<p><br><br></p>\n<blockquote>\n<p>üí° Thank you for Reading !! üôåüèªüòÅüìÉ, see you in the next blog.ü§ò  <strong><em>Until next time üéâ</em></strong></p>\n</blockquote>\n<p>üöÄ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>‚ôªÔ∏è LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>‚ôªÔ∏è X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ‚úåüèª</strong></p>\n<h1 align=\"center\">üî∞ Keep Learning !! Keep Sharing !! üî∞</h1>\n<p><strong>üìÖ Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}