{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/carvel-kapp-kubernetes-management/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Take control of your Kubernetes resources🔥</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>📔 Introduction</h2>\n<p>Kubernetes applications involve juggling multiple resources, configurations, and dependencies. Carvel kapp offers a straightforward solution to this complexity. It treats related Kubernetes resources as logical \"applications,\" allowing you to deploy, update, and manage them as cohesive units. With kapp, you can safely apply changes, preview diffs, and prune obsolete resources — all while minimizing disruptions to running workloads.</p>\n<h2 id=\"kapp-overview\" style=\"position:relative;\"><a href=\"#kapp-overview\" aria-label=\"kapp overview permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>kapp Overview</h2>\n<p>Carvel kapp is a lightweight, command-line tool that simplifies the deployment and management of Kubernetes applications. Unlike some other tools, kapp does not require any server-side components, elevated privileges, or custom resources, making it highly portable and easy to use, even in RBAC-constrained clusters.</p>\n<p>At its core, kapp is designed to be explicit, providing visibility into the changes it will apply to your cluster before executing them. It calculates the differences between your desired configuration and the live cluster state, presenting a clear set of create, update, and delete operations for your approval.</p>\n<p>One of kapp's standout features is its dependency-aware resource ordering. It intelligently manages the deployment order of certain resources, ensuring that dependencies are respected. For instance, Custom Resource Definitions (CRDs) and Namespaces are installed before the resources that depend on them. Additionally, kapp allows you to declare your own dependency rules, such as requiring a Job to complete database migrations before updating a Deployment.</p>\n<h2 id=\"deploy-kubernetes-applications-with-kapp\" style=\"position:relative;\"><a href=\"#deploy-kubernetes-applications-with-kapp\" aria-label=\"deploy kubernetes applications with kapp permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Deploy Kubernetes Applications with kapp</h2>\n<p>Before getting too deep, let's get some basic preparations out of the way:</p>\n<ol>\n<li><strong>Create a Kubernetes cluster.</strong></li>\n<li><strong>Install <a href=\"https://carvel.dev/ytt/\" target=\"_blank\" rel=\"noopener noreferrer\">ytt</a>, <a href=\"https://carvel.dev/kbld/\" target=\"_blank\" rel=\"noopener noreferrer\">kbld</a>, <a href=\"https://carvel.dev/kapp/\" target=\"_blank\" rel=\"noopener noreferrer\">kapp</a></strong> by following instructions in the <a href=\"https://carvel.dev/#install\" target=\"_blank\" rel=\"noopener noreferrer\">Install section on carvel.dev</a>.</li>\n</ol>\n<p>To get started with our example application, clone <a href=\"https://github.com/seifrajhi/kapp-k8s-demo.git\" target=\"_blank\" rel=\"noopener noreferrer\">kapp-k8s-demo</a> locally:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://github.com/seifrajhi/kapp-k8s-demo.git\n<span class=\"token builtin class-name\">cd</span> kapp-k8s-demo</code></pre></div>\n<p>This directory contains a simple Go application that consists of main.go (an HTTP web server) and a Dockerfile .\nMultiple step-* directories contain variations of application configuration that we will use in each step.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">ls</span> <span class=\"token parameter variable\">-l</span>\nDockerfile\nmain.go\nconfig-minimal</code></pre></div>\n<p>Typically, an application deployed to Kubernetes will include <strong>Deployment</strong> and <strong>Service</strong> resources in its configuration. In our example, <code class=\"language-text\">config-minimal/</code> directory contains <code class=\"language-text\">config.yml</code> which includes exactly that. (Note that the Docker image is already preset and the environment variable <code class=\"language-text\">HELLO_MSG</code> is hard coded. We'll get to those shortly.)</p>\n<p>Traditionally, you can use <code class=\"language-text\">kubectl apply -f config-minimal/config.yml</code> to deploy this application. However, <code class=\"language-text\">kubectl</code> does not indicate which resources are affected and how they are affected before applying changes, and does not yet have a robust prune functionality to converge a set of resources.</p>\n<p><strong>kapp</strong> addresses and improves on several <code class=\"language-text\">kubectl</code> limitations as it was designed from the start around the notion of a \"Kubernetes Application\" — a set of resources with the same label:</p>\n<ul>\n<li><strong>Visibility and Confidence</strong>: <code class=\"language-text\">kapp</code> separates the change calculation phase (diff) from the change apply phase (apply) to give users visibility and confidence regarding what's about to change in the cluster.</li>\n<li><strong>Resource Tracking</strong>: <code class=\"language-text\">kapp</code> tracks and converges resources based on a unique generated label, freeing its users from worrying about cleaning up old deleted resources as the application is updated.</li>\n<li><strong>Order Management</strong>: <code class=\"language-text\">kapp</code> orders certain resources so that the Kubernetes API server can successfully process them (e.g., CRDs and namespaces before other resources).</li>\n<li><strong>Readiness Wait</strong>: <code class=\"language-text\">kapp</code> tries to wait for resources to become ready before considering the deploy a success.</li>\n</ul>\n<p>For more information, you can visit the <a href=\"https://carvel.dev/kapp/docs/latest/\" target=\"_blank\" rel=\"noopener noreferrer\">Carvel kapp documentation</a>.</p>\n<p>Let us deploy our application with kapp:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kapp deploy <span class=\"token parameter variable\">-a</span> simple-app <span class=\"token parameter variable\">-f</span> step-1-minimal/\nTarget cluster <span class=\"token punctuation\">[</span><span class=\"token string\">'https://192.168.99.111:8443'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>https://192.168.99.111:8443<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>nodes: minikube<span class=\"token punctuation\">)</span>\nChanges\nNamespace  Name        Kind        Conds.  Age  Op      Op st.  Wait to    Rs  Ri\ndefault    simple-app  Deployment  -       -    create  -       reconcile  -   -\n^          simple-app  Service     -       -    create  -       reconcile  -   -\nOp:      <span class=\"token number\">2</span> create, <span class=\"token number\">0</span> delete, <span class=\"token number\">0</span> update, <span class=\"token number\">0</span> noop\nWait to: <span class=\"token number\">2</span> reconcile, <span class=\"token number\">0</span> delete, <span class=\"token number\">0</span> noop\nContinue? <span class=\"token punctuation\">[</span>yN<span class=\"token punctuation\">]</span>: y\n<span class=\"token number\">8</span>:17:44PM: ---- applying <span class=\"token number\">2</span> changes <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>/2 done<span class=\"token punctuation\">]</span> ----\n<span class=\"token number\">8</span>:17:44PM: create deployment/simple-app <span class=\"token punctuation\">(</span>apps/v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:44PM: create service/simple-app <span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:44PM: ---- waiting on <span class=\"token number\">2</span> changes <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>/2 done<span class=\"token punctuation\">]</span> ----\n<span class=\"token number\">8</span>:17:45PM: ok: reconcile service/simple-app <span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:45PM: ongoing: reconcile deployment/simple-app <span class=\"token punctuation\">(</span>apps/v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:45PM:  ^ Waiting <span class=\"token keyword\">for</span> generation <span class=\"token number\">2</span> to be observed\n<span class=\"token number\">8</span>:17:45PM:    ok: waiting on replicaset/simple-app-7fbc6b7c9b <span class=\"token punctuation\">(</span>apps/v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:45PM:    ongoing: waiting on pod/simple-app-7fbc6b7c9b-g92t7 <span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:45PM:     ^ Pending: ContainerCreating\n<span class=\"token number\">8</span>:17:45PM: ---- waiting on <span class=\"token number\">1</span> changes <span class=\"token punctuation\">[</span><span class=\"token number\">1</span>/2 done<span class=\"token punctuation\">]</span> ----\n<span class=\"token number\">8</span>:17:45PM: ongoing: reconcile deployment/simple-app <span class=\"token punctuation\">(</span>apps/v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:45PM:  ^ Waiting <span class=\"token keyword\">for</span> <span class=\"token number\">1</span> unavailable replicas\n<span class=\"token number\">8</span>:17:45PM:    ok: waiting on replicaset/simple-app-7fbc6b7c9b <span class=\"token punctuation\">(</span>apps/v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:45PM:    ongoing: waiting on pod/simple-app-7fbc6b7c9b-g92t7 <span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:45PM:     ^ Pending: ContainerCreating\n<span class=\"token number\">8</span>:17:49PM: ok: reconcile deployment/simple-app <span class=\"token punctuation\">(</span>apps/v1<span class=\"token punctuation\">)</span> namespace: default\n<span class=\"token number\">8</span>:17:49PM: ---- applying complete <span class=\"token punctuation\">[</span><span class=\"token number\">2</span>/2 done<span class=\"token punctuation\">]</span> ----\n<span class=\"token number\">8</span>:17:49PM: ---- waiting complete <span class=\"token punctuation\">[</span><span class=\"token number\">2</span>/2 done<span class=\"token punctuation\">]</span> ----\nSucceeded</code></pre></div>\n<p>Our simple-app received a unique label kapp.k14s.io/app=1557433075084066000 for resource tracking:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kapp <span class=\"token function\">ls</span>\nTarget cluster <span class=\"token punctuation\">[</span><span class=\"token string\">'https://192.168.99.111:8443'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>https://192.168.99.111:8443<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>nodes: minikube<span class=\"token punctuation\">)</span>\nApps <span class=\"token keyword\">in</span> namespace <span class=\"token string\">'default'</span>\nName        Namespaces  Lcs   Lca\nsimple-app  default     <span class=\"token boolean\">true</span>  23s\n<span class=\"token number\">1</span> apps\nSucceeded</code></pre></div>\n<p>Using this label, kapp tracks and allows inspection of all Kubernetes resources created for sample-app:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kapp inspect <span class=\"token parameter variable\">-a</span> simple-app <span class=\"token parameter variable\">--tree</span>\nTarget cluster <span class=\"token string\">'https://192.168.99.111:8443'</span> <span class=\"token punctuation\">(</span>nodes: minikube<span class=\"token punctuation\">)</span>\nResources <span class=\"token keyword\">in</span> app <span class=\"token string\">'simple-app'</span>\nNamespace  Name                              Kind        Owner    Conds.  Rs  Ri  Age\ndefault    simple-app                        Deployment  kapp     <span class=\"token number\">2</span>/2 t   ok  -   46s\ndefault       simple-app-7fbc6b7c9b          ReplicaSet  cluster  -       ok  -   46s\ndefault         simple-app-7fbc6b7c9b-g92t7  Pod         cluster  <span class=\"token number\">4</span>/4 t   ok  -   46s\ndefault    simple-app                        Service     kapp     -       ok  -   46s\ndefault       simple-app                     Endpoints   cluster  -       ok  -   46s\nRs: Reconcile state\nRi: Reconcile information\n<span class=\"token number\">5</span> resources\nSucceeded</code></pre></div>\n<p>Note that it even knows about resources it did not directly create (such as ReplicaSet and Endpoints).</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ kapp logs <span class=\"token parameter variable\">-f</span> <span class=\"token parameter variable\">-a</span> simple-app\nTarget cluster <span class=\"token string\">'https://192.168.99.111:8443'</span> <span class=\"token punctuation\">(</span>nodes: minikube<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># starting tailing 'simple-app-7fbc6b7c9b-g92t7 > simple-app' logs</span>\nsimple-app-7fbc6b7c9b-g92t7 <span class=\"token operator\">></span> simple-app <span class=\"token operator\">|</span> <span class=\"token number\">2020</span>/12/14 01:17:48 Server started</code></pre></div>\n<p>inspect and logs commands demonstrate why it's convenient to view resources in \"bulk\" (via a label). For example, logs command will tail any existing or new Pod that is part of simple-app application, even after we make changes and redeploy.</p>\n<h3 id=\"deploying-configuration-changes\" style=\"position:relative;\"><a href=\"#deploying-configuration-changes\" aria-label=\"deploying configuration changes permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Deploying configuration changes</h3>\n<p>Let's make a change to the application configuration to simulate a common occurrence in a development workflow. A simple observable change we can make is to change the value of the HELLO_MSG environment variable in <a href=\"https://github.com/carvel-dev/simple-app-on-kubernetes/blob/develop/config-step-1-minimal/config.yml\" target=\"_blank\" rel=\"noopener noreferrer\">config-step-1-minimal/config.yml</a>:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 22.941176470588236%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHElEQVR42lWQ2U7CUBRF+f+PMMYYxSAYFJC0DdBaUJnEiNEAMggBZC60hduqyxswGh5W9n5aZwgIe4XotXHaDVat+rbbsi+bddz3puSNRf0Fu99F+D4bz2Mj/hFC7BEQkxFeTqUVPeX1/AgrHWOQjFALH/MhsxcPUQsd0tVVPj2B59r4a5cvscZbO1Ky2Rd60zHfeQOKJpSyULj56/NUgn7igrFyhWtqTLW4JMFIuaQZCTIzNDnAlaL/TQMTa0i+laTc1STqNksyH3oaxnOUZCGIWg6RrcXIVCMoxTOu704IGwco+RDWcoHvyVdsdpsGps6M4rxCxX7a49GpkhvcY3Sy6B2TwqTM7TBPqq6TbujobZNMzcBaWTvh7+k/5vVm70G3AfEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"alt text\" title=\"\" src=\"/static/0d16a6b8266dc46deaad6fd887b5b158/af590/change.png\" srcset=\"/static/0d16a6b8266dc46deaad6fd887b5b158/04472/change.png 170w,\n/static/0d16a6b8266dc46deaad6fd887b5b158/9f933/change.png 340w,\n/static/0d16a6b8266dc46deaad6fd887b5b158/af590/change.png 626w\" sizes=\"(max-width: 626px) 100vw, 626px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>and <strong>re-run kapp deploy command</strong>.</p>\n<p>The output should highlight several kapp features:</p>\n<p>kapp detected a single change to simple-app Deployment by comparing given local configuration against the live cluster copy</p>\n<p>kapp showed changes in a git-style diff via <code class=\"language-text\">--diff-changes</code> flag</p>\n<p>since simple-app Service was not changed in any way, it was not \"touched\" during the apply changes phase at all</p>\n<p>kapp waited for Pods associated with a Deployment to converge to their ready state before exiting successfully</p>\n<p>To double check that our change applied, go ahead and refresh your browser window with our deployed application.</p>\n<p>Given that kapp does not care where application configuration comes from, one can use it with any other tools that produce Kubernetes configuration, for example, Helm's template command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm template my-chart <span class=\"token parameter variable\">--values</span> values.yml <span class=\"token operator\">|</span> kapp deploy <span class=\"token parameter variable\">-a</span> my-app -f- <span class=\"token parameter variable\">--yes</span></code></pre></div>\n<p><strong><em>Until next time, つづく 🎉</em></strong></p>\n<p><br><br></p>\n<blockquote>\n<p>💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  <strong><em>Until next time, つづく 🇵🇸🎉</em></strong></p>\n</blockquote>\n<p>🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>♻️ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>♻️ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ✌🏻</strong></p>\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n<p><strong>📅 Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":6,"rawMarkdownBody":"\n> **Take control of your Kubernetes resources🔥**\n\n## 📔 Introduction\n\nKubernetes applications involve juggling multiple resources, configurations, and dependencies. Carvel kapp offers a straightforward solution to this complexity. It treats related Kubernetes resources as logical \"applications,\" allowing you to deploy, update, and manage them as cohesive units. With kapp, you can safely apply changes, preview diffs, and prune obsolete resources — all while minimizing disruptions to running workloads.\n\n## kapp Overview\n\nCarvel kapp is a lightweight, command-line tool that simplifies the deployment and management of Kubernetes applications. Unlike some other tools, kapp does not require any server-side components, elevated privileges, or custom resources, making it highly portable and easy to use, even in RBAC-constrained clusters.\n\nAt its core, kapp is designed to be explicit, providing visibility into the changes it will apply to your cluster before executing them. It calculates the differences between your desired configuration and the live cluster state, presenting a clear set of create, update, and delete operations for your approval.\n\nOne of kapp's standout features is its dependency-aware resource ordering. It intelligently manages the deployment order of certain resources, ensuring that dependencies are respected. For instance, Custom Resource Definitions (CRDs) and Namespaces are installed before the resources that depend on them. Additionally, kapp allows you to declare your own dependency rules, such as requiring a Job to complete database migrations before updating a Deployment.\n\n## Deploy Kubernetes Applications with kapp\n\nBefore getting too deep, let's get some basic preparations out of the way:\n\n1. **Create a Kubernetes cluster.**\n2. **Install [ytt](https://carvel.dev/ytt/), [kbld](https://carvel.dev/kbld/), [kapp](https://carvel.dev/kapp/)** by following instructions in the [Install section on carvel.dev](https://carvel.dev/#install).\n\nTo get started with our example application, clone [kapp-k8s-demo](https://github.com/seifrajhi/kapp-k8s-demo.git) locally:\n\n```shell\ngit clone https://github.com/seifrajhi/kapp-k8s-demo.git\ncd kapp-k8s-demo\n```\n\nThis directory contains a simple Go application that consists of main.go (an HTTP web server) and a Dockerfile .\nMultiple step-* directories contain variations of application configuration that we will use in each step.\n\n```shell\n$ ls -l\nDockerfile\nmain.go\nconfig-minimal\n```\n\nTypically, an application deployed to Kubernetes will include **Deployment** and **Service** resources in its configuration. In our example, `config-minimal/` directory contains `config.yml` which includes exactly that. (Note that the Docker image is already preset and the environment variable `HELLO_MSG` is hard coded. We'll get to those shortly.)\n\nTraditionally, you can use `kubectl apply -f config-minimal/config.yml` to deploy this application. However, `kubectl` does not indicate which resources are affected and how they are affected before applying changes, and does not yet have a robust prune functionality to converge a set of resources.\n\n**kapp** addresses and improves on several `kubectl` limitations as it was designed from the start around the notion of a \"Kubernetes Application\" — a set of resources with the same label:\n\n- **Visibility and Confidence**: `kapp` separates the change calculation phase (diff) from the change apply phase (apply) to give users visibility and confidence regarding what's about to change in the cluster.\n- **Resource Tracking**: `kapp` tracks and converges resources based on a unique generated label, freeing its users from worrying about cleaning up old deleted resources as the application is updated.\n- **Order Management**: `kapp` orders certain resources so that the Kubernetes API server can successfully process them (e.g., CRDs and namespaces before other resources).\n- **Readiness Wait**: `kapp` tries to wait for resources to become ready before considering the deploy a success.\n\nFor more information, you can visit the [Carvel kapp documentation](https://carvel.dev/kapp/docs/latest/).\n\nLet us deploy our application with kapp:\n\n```shell\n$ kapp deploy -a simple-app -f step-1-minimal/\nTarget cluster ['https://192.168.99.111:8443'](https://192.168.99.111:8443) (nodes: minikube)\nChanges\nNamespace  Name        Kind        Conds.  Age  Op      Op st.  Wait to    Rs  Ri\ndefault    simple-app  Deployment  -       -    create  -       reconcile  -   -\n^          simple-app  Service     -       -    create  -       reconcile  -   -\nOp:      2 create, 0 delete, 0 update, 0 noop\nWait to: 2 reconcile, 0 delete, 0 noop\nContinue? [yN]: y\n8:17:44PM: ---- applying 2 changes [0/2 done] ----\n8:17:44PM: create deployment/simple-app (apps/v1) namespace: default\n8:17:44PM: create service/simple-app (v1) namespace: default\n8:17:44PM: ---- waiting on 2 changes [0/2 done] ----\n8:17:45PM: ok: reconcile service/simple-app (v1) namespace: default\n8:17:45PM: ongoing: reconcile deployment/simple-app (apps/v1) namespace: default\n8:17:45PM:  ^ Waiting for generation 2 to be observed\n8:17:45PM:    ok: waiting on replicaset/simple-app-7fbc6b7c9b (apps/v1) namespace: default\n8:17:45PM:    ongoing: waiting on pod/simple-app-7fbc6b7c9b-g92t7 (v1) namespace: default\n8:17:45PM:     ^ Pending: ContainerCreating\n8:17:45PM: ---- waiting on 1 changes [1/2 done] ----\n8:17:45PM: ongoing: reconcile deployment/simple-app (apps/v1) namespace: default\n8:17:45PM:  ^ Waiting for 1 unavailable replicas\n8:17:45PM:    ok: waiting on replicaset/simple-app-7fbc6b7c9b (apps/v1) namespace: default\n8:17:45PM:    ongoing: waiting on pod/simple-app-7fbc6b7c9b-g92t7 (v1) namespace: default\n8:17:45PM:     ^ Pending: ContainerCreating\n8:17:49PM: ok: reconcile deployment/simple-app (apps/v1) namespace: default\n8:17:49PM: ---- applying complete [2/2 done] ----\n8:17:49PM: ---- waiting complete [2/2 done] ----\nSucceeded\n```\n\nOur simple-app received a unique label kapp.k14s.io/app=1557433075084066000 for resource tracking:\n\n```shell\n$ kapp ls\nTarget cluster ['https://192.168.99.111:8443'](https://192.168.99.111:8443) (nodes: minikube)\nApps in namespace 'default'\nName        Namespaces  Lcs   Lca\nsimple-app  default     true  23s\n1 apps\nSucceeded\n```\n\nUsing this label, kapp tracks and allows inspection of all Kubernetes resources created for sample-app:\n\n```shell\n$ kapp inspect -a simple-app --tree\nTarget cluster 'https://192.168.99.111:8443' (nodes: minikube)\nResources in app 'simple-app'\nNamespace  Name                              Kind        Owner    Conds.  Rs  Ri  Age\ndefault    simple-app                        Deployment  kapp     2/2 t   ok  -   46s\ndefault       simple-app-7fbc6b7c9b          ReplicaSet  cluster  -       ok  -   46s\ndefault         simple-app-7fbc6b7c9b-g92t7  Pod         cluster  4/4 t   ok  -   46s\ndefault    simple-app                        Service     kapp     -       ok  -   46s\ndefault       simple-app                     Endpoints   cluster  -       ok  -   46s\nRs: Reconcile state\nRi: Reconcile information\n5 resources\nSucceeded\n```\n\nNote that it even knows about resources it did not directly create (such as ReplicaSet and Endpoints).\n\n```shell\n$ kapp logs -f -a simple-app\nTarget cluster 'https://192.168.99.111:8443' (nodes: minikube)\n# starting tailing 'simple-app-7fbc6b7c9b-g92t7 > simple-app' logs\nsimple-app-7fbc6b7c9b-g92t7 > simple-app | 2020/12/14 01:17:48 Server started\n```\n\ninspect and logs commands demonstrate why it's convenient to view resources in \"bulk\" (via a label). For example, logs command will tail any existing or new Pod that is part of simple-app application, even after we make changes and redeploy.\n\n### Deploying configuration changes\n\nLet's make a change to the application configuration to simulate a common occurrence in a development workflow. A simple observable change we can make is to change the value of the HELLO_MSG environment variable in [config-step-1-minimal/config.yml](https://github.com/carvel-dev/simple-app-on-kubernetes/blob/develop/config-step-1-minimal/config.yml):\n\n![alt text](change.png)\n\nand **re-run kapp deploy command**.\n\nThe output should highlight several kapp features:\n\nkapp detected a single change to simple-app Deployment by comparing given local configuration against the live cluster copy\n\nkapp showed changes in a git-style diff via `--diff-changes` flag\n\nsince simple-app Service was not changed in any way, it was not \"touched\" during the apply changes phase at all\n\nkapp waited for Pods associated with a Deployment to converge to their ready state before exiting successfully\n\nTo double check that our change applied, go ahead and refresh your browser window with our deployed application.\n\nGiven that kapp does not care where application configuration comes from, one can use it with any other tools that produce Kubernetes configuration, for example, Helm's template command:\n\n```shell\nhelm template my-chart --values values.yml | kapp deploy -a my-app -f- --yes\n```\n\n**_Until next time, つづく 🎉_**\n\n<br><br>\n\n> 💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  **_Until next time, つづく 🇵🇸🎉_**\n\n🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**♻️ LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**♻️ X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ✌🏻**\n\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n\n**📅 Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":842},"frontmatter":{"id":"dd463503af64ad55ec44bc0d","path":"/blog/carvel-kapp-kubernetes-management/","humanDate":"Oct 25, 2024","fullDate":"2024-10-25","title":"Simplify Kubernetes Application Management with Carvel kapp","keywords":["Kubernetes","Carvel","kapp","Platform engineering"],"excerpt":"Discover how Carvel kapp simplifies Kubernetes application management, giving you control over your Kubernetes resources.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACi0lEQVR42lWSW08TYRCG1wjS7Z7acpAQ5WSxLYUKIrWAEDlY6Gl3u1tKS6AFQSqSAgpqQ6BAOEiCMdGY4JUX/ALjjXfGG3+HP+V1drcavXgzs7PzvfvMfMuIdhkSJyM8/gqPSEOhdQwGi8hMH1HtNUL3ihgd2cYYaXRkC0P3N/AgtInR4S2MP3xp9tdKSYj2hClGsCm4diWC8FgJscgOJslkduYUkxMlMj3B8OALxKd2kYjuQVcOyWibekqQY2WocUsCmwBbHYWDU8A0N86hx78Kr3sJof4iurzL8HuWEOxbQ6CzAM+tRVO+jmUzdvueoKNtAbfbjXwFPvdjBO8W0e1dAV9Dhnf8T/F8/YL0CStL75GI7EOJ7SObPkUycYCpiR3EI2Uo8QOo9LyYe4v93UvMpE6gEfFq4QPy8+cY6N+AMS0j2ZNwCTqcpFophd7AGgaCm3C3LSJA5K03cmi9mUNbcx5dvgL8RGLQtrcsoLE+C86mgiMy0a7CwWtgHJxlZquSaeRNbBQvkJs7RyxaRpxk5NP6sRkz6TfQtWOsPfuI8t4lVCLkWDISU5B4uhhOJUJylXid3HVIZMzWJFB1NQKGCYPnqVlIwU6jGAd5liLlTpqkoS5D73QIRCZyyb9iRE6DyFdEBYcrg+PDz/j29Ts87jx9QIZT1IhCMykcgkXC2WQyUyBQLtA5gasQmoacRclXx9HSX0Lh3Q98+fkLM9kj2lMSPd159PXm4e2YRU9gHp2eWZqIjFhjd5YMUkOMaLpXsKmBd6QxNHGAaPoMDU1Z86etd6VQ59ThkjQ01Opoup6ivScrhvJ/Mg1FumlrF7QnGqVeVNBUp5u5UTd2J7CqqT97/JfOkmzG38FsdHnD133XAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/38fe1/carvel-cover.png","srcSet":"/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/24579/carvel-cover.png 750w,\n/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/f8e01/carvel-cover.png 1080w,\n/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/22914/carvel-cover.png 1366w,\n/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/38fe1/carvel-cover.png 1600w","sizes":"100vw"},"sources":[{"srcSet":"/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/ee3fa/carvel-cover.webp 750w,\n/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/3309f/carvel-cover.webp 1080w,\n/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/6ed74/carvel-cover.webp 1366w,\n/static/c2d1a71e3412fe9cb8ae584b2dd9cf63/24bb4/carvel-cover.webp 1600w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.551875}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/scaling-kubernetes-istio-metrics-hpa/","title":"Scaling Kubernetes Workloads with Istio Metrics and the Horizontal Pod Autoscaler","date":"2024-10-25 18:34:00"},"excerpt":"Autoscaling for Istio-Powered Kubernetes Applications 📚 Introduction The need for effective autoscaling is very important in Kubernetes…"},"nextThought":{"frontmatter":{"path":"/blog/data-on-kubernetes-argo-workflows-4/","title":"Data on Kubernetes: Part 4 - Argo Workflows: Simplify parallel jobs","date":"2024-10-25 16:06:00"},"excerpt":"Container-native workflow engine for Kubernetes 🔮 🐙 Introduction Welcome to the fourth part of the \"Data on Kubernetes\" series! In this…"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}