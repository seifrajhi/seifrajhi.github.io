{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/eks-secure-traffic-istio-alb-acm/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Enhancing Security on Amazon EKS with Istio, ALB, and ACM 🕸</strong></p>\n</blockquote>\n<h2 id=\"preamble\" style=\"position:relative;\"><a href=\"#preamble\" aria-label=\"preamble permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Preamble</h2>\n<p>Renowned for its capabilities in Load Balancing, Service Discovery, Rate Limiting, <a href=\"https://istio.io/latest/about/service-mesh/\" target=\"_blank\" rel=\"noopener noreferrer\">Service Mesh</a>, and more within the microservices landscape, Istio holds a pivotal role.</p>\n<p>However, following <a href=\"https://istio.io/latest/docs/setup/getting-started/\" target=\"_blank\" rel=\"noopener noreferrer\">the default installation</a> steps for Istio within an EKS cluster results in the creation of a Classic Load Balancer, rather than an Application Load Balancer (ALB). This scenario prompts the need for ALB installation by DevOps engineers to facilitate service exposure.</p>\n<p>This article draws inspiration from an AWS blog post and takes the concept further, refining the Istio setup to ensure readiness for production environments. The objective is to showcase the implementation of Istio enriched with supplementary features, building upon the foundation of the aforementioned <a href=\"https://aws.amazon.com/blogs/containers/secure-end-to-end-traffic-on-amazon-eks-using-tls-certificate-in-acm-alb-and-istio/\" target=\"_blank\" rel=\"noopener noreferrer\">reference AWS blog</a>. The outcome is a meticulously prepared Istio Mesh tailored to the demands of production scenarios.</p>\n<h3 id=\"prerequisites\" style=\"position:relative;\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Prerequisites</h3>\n<p>In order to move forward, you should possess the following:</p>\n<ul>\n<li>An existing AWS account with proper permissions.</li>\n<li>An existing and working EKS cluster v1.26.</li>\n<li>ALB ingress controller installed.</li>\n<li>An existing and valid certificate in <a href=\"https://aws.amazon.com/certificate-manager/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS Certificate Manager (ACM)</a>. You can request one if you do not have one.</li>\n<li><a href=\"https://aws.amazon.com/cli/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS CLI</a></li>\n<li><a href=\"https://eksctl.io/\" target=\"_blank\" rel=\"noopener noreferrer\">eksctl</a></li>\n<li><a href=\"https://helm.sh/\" target=\"_blank\" rel=\"noopener noreferrer\">Helm</a></li>\n<li><a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Git</a></li>\n<li><a href=\"https://www.openssl.org/\" target=\"_blank\" rel=\"noopener noreferrer\">OpenSSL</a></li>\n<li><a href=\"https://istio.io/latest/docs/setup/getting-started/#download\" target=\"_blank\" rel=\"noopener noreferrer\">Istioctl</a></li>\n<li><a href=\"https://kubernetes.io/docs/tasks/tools/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubectl</a></li>\n</ul>\n<p>I will illustrate the installation of a sample Kubernetes application known as <strong>Yelb</strong> and its exposure through a Kubernetes service configured as a load balancer. Subsequently, I will guide you through the process of configuring the ALB ingress controller to direct this traffic to Istio for additional processing.</p>\n<h2 id=\"-deploy-yelb-app\" style=\"position:relative;\"><a href=\"#-deploy-yelb-app\" aria-label=\" deploy yelb app permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>🚀 Deploy Yelb App</h2>\n<p>To deploy the sample Kubernetes application <strong>Yelb</strong>, follow these steps:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://github.com/aws-samples/eks-alb-istio-with-tls\n<span class=\"token builtin class-name\">cd</span> eks-alb-istio-with-tls\nkubectl apply <span class=\"token parameter variable\">-f</span> yelb-k8s-loadbalancer.yaml</code></pre></div>\n<h3 id=\"visualizing-the-current-state\" style=\"position:relative;\"><a href=\"#visualizing-the-current-state\" aria-label=\"visualizing the current state permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Visualizing the Current State</h3>\n<p>Let's visualize our current state of the application:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.70588235294118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe4qSmD/xAAYEAADAQEAAAAAAAAAAAAAAAAAAREQIf/aAAgBAQABBQJl6Mmf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAABEg/9oACAEBAAY/AhT/AP/EABsQAAEFAQEAAAAAAAAAAAAAABEAARAhQVFx/9oACAEBAAE/IWDXveKtD+hGAEx//9oADAMBAAIAAwAAABCgD//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EKf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAHBABAAIBBQAAAAAAAAAAAAAAAQARIUFRcYGR/9oACAEBAAE/ENwKawioJ3o9lHSZVFMTfMCf/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Current State\" title=\"\" src=\"/static/d8abdc36c1b8e2170663248099c968e9/7bf67/current.jpg\" srcset=\"/static/d8abdc36c1b8e2170663248099c968e9/651be/current.jpg 170w,\n/static/d8abdc36c1b8e2170663248099c968e9/d30a3/current.jpg 340w,\n/static/d8abdc36c1b8e2170663248099c968e9/7bf67/current.jpg 680w,\n/static/d8abdc36c1b8e2170663248099c968e9/4b190/current.jpg 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"future-state-with-end-to-end-encryption\" style=\"position:relative;\"><a href=\"#future-state-with-end-to-end-encryption\" aria-label=\"future state with end to end encryption permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Future State with End-to-End Encryption</h3>\n<p>In the future state of the application, we will implement end-to-end traffic encryption using a TLS certificate from ACM, ALB, and Istio in Amazon EKS. The target state of the cluster will look like this:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.70588235294118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdxXADD/xAAaEAABBQEAAAAAAAAAAAAAAAAAAQIQETEi/9oACAEBAAEFAsL5bilR/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACBB/9oACAEBAAY/Air/AP/EABwQAAICAgMAAAAAAAAAAAAAAAABITERQWGxwf/aAAgBAQABPyF7S/BXdJKbfLJmAkkf/9oADAMBAAIAAwAAABCXz//EABYRAQEBAAAAAAAAAAAAAAAAAAABIf/aAAgBAwEBPxBdf//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EIf/xAAbEAEBAQACAwAAAAAAAAAAAAABEQBBYZGhsf/aAAgBAQABPxA1SqsYOEUGzn4ZUlYIjF7wADuCPnGQPe//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Target State\" title=\"\" src=\"/static/094b5b066560d873631bf6be7243a780/7bf67/target.jpg\" srcset=\"/static/094b5b066560d873631bf6be7243a780/651be/target.jpg 170w,\n/static/094b5b066560d873631bf6be7243a780/d30a3/target.jpg 340w,\n/static/094b5b066560d873631bf6be7243a780/7bf67/target.jpg 680w,\n/static/094b5b066560d873631bf6be7243a780/4b190/target.jpg 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"️-setting-up-and-configuring-istio\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-setting-up-and-configuring-istio\" aria-label=\"️ setting up and configuring istio permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>⚙️ Setting Up and Configuring Istio</h2>\n<p>To install Istio via <code class=\"language-text\">istioctl</code> and modify the service type of <code class=\"language-text\">istio-ingressgateway</code> to <code class=\"language-text\">NodePort</code>, execute the following command. This adjustment is essential for routing traffic from ALB to EC2 instances.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">istioctl <span class=\"token function\">install</span> <span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">profile</span><span class=\"token operator\">=</span>demo <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> values.gateways.istio-ingressgateway.type<span class=\"token operator\">=</span>NodePort</code></pre></div>\n<h3 id=\"confirm-istio-installation-status\" style=\"position:relative;\"><a href=\"#confirm-istio-installation-status\" aria-label=\"confirm istio installation status permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Confirm Istio Installation Status</h3>\n<p>Ensure Istio installation is operational by executing:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pods <span class=\"token parameter variable\">-n</span> istio-system</code></pre></div>\n<p>Active pods should be visible.</p>\n<h3 id=\"enable-istio-integration\" style=\"position:relative;\"><a href=\"#enable-istio-integration\" aria-label=\"enable istio integration permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Enable Istio Integration</h3>\n<p>Apply a label to the default namespace to trigger Istio to inject a proxy sidecar into running pods within the namespace. Prior to this, remove any existing pods in the default namespace.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Label default namespace</span>\nkubectl label namespace default istio-injection<span class=\"token operator\">=</span>enabled <span class=\"token parameter variable\">--overwrite</span>\n\n<span class=\"token comment\"># Delete existing pods so that Istio can inject sidecar</span>\nkubectl delete pods <span class=\"token parameter variable\">--all</span>\n\n<span class=\"token comment\"># Get list of pods</span>\nkubectl get pods</code></pre></div>\n<p>You will notice that there are two containers running in each pod.</p>\n<p><strong>🔐 Creating Self-Signed TLS Certificates</strong></p>\n<p>To produce self-signed certificates, we'll employ a key pair to secure traffic encryption between ALB and Istio Gateway.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">openssl req <span class=\"token parameter variable\">-x509</span> <span class=\"token parameter variable\">-newkey</span> rsa:4096 <span class=\"token parameter variable\">-sha256</span> <span class=\"token parameter variable\">-days</span> <span class=\"token number\">3650</span> <span class=\"token parameter variable\">-nodes</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">-keyout</span> key.pem <span class=\"token parameter variable\">-out</span> cert.pem <span class=\"token parameter variable\">-subj</span> <span class=\"token string\">\"/CN=*.yourdomain.com\"</span></code></pre></div>\n<p><strong>Example</strong></p>\n<p>Replace <code class=\"language-text\">*.yourdomain.com</code> with the wildcard domain name for your application. For example, in my case, it will be:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">openssl req <span class=\"token parameter variable\">-x509</span> <span class=\"token parameter variable\">-newkey</span> rsa:4096 <span class=\"token parameter variable\">-sha256</span> <span class=\"token parameter variable\">-days</span> <span class=\"token number\">36500</span> <span class=\"token parameter variable\">-nodes</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">-keyout</span> key.pem <span class=\"token parameter variable\">-out</span> cert.pem <span class=\"token parameter variable\">-subj</span> <span class=\"token string\">\"/CN=*.some-domain.cloud\"</span></code></pre></div>\n<h3 id=\"creating-a-kubernetes-secret\" style=\"position:relative;\"><a href=\"#creating-a-kubernetes-secret\" aria-label=\"creating a kubernetes secret permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Creating a Kubernetes Secret</h3>\n<p>Create a Kubernetes secret containing <code class=\"language-text\">key.pem</code> and <code class=\"language-text\">cert.pem</code>. We will use it with Istio Gateway to implement traffic encryption.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl create <span class=\"token parameter variable\">-n</span> istio-system secret generic tls-secret <span class=\"token punctuation\">\\</span>\n    --from-file<span class=\"token operator\">=</span>key<span class=\"token operator\">=</span>key.pem <span class=\"token punctuation\">\\</span>\n    --from-file<span class=\"token operator\">=</span>cert<span class=\"token operator\">=</span>cert.pem</code></pre></div>\n<h2 id=\"-configure-istio-gateway-and-virtual-services\" style=\"position:relative;\"><a href=\"#-configure-istio-gateway-and-virtual-services\" aria-label=\" configure istio gateway and virtual services permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>🔧 Configure Istio Gateway and Virtual Services</h2>\n<p>To configure traffic routing for Istio using gateway and virtual services, follow these steps:</p>\n<h3 id=\"install-and-configure-istio-gateway\" style=\"position:relative;\"><a href=\"#install-and-configure-istio-gateway\" aria-label=\"install and configure istio gateway permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install and Configure Istio Gateway</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> istio/gateway.yaml</code></pre></div>\n<h3 id=\"install-and-configure-external-services\" style=\"position:relative;\"><a href=\"#install-and-configure-external-services\" aria-label=\"install and configure external services permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install and Configure External Services</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> istio/external-services.yaml</code></pre></div>\n<h3 id=\"install-and-configure-istio-virtual-services-for-yelb\" style=\"position:relative;\"><a href=\"#install-and-configure-istio-virtual-services-for-yelb\" aria-label=\"install and configure istio virtual services for yelb permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install and Configure Istio Virtual Services for Yelb</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl apply <span class=\"token parameter variable\">-f</span> istio/yelb-services.yaml</code></pre></div>\n<p>We have applied self-signed certificates to the Ingress Gateway, which Istio will utilize for encrypting the traffic between the Application Load Balancer (ALB) and Istio itself. This step is crucial for establishing comprehensive end-to-end encryption.</p>\n<h2 id=\"-focus-on-the-istio-gateway\" style=\"position:relative;\"><a href=\"#-focus-on-the-istio-gateway\" aria-label=\" focus on the istio gateway permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>🌐 Focus on the Istio Gateway</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.istio.io/v1alpha3\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Gateway\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> yelb<span class=\"token punctuation\">-</span>gateway\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">istio</span><span class=\"token punctuation\">:</span> ingressgateway\n    <span class=\"token key atrule\">servers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token number\">443</span>\n                <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">-</span><span class=\"token number\">443</span>\n                <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> HTTPS\n            <span class=\"token key atrule\">tls</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">mode</span><span class=\"token punctuation\">:</span> SIMPLE\n                <span class=\"token key atrule\">credentialName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"tls-secret\"</span>\n            <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token string\">\"*\"</span></code></pre></div>\n<p>You'll observe that we have employed the Kubernetes secret called <code class=\"language-text\">tls-secret</code> as the <code class=\"language-text\">credentialName</code>, referencing the previously generated OpenSSL key and certificate. This secret encompasses the cryptographic key and certificate. The <code class=\"language-text\">yelb-gateway</code> Gateway is configured to listen on port 443, dedicated to handling encrypted traffic.</p>\n<h2 id=\"️-set-up-alb-ingress\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-set-up-alb-ingress\" aria-label=\"️ set up alb ingress permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>🏗️ Set Up ALB Ingress</h2>\n<p>While Istio cannot directly utilize ACM TLS certificates, we can harness AWS Application Load Balancer alongside ACM certificates. This strategy allows us to handle HTTPS traffic termination and then channel it to Istio Ingress Gateway for subsequent handling.</p>\n<p>For this procedure, we will require the ACM public certificate's ARN and the domain previously established in <a href=\"https://aws.amazon.com/route53/\" target=\"_blank\" rel=\"noopener noreferrer\">Amazon Route 53</a>, Amazon's Domain Name System (DNS) web service.</p>\n<p>The approach involves crafting an Ingress resource that captures incoming ALB traffic and conveys it to the Istio gateway. To make the process more streamlined, we have crafted a Helm chart that accommodates parameters such as the ACM certificate ARN and the host name. This setup ensures a seamless generation and installation of the Ingress configuration.</p>\n<h3 id=\"create-a-wildcard-ssl-certificate\" style=\"position:relative;\"><a href=\"#create-a-wildcard-ssl-certificate\" aria-label=\"create a wildcard ssl certificate permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Create a Wildcard SSL Certificate</h3>\n<p>Create a wildcard SSL certificate for your domain using AWS ACM and save the \"arn\" of that resource for later use.</p>\n<h3 id=\"install-alb-istio-ingress\" style=\"position:relative;\"><a href=\"#install-alb-istio-ingress\" aria-label=\"install alb istio ingress permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Install ALB-Istio Ingress</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm <span class=\"token function\">install</span> alb-istio-ingress ./helm/ALB-Istio-TLS <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">host</span><span class=\"token operator\">=</span>blog.yourdomain.com <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">certificate_arn</span><span class=\"token operator\">=</span>arn:aws:acm:xxxxxx:999999999999:certificate/xxxxxxxxx</code></pre></div>\n<p>After the installation of the Ingress, it will set up an AWS Application Load Balancer accessible on the internet. This Load Balancer will be associated with an ACM certificate to handle HTTPS traffic, and it will then route this traffic to Istio resources within the EKS cluster.</p>\n<p>To access the generated manifest of the Ingress resource, you can use the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get ingress gw-ingress <span class=\"token parameter variable\">-n</span> istio-system <span class=\"token parameter variable\">-o</span> yaml</code></pre></div>\n<p>The generated output will look like the snippet below. Note the values corresponding to <code class=\"language-text\">alb.ingress.kubernetes.io/backend-protocol</code> and <code class=\"language-text\">host</code> fields.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Ingress\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">kubernetes.io/ingress.class</span><span class=\"token punctuation\">:</span> alb\n        <span class=\"token key atrule\">alb.ingress.kubernetes.io/scheme</span><span class=\"token punctuation\">:</span> internet<span class=\"token punctuation\">-</span>facing\n        <span class=\"token key atrule\">alb.ingress.kubernetes.io/healthcheck-path</span><span class=\"token punctuation\">:</span> /healthz/ready\n        <span class=\"token key atrule\">alb.ingress.kubernetes.io/healthcheck-port</span><span class=\"token punctuation\">:</span> traffic<span class=\"token punctuation\">-</span>port\n        <span class=\"token key atrule\">alb.ingress.kubernetes.io/backend-protocol</span><span class=\"token punctuation\">:</span> HTTPS\n        <span class=\"token key atrule\">alb.ingress.kubernetes.io/listen-ports</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'[{\"HTTP\": 80}, {\"HTTPS\":443}]'</span>\n        <span class=\"token key atrule\">alb.ingress.kubernetes.io/actions.ssl-redirect</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n            {\n                \"Type\": \"redirect\", \n                \"RedirectConfig\": { \n                    \"Protocol\": \"HTTPS\", \n                    \"Port\": \"443\", \n                    \"StatusCode\": \"HTTP_301\"\n                }\n            }    </span>\n        <span class=\"token key atrule\">alb.ingress.kubernetes.io/certificate-arn</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n            arn:aws:acm:xxxxxx:999999999999:certificate/xxxxxxxxx</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> gw<span class=\"token punctuation\">-</span>ingress\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>system\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> blog.yourdomain.com\n        <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>      \n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ssl<span class=\"token punctuation\">-</span>redirect\n                        <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> \n                            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> use<span class=\"token punctuation\">-</span>annotation\n                <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /    \n                <span class=\"token key atrule\">pathType</span><span class=\"token punctuation\">:</span> Prefix  \n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>ingressgateway\n                        <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> \n                            <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token number\">15021</span>\n                <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /healthz/ready\n                <span class=\"token key atrule\">pathType</span><span class=\"token punctuation\">:</span> Prefix\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>ingressgateway\n                        <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> \n                            <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token number\">443</span>\n                <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /\n                <span class=\"token key atrule\">pathType</span><span class=\"token punctuation\">:</span> Prefix</code></pre></div>\n<p>Now you might be wondering why we created a wildcard SSL ACM in the previous step and in the above step we only attach a subdomain (<code class=\"language-text\">blog.yourdomain.com</code>). How can we use a single Ingress to expose multiple services?</p>\n<p>To address this, due to templating issues, we cannot pass the wildcard domain in the Helm chart above. To fix this, once the ingress is created, we edit the ingress resource to configure annotations for the wildcard domain:</p>\n<h3 id=\"edit-the-ingress-resource\" style=\"position:relative;\"><a href=\"#edit-the-ingress-resource\" aria-label=\"edit the ingress resource permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Edit the Ingress Resource</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl edit ingress gw-ingress <span class=\"token parameter variable\">-n</span> istio-system</code></pre></div>\n<p>Go to <code class=\"language-text\">spec.rules.host</code> and change it to the wildcard domain.</p>\n<h3 id=\"get-alb-load-balancer-dns\" style=\"position:relative;\"><a href=\"#get-alb-load-balancer-dns\" aria-label=\"get alb load balancer dns permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Get ALB Load Balancer DNS</h3>\n<p>Make a note of the ALB load balancer DNS:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">echo</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get ingress gw-ingress <span class=\"token parameter variable\">-n</span> istio-system <span class=\"token parameter variable\">-o</span> <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token string\">\"{.status.loadBalancer.ingress[*].hostname}\"</span><span class=\"token variable\">)</span></span></code></pre></div>\n<p>You should get an output like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">k8s-istiosys-xxxxxxxxxxxxxxxxxxx.eu-west-1.elb.amazonaws.com</code></pre></div>\n<h2 id=\"-create-a-wildcard-route-53-entry\" style=\"position:relative;\"><a href=\"#-create-a-wildcard-route-53-entry\" aria-label=\" create a wildcard route 53 entry permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>🌐 Create a Wildcard Route 53 Entry</h2>\n<p>The last step is to create a wildcard Route 53 entry for your internet-facing ALB. This ensures that whenever any virtual service with the subdomain DNS is created, it will automatically get routed to the ALB. From there, the traffic will be directed to the Istio Gateway and then to the Virtual Service.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.705882352941174%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAd1xBlMzv//EABYQAAMAAAAAAAAAAAAAAAAAAAEgMf/aAAgBAQABBQJTf//EABURAQEAAAAAAAAAAAAAAAAAAAAS/9oACAEDAQE/AUP/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEv/aAAgBAgEBPwFb/8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEg/9oACAEBAAY/ApZ//8QAGhABAAEFAAAAAAAAAAAAAAAAAQARICGB8P/aAAgBAQABPyEHiZpNlm//2gAMAwEAAgADAAAAEDD/AP/EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8QFS0//8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAB/9oACAECAQE/ELRoX//EABwQAQABBAMAAAAAAAAAAAAAAAERACExYRBRof/aAAgBAQABPxAFxgjGU90mBJ2VC3ZNc+6v/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Route 53 Setup\" title=\"\" src=\"/static/0ae88a1afffd69a4121732557e6f95ab/7bf67/route53.jpg\" srcset=\"/static/0ae88a1afffd69a4121732557e6f95ab/651be/route53.jpg 170w,\n/static/0ae88a1afffd69a4121732557e6f95ab/d30a3/route53.jpg 340w,\n/static/0ae88a1afffd69a4121732557e6f95ab/7bf67/route53.jpg 680w,\n/static/0ae88a1afffd69a4121732557e6f95ab/4b190/route53.jpg 800w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"-summary\" style=\"position:relative;\"><a href=\"#-summary\" aria-label=\" summary permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>🔚 Summary</h2>\n<p>Amazon EKS offers a hassle-free way to operate Kubernetes both on AWS and on-premises. Kubernetes, an open-source platform, automates the deployment, scaling, and administration of containerized applications. Amazon EKS is certified as Kubernetes-conformant, ensuring compatibility with existing applications designed for upstream Kubernetes environments.</p>\n<p>Moreover, Amazon EKS seamlessly integrates with community Kubernetes tools and supports popular add-ons, such as <a href=\"https://coredns.io/\" target=\"_blank\" rel=\"noopener noreferrer\">CoreDNS</a> for DNS services, the <a href=\"https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubernetes Dashboard</a> for UI management, and the <a href=\"https://kubernetes.io/docs/reference/kubectl/\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl</a> command-line tool for cluster access and control.</p>\n<p>This article has outlined how you can establish end-to-end security for your Amazon EKS setup using service meshes like Istio, in combination with <a href=\"https://aws.amazon.com/certificate-manager/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS Certificate Manager</a> and the <a href=\"https://aws.amazon.com/elasticloadbalancing/\" target=\"_blank\" rel=\"noopener noreferrer\">Application Load Balancer</a>.</p>\n<p>I trust this guide aids your Kubernetes endeavors and streamlines your transition to Amazon EKS. If you have inquiries or insights, feel free to share them in the comments.</p>\n<br>\n<br>\n<blockquote>\n<p>💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  <strong><em>Until next time 🎉</em></strong></p>\n</blockquote>\n<p>🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>♻️ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>♻️ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end ✌🏻</strong></p>\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n<p><strong>📅 Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":6,"rawMarkdownBody":"\n> **Enhancing Security on Amazon EKS with Istio, ALB, and ACM 🕸**\n\n## Preamble\n\nRenowned for its capabilities in Load Balancing, Service Discovery, Rate Limiting, [Service Mesh](https://istio.io/latest/about/service-mesh/), and more within the microservices landscape, Istio holds a pivotal role.\n\nHowever, following [the default installation](https://istio.io/latest/docs/setup/getting-started/) steps for Istio within an EKS cluster results in the creation of a Classic Load Balancer, rather than an Application Load Balancer (ALB). This scenario prompts the need for ALB installation by DevOps engineers to facilitate service exposure.\n\nThis article draws inspiration from an AWS blog post and takes the concept further, refining the Istio setup to ensure readiness for production environments. The objective is to showcase the implementation of Istio enriched with supplementary features, building upon the foundation of the aforementioned [reference AWS blog](https://aws.amazon.com/blogs/containers/secure-end-to-end-traffic-on-amazon-eks-using-tls-certificate-in-acm-alb-and-istio/). The outcome is a meticulously prepared Istio Mesh tailored to the demands of production scenarios.\n\n### Prerequisites\n\nIn order to move forward, you should possess the following:\n\n- An existing AWS account with proper permissions.\n- An existing and working EKS cluster v1.26.\n- ALB ingress controller installed.\n- An existing and valid certificate in [AWS Certificate Manager (ACM)](https://aws.amazon.com/certificate-manager/). You can request one if you do not have one.\n- [AWS CLI](https://aws.amazon.com/cli/)\n- [eksctl](https://eksctl.io/)\n- [Helm](https://helm.sh/)\n- [Git](https://git-scm.com/)\n- [OpenSSL](https://www.openssl.org/)\n- [Istioctl](https://istio.io/latest/docs/setup/getting-started/#download)\n- [Kubectl](https://kubernetes.io/docs/tasks/tools/)\n\nI will illustrate the installation of a sample Kubernetes application known as **Yelb** and its exposure through a Kubernetes service configured as a load balancer. Subsequently, I will guide you through the process of configuring the ALB ingress controller to direct this traffic to Istio for additional processing.\n\n## 🚀 Deploy Yelb App\n\nTo deploy the sample Kubernetes application **Yelb**, follow these steps:\n\n```shell\ngit clone https://github.com/aws-samples/eks-alb-istio-with-tls\ncd eks-alb-istio-with-tls\nkubectl apply -f yelb-k8s-loadbalancer.yaml\n```\n\n### Visualizing the Current State\n\nLet's visualize our current state of the application:\n\n![Current State](./current.jpg)\n\n### Future State with End-to-End Encryption\n\nIn the future state of the application, we will implement end-to-end traffic encryption using a TLS certificate from ACM, ALB, and Istio in Amazon EKS. The target state of the cluster will look like this:\n\n![Target State](./target.jpg)\n\n## ⚙️ Setting Up and Configuring Istio\n\nTo install Istio via `istioctl` and modify the service type of `istio-ingressgateway` to `NodePort`, execute the following command. This adjustment is essential for routing traffic from ALB to EC2 instances.\n\n```shell\nistioctl install --set profile=demo \\\n--set values.gateways.istio-ingressgateway.type=NodePort\n```\n\n### Confirm Istio Installation Status\n\nEnsure Istio installation is operational by executing:\n\n```shell\nkubectl get pods -n istio-system\n```\n\nActive pods should be visible.\n\n### Enable Istio Integration\n\nApply a label to the default namespace to trigger Istio to inject a proxy sidecar into running pods within the namespace. Prior to this, remove any existing pods in the default namespace.\n\n```shell\n# Label default namespace\nkubectl label namespace default istio-injection=enabled --overwrite\n\n# Delete existing pods so that Istio can inject sidecar\nkubectl delete pods --all\n\n# Get list of pods\nkubectl get pods\n```\n\nYou will notice that there are two containers running in each pod.\n\n**🔐 Creating Self-Signed TLS Certificates**\n\nTo produce self-signed certificates, we'll employ a key pair to secure traffic encryption between ALB and Istio Gateway.\n\n```shell\nopenssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \\\n    -keyout key.pem -out cert.pem -subj \"/CN=*.yourdomain.com\"\n```\n\n**Example**\n\nReplace `*.yourdomain.com` with the wildcard domain name for your application. For example, in my case, it will be:\n\n```shell\nopenssl req -x509 -newkey rsa:4096 -sha256 -days 36500 -nodes \\\n    -keyout key.pem -out cert.pem -subj \"/CN=*.some-domain.cloud\"\n```\n\n### Creating a Kubernetes Secret\n\nCreate a Kubernetes secret containing `key.pem` and `cert.pem`. We will use it with Istio Gateway to implement traffic encryption.\n\n```shell\nkubectl create -n istio-system secret generic tls-secret \\\n    --from-file=key=key.pem \\\n    --from-file=cert=cert.pem\n```\n\n## 🔧 Configure Istio Gateway and Virtual Services\n\nTo configure traffic routing for Istio using gateway and virtual services, follow these steps:\n\n### Install and Configure Istio Gateway\n\n```shell\nkubectl apply -f istio/gateway.yaml\n```\n\n### Install and Configure External Services\n\n```shell\nkubectl apply -f istio/external-services.yaml\n```\n\n### Install and Configure Istio Virtual Services for Yelb\n\n```shell\nkubectl apply -f istio/yelb-services.yaml\n```\n\nWe have applied self-signed certificates to the Ingress Gateway, which Istio will utilize for encrypting the traffic between the Application Load Balancer (ALB) and Istio itself. This step is crucial for establishing comprehensive end-to-end encryption.\n\n## 🌐 Focus on the Istio Gateway\n\n```yaml\napiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n    name: yelb-gateway\nspec:\n    selector:\n        istio: ingressgateway\n    servers:\n        - port:\n                number: 443\n                name: https-443\n                protocol: HTTPS\n            tls:\n                mode: SIMPLE\n                credentialName: \"tls-secret\"\n            hosts:\n                - \"*\"\n```\n\nYou'll observe that we have employed the Kubernetes secret called `tls-secret` as the `credentialName`, referencing the previously generated OpenSSL key and certificate. This secret encompasses the cryptographic key and certificate. The `yelb-gateway` Gateway is configured to listen on port 443, dedicated to handling encrypted traffic.\n\n## 🏗️ Set Up ALB Ingress\n\nWhile Istio cannot directly utilize ACM TLS certificates, we can harness AWS Application Load Balancer alongside ACM certificates. This strategy allows us to handle HTTPS traffic termination and then channel it to Istio Ingress Gateway for subsequent handling.\n\nFor this procedure, we will require the ACM public certificate's ARN and the domain previously established in [Amazon Route 53](https://aws.amazon.com/route53/), Amazon's Domain Name System (DNS) web service.\n\nThe approach involves crafting an Ingress resource that captures incoming ALB traffic and conveys it to the Istio gateway. To make the process more streamlined, we have crafted a Helm chart that accommodates parameters such as the ACM certificate ARN and the host name. This setup ensures a seamless generation and installation of the Ingress configuration.\n\n### Create a Wildcard SSL Certificate\n\nCreate a wildcard SSL certificate for your domain using AWS ACM and save the \"arn\" of that resource for later use.\n\n### Install ALB-Istio Ingress\n\n```shell\nhelm install alb-istio-ingress ./helm/ALB-Istio-TLS \\\n--set host=blog.yourdomain.com \\\n--set certificate_arn=arn:aws:acm:xxxxxx:999999999999:certificate/xxxxxxxxx\n```\n\nAfter the installation of the Ingress, it will set up an AWS Application Load Balancer accessible on the internet. This Load Balancer will be associated with an ACM certificate to handle HTTPS traffic, and it will then route this traffic to Istio resources within the EKS cluster.\n\nTo access the generated manifest of the Ingress resource, you can use the following command:\n\n```shell\nkubectl get ingress gw-ingress -n istio-system -o yaml\n```\n\nThe generated output will look like the snippet below. Note the values corresponding to `alb.ingress.kubernetes.io/backend-protocol` and `host` fields.\n\n```yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n    annotations:\n        kubernetes.io/ingress.class: alb\n        alb.ingress.kubernetes.io/scheme: internet-facing\n        alb.ingress.kubernetes.io/healthcheck-path: /healthz/ready\n        alb.ingress.kubernetes.io/healthcheck-port: traffic-port\n        alb.ingress.kubernetes.io/backend-protocol: HTTPS\n        alb.ingress.kubernetes.io/listen-ports: '[{\"HTTP\": 80}, {\"HTTPS\":443}]'\n        alb.ingress.kubernetes.io/actions.ssl-redirect: |\n            {\n                \"Type\": \"redirect\", \n                \"RedirectConfig\": { \n                    \"Protocol\": \"HTTPS\", \n                    \"Port\": \"443\", \n                    \"StatusCode\": \"HTTP_301\"\n                }\n            }    \n        alb.ingress.kubernetes.io/certificate-arn: |\n            arn:aws:acm:xxxxxx:999999999999:certificate/xxxxxxxxx\n    name: gw-ingress\n    namespace: istio-system\nspec:\n    rules:\n    - host: blog.yourdomain.com\n        http:\n            paths:      \n            - backend:\n                    service:\n                        name: ssl-redirect\n                        port: \n                            name: use-annotation\n                path: /    \n                pathType: Prefix  \n            - backend:\n                    service:\n                        name: istio-ingressgateway\n                        port: \n                            number: 15021\n                path: /healthz/ready\n                pathType: Prefix\n            - backend:\n                    service:\n                        name: istio-ingressgateway\n                        port: \n                            number: 443\n                path: /\n                pathType: Prefix\n```\n\nNow you might be wondering why we created a wildcard SSL ACM in the previous step and in the above step we only attach a subdomain (`blog.yourdomain.com`). How can we use a single Ingress to expose multiple services?\n\nTo address this, due to templating issues, we cannot pass the wildcard domain in the Helm chart above. To fix this, once the ingress is created, we edit the ingress resource to configure annotations for the wildcard domain:\n\n### Edit the Ingress Resource\n\n```shell\nkubectl edit ingress gw-ingress -n istio-system\n```\n\nGo to `spec.rules.host` and change it to the wildcard domain.\n\n### Get ALB Load Balancer DNS\n\nMake a note of the ALB load balancer DNS:\n\n```shell\necho $(kubectl get ingress gw-ingress -n istio-system -o jsonpath=\"{.status.loadBalancer.ingress[*].hostname}\")\n```\n\nYou should get an output like this:\n\n```shell\nk8s-istiosys-xxxxxxxxxxxxxxxxxxx.eu-west-1.elb.amazonaws.com\n```\n\n## 🌐 Create a Wildcard Route 53 Entry\n\nThe last step is to create a wildcard Route 53 entry for your internet-facing ALB. This ensures that whenever any virtual service with the subdomain DNS is created, it will automatically get routed to the ALB. From there, the traffic will be directed to the Istio Gateway and then to the Virtual Service.\n\n![Route 53 Setup](./route53.jpg)\n\n## 🔚 Summary\n\nAmazon EKS offers a hassle-free way to operate Kubernetes both on AWS and on-premises. Kubernetes, an open-source platform, automates the deployment, scaling, and administration of containerized applications. Amazon EKS is certified as Kubernetes-conformant, ensuring compatibility with existing applications designed for upstream Kubernetes environments.\n\nMoreover, Amazon EKS seamlessly integrates with community Kubernetes tools and supports popular add-ons, such as [CoreDNS](https://coredns.io/) for DNS services, the [Kubernetes Dashboard](https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/) for UI management, and the [kubectl](https://kubernetes.io/docs/reference/kubectl/) command-line tool for cluster access and control.\n\nThis article has outlined how you can establish end-to-end security for your Amazon EKS setup using service meshes like Istio, in combination with [AWS Certificate Manager](https://aws.amazon.com/certificate-manager/) and the [Application Load Balancer](https://aws.amazon.com/elasticloadbalancing/).\n\nI trust this guide aids your Kubernetes endeavors and streamlines your transition to Amazon EKS. If you have inquiries or insights, feel free to share them in the comments.\n\n<br>\n<br>\n\n> 💡 Thank you for Reading !! 🙌🏻😁📃, see you in the next blog.🤘  **_Until next time 🎉_**\n\n\n🚀 Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**♻️ LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**♻️ X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end ✌🏻**\n\n<h1 align=\"center\">🔰 Keep Learning !! Keep Sharing !! 🔰</h1>\n\n**📅 Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":1199},"frontmatter":{"id":"3bd3568faa5f1e5d25637481","path":"/blog/eks-secure-traffic-istio-alb-acm/","humanDate":"Oct 20, 2024","fullDate":"2024-10-20","title":"Istio, ALB, and ACM: securing end-to-end traffic on Amazon EKS with TLS certificates","keywords":["Amazon EKS","Istio","AWS ALB","AWS ACM","TLS certificates","Kubernetes"],"excerpt":"Learn how to secure end-to-end traffic on Amazon EKS using Istio, ALB, and ACM with TLS certificates. This guide covers the essential steps and best practices for implementing robust security measures.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHetFsYoH//xAAYEAADAQEAAAAAAAAAAAAAAAAAAUEhMf/aAAgBAQABBQLBdRaj/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhABAQEAAAAAAAAAAAAAAAAAERAg/9oACAEBAAY/AjBP/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERMWGR/9oACAEBAAE/IXERrgxiY/DHUwlYJFD/2gAMAwEAAgADAAAAENMf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQACAgMAAAAAAAAAAAAAAREAITFxQYHw/9oACAEBAAE/EF0gObSm+CHJ9MaWiKaxSegJ7zWmUt8nWAIOM//Z"},"images":{"fallback":{"src":"/static/71c8a4149e178fefe5bf8a03d1aeb0ff/3b307/tls-cover.jpg","srcSet":"/static/71c8a4149e178fefe5bf8a03d1aeb0ff/7284f/tls-cover.jpg 750w,\n/static/71c8a4149e178fefe5bf8a03d1aeb0ff/3b307/tls-cover.jpg 800w","sizes":"100vw"},"sources":[{"srcSet":"/static/71c8a4149e178fefe5bf8a03d1aeb0ff/57584/tls-cover.webp 750w,\n/static/71c8a4149e178fefe5bf8a03d1aeb0ff/89c0d/tls-cover.webp 800w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.66625}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/cloud-native-landscape/","title":"Explore the Variety of Cloud-Native Landscape: the Dynamic World of Kubernetes and Beyond","date":"2024-10-21 17:06:00"},"excerpt":"Cloudy with a Chance of Containers: Navigating the Murky Waters of Cloud-Native Projects ☁️ 🌩 Overview 👀 They say I was supposed to be a…"},"nextThought":{"frontmatter":{"path":"/blog/k8s-cluster-api-overview/","title":"Getting started with Kubernetes Cluster API CAPI: An Overview","date":"2024-10-20 22:36:00"},"excerpt":"Programmatically Configure and Deploy k8s Clusters 🕸 🐳 Preamble Getting a Kubernetes cluster set up can be done in a bunch of ways. There…"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}