{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/communicate-through-code/","result":{"data":{"markdownRemark":{"html":"<p>I had been a technical lead for more than 3 years. One of my responsibilities was to make sure that my teams produced quality eCommerce solutions. During code reviews, I frequently saw one particular problem which did a great job at <strong>killing software maintainability</strong>. This problem is better known by the people management area, but, believe me, it's vitally important for software development as well. The problem is called <strong>\"poorly communicated intent\"</strong>.</p>\n<h2 id=\"code-lifecycle\" style=\"position:relative;\"><a href=\"#code-lifecycle\" aria-label=\"code lifecycle permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Code Lifecycle</h2>\n<p>When you write code, there is a problem you want to solve. So you do research and brainstorm possible approaches. You evaluate them and stick to one solution that you finally implement.</p>\n<p>This is actually where the hardest part starts.</p>\n<p>Your solution becomes <strong>a part of a bigger codebase</strong>. A whole team of several people may maintain it. They will read your code, analyze it and <strong>build on top of it</strong>. They may also <strong>evolve that piece of code</strong> to keep up with <strong>ever-changing requirements</strong>.</p>\n<p>At the same time, it's <strong>unlikely</strong> you are around all the time to ask you about your code. You may switch the team or change the company you work at. Perhaps, new members may join your team and they have not heard your cool story on why you had to solve that problem the way you had done.</p>\n<p>\n\t\t<video\n\t\t\tsrc=https://media.giphy.com/media/F7yLXA5fJ5sLC/giphy.mp4\n\t\t\twidth=\"100%\"\n\t\t\theight=\"auto\"\n\t\t\tpreload=\"auto\"\n\t\t\tmuted=\"true\"\n\t\t\ttitle=\"Be ready to support your code\"\n\t\t\tautoplay\n\t\t\tplaysinline\n\t\t\tcontrols\n\t\t\tloop\n\t\t></video>\n\t</p>\n<p>Being always around is a synchronous communication and it <strong>doesn't scale</strong> well.</p>\n<p>In the worse case, when the code owner is not available, you can still review all places that consume the code and make sure your changes will not break them. This rather tedious process significantly slows down the progress of the application development and frequently slips your deadlines.</p>\n<p>When you adjust code that you don't understand completely, there is a constant fear that there is a subtle use case which you may miss and which eventually will break. Those situations turn codebase maintenance and evolution into a desperately painful task.</p>\n<p>Poorly written code is extremely contingent and over time there will be even more code like that. One day technical debt will make you hate every Monday when you have to return to work.</p>\n<p>This is not a way to go.</p>\n<h2 id=\"intention-in-code\" style=\"position:relative;\"><a href=\"#intention-in-code\" aria-label=\"intention in code permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Intention in Code</h2>\n<p>The root of the problem is that people don't always realize that they actually <strong>communicate their intent when they do coding</strong>. Think for a moment. It's called \"programing language\", hence, it must have something <strong>in common with natural languages</strong>. Just like natural languages are useful for communicating your ideas, programing languages inherit pretty much the same idea, but <strong>language expressions</strong> are slightly different. If so, then each expression exists to convey some information, meaning and intention.</p>\n<p>Problems start when you try to <strong>misuse</strong> those expressions. This leads to implementations that are hard to read, understand, maintain and change.</p>\n<h2 id=\"complexity\" style=\"position:relative;\"><a href=\"#complexity\" aria-label=\"complexity permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Complexity</h2>\n<p>This is how we can get <strong>a complex solution</strong>, but why it's actually complex?</p>\n<p>Primarily, there are two sources of complexity:</p>\n<ul>\n<li><strong>domain complexity</strong> - implementation is complex because the problem it solves is complex (e.g. plane's runway scheduling)</li>\n<li><strong>accidental complexity</strong> - implementation could be simpler but we have implemented it in an unmaintainable way</li>\n</ul>\n<p>Domain complexity is something we can't do much about. We just need to deal with it and there are a few approaches like <a href=\"https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215\" target=\"_blank\" rel=\"noopener noreferrer\">domain-driven design</a>.</p>\n<p>At the same time, accidental complexity is something we <strong>can and should avoid</strong>. Let's take a look at the following real-world example:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">\n<span class=\"token comment\"># bad code below, don't copy-paste it</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">remove_duplicates</span><span class=\"token punctuation\">(</span>clean_tokens<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    clean_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">for</span> tok <span class=\"token keyword\">in</span> clean_tokens<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> tok<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>isalnum<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> tok<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">in</span> clean_dict<span class=\"token punctuation\">:</span>\n                clean_dict<span class=\"token punctuation\">[</span>tok<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> tok<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n                clean_dict<span class=\"token punctuation\">[</span>tok<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tok<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n\n    result <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">,</span> clean_dict<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> result</code></pre></div>\n<p>Try to read this function a few times. What are your impressions?</p>\n<ul>\n<li>the function is called <code class=\"language-text\">remove_duplicates()</code> but it seems to omit only non-alpha-numerical values, not duplicated values</li>\n<li>what values are inside <code class=\"language-text\">tok[0]</code> and <code class=\"language-text\">tok[2]</code> items? How many items are there in each <code class=\"language-text\">tok</code> array?</li>\n<li>what's the meaning of <code class=\"language-text\">tok[2]</code> sum for each <code class=\"language-text\">tok[0]</code>?</li>\n</ul>\n<p>I can say without doubts that this piece of code is complex and it's hard to understand. However, this piece is not about launching a SpaceX shuttle (hopefully). It does something very simple, but what exactly it does was highly obscured by a poor choice of language expressions. This is what <strong>accidental complexity</strong> really means.</p>\n<h2 id=\"communication-tools\" style=\"position:relative;\"><a href=\"#communication-tools\" aria-label=\"communication tools permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Communication Tools</h2>\n<p>I hope that at this point you are already eager to know how to improve your \"communicate through code\" skills.</p>\n<p>There are two main ways to communicate your intent better:</p>\n<ul>\n<li>via programing language expressions and idioms</li>\n<li>via comments</li>\n</ul>\n<p>Each of them deserves a detailed view, so let's dive into it.</p>\n<h2 id=\"language-expressions\" style=\"position:relative;\"><a href=\"#language-expressions\" aria-label=\"language expressions permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Language Expressions</h2>\n<h3 id=\"python-vs-php\" style=\"position:relative;\"><a href=\"#python-vs-php\" aria-label=\"python vs php permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Python vs PHP</h3>\n<p>Surprisingly, let's talk about PHP for a second.</p>\n<p>I started delving into Python after I had spent quite a few years dealing with PHP.\nAfter looking at Python, my first question was: \"Why does Python have so many data structures?\". There are lists, tuples, sets, frozen sets, dicts and this are just a few to name.</p>\n<p>In the PHP world, there are arrays and associative arrays (counterparts of Python's lists and dicts). That's it. Interestingly, there are PHP's <a href=\"https://www.php.net/manual/en/book.spl.php\" target=\"_blank\" rel=\"noopener noreferrer\">SPL</a> and <a href=\"https://www.php.net/manual/en/book.ds.php\" target=\"_blank\" rel=\"noopener noreferrer\">Data Structures</a>, but, to be honest, I have hardly ever seen them in use in the wild.</p>\n<p>So I was really curious. The understanding has come to me later.</p>\n<p>It's all about communication of your intent. Python provides many more expressions, built-in functions and approaches that should be used in specific cases to <strong>offload meaning</strong> that each of them should deliver. Conversely, in PHP people often get arrays <strong>overloaded</strong> in terms of the meaning arrays should convey which makes code harder to grasp.</p>\n<p>Let's review a few examples.</p>\n<h3 id=\"types-and-collections\" style=\"position:relative;\"><a href=\"#types-and-collections\" aria-label=\"types and collections permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Types and Collections</h3>\n<p>Python has many data types and a good part of them are covered by syntax sugar to make them easier to use. Remaining data types can be found in the <code class=\"language-text\">collections</code> package.</p>\n<h4 id=\"mutable-and-unmutable\" style=\"position:relative;\"><a href=\"#mutable-and-unmutable\" aria-label=\"mutable and unmutable permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Mutable and Unmutable</h4>\n<p><strong>Lists</strong> and <strong>sets</strong> are among the basic data structures that are built-in into Python's syntax.</p>\n<p>Lists are <strong>mutable</strong> containers for items. Their items should not be necessarily the same type. Lists may contain duplicates. It's rare to see someone accesses items from the middle of the list. Sets are <strong>mutable</strong> containers with no <strong>duplicates</strong> or <strong>a specific order</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">langs<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Golang\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"PHP\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"R\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Julia\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"JavaScript\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Python\"</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> lang <span class=\"token keyword\">in</span> langs<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>lang<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Outputs:</span>\n<span class=\"token comment\"># Python</span>\n<span class=\"token comment\"># Golang</span>\n<span class=\"token comment\"># PHP</span>\n<span class=\"token comment\"># R</span>\n<span class=\"token comment\"># ...</span>\n<span class=\"token comment\"># Python</span></code></pre></div>\n<p>Lists and sets have their <strong>immutable</strong> counterparts which are <strong>tuples</strong> and <strong>frozen sets</strong>. Tuples and frozen sets cannot be modified after creation. They can be used to say that it doesn't make sense to change them because they represent constants or some well-defined structure where each item has a special meaning like a database row.</p>\n<p>Python goes even further and lets you name each item in the tuples via the <code class=\"language-text\">NamedTuple</code> class:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> typing <span class=\"token keyword\">import</span> NamedTuple\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span>NamedTuple<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span>\n    score<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span>\n\n\nstudent <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token string\">\"Roma\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10.4</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 10.4</span>\n\n<span class=\"token comment\"># equivalent to:</span>\n<span class=\"token comment\"># print(student[1])</span>\n<span class=\"token comment\"># but a way more readable</span></code></pre></div>\n<h4 id=\"dicts\" style=\"position:relative;\"><a href=\"#dicts\" aria-label=\"dicts permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Dicts</h4>\n<p>Dicts are the members of the royal family in Python. The whole Python language is based on them. Essentially, <strong>dicts</strong> are <strong>mutable</strong> mappings of <strong>unique keys</strong> to corresponding values. Dicts are typically iterated over or accesses by keys:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">lang_mascots<span class=\"token punctuation\">:</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"python\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"üêç\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"rust\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ü¶Ä\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"golang\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"üêπ\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>lang_mascots<span class=\"token punctuation\">[</span><span class=\"token string\">\"python\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># üêç</span>\n\n<span class=\"token keyword\">for</span> lang<span class=\"token punctuation\">,</span> mascot <span class=\"token keyword\">in</span> lang_mascots<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>lang<span class=\"token punctuation\">}</span></span><span class=\"token string\"> -> </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>mascot<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># python -> üêç</span>\n<span class=\"token comment\"># rust -> ü¶Ä</span>\n<span class=\"token comment\"># golang -> üêπ</span></code></pre></div>\n<p>Even though dicts have <a href=\"https://stackoverflow.com/questions/39980323/are-dictionaries-ordered-in-python-3-6\" target=\"_blank\" rel=\"noopener noreferrer\">become ordered recently (remembers order of adding keys)</a>, you may still want to consider them unordered and use a whole another <code class=\"language-text\">OrderedDict</code> class as a means of emphasizing that you need key ordering.</p>\n<p>You can be even more specific if your values are the same type. The <code class=\"language-text\">defaultdict</code> class will help you to automatically init all non-existing keys:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> defaultdict\n\n\nPokemonList <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span>\n\npokemons_by_owner<span class=\"token punctuation\">:</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> PokemonList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\npokemons_by_owner_safe<span class=\"token punctuation\">:</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> PokemonList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> defaultdict<span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># list is a factory of empty values</span>\n\npokemons_by_owner<span class=\"token punctuation\">[</span><span class=\"token string\">\"Ash\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">\"Pikachu\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># KeyError :(</span>\n\npokemons_by_owner_safe<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">\"Pikachu\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># all good, one more pokemon has been added</span></code></pre></div>\n<h4 id=\"counters\" style=\"position:relative;\"><a href=\"#counters\" aria-label=\"counters permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Counters</h4>\n<p>Often we need to count how many times each item occurs in the list or dict or to sum up items' weights. I'm sure we could do that via dicts, but Python has a better way to achieve that via the Counter class:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> Counter\n\n\nlangs<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Golang\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"PHP\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Golang\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"PHP\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Fortran\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\nlang_popularity<span class=\"token punctuation\">:</span> Counter <span class=\"token operator\">=</span> Counter<span class=\"token punctuation\">(</span>langs<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>lang_popularity<span class=\"token punctuation\">.</span>most_common<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># [('Python', 2), ('Golang', 2), ('PHP', 2)]</span></code></pre></div>\n<p>Now let's compare this implementation with a dict-based:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> defaultdict\n<span class=\"token keyword\">from</span> typing <span class=\"token keyword\">import</span> Dict<span class=\"token punctuation\">,</span> List\n\n\nlangs<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Golang\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"PHP\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Golang\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"PHP\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"Fortran\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\ncounter<span class=\"token punctuation\">:</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> defaultdict<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> lang <span class=\"token keyword\">in</span> langs<span class=\"token punctuation\">:</span>\n    counter<span class=\"token punctuation\">[</span>lang<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n\nmost_common <span class=\"token operator\">=</span> <span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> key<span class=\"token operator\">=</span><span class=\"token keyword\">lambda</span> item<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> reverse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>most_common<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># [('Python', 2), ('Golang', 2), ('PHP', 2)]</span></code></pre></div>\n<p>As we can see, the dict-based implementation has much more cognitive burden and it's harder and longer to realize that we were just looking for the three most popular languages.</p>\n<h3 id=\"looping\" style=\"position:relative;\"><a href=\"#looping\" aria-label=\"looping permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Looping</h3>\n<p>Data structures are not the only way to express your intention in code. Loops are good examples of another abstraction that is commonly used and sometimes misused.</p>\n<h4 id=\"for-and-while-loops\" style=\"position:relative;\"><a href=\"#for-and-while-loops\" aria-label=\"for and while loops permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>For and While loops</h4>\n<p>The for loop is the most frequently used loop in Python. It helps to iterate through the collection or its range and perform some actions on each item.</p>\n<p>The while loop is used less frequently and it's aimed to iterate until some condition holds true and we usually don't know the exact number of iterations to take.</p>\n<p>Consequently, we can explain why using the while loop for iterating through a collection bloats our cognitive burden:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">\n<span class=\"token comment\"># bad code below, don't copy-paste it</span>\n\npets<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"dog\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cat\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"parrot\"</span><span class=\"token punctuation\">]</span>\ni<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span>  <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token keyword\">while</span> i <span class=\"token operator\">&lt;</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>pets<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>pets<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    i <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></code></pre></div>\n<p>In such cases, we need to pay attention to the condition and analyze how it changes with every iteration. This is a lot to think about when we just want to check every item in collections. The \"for\" loop hides this complexity and focuses us on the item processing part:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pets<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"dog\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cat\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"parrot\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> pet <span class=\"token keyword\">in</span> pets<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>pet<span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"comprehensions\" style=\"position:relative;\"><a href=\"#comprehensions\" aria-label=\"comprehensions permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Comprehensions</h4>\n<p>Often we need to keep data from collection <strong>unmodified</strong>, but just to change its output format. For example, we may have a plain list of JSON strings and we need to convert them to the list of dicts. In such cases, there are no side effects to the data itself, we just convert <strong>one collection into another</strong>. Python has brilliant constructions called list/dict/set comprehensions that are designed to be helpful here:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">raw_orders<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"{...}\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"{...}\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"{...}\"</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># each item is a JSON string that contains order information</span>\n\norders<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">[</span>Order<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>Order<span class=\"token punctuation\">(</span>raw_order_info<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> raw_order_info <span class=\"token keyword\">in</span> raw_orders<span class=\"token punctuation\">]</span></code></pre></div>\n<p>However, if there is a need for side effects during enumeration, it's recommended to fallback into good old loops.</p>\n<h3 id=\"exceptions-and-assertions\" style=\"position:relative;\"><a href=\"#exceptions-and-assertions\" aria-label=\"exceptions and assertions permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Exceptions and Assertions</h3>\n<p>Exceptions have a special place in Python. They are used to control code flows and to implement <a href=\"https://devblogs.microsoft.com/python/idiomatic-python-eafp-versus-lbyl/\" target=\"_blank\" rel=\"noopener noreferrer\">the EAFP pattern</a> (which stands for \"it‚Äôs easier to ask for forgiveness than permission\"). Python code developers spent some time optimizing performance of exception raising. In fact, they are now even using exceptions internally to handle things like <a href=\"https://peps.python.org/pep-0234/\" target=\"_blank\" rel=\"noopener noreferrer\">ending the iteration process by raising the StopIteration exception</a>.</p>\n<p>In our case, we can use exceptions in the following way:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> os <span class=\"token keyword\">import</span> PathLike\n\n<span class=\"token keyword\">import</span> yaml\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">InvalidConfigFormat</span><span class=\"token punctuation\">(</span>RuntimeError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># a custom exception</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Occurs when config file is not in the valid YAML format\n    \"\"\"</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_config</span><span class=\"token punctuation\">(</span>config_path<span class=\"token punctuation\">:</span> PathLike<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Loads the application configurations\n    \"\"\"</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> yaml<span class=\"token punctuation\">.</span>safe_load<span class=\"token punctuation\">(</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>config_path<span class=\"token punctuation\">,</span> <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> FileNotFoundError<span class=\"token punctuation\">:</span>\n        yaml<span class=\"token punctuation\">.</span>safe_dump<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>config_path<span class=\"token punctuation\">,</span> <span class=\"token string\">\"w\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">except</span> yaml<span class=\"token punctuation\">.</span>YAMLError <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">raise</span> InvalidConfigFormat<span class=\"token punctuation\">(</span>\n            <span class=\"token string-interpolation\"><span class=\"token string\">f\"Oh no, </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>config_path<span class=\"token conversion-option punctuation\">!r</span><span class=\"token punctuation\">}</span></span><span class=\"token string\"> doesn't seem to be a valid config file: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>e<span class=\"token conversion-option punctuation\">!r</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span>\n            <span class=\"token string\">\"Please, double check the file content\"</span>\n        <span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> e\n</code></pre></div>\n<p>Pay attention to how exceptions helped us to separate different scenarios in the get_config() function:</p>\n<ul>\n<li>the main \"success path\" case (between try and the first except statements)</li>\n<li>the no config file case (the content of the FileNotFoundError handler)</li>\n<li>the wrong config format case (the YAMLError handler)</li>\n</ul>\n<p>That separation improves the readability of the code compared to retrieving some flags or status codes like in the Linux system programing.</p>\n<p>With heavy use of exceptions, it becomes important to create a custom one, so it's going to be easier to perform the granular error handling. The snippet above introduces a new InvalidConfigFormat exception that they can be caught by consumer code. It's also a common practice to reraise a custom exception that makes more sense for the concrete application and then connects it with the initial exception via the <a href=\"https://docs.python.org/3/tutorial/errors.html#exception-chaining\" target=\"_blank\" rel=\"noopener noreferrer\">raise from</a> expression.</p>\n<p>Another useful case to know is how to ignore some specific exceptions if you are okay that they can happen:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> contextlib <span class=\"token keyword\">import</span> suppress\n\n\n<span class=\"token keyword\">with</span> suppress<span class=\"token punctuation\">(</span>ImportError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># I'm fine with no pandas installed in the project</span>\n    <span class=\"token keyword\">import</span> pandas</code></pre></div>\n<p>It's also useful to know about <code class=\"language-text\">assert</code> and <code class=\"language-text\">AssertionError</code>s. Usually, you will see assert expression is being used in tests, but that's not the only use. <code class=\"language-text\">assert</code>'s may be also used to <a href=\"https://realpython.com/python-assert-statement/\" target=\"_blank\" rel=\"noopener noreferrer\">dump some assumptions about the code that has to be true</a> in the 95% of the cases but which may still be violated accidentally during the refactoring or other code adjustments. So having such sanity checks could reduce the ripple effect of the error and help to find the cause quicker:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">get_discount</span><span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">assert</span> price <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"Price cannot be less than zero (</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>price<span class=\"token punctuation\">}</span></span><span class=\"token string\"> was given)\"</span></span>\n\n    <span class=\"token keyword\">return</span> price <span class=\"token operator\">*</span> <span class=\"token number\">0.005</span></code></pre></div>\n<p>In order to let <code class=\"language-text\">assert</code>'s work, you should not catch any <code class=\"language-text\">AssertionError</code> and let them fail as soon as possible in your development flow.</p>\n<h3 id=\"decorators\" style=\"position:relative;\"><a href=\"#decorators\" aria-label=\"decorators permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Decorators</h3>\n<p>Most likely you have heard about the decorator design pattern that is a part of <a href=\"https://en.wikipedia.org/wiki/Design_Patterns\" target=\"_blank\" rel=\"noopener noreferrer\">the GoF's design patterns</a>. The pattern is all about wrapping a function or a method into a code that will be running before or after the original one, or even replacing the original code under needed conditions. It's a transparent way to extend the code without modifying it.</p>\n<p>Python took this idea to the next level. It has <a href=\"https://peps.python.org/pep-0318/\" target=\"_blank\" rel=\"noopener noreferrer\">a dedicated syntax to register decorators</a> in a declarative way:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> functools\n<span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> Callable\n<span class=\"token keyword\">from</span> typing <span class=\"token keyword\">import</span> TypeVar<span class=\"token punctuation\">,</span> cast<span class=\"token punctuation\">,</span> Any\n\n\ntasks<span class=\"token punctuation\">:</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> Callable<span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> Any<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nT <span class=\"token operator\">=</span> TypeVar<span class=\"token punctuation\">(</span><span class=\"token string\">\"T\"</span><span class=\"token punctuation\">,</span> bound<span class=\"token operator\">=</span>Callable<span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> Any<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">register_task</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">:</span> T<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> T<span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Registers a task function into the task registry\n    \"\"\"</span>\n    tasks<span class=\"token punctuation\">[</span>func<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> func\n\n    <span class=\"token decorator annotation punctuation\">@functools<span class=\"token punctuation\">.</span>wraps</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># BTW this is a built-in decorator</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">wrapper</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># modify behavior of the original function</span>\n        <span class=\"token keyword\">return</span> func<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">,</span> decorated<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> cast<span class=\"token punctuation\">(</span>T<span class=\"token punctuation\">,</span> wrapper<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Usage of the decorator</span>\n\n<span class=\"token decorator annotation punctuation\">@register_task</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">sample_task</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sample task has been executed\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>To give you a better idea of how decorators are used in the wild, let's go through just a few very common problems that can be solved with decorators:</p>\n<ul>\n<li>register a new item in some registry. Let's say, you want to give an elegant way to extend a list webapp routes that you don't know beforehand. The example above illustrates the \"register\" pattern you can use to achieve that. Many Python web frameworks use decorators for that purpose like <a href=\"https://flask.palletsprojects.com/en/1.0.x/tutorial/layout/\" target=\"_blank\" rel=\"noopener noreferrer\">Flask</a>, <a href=\"https://bottlepy.org/docs/dev/\" target=\"_blank\" rel=\"noopener noreferrer\">Bottle</a>, <a href=\"https://fastapi.tiangolo.com/tutorial/first-steps/\" target=\"_blank\" rel=\"noopener noreferrer\">FastAPI</a> and others. Another example is <a href=\"https://python-socketio.readthedocs.io/en/latest/intro.html#client-examples\" target=\"_blank\" rel=\"noopener noreferrer\">Python's Socket.io client</a> which uses decorators to register handlers to some events. Yet another example is <a href=\"https://docs.celeryq.dev/en/stable/getting-started/first-steps-with-celery.html#application\" target=\"_blank\" rel=\"noopener noreferrer\">Celery</a> which uses decorators to register their tasks.</li>\n<li>do caching of some function results without modifying the function code. The built-in <code class=\"language-text\">functools</code> package contains <code class=\"language-text\">lru_cache</code> decorator that can be used to cache the output of any function.</li>\n<li>add some markers to the function for the following processing. Tensorflow, for example, has a <a href=\"https://github.com/tensorflow/tensorflow/blob/299cb76dd913e7bb0349a13c1165459dac4ea81e/tensorflow/tools/docs/doc_controls.py#L46\" target=\"_blank\" rel=\"noopener noreferrer\"><code class=\"language-text\">do_not_generate_docs()</code></a> decorator that marks functions that should not be exposed in its documentation.</li>\n<li>mark route as one that requires authorization. <a href=\"https://docs.djangoproject.com/en/4.0/ref/contrib/admin/#the-staff-member-required-decorator\" target=\"_blank\" rel=\"noopener noreferrer\">Django</a> and many Flask extensions use decorators to mark webapp routes as ones that require authorization.</li>\n<li>parametrize a test function. <a href=\"https://docs.pytest.org/en/6.2.x/example/parametrize.html\" target=\"_blank\" rel=\"noopener noreferrer\">Pytest</a> uses decorators heavily and one of the use cases is to pass a few test cases to the same test function.</li>\n<li>MANY more...</li>\n</ul>\n<h3 id=\"context-managers\" style=\"position:relative;\"><a href=\"#context-managers\" aria-label=\"context managers permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Context Managers</h3>\n<p>Finally, let's review another case where Python has a concise solution.</p>\n<p>You have probably noticed that quite a few components in programming require us to do three steps:</p>\n<ul>\n<li>initialization (beginning of a context)</li>\n<li>the actual business logic</li>\n<li>clean up (end of the context)</li>\n</ul>\n<p>You can think about working with database, acquiring locks, working with files, mocking something in tests and so on.\nThose initialization and cleanup stages create some kind of context where you can perform some business logic.</p>\n<p>This pattern is so common that Python has got separate support on the language level to write those things in a readable way. It's called context manager. Here is an example:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> contextlib <span class=\"token keyword\">import</span> contextmanager\n<span class=\"token keyword\">import</span> time\n\n\n<span class=\"token decorator annotation punctuation\">@contextmanager</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> Generator<span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Timer Context Manager\n    \"\"\"</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># initialization</span>\n        start <span class=\"token operator\">=</span> time<span class=\"token punctuation\">.</span>perf_counter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># business logic part is decoupled from the context management</span>\n        <span class=\"token keyword\">yield</span>\n    <span class=\"token keyword\">finally</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># clean up</span>\n        end <span class=\"token operator\">=</span> time<span class=\"token punctuation\">.</span>perf_counter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>end <span class=\"token operator\">-</span> start<span class=\"token punctuation\">:</span><span class=\"token format-spec\">0.4f</span><span class=\"token punctuation\">}</span></span><span class=\"token string\"> seconds\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">with</span> timer<span class=\"token punctuation\">(</span><span class=\"token string\">\"factorial\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># business logic</span>\n    factorial<span class=\"token punctuation\">(</span><span class=\"token number\">1e3</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Context managers help to decouple business logic from the context creation. That makes the usage of contexts more cleaner without the unnecessary burden that initialization/cleanup code could bring to the code.</p>\n<p>Here are just a few examples of using context managers in the wild:</p>\n<ul>\n<li>work with files. Python vanilla <a href=\"https://docs.python.org/3/library/functions.html#open\" target=\"_blank\" rel=\"noopener noreferrer\"><code class=\"language-text\">open()</code></a> function is implemented as a context manager.</li>\n<li>create a request context. <a href=\"https://www.python-httpx.org/async/\" target=\"_blank\" rel=\"noopener noreferrer\">HTTPX</a> uses an async context manager to create a request session.</li>\n<li>mock objects for testing purposes. <a href=\"https://docs.python.org/3/library/unittest.mock.html\" target=\"_blank\" rel=\"noopener noreferrer\">Python's mock object library</a> uses a context manager to create a context where some object is going to be mocked for the sake of unit testing.</li>\n<li>control over backpropagation. <a href=\"https://keras.io/getting_started/intro_to_keras_for_researchers/\" target=\"_blank\" rel=\"noopener noreferrer\">Tensorflow and Keras</a> use a context manager to give fine-grained control over DNN backprogation gradients.</li>\n<li>define event emitting scope. I have used context managers to elaborate the scope to which you want to emit Socket.io events in <a href=\"https://github.com/seifrajhi/socket.io-redis-emitter\" target=\"_blank\" rel=\"noopener noreferrer\">the socket.io-redis-emitter project</a></li>\n<li>etc.</li>\n</ul>\n<h2 id=\"comments\" style=\"position:relative;\"><a href=\"#comments\" aria-label=\"comments permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Comments</h2>\n<p>Knowing the full context of the solution will help other contributors to evolve it. Some solutions are suboptimal because the code owner did not know a better way to implement them. So someone can understand the context and refactor the code.</p>\n<p>More frequently there are external requirements and conditions that prompt us to write suboptimal code. We need to specify them in order to let everyone know in the team. There is probably no better place for that than a comment near the code it belongs to.</p>\n<p>In other situations, we may place a summary of the solutions you considered during the research. This may save a lot of time for other people and open a door for new solutions in the future when someone comes up with even smarter ideas.</p>\n<p>In all these cases, <strong>comments are a great tool to convey your intention</strong>. They serve best when you specify:</p>\n<ul>\n<li><strong>why</strong> do you need this code</li>\n<li>and <strong>what</strong> it's intended to do</li>\n</ul>\n<p>Make sure you <strong>don't describe self-obvious details</strong> that may be easily figured out by reading the code.</p>\n<p>\n\t\t<video\n\t\t\tsrc=https://media.giphy.com/media/R2Rn1PLeMUsyTwj7wa/giphy.mp4\n\t\t\twidth=\"100%\"\n\t\t\theight=\"auto\"\n\t\t\tpreload=\"auto\"\n\t\t\tmuted=\"true\"\n\t\t\ttitle=\"Obvious comments looks like this\"\n\t\t\tautoplay\n\t\t\tplaysinline\n\t\t\tcontrols\n\t\t\tloop\n\t\t></video>\n\t</p>\n<p>The following example should be a good illustration:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> requests\n\n<span class=\"token keyword\">from</span> somelib <span class=\"token keyword\">import</span> client\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_books</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> List<span class=\"token punctuation\">[</span>Book<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Retrieve a list of available books\n    \"\"\"</span>\n    <span class=\"token keyword\">return</span> client<span class=\"token punctuation\">.</span>get_books<span class=\"token punctuation\">(</span>page<span class=\"token operator\">=</span>page<span class=\"token punctuation\">,</span> count<span class=\"token operator\">=</span>count<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">search_books</span><span class=\"token punctuation\">(</span>keywords<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> List<span class=\"token punctuation\">[</span>Book<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Search books by keywords\n    \"\"\"</span>\n    response <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>\n        <span class=\"token string-interpolation\"><span class=\"token string\">f\"/api/v1/books/search?p=</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>page<span class=\"token punctuation\">}</span></span><span class=\"token string\">&amp;c=</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">,</span>\n        json<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"keywords\"</span><span class=\"token punctuation\">:</span> keywords<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># process edge cases</span>\n    <span class=\"token comment\"># ...</span>\n\n    <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>It's not clear why <code class=\"language-text\">search_books()</code> method doesn't use <code class=\"language-text\">somelib.client</code> for the search request and it falls back to low level <code class=\"language-text\">requests</code> calls. This question will be raised many times. In order to make this piece of code better, we should have left a comment explaining the astonishing part:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">search_books</span><span class=\"token punctuation\">(</span>keywords<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> List<span class=\"token punctuation\">[</span>Book<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Search books by keywords\n\n    somelib.client doesn't support search APIs at this point. We had to use requests to access them.\n    \"\"\"</span>\n\n    <span class=\"token comment\"># ...</span></code></pre></div>\n<p>This little comment answers all our questions and it also provides additional clues on how to refactor it (e.g. looking at release notes of the somelib to find the search method implemented).</p>\n<p>Code comments are far from being the only tool to convey your intention, but it's one of the most obvious one. The code itself should be expressive and <strong>language constructions</strong> are your best friends on this way.</p>\n<h2 id=\"dont-make-me-read-twice\" style=\"position:relative;\"><a href=\"#dont-make-me-read-twice\" aria-label=\"dont make me read twice permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Don't Make Me Read Twice</h2>\n<p>Finally, how can we identify spots in our codebase that don't communicate their intend well?</p>\n<p>One of the <a href=\"https://en.wikipedia.org/wiki/Zen_of_Python\" target=\"_blank\" rel=\"noopener noreferrer\">Python's Zens</a> is \"there should be one and only one way to do things\". The obvious and expected approaches should be preferably used to solve problems. The approaches don't surprise you when you read the code. That would reduce the mental burden and significantly improve codebase maintenance. All code pieces that can not be described that way should be on the list of candidates to be refactored or revisited.</p>\n<p>This rule from the Python Zen is related to another famous rule which is <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_astonishment\" target=\"_blank\" rel=\"noopener noreferrer\">the rule of the least surprise</a>. Your code should not astonish its readers and it should make them read it twice to understand.</p>\n<p>In the real life, it may be harder to achieve high brevity of the code. After all, it's all about trade-offs. However, you should always remember about your best friends on this way: language idioms and comments, because using them does take you closer to that goal.</p>\n<h2 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>References</h2>\n<ul>\n<li><a href=\"https://www.oreilly.com/library/view/robust-python/9781098100650/\">Robust Python by Patrick Viafore</a></li>\n</ul>","timeToRead":14,"rawMarkdownBody":"\nI had been a technical lead for more than 3 years. One of my responsibilities was to make sure that my teams produced quality eCommerce solutions. During code reviews, I frequently saw one particular problem which did a great job at **killing software maintainability**. This problem is better known by the people management area, but, believe me, it's vitally important for software development as well. The problem is called **\"poorly communicated intent\"**.\n\n## Code Lifecycle\n\nWhen you write code, there is a problem you want to solve. So you do research and brainstorm possible approaches. You evaluate them and stick to one solution that you finally implement.\n\nThis is actually where the hardest part starts.\n\nYour solution becomes **a part of a bigger codebase**. A whole team of several people may maintain it. They will read your code, analyze it and **build on top of it**. They may also **evolve that piece of code** to keep up with **ever-changing requirements**.\n\nAt the same time, it's **unlikely** you are around all the time to ask you about your code. You may switch the team or change the company you work at. Perhaps, new members may join your team and they have not heard your cool story on why you had to solve that problem the way you had done.\n\n`video: title: \"Be ready to support your code\": https://media.giphy.com/media/F7yLXA5fJ5sLC/giphy.mp4`\n\nBeing always around is a synchronous communication and it **doesn't scale** well.\n\nIn the worse case, when the code owner is not available, you can still review all places that consume the code and make sure your changes will not break them. This rather tedious process significantly slows down the progress of the application development and frequently slips your deadlines.\n\nWhen you adjust code that you don't understand completely, there is a constant fear that there is a subtle use case which you may miss and which eventually will break. Those situations turn codebase maintenance and evolution into a desperately painful task.\n\nPoorly written code is extremely contingent and over time there will be even more code like that. One day technical debt will make you hate every Monday when you have to return to work.\n\nThis is not a way to go.\n\n## Intention in Code\n\nThe root of the problem is that people don't always realize that they actually **communicate their intent when they do coding**. Think for a moment. It's called \"programing language\", hence, it must have something **in common with natural languages**. Just like natural languages are useful for communicating your ideas, programing languages inherit pretty much the same idea, but **language expressions** are slightly different. If so, then each expression exists to convey some information, meaning and intention.\n\nProblems start when you try to **misuse** those expressions. This leads to implementations that are hard to read, understand, maintain and change.\n\n## Complexity\n\nThis is how we can get **a complex solution**, but why it's actually complex?\n\nPrimarily, there are two sources of complexity:\n\n- **domain complexity** - implementation is complex because the problem it solves is complex (e.g. plane's runway scheduling)\n- **accidental complexity** - implementation could be simpler but we have implemented it in an unmaintainable way\n\nDomain complexity is something we can't do much about. We just need to deal with it and there are a few approaches like [domain-driven design](https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215).\n\nAt the same time, accidental complexity is something we **can and should avoid**. Let's take a look at the following real-world example:\n\n```python\n\n# bad code below, don't copy-paste it\n\ndef remove_duplicates(clean_tokens: list):\n    clean_dict = {}\n\n    for tok in clean_tokens:\n        if tok[0].isalnum():\n            if tok[0] in clean_dict:\n                clean_dict[tok[0]] += tok[2]\n            else:\n                clean_dict[tok[0]] = tok[2]\n\n    result = list(map(list, clean_dict.items()))\n\n    return result\n```\n\nTry to read this function a few times. What are your impressions?\n\n- the function is called `remove_duplicates()` but it seems to omit only non-alpha-numerical values, not duplicated values\n- what values are inside `tok[0]` and `tok[2]` items? How many items are there in each `tok` array?\n- what's the meaning of `tok[2]` sum for each `tok[0]`?\n\nI can say without doubts that this piece of code is complex and it's hard to understand. However, this piece is not about launching a SpaceX shuttle (hopefully). It does something very simple, but what exactly it does was highly obscured by a poor choice of language expressions. This is what **accidental complexity** really means.\n\n## Communication Tools\n\nI hope that at this point you are already eager to know how to improve your \"communicate through code\" skills.\n\nThere are two main ways to communicate your intent better:\n\n- via programing language expressions and idioms\n- via comments\n\nEach of them deserves a detailed view, so let's dive into it.\n\n## Language Expressions\n\n### Python vs PHP\n\nSurprisingly, let's talk about PHP for a second.\n\nI started delving into Python after I had spent quite a few years dealing with PHP.\nAfter looking at Python, my first question was: \"Why does Python have so many data structures?\". There are lists, tuples, sets, frozen sets, dicts and this are just a few to name.\n\nIn the PHP world, there are arrays and associative arrays (counterparts of Python's lists and dicts). That's it. Interestingly, there are PHP's [SPL](https://www.php.net/manual/en/book.spl.php) and [Data Structures](https://www.php.net/manual/en/book.ds.php), but, to be honest, I have hardly ever seen them in use in the wild.\n\nSo I was really curious. The understanding has come to me later.\n\nIt's all about communication of your intent. Python provides many more expressions, built-in functions and approaches that should be used in specific cases to **offload meaning** that each of them should deliver. Conversely, in PHP people often get arrays **overloaded** in terms of the meaning arrays should convey which makes code harder to grasp.\n\nLet's review a few examples.\n\n### Types and Collections\n\nPython has many data types and a good part of them are covered by syntax sugar to make them easier to use. Remaining data types can be found in the `collections` package.\n\n#### Mutable and Unmutable\n\n**Lists** and **sets** are among the basic data structures that are built-in into Python's syntax.\n\nLists are **mutable** containers for items. Their items should not be necessarily the same type. Lists may contain duplicates. It's rare to see someone accesses items from the middle of the list. Sets are **mutable** containers with no **duplicates** or **a specific order**.\n\n```python\nlangs: list[str] = [\n    \"Python\",\n    \"Golang\",\n    \"PHP\",\n    \"R\",\n    \"Julia\",\n    \"JavaScript\",\n    \"Python\"\n]\n\nfor lang in langs:\n    print(lang)\n\n# Outputs:\n# Python\n# Golang\n# PHP\n# R\n# ...\n# Python\n```\n\nLists and sets have their **immutable** counterparts which are **tuples** and **frozen sets**. Tuples and frozen sets cannot be modified after creation. They can be used to say that it doesn't make sense to change them because they represent constants or some well-defined structure where each item has a special meaning like a database row.\n\nPython goes even further and lets you name each item in the tuples via the `NamedTuple` class:\n\n```python\nfrom typing import NamedTuple\n\n\nclass Student(NamedTuple):\n    name: str\n    score: float\n\n\nstudent = Student(\"Roma\", 10.4)\n\nprint(student.score)\n# 10.4\n\n# equivalent to:\n# print(student[1])\n# but a way more readable\n```\n\n#### Dicts\n\nDicts are the members of the royal family in Python. The whole Python language is based on them. Essentially, **dicts** are **mutable** mappings of **unique keys** to corresponding values. Dicts are typically iterated over or accesses by keys:\n\n```python\nlang_mascots: dict[str, str] = {\n    \"python\": \"üêç\",\n    \"rust\": \"ü¶Ä\",\n    \"golang\": \"üêπ\",\n}\n\nprint(lang_mascots[\"python\"])\n# üêç\n\nfor lang, mascot in lang_mascots.items():\n    print(f\"{lang} -> {mascot}\")\n# python -> üêç\n# rust -> ü¶Ä\n# golang -> üêπ\n```\n\nEven though dicts have [become ordered recently (remembers order of adding keys)](https://stackoverflow.com/questions/39980323/are-dictionaries-ordered-in-python-3-6), you may still want to consider them unordered and use a whole another `OrderedDict` class as a means of emphasizing that you need key ordering.\n\nYou can be even more specific if your values are the same type. The `defaultdict` class will help you to automatically init all non-existing keys:\n\n```python\nfrom collections import defaultdict\n\n\nPokemonList = list[str]\n\npokemons_by_owner: dict[str, PokemonList] = {}\npokemons_by_owner_safe: dict[str, PokemonList] = defaultdict(list)  # list is a factory of empty values\n\npokemons_by_owner[\"Ash\"].append(\"Pikachu\")\n# KeyError :(\n\npokemons_by_owner_safe.append(\"Pikachu\")\n# all good, one more pokemon has been added\n```\n\n#### Counters\n\nOften we need to count how many times each item occurs in the list or dict or to sum up items' weights. I'm sure we could do that via dicts, but Python has a better way to achieve that via the Counter class:\n\n```python\nfrom collections import Counter\n\n\nlangs: list[str] = [\n    \"Python\",\n    \"Golang\",\n    \"PHP\",\n    \"Python\",\n    \"Golang\",\n    \"PHP\",\n    \"Python\",\n    \"Fortran\",\n]\n\nlang_popularity: Counter = Counter(langs)\n\nprint(lang_popularity.most_common(3))\n# [('Python', 2), ('Golang', 2), ('PHP', 2)]\n```\n\nNow let's compare this implementation with a dict-based:\n\n```python\nfrom collections import defaultdict\nfrom typing import Dict, List\n\n\nlangs: list[str] = [\n    \"Python\",\n    \"Golang\",\n    \"PHP\",\n    \"Python\",\n    \"Golang\",\n    \"PHP\",\n    \"Python\",\n    \"Fortran\",\n]\n\ncounter: dict[str, int] = defaultdict(int)\n\nfor lang in langs:\n    counter[lang] += 1\n\nmost_common = sorted(counter.items(), key=lambda item: item[1], reverse=True)\n\nprint(most_common[:3])\n# [('Python', 2), ('Golang', 2), ('PHP', 2)]\n```\n\nAs we can see, the dict-based implementation has much more cognitive burden and it's harder and longer to realize that we were just looking for the three most popular languages.\n\n### Looping\n\nData structures are not the only way to express your intention in code. Loops are good examples of another abstraction that is commonly used and sometimes misused.\n\n#### For and While loops\n\nThe for loop is the most frequently used loop in Python. It helps to iterate through the collection or its range and perform some actions on each item.\n\nThe while loop is used less frequently and it's aimed to iterate until some condition holds true and we usually don't know the exact number of iterations to take.\n\nConsequently, we can explain why using the while loop for iterating through a collection bloats our cognitive burden:\n\n```python\n\n# bad code below, don't copy-paste it\n\npets: list[str] = [\"dog\", \"cat\", \"parrot\"]\ni: int  = 0\n\nwhile i < len(pets):\n    print(pets[i])\n    i += 1\n```\n\nIn such cases, we need to pay attention to the condition and analyze how it changes with every iteration. This is a lot to think about when we just want to check every item in collections. The \"for\" loop hides this complexity and focuses us on the item processing part:\n\n```python\npets: list[str] = [\"dog\", \"cat\", \"parrot\"]\n\nfor pet in pets:\n    print(pet)\n```\n\n#### Comprehensions\n\nOften we need to keep data from collection **unmodified**, but just to change its output format. For example, we may have a plain list of JSON strings and we need to convert them to the list of dicts. In such cases, there are no side effects to the data itself, we just convert **one collection into another**. Python has brilliant constructions called list/dict/set comprehensions that are designed to be helpful here:\n\n```python\nraw_orders: list[str] = [\"{...}\", \"{...}\", \"{...}\"]  # each item is a JSON string that contains order information\n\norders: list[Order] = [Order(raw_order_info) for raw_order_info in raw_orders]\n```\n\nHowever, if there is a need for side effects during enumeration, it's recommended to fallback into good old loops.\n\n### Exceptions and Assertions\n\nExceptions have a special place in Python. They are used to control code flows and to implement [the EAFP pattern](https://devblogs.microsoft.com/python/idiomatic-python-eafp-versus-lbyl/) (which stands for \"it‚Äôs easier to ask for forgiveness than permission\"). Python code developers spent some time optimizing performance of exception raising. In fact, they are now even using exceptions internally to handle things like [ending the iteration process by raising the StopIteration exception](https://peps.python.org/pep-0234/).\n\nIn our case, we can use exceptions in the following way:\n\n```python\nfrom os import PathLike\n\nimport yaml\n\n\nclass InvalidConfigFormat(RuntimeError):  # a custom exception\n    \"\"\"\n    Occurs when config file is not in the valid YAML format\n    \"\"\"\n\n\ndef get_config(config_path: PathLike) -> dict[str, str]:\n    \"\"\"\n    Loads the application configurations\n    \"\"\"\n    try:\n        return yaml.safe_load(open(config_path, \"r\"))\n    except FileNotFoundError:\n        yaml.safe_dump({}, open(config_path, \"w\"))\n        return {}\n    except yaml.YAMLError as e:\n        raise InvalidConfigFormat(\n            f\"Oh no, {config_path!r} doesn't seem to be a valid config file: {e!r}\"\n            \"Please, double check the file content\"\n        ) from e\n\n```\n\nPay attention to how exceptions helped us to separate different scenarios in the get_config() function:\n\n- the main \"success path\" case (between try and the first except statements)\n- the no config file case (the content of the FileNotFoundError handler)\n- the wrong config format case (the YAMLError handler)\n\nThat separation improves the readability of the code compared to retrieving some flags or status codes like in the Linux system programing.\n\nWith heavy use of exceptions, it becomes important to create a custom one, so it's going to be easier to perform the granular error handling. The snippet above introduces a new InvalidConfigFormat exception that they can be caught by consumer code. It's also a common practice to reraise a custom exception that makes more sense for the concrete application and then connects it with the initial exception via the [raise from](https://docs.python.org/3/tutorial/errors.html#exception-chaining) expression.\n\nAnother useful case to know is how to ignore some specific exceptions if you are okay that they can happen:\n\n```python\nfrom contextlib import suppress\n\n\nwith suppress(ImportError):\n    # I'm fine with no pandas installed in the project\n    import pandas\n```\n\nIt's also useful to know about `assert` and `AssertionError`s. Usually, you will see assert expression is being used in tests, but that's not the only use. `assert`'s may be also used to [dump some assumptions about the code that has to be true](https://realpython.com/python-assert-statement/) in the 95% of the cases but which may still be violated accidentally during the refactoring or other code adjustments. So having such sanity checks could reduce the ripple effect of the error and help to find the cause quicker:\n\n```python\ndef get_discount(price: float) -> float:\n    assert price > 0, f\"Price cannot be less than zero ({price} was given)\"\n\n    return price * 0.005\n```\n\nIn order to let `assert`'s work, you should not catch any `AssertionError` and let them fail as soon as possible in your development flow.\n\n### Decorators\n\nMost likely you have heard about the decorator design pattern that is a part of [the GoF's design patterns](https://en.wikipedia.org/wiki/Design_Patterns). The pattern is all about wrapping a function or a method into a code that will be running before or after the original one, or even replacing the original code under needed conditions. It's a transparent way to extend the code without modifying it.\n\nPython took this idea to the next level. It has [a dedicated syntax to register decorators](https://peps.python.org/pep-0318/) in a declarative way:\n\n```python\nimport functools\nfrom collections import Callable\nfrom typing import TypeVar, cast, Any\n\n\ntasks: dict[str, Callable[..., Any]] = {}\n\nT = TypeVar(\"T\", bound=Callable[..., Any])\n\ndef register_task(func: T) -> T:\n    \"\"\"\n    Registers a task function into the task registry\n    \"\"\"\n    tasks[func.__name__] = func\n\n    @functools.wraps(func)  # BTW this is a built-in decorator\n    def wrapper(*args, **kwargs):\n        # modify behavior of the original function\n        return func(*args, **kwargs, decorated=True)\n\n    return cast(T, wrapper)\n\n# Usage of the decorator\n\n@register_task\ndef sample_task():\n    print(\"Sample task has been executed\")\n```\n\nTo give you a better idea of how decorators are used in the wild, let's go through just a few very common problems that can be solved with decorators:\n\n- register a new item in some registry. Let's say, you want to give an elegant way to extend a list webapp routes that you don't know beforehand. The example above illustrates the \"register\" pattern you can use to achieve that. Many Python web frameworks use decorators for that purpose like [Flask](https://flask.palletsprojects.com/en/1.0.x/tutorial/layout/), [Bottle](https://bottlepy.org/docs/dev/), [FastAPI](https://fastapi.tiangolo.com/tutorial/first-steps/) and others. Another example is [Python's Socket.io client](https://python-socketio.readthedocs.io/en/latest/intro.html#client-examples) which uses decorators to register handlers to some events. Yet another example is [Celery](https://docs.celeryq.dev/en/stable/getting-started/first-steps-with-celery.html#application) which uses decorators to register their tasks.\n- do caching of some function results without modifying the function code. The built-in `functools` package contains `lru_cache` decorator that can be used to cache the output of any function.\n- add some markers to the function for the following processing. Tensorflow, for example, has a [`do_not_generate_docs()`](https://github.com/tensorflow/tensorflow/blob/299cb76dd913e7bb0349a13c1165459dac4ea81e/tensorflow/tools/docs/doc_controls.py#L46) decorator that marks functions that should not be exposed in its documentation.\n- mark route as one that requires authorization. [Django](https://docs.djangoproject.com/en/4.0/ref/contrib/admin/#the-staff-member-required-decorator) and many Flask extensions use decorators to mark webapp routes as ones that require authorization.\n- parametrize a test function. [Pytest](https://docs.pytest.org/en/6.2.x/example/parametrize.html) uses decorators heavily and one of the use cases is to pass a few test cases to the same test function.\n- MANY more...\n\n### Context Managers\n\nFinally, let's review another case where Python has a concise solution.\n\nYou have probably noticed that quite a few components in programming require us to do three steps:\n\n- initialization (beginning of a context)\n- the actual business logic\n- clean up (end of the context)\n\nYou can think about working with database, acquiring locks, working with files, mocking something in tests and so on.\nThose initialization and cleanup stages create some kind of context where you can perform some business logic.\n\nThis pattern is so common that Python has got separate support on the language level to write those things in a readable way. It's called context manager. Here is an example:\n\n```python\nfrom contextlib import contextmanager\nimport time\n\n\n@contextmanager\ndef timer(label: str) -> Generator[None, None, None]:\n    \"\"\"\n    Timer Context Manager\n    \"\"\"\n    try:\n        # initialization\n        start = time.perf_counter()\n        # business logic part is decoupled from the context management\n        yield\n    finally:\n        # clean up\n        end = time.perf_counter()\n        print(f\"{label}: {end - start:0.4f} seconds\")\n\nwith timer(\"factorial\"):\n    # business logic\n    factorial(1e3)\n```\n\nContext managers help to decouple business logic from the context creation. That makes the usage of contexts more cleaner without the unnecessary burden that initialization/cleanup code could bring to the code.\n\nHere are just a few examples of using context managers in the wild:\n\n- work with files. Python vanilla [`open()`](https://docs.python.org/3/library/functions.html#open) function is implemented as a context manager.\n- create a request context. [HTTPX](https://www.python-httpx.org/async/) uses an async context manager to create a request session.\n- mock objects for testing purposes. [Python's mock object library](https://docs.python.org/3/library/unittest.mock.html) uses a context manager to create a context where some object is going to be mocked for the sake of unit testing.\n- control over backpropagation. [Tensorflow and Keras](https://keras.io/getting_started/intro_to_keras_for_researchers/) use a context manager to give fine-grained control over DNN backprogation gradients.\n- define event emitting scope. I have used context managers to elaborate the scope to which you want to emit Socket.io events in [the socket.io-redis-emitter project](https://github.com/seifrajhi/socket.io-redis-emitter)\n- etc.\n\n## Comments\n\nKnowing the full context of the solution will help other contributors to evolve it. Some solutions are suboptimal because the code owner did not know a better way to implement them. So someone can understand the context and refactor the code.\n\nMore frequently there are external requirements and conditions that prompt us to write suboptimal code. We need to specify them in order to let everyone know in the team. There is probably no better place for that than a comment near the code it belongs to.\n\nIn other situations, we may place a summary of the solutions you considered during the research. This may save a lot of time for other people and open a door for new solutions in the future when someone comes up with even smarter ideas.\n\nIn all these cases, **comments are a great tool to convey your intention**. They serve best when you specify:\n\n- **why** do you need this code\n- and **what** it's intended to do\n\nMake sure you **don't describe self-obvious details** that may be easily figured out by reading the code.\n\n`video: title: \"Obvious comments looks like this\": https://media.giphy.com/media/R2Rn1PLeMUsyTwj7wa/giphy.mp4`\n\nThe following example should be a good illustration:\n\n```python\nimport requests\n\nfrom somelib import client\n\ndef get_books(page: int = 1, count: int = 10) -> List[Book]:\n    \"\"\"\n    Retrieve a list of available books\n    \"\"\"\n    return client.get_books(page=page, count=count)\n\ndef search_books(keywords: str, page: int = 1, count: int = 10) -> List[Book]:\n    \"\"\"\n    Search books by keywords\n    \"\"\"\n    response = requests.get(\n        f\"/api/v1/books/search?p={page}&c={count}\",\n        json={\n            \"keywords\": keywords,\n        }\n    )\n\n    # process edge cases\n    # ...\n\n    return response.json()\n```\n\nIt's not clear why `search_books()` method doesn't use `somelib.client` for the search request and it falls back to low level `requests` calls. This question will be raised many times. In order to make this piece of code better, we should have left a comment explaining the astonishing part:\n\n```python\ndef search_books(keywords: str, page: int = 1, count: int = 10) -> List[Book]:\n    \"\"\"\n    Search books by keywords\n\n    somelib.client doesn't support search APIs at this point. We had to use requests to access them.\n    \"\"\"\n\n    # ...\n```\n\nThis little comment answers all our questions and it also provides additional clues on how to refactor it (e.g. looking at release notes of the somelib to find the search method implemented).\n\nCode comments are far from being the only tool to convey your intention, but it's one of the most obvious one. The code itself should be expressive and **language constructions** are your best friends on this way.\n\n## Don't Make Me Read Twice\n\nFinally, how can we identify spots in our codebase that don't communicate their intend well?\n\nOne of the [Python's Zens](https://en.wikipedia.org/wiki/Zen_of_Python) is \"there should be one and only one way to do things\". The obvious and expected approaches should be preferably used to solve problems. The approaches don't surprise you when you read the code. That would reduce the mental burden and significantly improve codebase maintenance. All code pieces that can not be described that way should be on the list of candidates to be refactored or revisited.\n\nThis rule from the Python Zen is related to another famous rule which is [the rule of the least surprise](https://en.wikipedia.org/wiki/Principle_of_least_astonishment). Your code should not astonish its readers and it should make them read it twice to understand.\n\nIn the real life, it may be harder to achieve high brevity of the code. After all, it's all about trade-offs. However, you should always remember about your best friends on this way: language idioms and comments, because using them does take you closer to that goal.\n\n## References\n\n- <a href=\"https://www.oreilly.com/library/view/robust-python/9781098100650/\">Robust Python by Patrick Viafore</a>\n","wordCount":{"words":2872},"frontmatter":{"id":"62b87a6b15e35cd77d0d0df8","path":"/blog/communicate-through-code/","humanDate":"Aug 30, 2024","fullDate":"2024-08-30","title":"Communicate Through Code","keywords":["software engineering","python"],"excerpt":"Learn to communicate your ideas clearly while coding","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGgqjrFMiB//8QAGxAAAgIDAQAAAAAAAAAAAAAAAQMCBAARExL/2gAIAQEAAQUCZZhEQu9CbKxgVygVe1irvP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB8QAAEEAAcAAAAAAAAAAAAAAAABAhEhEiIxMnGRof/aAAgBAQAGPwJYtSMMLyXPQ5yOXQTO6zf4f//EABoQAQEBAQEBAQAAAAAAAAAAAAERIQAxQfD/2gAIAQEAAT8hRGHcOoeco65o1Z8fNRVyZ2mpHunl5itmz8vf/9oADAMBAAIAAwAAABArP//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAwEBPxCaj//EABYRAQEBAAAAAAAAAAAAAAAAAAARMf/aAAgBAgEBPxDFf//EAB0QAQACAgIDAAAAAAAAAAAAAAEAIRExQXGRocH/2gAIAQEAAT8QKiKWaxxr3AHwqsKaGioUBAcsLjvjPBSzz1FpYbkWDTH2VEi5NR//2Q=="},"images":{"fallback":{"src":"/static/822b5fd7f9c873bad011e7070afaa435/5267c/jantine-doornbos-HvYy5SEefC8-unsplash.jpg","srcSet":"/static/822b5fd7f9c873bad011e7070afaa435/7284f/jantine-doornbos-HvYy5SEefC8-unsplash.jpg 750w,\n/static/822b5fd7f9c873bad011e7070afaa435/29ba9/jantine-doornbos-HvYy5SEefC8-unsplash.jpg 1080w,\n/static/822b5fd7f9c873bad011e7070afaa435/c8896/jantine-doornbos-HvYy5SEefC8-unsplash.jpg 1366w,\n/static/822b5fd7f9c873bad011e7070afaa435/5267c/jantine-doornbos-HvYy5SEefC8-unsplash.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/822b5fd7f9c873bad011e7070afaa435/57584/jantine-doornbos-HvYy5SEefC8-unsplash.webp 750w,\n/static/822b5fd7f9c873bad011e7070afaa435/984df/jantine-doornbos-HvYy5SEefC8-unsplash.webp 1080w,\n/static/822b5fd7f9c873bad011e7070afaa435/4a276/jantine-doornbos-HvYy5SEefC8-unsplash.webp 1366w,\n/static/822b5fd7f9c873bad011e7070afaa435/9c00f/jantine-doornbos-HvYy5SEefC8-unsplash.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6666666666666666}}},"coverCredits":null}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/opentelemtry-sdk/","title":"Get Started with OpenTelemetry SDKs","date":"2024-09-26 13:06:00"},"excerpt":"OpenTelemetry is an observability framework and an active CNCF project that provides a vendor-neutral and tool-agnostic way to collect‚Ä¶"},"nextThought":{"frontmatter":{"path":"/blog/kubernetes-1-30-key-improvements/","title":"Kubernetes 1.30: Key Improvements You Need to¬†Know","date":"2024-04-19 20:00:00"},"excerpt":"v1.30 brings significant security enhancements and improved resource management ‚ò∏Ô∏è Introduction Kubernetes 1.30, set to be released on April‚Ä¶"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}