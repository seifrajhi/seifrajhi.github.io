{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/cluster-dev-cloud-management/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Manage Cloud Infrastructures Declaratively â˜ï¸</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ğŸ“™ Introduction</h2>\n<p>Have you ever wished for a single tool to manage all your cloud infrastructure needs?</p>\n<p><a href=\"https://cluster.dev/\" target=\"_blank\" rel=\"noopener noreferrer\">Cluster.dev</a> is one of these tools that will change the way you handle cloud-native infrastructures.</p>\n<p>In this blog post, we will explore the incredible features of Cluster.dev and how it simplifies the deployment, testing, and distribution of cloud-native components.</p>\n<p>Get ready to discover Cluster.dev and how it can make your infrastructure management a breeze.</p>\n<h2 id=\"-when-do-i-need-clusterdev\" style=\"position:relative;\"><a href=\"#-when-do-i-need-clusterdev\" aria-label=\" when do i need clusterdev permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>â“ When do I need Cluster.dev</h2>\n<p>If you have a common infrastructure pattern that contains multiple components stuck together, like a bunch of TF-modules or a set of K8s addons, you need to re-use this pattern inside your projects.\nIf you develop an infrastructure platform that you ship to other teams, and they need to launch new infrastructures from your template.\nIf you build a complex infrastructure that contains different technologies, and you need to perform integration testing to confirm the components' interoperability. After which you can promote the changes to the next environments.\nIf you are a software vendor and you need to deliver infrastructure deployment along with your software.</p>\n<h3 id=\"for-whom\" style=\"position:relative;\"><a href=\"#for-whom\" aria-label=\"for whom permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>For whom</h3>\n<p>The target audience is primarily infrastructure teams with a certain level of expertise, to whom Cluster.dev could simplify their daily routine: creating clusters, deploying services to the clusters, launching environments, sharing experience with development teams, etc.</p>\n<p>ğŸ’  <strong>Base concept diagrams</strong></p>\n<p>Stack templates are composed of <a href=\"https://docs.cluster.dev/units-overview/\" target=\"_blank\" rel=\"noopener noreferrer\">units</a> - Lego-like building blocks responsible for passing variables to a particular technology.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABoUlEQVR42pVTTUsCURR9mubX2GimtWgVQthC3LnJqUUL/4A7oZ2LWrZrM7v+g6s+lv4AIQgHIqGFq1CCIMFPyjIUTN+MzNzefY0gBTldOMxlzrmH8+68IeRnGUUXAUUgcO0jUPD84kFxmJzAtQvLuF8hAA5sHwH8b5PJPuJDG+8NppODNqXbyO1AYZlrFxbc+aPpNBd2Op1dlaqAGH+Op8CKTuglcnmoOFFryTCezfqwrdebEqWqUa3V9FJJUXXdAE2bXjDKvhWPR8h70ULC54K4Go1u4lC325M0TYPBcAj9fp8n1HX9CmWHsuy2nDBXyTuxpZTGei+9cqfVKnfb7dtWo/EwGo1OkZNxz1YNCVSXCd+R4mChbDMwE/v3V2ZmxpPLoiEbeGVXAipefj3OjkNEzq2Rk2yEnMsBAk0Pf881isOcssmybF9kjYIlhgDDugkvDpvcv8omCEJYFMUg63GfEQaRwc2wwRCaN00kEmFJkmKLTHHIbyYKzqXDq8KvVSaTwROQZDJ5lEqlbv5MaCYS5/rZbyjM9Tbz6WOnwdWQL7eLywXWHDQFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"units\" title=\"\" src=\"/static/fcfca4177c21523518ad7da7dcee2417/c5bb3/units.png\" srcset=\"/static/fcfca4177c21523518ad7da7dcee2417/04472/units.png 170w,\n/static/fcfca4177c21523518ad7da7dcee2417/9f933/units.png 340w,\n/static/fcfca4177c21523518ad7da7dcee2417/c5bb3/units.png 680w,\n/static/fcfca4177c21523518ad7da7dcee2417/b12f7/units.png 1020w,\n/static/fcfca4177c21523518ad7da7dcee2417/b5a09/units.png 1360w,\n/static/fcfca4177c21523518ad7da7dcee2417/2cefc/units.png 1400w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Templates define infrastructure patterns or even the whole platform.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJElEQVR42s1TP2gTURj/LjHxzkQvuUwFEcRFKmQpJR0MoUTMoBAQT8c4BetWURyPDnYygwouQRwc1BNBUAxp0h4hJTgEKjUoNSbt3buXo9GmL/VQQfD5XmKwg046+MHjvu/7/d59fx/An0WA/0toww+0JEOvJI/ThjLZL0XGSU2ZpG8i3J6ilnKIVMNTTOc258H3lweA1mWg6yJQVhGlwq/SqBFioI85PaCBh3m8oKreITYgjlrgG+CMpzZ0f4L/jAXexRtKmEcC8GuZjIgRnkMmukEImXF33Ntu381gG9/f6m6da79vz5umOZfNZvfxewlq7IHcrCRsL9wSdpbuAvQXHwAp5UHPKTAx4VNVVbJt+6Jtdy5XlpcvvF1be4gxfoIQflQsls9aFio7jvOY8ZRer3d8o+ucniGrYfhUUOHz4lUAd+kUfKmegJbOeqF5hplTIZ1Oh7jebDanNyxr4SMhJ3kFpokKLFg+mUxGmJ5vW+aLK+T1kW/tzvWvlnNnV8ktXrKoJhJBjNCzTWdztV6ojPGeRaPRAP9WisXDHYRXsG0/ZyVzPqi67oVtI4Q6nTNmt3uepcMcvJl8wvSeCO9u7tXWV0I5q6EcrOUk0GclMJjf0ERuc+xaq843gW2Fzo8EtBr+zdqw6VIjCPRVAGiNkQxxqPMz8o+wAR6ED0/3s3vS0VR8LDWdOqbzbP9G1J9rFYvFLsXj8fK/fBYBWZYHQ/wBADkdi7pkRxIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"infra\" title=\"\" src=\"/static/b2a8795612c0ea58cce80a519382a614/c5bb3/infra.png\" srcset=\"/static/b2a8795612c0ea58cce80a519382a614/04472/infra.png 170w,\n/static/b2a8795612c0ea58cce80a519382a614/9f933/infra.png 340w,\n/static/b2a8795612c0ea58cce80a519382a614/c5bb3/infra.png 680w,\n/static/b2a8795612c0ea58cce80a519382a614/b12f7/infra.png 1020w,\n/static/b2a8795612c0ea58cce80a519382a614/b5a09/infra.png 1360w,\n/static/b2a8795612c0ea58cce80a519382a614/2cefc/infra.png 1400w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>ğŸ”¥ <strong>Features</strong></p>\n<ul>\n<li>Common variables, secrets, and templating for different technologies.</li>\n<li>Same GitOps Development experience for Terraform, Shell, Kubernetes.</li>\n<li>Could be used with any Cloud, On-premises or Hybrid scenarios.</li>\n<li>Encourage teams to follow technology best practices.</li>\n</ul>\n<p>ğŸ“Œ <strong>Differences between Cluster.dev and Terraform:</strong></p>\n<p>Cluster.dev improves on Terraform in a few key ways:</p>\n<ul>\n<li><strong>Relations:</strong> Terraform struggles with defining relationships between components, but Cluster.dev makes it easier, allowing you to trigger only what's needed.</li>\n<li><strong>Templating:</strong> Unlike Terraform, Cluster.dev supports templating, making it simpler to include or exclude modules like Jenkins Terraform.</li>\n<li><strong>External Tools:</strong> Terraform has limitations when using external tools, while Cluster.dev provides consistent support and integration for better control.</li>\n</ul>\n<p>Overall, Cluster.dev simplifies infrastructure management and addresses some limitations of Terraform.</p>\n<p>â” <strong>Why Infrastructure Templating is Essential:</strong></p>\n<p>In modern cloud-native settings, infrastructure templating plays a crucial role in simplifying the processes of developing and maintaining infrastructure. Here's why it's vital:</p>\n<ul>\n<li>Streamlines infrastructure development by establishing clear functional boundaries.</li>\n<li>Facilitates testing the interoperability of components, even if they employ different technologies.</li>\n<li>Enables the sharing of infrastructure patterns among team members.</li>\n<li>Allows the integration of infrastructure into the product, enhancing overall efficiency.</li>\n<li>Facilitates the division of responsibilities between Platform and SRE teams.</li>\n<li>Supports a comprehensive GitOps approach for all infrastructure components.</li>\n</ul>\n<p>Now, let's explore the primary use cases of infrastructure templating and examine the benefits it brings.</p>\n<p>Templating significantly simplifies tasks for DevOps and SRE teams, especially in deploying and testing within complex environments. So, what comprises infrastructure templates? Let's explore the essential building blocks necessary for creating an infrastructure template, starting with infrastructure layering:</p>\n<ul>\n<li><strong>Networking Layer:</strong> Involves VPCs, Peerings, VPNs, Security Groups, and Routing.</li>\n<li><strong>Permissions Layer:</strong> Encompasses IAM roles and user policies.</li>\n<li><strong>Infra and OS Layer:</strong> Encompasses server instance provisioning and operating system settings.</li>\n<li><strong>Data Management Layer:</strong> Includes Relational and NoSQL databases, caches, file and object storages.</li>\n<li><strong>Application Layer:</strong> Involves container orchestration, continuous delivery of applications, business applications and workloads, and infrastructure applications.</li>\n<li><strong>Observability Layer:</strong> Encompasses metric logs, tracing applications, and storages.</li>\n<li><strong>Configuration Layer:</strong> Involves declarative configuration storage, infrastructure state storages, and secret storages.</li>\n</ul>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42j2RCW7DIBBFff/TVW3VJLYx2Aa8gNcqm5TkdZy0RRohGOZvJDFGnHfEbkCnBm00lfEUhSLftWRpwTiNLMuCc5a2CezfHabUlMaiVEFXG9L9jiBYyQbovadrenRWPgGNrqiqirJoBNgwzRPTNGOtFVAv954QguyWQmuZ9ULUCPFEMgwDbdfStz3qoOVBQZ7noqAUAMd+f2AcXwo34s1NHzpWOZtclKWHp7L1e2VdV5KNqbY1vvZiUaHEqhHmLM1Ic0VV18zz/LLsLd41qJ0WoIyvN4fKCynD58cXnQhLLpcLp9OJ81n241nUDNLoiXFgjIFBaplWYoj0TaTzvdxF6Qe6NnI8/s6ezlyvV5L7/c7j8fivLYItq7hFUZU4CdxX8jmHDJNZcSHnxmKlZyTv2+3Gtv7mfwDjE711kwro9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"layers\" title=\"\" src=\"/static/2fac83b032385e56f487120cb1fa55a2/c5bb3/layers.png\" srcset=\"/static/2fac83b032385e56f487120cb1fa55a2/04472/layers.png 170w,\n/static/2fac83b032385e56f487120cb1fa55a2/9f933/layers.png 340w,\n/static/2fac83b032385e56f487120cb1fa55a2/c5bb3/layers.png 680w,\n/static/2fac83b032385e56f487120cb1fa55a2/b12f7/layers.png 1020w,\n/static/2fac83b032385e56f487120cb1fa55a2/2bef9/layers.png 1024w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>ğŸ“š <strong>Conclusion:</strong></p>\n<p>Cluster.dev is a great tool that simplifies the management of cloud-native infrastructures. It uses simple declarative manifests, or stack templates, to enable users to describe and deploy entire infrastructures with a single tool. The platform's support for various technologies, powerful templating engine, GitOps-first approach, and cross-platform compatibility make it a versatile and adaptable solution for managing complex infrastructures. By consolidating previously disconnected infrastructure components under one roof, Cluster.dev enables efficient, one-shot deployment of entire stacks, saving time and effort on operating tasks and allowing teams to focus on code development.</p>\n<p>If you found this article helpful, please don't forget to hit the <strong>Follow</strong> ğŸ‘‰ and <strong>Clap</strong> ğŸ‘ buttons to help me write more articles like this.</p>\n<p><strong>Thank You ğŸ–¤</strong></p>\n<br>\n<p><strong><em>Until next time, ã¤ã¥ã ğŸ‰</em></strong></p>\n<blockquote>\n<p>ğŸ’¡ Thank you for Reading !! ğŸ™ŒğŸ»ğŸ˜ğŸ“ƒ, see you in the next blog.ğŸ¤˜  <strong><em>Until next time ğŸ‰</em></strong></p>\n</blockquote>\n<p>ğŸš€ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>â™»ï¸ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>â™»ï¸ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end âœŒğŸ»</strong></p>\n<h1 align=\"center\">ğŸ”° Keep Learning !! Keep Sharing !! ğŸ”°</h1>\n<p><strong>ğŸ“… Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":3,"rawMarkdownBody":"\n> **Manage Cloud Infrastructures Declaratively â˜ï¸**\n\n## ğŸ“™ Introduction\n\nHave you ever wished for a single tool to manage all your cloud infrastructure needs?\n\n[Cluster.dev](https://cluster.dev/) is one of these tools that will change the way you handle cloud-native infrastructures.\n\nIn this blog post, we will explore the incredible features of Cluster.dev and how it simplifies the deployment, testing, and distribution of cloud-native components.\n\nGet ready to discover Cluster.dev and how it can make your infrastructure management a breeze.\n\n## â“ When do I need Cluster.dev\n\nIf you have a common infrastructure pattern that contains multiple components stuck together, like a bunch of TF-modules or a set of K8s addons, you need to re-use this pattern inside your projects.\nIf you develop an infrastructure platform that you ship to other teams, and they need to launch new infrastructures from your template.\nIf you build a complex infrastructure that contains different technologies, and you need to perform integration testing to confirm the components' interoperability. After which you can promote the changes to the next environments.\nIf you are a software vendor and you need to deliver infrastructure deployment along with your software.\n\n### For whom\n\nThe target audience is primarily infrastructure teams with a certain level of expertise, to whom Cluster.dev could simplify their daily routine: creating clusters, deploying services to the clusters, launching environments, sharing experience with development teams, etc.\n\nğŸ’  **Base concept diagrams**\n\nStack templates are composed of [units](https://docs.cluster.dev/units-overview/) - Lego-like building blocks responsible for passing variables to a particular technology.\n\n![units](./units.png)\n\nTemplates define infrastructure patterns or even the whole platform.\n\n![infra](./infra.png)\n\nğŸ”¥ **Features**\n\n- Common variables, secrets, and templating for different technologies.\n- Same GitOps Development experience for Terraform, Shell, Kubernetes.\n- Could be used with any Cloud, On-premises or Hybrid scenarios.\n- Encourage teams to follow technology best practices.\n\nğŸ“Œ **Differences between Cluster.dev and Terraform:**\n\nCluster.dev improves on Terraform in a few key ways:\n\n- **Relations:** Terraform struggles with defining relationships between components, but Cluster.dev makes it easier, allowing you to trigger only what's needed.\n- **Templating:** Unlike Terraform, Cluster.dev supports templating, making it simpler to include or exclude modules like Jenkins Terraform.\n- **External Tools:** Terraform has limitations when using external tools, while Cluster.dev provides consistent support and integration for better control.\n\nOverall, Cluster.dev simplifies infrastructure management and addresses some limitations of Terraform.\n\nâ” **Why Infrastructure Templating is Essential:**\n\nIn modern cloud-native settings, infrastructure templating plays a crucial role in simplifying the processes of developing and maintaining infrastructure. Here's why it's vital:\n\n- Streamlines infrastructure development by establishing clear functional boundaries.\n- Facilitates testing the interoperability of components, even if they employ different technologies.\n- Enables the sharing of infrastructure patterns among team members.\n- Allows the integration of infrastructure into the product, enhancing overall efficiency.\n- Facilitates the division of responsibilities between Platform and SRE teams.\n- Supports a comprehensive GitOps approach for all infrastructure components.\n\nNow, let's explore the primary use cases of infrastructure templating and examine the benefits it brings.\n\nTemplating significantly simplifies tasks for DevOps and SRE teams, especially in deploying and testing within complex environments. So, what comprises infrastructure templates? Let's explore the essential building blocks necessary for creating an infrastructure template, starting with infrastructure layering:\n\n- **Networking Layer:** Involves VPCs, Peerings, VPNs, Security Groups, and Routing.\n- **Permissions Layer:** Encompasses IAM roles and user policies.\n- **Infra and OS Layer:** Encompasses server instance provisioning and operating system settings.\n- **Data Management Layer:** Includes Relational and NoSQL databases, caches, file and object storages.\n- **Application Layer:** Involves container orchestration, continuous delivery of applications, business applications and workloads, and infrastructure applications.\n- **Observability Layer:** Encompasses metric logs, tracing applications, and storages.\n- **Configuration Layer:** Involves declarative configuration storage, infrastructure state storages, and secret storages.\n\n![layers](./layers.png)\n\nğŸ“š **Conclusion:**\n\nCluster.dev is a great tool that simplifies the management of cloud-native infrastructures. It uses simple declarative manifests, or stack templates, to enable users to describe and deploy entire infrastructures with a single tool. The platform's support for various technologies, powerful templating engine, GitOps-first approach, and cross-platform compatibility make it a versatile and adaptable solution for managing complex infrastructures. By consolidating previously disconnected infrastructure components under one roof, Cluster.dev enables efficient, one-shot deployment of entire stacks, saving time and effort on operating tasks and allowing teams to focus on code development.\n\nIf you found this article helpful, please don't forget to hit the **Follow** ğŸ‘‰ and **Clap** ğŸ‘ buttons to help me write more articles like this.\n\n**Thank You ğŸ–¤**\n\n<br>\n\n**_Until next time, ã¤ã¥ã ğŸ‰_**\n\n> ğŸ’¡ Thank you for Reading !! ğŸ™ŒğŸ»ğŸ˜ğŸ“ƒ, see you in the next blog.ğŸ¤˜  **_Until next time ğŸ‰_**\n\nğŸš€ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**â™»ï¸ LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**â™»ï¸ X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end âœŒğŸ»**\n\n<h1 align=\"center\">ğŸ”° Keep Learning !! Keep Sharing !! ğŸ”°</h1>\n\n**ğŸ“… Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":777},"frontmatter":{"id":"384464547971f7b27e444dd3","path":"/blog/cluster-dev-cloud-management/","humanDate":"Oct 29, 2024","fullDate":"2024-10-29","title":"Discover Cluster.dev: A Simple Solution for Cloud Infrastructure Management â˜ï¸","keywords":["Cloud-native","AWS","Kubernetes","Infrastructure as Code","DevOps"],"excerpt":"Explore how Cluster.dev simplifies cloud infrastructure management with declarative configurations, making it easier to manage AWS and Kubernetes environments.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHizspgK//EABkQAAMBAQEAAAAAAAAAAAAAAAABAwIREv/aAAgBAQABBQKc3Q55ZijwPTbP/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAEDAQE/Aax//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAABARIf/aAAgBAQAGPwLCRYVf/8QAGRABAQADAQAAAAAAAAAAAAAAAREAECFR/9oACAEBAAE/IXmbMaFTq37xAnrr/9oADAMBAAIAAwAAABCkD//EABgRAAIDAAAAAAAAAAAAAAAAAAEQESEx/9oACAEDAQE/EBdOL//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExEEGB/9oACAEBAAE/EAmkbc1HMhwj0+R3MlgbWXH52K8f/9k="},"images":{"fallback":{"src":"/static/f669cc6cabf798d30b4d4d2a075c2e4d/baf97/clusterdev-cover.jpg","srcSet":"/static/f669cc6cabf798d30b4d4d2a075c2e4d/baf97/clusterdev-cover.jpg 597w","sizes":"100vw"},"sources":[{"srcSet":"/static/f669cc6cabf798d30b4d4d2a075c2e4d/35cd4/clusterdev-cover.webp 597w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6465661641541038}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/hidden-gems-kubernetes/","title":"Hidden Gems: A Few Things You Might Not Know About Kubernetes ğŸ’","date":"2024-10-29 20:30:00"},"excerpt":"Lesser-Known Aspects of Kubernetes ğŸ’ Overview ğŸ‘€ Kubernetes has revolutionized the way we manage containerized applications, but it'sâ€¦","html":"<blockquote>\n<p><strong>Lesser-Known Aspects of Kubernetes ğŸ’</strong></p>\n</blockquote>\n<h2 id=\"overview-\" style=\"position:relative;\"><a href=\"#overview-\" aria-label=\"overview  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Overview ğŸ‘€</h2>\n<p>Kubernetes has revolutionized the way we manage containerized applications, but it's packed with hidden features that even experienced users might not be aware of.</p>\n<p>Let's dive into a few of these hidden gems and discover the lesser-known capabilities of Kubernetes.</p>\n<p>I hope this blog post has been helpful.</p>\n<h2 id=\"sorting-and-organizing-your-pods-\" style=\"position:relative;\"><a href=\"#sorting-and-organizing-your-pods-\" aria-label=\"sorting and organizing your pods  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Sorting and Organizing Your Pods ğŸ“‹</h2>\n<p>Ever wished you could organize your pod list in a more meaningful way? With Kubernetes, you can! Simply use the <code class=\"language-text\">--sort-by</code> flag along with the <code class=\"language-text\">kubectl get pods</code> command to sort your pods by various criteria, such as pod name or creation time.</p>\n<p>Running <code class=\"language-text\">kubectl get pods --sort-by=.metadata.name</code> might just save you from endless scrolling through your pod list. Let's sort the pods in descending order, i.e., with the newest pods appearing first:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pods --sort-by<span class=\"token operator\">=</span>.metadata.creationTimestamp --no-headers <span class=\"token operator\">|</span> <span class=\"token function\">tail</span> <span class=\"token parameter variable\">-r</span>\nubuntu-pod-3             <span class=\"token number\">2</span>/2     Running   <span class=\"token number\">0</span>          5m17s\nubuntu-pod-2             <span class=\"token number\">2</span>/2     Running   <span class=\"token number\">0</span>          13m7s\nubuntu-pod-1             <span class=\"token number\">2</span>/2     Running   <span class=\"token number\">0</span>          26m</code></pre></div>\n<h2 id=\"listing-all-object-types-\" style=\"position:relative;\"><a href=\"#listing-all-object-types-\" aria-label=\"listing all object types  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Listing All Object Types ğŸ“œ</h2>\n<p>Did you know you can list all the object types that your cluster supports? Use the <code class=\"language-text\">kubectl api-resources</code> command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl api-resources</code></pre></div>\n<p>When we want a more encompassing list of all resources in a namespace, we can combine the <code class=\"language-text\">kubectl api-resources</code> command with <code class=\"language-text\">kubectl get</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl api-resources <span class=\"token parameter variable\">--verbs</span><span class=\"token operator\">=</span>list <span class=\"token parameter variable\">--namespaced</span> <span class=\"token parameter variable\">-o</span> name <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token parameter variable\">-n</span> <span class=\"token number\">1</span> kubectl get --ignore-not-found --show-kind <span class=\"token parameter variable\">-n</span> <span class=\"token operator\">&lt;</span>namespace<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">kubectl api-resources --verbs=list --namespaced -o name</code> retrieves all namespaced API resource types that support the list API verb. Then it outputs their names. Those names are then redirected to <code class=\"language-text\">xargs</code> as standard input.</p>\n<p><a href=\"https://www.baeldung.com/linux/xargs-multiple-arguments\" target=\"_blank\" rel=\"noopener noreferrer\"><code class=\"language-text\">xargs -n 1</code></a> singly passes each of those names as initial arguments to <code class=\"language-text\">kubectl get --ignore-not-found --show-kind -n &lt;namespace></code>. Then, the <code class=\"language-text\">kubectl get</code> command returns a list of resources belonging to each resource type in the specified namespace.</p>\n<h2 id=\"default-resources-and-limits-with-limitrange-and-resourcequotas-\" style=\"position:relative;\"><a href=\"#default-resources-and-limits-with-limitrange-and-resourcequotas-\" aria-label=\"default resources and limits with limitrange and resourcequotas  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Default Resources and Limits with LimitRange and ResourceQuotas ğŸš¦</h2>\n<p>In Kubernetes, namespaces provide a mechanism for isolating groups of resources within a single cluster. Namespaces are a way to divide cluster resources into groups for multiple users (via resource-quota). Each namespace will have one or multiple containers running inside it.</p>\n<p>After creating a namespace for each team within the cluster, consider that what if one team, i.e., namespace, consumes more resources from the cluster like CPU and memory, and other teams' resources starve for resources as the cluster has a very limited amount of available hardware resources. This creates a noisy neighbor problem within the cluster.</p>\n<p>To avoid this, as an administrator, first, you create a namespace within the cluster, and then you can use ResourceQuota and LimitRange to assign resource quotas on namespaces and set limits for containers running inside any namespace.</p>\n<h3 id=\"resource-quotas\" style=\"position:relative;\"><a href=\"#resource-quotas\" aria-label=\"resource quotas permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Resource Quotas</h3>\n<p>After creating namespaces, we can use the ResourceQuota object to limit the total amount of resources used by the namespace. We can use ResourceQuota to set limits for different object types that can be created within a namespace along with setting quotas for resources like CPU and memory.</p>\n<p>A ResourceQuota for setting a quota on resources looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ResourceQuota\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> teamx<span class=\"token punctuation\">-</span>resource<span class=\"token punctuation\">-</span>quota\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> teamx\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">hard</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">limits.cpu</span><span class=\"token punctuation\">:</span> 150m\n        <span class=\"token key atrule\">limits.memory</span><span class=\"token punctuation\">:</span> 600Mi\n        <span class=\"token key atrule\">requests.cpu</span><span class=\"token punctuation\">:</span> 150m\n        <span class=\"token key atrule\">requests.memory</span><span class=\"token punctuation\">:</span> 600Mi</code></pre></div>\n<ul>\n<li><code class=\"language-text\">limits.cpu</code> is the maximum CPU limit for all the containers in the Namespace, i.e., the entire namespace.</li>\n<li><code class=\"language-text\">limits.memory</code> is the maximum Memory limit for all containers in the Namespace, i.e., the entire namespace.</li>\n<li><code class=\"language-text\">requests.cpu</code> is the maximum CPU requests for all the containers in the Namespace. As per the above YAML, the total requested CPU in the Namespace should be less than 150m.</li>\n<li><code class=\"language-text\">requests.memory</code> is the maximum Memory requests for all the containers in the Namespace. As per the above YAML, the total requested memory in the namespace should be less than 600Mi.</li>\n</ul>\n<h3 id=\"limitrange-for-containers\" style=\"position:relative;\"><a href=\"#limitrange-for-containers\" aria-label=\"limitrange for containers permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>LimitRange for Containers</h3>\n<p>We can create a LimitRange object in our Namespace which can be used to set limits on resources on containers running within the namespace. This is used to provide default limit values for Pods which do not specify this value themselves to equally distribute resources within a namespace.</p>\n<p>A LimitRange provides constraints that can:</p>\n<ul>\n<li>Apply minimum and maximum CPU resources usage limit per Pod or Container in a namespace.</li>\n<li>Apply minimum and maximum memory request limit per PersistentVolumeClaim in a namespace.</li>\n<li>Apply minimum and maximum CPU resources usage limit per Pod or Container in a namespace.</li>\n<li>Set default request/limit for resources within a namespace and then automatically set the limits to Containers at runtime.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> LimitRange\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> teamx<span class=\"token punctuation\">-</span>limit<span class=\"token punctuation\">-</span>range\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n        <span class=\"token key atrule\">defaultRequest</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n        <span class=\"token key atrule\">max</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n        <span class=\"token key atrule\">min</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n        <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Container</code></pre></div>\n<p>The above YAML file has 4 sections: <code class=\"language-text\">max</code>, <code class=\"language-text\">min</code>, <code class=\"language-text\">default</code>, and <code class=\"language-text\">defaultRequest</code>.</p>\n<ul>\n<li>The <code class=\"language-text\">default</code> section will set up the default limits for a container in a pod. Any container with no limits defined will get these values assigned as default.</li>\n<li>The <code class=\"language-text\">defaultRequest</code> section will set up the default requests for a container in a pod. Any container with no requests defined will get these values assigned as default.</li>\n<li>The <code class=\"language-text\">max</code> section will set up the maximum limits that a container in a Pod can set. The value specified in the <code class=\"language-text\">default</code> section cannot be higher than this value.</li>\n<li>The <code class=\"language-text\">min</code> section will set up the minimum requests that a container in a Pod can set. The value specified in the <code class=\"language-text\">defaultRequest</code> section cannot be lower than this value.</li>\n</ul>\n<h2 id=\"kubectl-debug\" style=\"position:relative;\"><a href=\"#kubectl-debug\" aria-label=\"kubectl debug permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>kubectl debug</h2>\n<p>One of the most forgotten but powerful <code class=\"language-text\">kubectl</code> commands is <code class=\"language-text\">debug</code>. It allows you to create a sidecar container on any pod, copy a pod to a new instance for debugging, and even access the pod's filesystem.</p>\n<h3 id=\"debugging-a-node-ï¸\" style=\"position:relative;\"><a href=\"#debugging-a-node-%EF%B8%8F\" aria-label=\"debugging a node ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Debugging a Node ğŸ–¥ï¸</h3>\n<p>Use the <code class=\"language-text\">kubectl debug node</code> command to deploy a Pod to a Node that you want to troubleshoot. This command is helpful in scenarios where you can't access your Node by using an SSH connection. When the Pod is created, the Pod opens an interactive shell on the Node. To create an interactive shell on a Node named <code class=\"language-text\">mynode</code>, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl debug node/mynode <span class=\"token parameter variable\">-ti</span> <span class=\"token parameter variable\">--image</span><span class=\"token operator\">=</span>ubuntu -- <span class=\"token function\">chroot</span> /host <span class=\"token function\">bash</span></code></pre></div>\n<h3 id=\"adding-ephemeral-containers-\" style=\"position:relative;\"><a href=\"#adding-ephemeral-containers-\" aria-label=\"adding ephemeral containers  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Adding Ephemeral Containers ğŸ³</h3>\n<p>You can also use the <code class=\"language-text\">kubectl debug</code> command to add ephemeral containers to a running Pod for debugging.</p>\n<p>First, create a pod for the example:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl run ephemeral-demo <span class=\"token parameter variable\">--image</span><span class=\"token operator\">=</span>registry.k8s.io/pause:3.1 <span class=\"token parameter variable\">--restart</span><span class=\"token operator\">=</span>Never</code></pre></div>\n<p>The examples in this section use the <a href=\"https://registry.k8s.io/pause:3.1\" target=\"_blank\" rel=\"noopener noreferrer\">pause container image</a> because it does not contain debugging utilities, but this method works with all container images. If you attempt to use <code class=\"language-text\">kubectl exec</code> to create a shell, you will see an error because there is no shell in this container image.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> ephemeral-demo -- <span class=\"token function\">sh</span>\nOCI runtime <span class=\"token builtin class-name\">exec</span> failed: <span class=\"token builtin class-name\">exec</span> failed: container_linux.go:346: starting container process caused <span class=\"token string\">\"exec: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>sh<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: executable file not found in <span class=\"token environment constant\">$PATH</span>\"</span><span class=\"token builtin class-name\">:</span> unknown</code></pre></div>\n<p>You can instead add a debugging container using <code class=\"language-text\">kubectl debug</code>. If you specify the <code class=\"language-text\">-i/--interactive</code> argument, <code class=\"language-text\">kubectl</code> will automatically attach to the console of the Ephemeral Container.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl debug <span class=\"token parameter variable\">-it</span> ephemeral-demo <span class=\"token parameter variable\">--image</span><span class=\"token operator\">=</span>busybox:1.28 <span class=\"token parameter variable\">--target</span><span class=\"token operator\">=</span>ephemeral-demo\nDefaulting debug container name to debugger-8xzrl.\nIf you don't see a <span class=\"token builtin class-name\">command</span> prompt, try pressing enter.\n/ <span class=\"token comment\">#</span></code></pre></div>\n<p>This command adds a new <code class=\"language-text\">busybox</code> container and attaches to it. The <code class=\"language-text\">--target</code> parameter targets the process namespace of another container. It's necessary here because <code class=\"language-text\">kubectl run</code> does not enable process namespace sharing in the pod it creates.</p>\n<h2 id=\"krew-the-plugin-marketplace-\" style=\"position:relative;\"><a href=\"#krew-the-plugin-marketplace-\" aria-label=\"krew the plugin marketplace  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Krew: The Plugin Marketplace ğŸš€</h2>\n<p>There's a massive marketplace of Kubectl plugins that can extend its functionality and make your life easier. Meet <a href=\"https://krew.sigs.k8s.io/docs/user-guide/setup/install/\" target=\"_blank\" rel=\"noopener noreferrer\">Krew</a>:</p>\n<p>Krew is the plugin manager for the <code class=\"language-text\">kubectl</code> command-line tool.</p>\n<p>Krew helps you:</p>\n<ul>\n<li>Discover <a href=\"https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl plugins</a>,</li>\n<li>Install them on your machine,</li>\n<li>And keep the installed plugins up-to-date.</li>\n</ul>\n<p>There are 225 kubectl plugins currently distributed on Krew. Krew works across all major platforms, like macOS, Linux, and Windows.</p>\n<h2 id=\"prow-cicd-for-kubernetes-ï¸\" style=\"position:relative;\"><a href=\"#prow-cicd-for-kubernetes-%EF%B8%8F\" aria-label=\"prow cicd for kubernetes ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Prow: CI/CD for Kubernetes âš™ï¸</h2>\n<p>Kubernetes' Project CI/CD is powered by <a href=\"http://prow.k8s.io\" target=\"_blank\" rel=\"noopener noreferrer\">Prow</a>, an open-source CI system that can scale to hundreds of thousands of jobs.</p>\n<p>The Kubernetes Testing SIG describes Prow as \"a CI/CD system built on Kubernetes for Kubernetes that executes jobs for building, testing, publishing, and deploying.\" However, that description does not highlight perhaps the most important inferred capability of Prowâ€Šâ€”â€Ša capability that is at the heart of best-of-breed CI/CD automation toolsâ€Šâ€”â€Šthat capability is automation that starts with code commits. In the case of Prow, it starts with a scalable stateless microservice called <a href=\"https://github.com/kubernetes/test-infra/blob/master/prow/cmd/README.md#core-components\" target=\"_blank\" rel=\"noopener noreferrer\">hook</a> that triggers native K8s CI/CD jobs (among a number of things that hook does via <a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins\" target=\"_blank\" rel=\"noopener noreferrer\">plugins</a>).</p>\n<p>It is this GitHub automation capability that has been one of the key reasons why other K8s projects have adopted Prow for their own CI/CD. But Prow is more than just GitHub webhook automation and CI/CD job execution. Prow is also:</p>\n<ul>\n<li><strong>Comprehensive GitHub Automation</strong></li>\n<li><strong>ChatOps</strong> <a href=\"https://prow.k8s.io/command-help\" target=\"_blank\" rel=\"noopener noreferrer\">via simple /foo commands</a></li>\n<li><strong>Fine-grained GitHub policy and permission management</strong> via <a href=\"https://github.com/kubernetes/community/blob/master/contributors/guide/owners.md\" target=\"_blank\" rel=\"noopener noreferrer\">OWNERS files</a></li>\n<li><strong>GitHub PR/merge automation</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/tide\" target=\"_blank\" rel=\"noopener noreferrer\">tide</a></li>\n<li><strong>GitHub API request cache</strong> to minimize the impact of GitHub API limitsâ€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/ghproxy\" target=\"_blank\" rel=\"noopener noreferrer\">ghProxy</a></li>\n<li><strong>GitHub Organization and repository membership and permissions management</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/peribolos\" target=\"_blank\" rel=\"noopener noreferrer\">peribolos</a></li>\n<li><strong>GitHub labels management</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/label\" target=\"_blank\" rel=\"noopener noreferrer\">label plugin</a></li>\n<li><strong>GitHub branch protection configuration</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/branchprotector\" target=\"_blank\" rel=\"noopener noreferrer\">branchprotector</a></li>\n<li><strong>GitHub release notes management</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/releasenote\" target=\"_blank\" rel=\"noopener noreferrer\">releasenote</a></li>\n<li><strong>Scalable, cacheable</strong> <a href=\"https://github.com/kubernetes/test-infra/blob/master/prow/scaling.md#github-api-cache\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub API cache</a></li>\n<li><strong>GitHub bot</strong> with <a href=\"https://github.com/k8s-ci-robot\" target=\"_blank\" rel=\"noopener noreferrer\">Prow's bot being an active GitHub user since 2016</a></li>\n<li><strong>Multi-engine CI/CD Job Execution</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/plank\" target=\"_blank\" rel=\"noopener noreferrer\">plank</a></li>\n<li><strong>CI/CD Reporting</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/crier\" target=\"_blank\" rel=\"noopener noreferrer\">crier</a></li>\n<li><strong>CI/CD Dashboards</strong> for viewing job history, merge status, and moreâ€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/deck\" target=\"_blank\" rel=\"noopener noreferrer\">deck</a></li>\n<li><strong>Pluggable Artifact Viewer</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/spyglass\" target=\"_blank\" rel=\"noopener noreferrer\">Spyglass</a></li>\n<li><strong>Prometheus Metrics</strong> for monitoring and alertingâ€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/metrics\" target=\"_blank\" rel=\"noopener noreferrer\">metrics</a></li>\n<li><strong>Config-as-Code for Its Own Configuration</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/updateconfig\" target=\"_blank\" rel=\"noopener noreferrer\">updateconfig</a></li>\n</ul>\n<p>And I am sure I am still missing a bunch of thingsâ€Šâ€”â€Šlike <a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/cat\" target=\"_blank\" rel=\"noopener noreferrer\">cats</a> and <a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/dog\" target=\"_blank\" rel=\"noopener noreferrer\">dogs</a>.</p>\n<h2 id=\"extending-kubernetes-api-\" style=\"position:relative;\"><a href=\"#extending-kubernetes-api-\" aria-label=\"extending kubernetes api  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Extending Kubernetes API ğŸš€</h2>\n<p>Did you know you can extend the Kubernetes API itself? Meet the <a href=\"https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubernetes API Aggregator Layer</a>, a powerful tool for introducing subresources or aggregating them, like the custom metrics server.</p>\n<p>The aggregation layer enables installing additional Kubernetes-style APIs in your cluster. These can either be pre-built, existing 3rd party solutions, such as <a href=\"https://github.com/kubernetes-incubator/service-catalog/blob/master/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">service-catalog</a>, or user-created APIs like <a href=\"https://github.com/kubernetes-incubator/apiserver-builder/blob/master/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">apiserver-builder</a>, which can get you started.</p>\n<h2 id=\"auto-provisioning-namespaces-ï¸\" style=\"position:relative;\"><a href=\"#auto-provisioning-namespaces-%EF%B8%8F\" aria-label=\"auto provisioning namespaces ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Auto-Provisioning Namespaces ğŸ› ï¸</h2>\n<p>There's an easy way to auto-provision namespaces without giving extra permissions to your users. Use the <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#namespaceautoprovision\" target=\"_blank\" rel=\"noopener noreferrer\">NamespaceAutoProvision Admission controller</a>.</p>\n<p>This admission controller examines all incoming requests on namespaced resources and checks if the referenced namespace exists. It creates a namespace if it cannot be found. This admission controller is useful in deployments that do not want to restrict the creation of a namespace prior to its usage.</p>\n<h2 id=\"enforcing-customrules\" style=\"position:relative;\"><a href=\"#enforcing-customrules\" aria-label=\"enforcing customrules permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Enforcing CustomÂ Rules</h2>\n<p>Kubernetes offers a simple way to intercept and validate requests with ValidatingAdmissionWebhooks and MutatingAdmissionWebhooks.</p>\n<p><a href=\"https://github.com/slackhq/simple-kubernetes-webhook\" target=\"_blank\" rel=\"noopener noreferrer\">This</a> is a simple <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubernetes admission webhook</a>. It is meant to be used as a validating and mutating admission webhook only and does not support any controller logic.</p>\n<p>It has been developed as a simple Go web service without using any framework or <code class=\"language-text\">boilerplate</code> such as <code class=\"language-text\">kubebuilder</code>.</p>\n<p>This project is aimed at illustrating how to build a fully functioning admission webhook in the simplest way possible. Most existing examples found on the web rely on heavy machinery using powerful frameworks, yet fail to illustrate how to implement a lightweight webhook that can do much-needed actions such as rejecting a pod for compliance reasons or injecting helpful environment variables.</p>\n<h2 id=\"dynamic-resource-allocation-\" style=\"position:relative;\"><a href=\"#dynamic-resource-allocation-\" aria-label=\"dynamic resource allocation  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Dynamic Resource Allocation ğŸš€</h2>\n<p>Allocate resources outside your cluster with Dynamic <a href=\"https://kubernetes.io/blog/2022/12/15/dynamic-resource-allocation/\" target=\"_blank\" rel=\"noopener noreferrer\">Resource Allocation</a>. Since K8s v1.26, use <strong>ResourceClass</strong> and <strong>ResourceClaims</strong> to extend offerings beyond the cluster.</p>\n<p>In contrast to native resources (such as CPU or RAM) and <a href=\"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#extended-resources\" target=\"_blank\" rel=\"noopener noreferrer\">extended resources</a> (managed by a device plugin, advertised by kubelet), the scheduler has no knowledge of what dynamic resources are available in a cluster or how they could be split up to satisfy the requirements of a specific ResourceClaim. Resource drivers are responsible for that.</p>\n<p>Drivers mark <strong>ResourceClaims</strong> as allocated once resources for it are reserved. This also then tells the scheduler where in the cluster a claimed resource is actually available.</p>\n<p><strong>ResourceClaims</strong> can get resources allocated as soon as the ResourceClaim is created (immediate allocation), without considering which Pods will use the resource. The default (wait for first consumer) is to delay allocation until a Pod that relies on the ResourceClaim becomes eligible for scheduling. This design with two allocation options is similar to how Kubernetes handles storage provisioning with PersistentVolumes and PersistentVolumeClaims.</p>\n<h2 id=\"managing-requests-in-the-kubernetes-api-\" style=\"position:relative;\"><a href=\"#managing-requests-in-the-kubernetes-api-\" aria-label=\"managing requests in the kubernetes api  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Managing Requests in the Kubernetes API ğŸ“œ</h2>\n<p>In Kubernetes, request queue management is handled by <a href=\"https://kubernetes.io/docs/concepts/cluster-administration/flow-control\" target=\"_blank\" rel=\"noopener noreferrer\">API Priority and Fairness (APF)</a>. It is enabled by default in Kubernetes 1.20 and beyond. The API server also provides two parameters, <code class=\"language-text\">--max-requests-inflight</code> (default is 400) and <code class=\"language-text\">--max-mutating-requests-inflight</code> (default is 200), for limiting the number of requests. If APF is enabled, both of these parameters are summed upâ€Šâ€”â€Šand that's how the API server's total concurrency limit is defined.</p>\n<p>That said, there are some finer details to account for:</p>\n<ul>\n<li>Long-running API requests (e.g., viewing logs or executing commands in a pod) are not subject to APF limits, and neither are WATCH requests.</li>\n<li>There is also a special predefined priority level called exempt. Requests from this level are processed immediately.</li>\n</ul>\n<p>So you can fine-tune how the Kubernetes API server queues and handles requests to prioritize essential requests and manage latency effectively.</p>\n<h3 id=\"api-priority-with-code-classlanguage-textkubectlcode\" style=\"position:relative;\"><a href=\"#api-priority-with-code-classlanguage-textkubectlcode\" aria-label=\"api priority with code classlanguage textkubectlcode permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>API Priority with <code class=\"language-text\">kubectl</code></h3>\n<p>You can explore how busy your Kubernetes API server is by examining the Priority Level queue. With the APIPriorityAndFairness feature enabled, the kube-apiserver serves the following additional paths at its HTTP(S) ports. You need to ensure you have permissions to access these endpoints. You don't have to do anything if you are using admin. Permissions can be granted if needed following the RBAC doc to access <code class=\"language-text\">/debug/api_priority_and_fairness/</code> by specifying nonResourceURLs.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">/debug/api_priority_and_fairness/dump_priority_levels</code> - a listing of all the priority levels and the current state of each. You can fetch like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get <span class=\"token parameter variable\">--raw</span> /debug/api_priority_and_fairness/dump_priority_levels</code></pre></div>\n<p>The output will be in CSV and similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PriorityLevelName, ActiveQueues, IsIdle, IsQuiescing, WaitingRequests, ExecutingRequests, DispatchedRequests, RejectedRequests, TimedoutRequests, CancelledRequests\ncatch-all,         0,            true,   false,       0,               0,                 1,                  0,                0,                0\nexempt,            0,            true,   false,       0,               0,                 0,                  0,                0,                0\nglobal-default,    0,            true,   false,       0,               0,                 46,                 0,                0,                0\nleader-election,   0,            true,   false,       0,               0,                 4,                  0,                0,                0\nnode-high,         0,            true,   false,       0,               0,                 34,                 0,                0,                0\nsystem,            0,            true,   false,       0,               0,                 48,                 0,                0,                0\nworkload-high,     0,            true,   false,       0,               0,                 500,                0,                0,                0\nworkload-low,      0,            true,   false,       0,               0,                 0,                  0,                0,                0</code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">/debug/api_priority_and_fairness/dump_queues</code> - a listing of all the queues and their current state. You can fetch like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get <span class=\"token parameter variable\">--raw</span> /debug/api_priority_and_fairness/dump_queues</code></pre></div>\n<p>The output will be in CSV and similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PriorityLevelName, Index,  PendingRequests, ExecutingRequests, SeatsInUse, NextDispatchR,   InitialSeatsSum, MaxSeatsSum, TotalWorkSum\nworkload-low,      14,     27,              0,                 0,          77.64342019ss,   270,             270,         0.81000000ss\nworkload-low,      74,     26,              0,                 0,          76.95387841ss,   260,             260,         0.78000000ss\n...\nleader-election,   0,      0,               0,                 0,          5088.87053833ss, 0,               0,           0.00000000ss\nleader-election,   1,      0,               0,                 0,          0.00000000ss,    0,               0,           0.00000000ss\n...\nworkload-high,     0,      0,               0,                 0,          0.00000000ss,    0,               0,           0.00000000ss\nworkload-high,     1,      0,               0,                 0,          1119.44936475ss, 0,               0,           0.00000000ss</code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">/debug/api_priority_and_fairness/dump_requests</code> - a listing of all the requests including requests waiting in a queue and requests being executed. You can fetch like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get <span class=\"token parameter variable\">--raw</span> /debug/api_priority_and_fairness/dump_requests</code></pre></div>\n<p>The output will be in CSV and similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">PriorityLevelName, FlowSchemaName,   QueueIndex, RequestIndexInQueue, FlowDistingsher,                        ArriveTime,                     InitialSeats, FinalSeats, AdditionalLatency, StartTime\nexempt,            exempt,           -1,         -1,                  ,                                       <span class=\"token number\">2023</span>-07-15T04:51:25.596404345Z, <span class=\"token number\">1</span>,            <span class=\"token number\">0</span>,          0s,                <span class=\"token number\">2023</span>-07-15T04:51:25.596404345Z\nworkload-low,      service-accounts, <span class=\"token number\">14</span>,         <span class=\"token number\">0</span>,                   system:serviceaccount:default:loadtest, <span class=\"token number\">2023</span>-07-18T00:12:51.386556253Z, <span class=\"token number\">10</span>,           <span class=\"token number\">0</span>,          0s,                0001-01-01T00:00:00Z\nworkload-low,      service-accounts, <span class=\"token number\">14</span>,         <span class=\"token number\">1</span>,                   system:serviceaccount:default:loadtest, <span class=\"token number\">2023</span>-07-18T00:12:51.487092539Z, <span class=\"token number\">10</span>,           <span class=\"token number\">0</span>,          0s,                0001-01-01T00:00:00Z</code></pre></div>\n</li>\n</ul>\n<h2 id=\"manually-triggering-pod-evictions-\" style=\"position:relative;\"><a href=\"#manually-triggering-pod-evictions-\" aria-label=\"manually triggering pod evictions  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Manually Triggering Pod Evictions ğŸš¨</h2>\n<p>A safer alternative to deleting pods is using evictions, because they respect pod disruption budgets and other termination policies. You can manually trigger a pod eviction using the Kubernetes eviction API.</p>\n<p>Create a file called <code class=\"language-text\">eviction.json</code> with content similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"apiVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"policy/v1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Eviction\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"metadata\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pod-name-here\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"namespace\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And run this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-v</span> <span class=\"token parameter variable\">-H</span> <span class=\"token string\">'Content-type: application/json'</span> https://your-cluster-api-endpoint.example/api/v1/namespaces/default/pods/pod-name-here/eviction <span class=\"token parameter variable\">-d</span> @eviction.json</code></pre></div>\n<h2 id=\"pod-overhead-ï¸ï¸\" style=\"position:relative;\"><a href=\"#pod-overhead-%EF%B8%8F%EF%B8%8F\" aria-label=\"pod overhead ï¸ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Pod Overhead ğŸ‹ï¸â€â™‚ï¸</h2>\n<p>When you run a Pod on a Node, the Pod itself takes an amount of system resources. These resources are additional to the resources needed to run the container(s) inside the Pod. In Kubernetes, Pod Overhead is a way to account for the resources consumed by the Pod infrastructure on top of the container requests &#x26; limits.</p>\n<p>In Kubernetes, the Pod's overhead is set at <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#what-are-admission-webhooks\" target=\"_blank\" rel=\"noopener noreferrer\">admission</a> time according to the overhead associated with the Pod's <a href=\"https://kubernetes.io/docs/concepts/containers/runtime-class/\" target=\"_blank\" rel=\"noopener noreferrer\">RuntimeClass</a>.</p>\n<p>A pod's overhead is considered in addition to the sum of container resource requests when scheduling a Pod. Similarly, the kubelet will include the Pod overhead when sizing the Pod cgroup, and when carrying out Pod eviction ranking. You need to make sure a RuntimeClass is utilized which defines the overhead field.</p>\n<p>To work with Pod overhead, you need a RuntimeClass that defines the overhead field. As an example, you could use the following RuntimeClass definition with a virtualization container runtime that uses around 120MiB per Pod for the virtual machine and the guest OS:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> node.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> RuntimeClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kata<span class=\"token punctuation\">-</span>fc\n<span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> kata<span class=\"token punctuation\">-</span>fc\n<span class=\"token key atrule\">overhead</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">podFixed</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"120Mi\"</span>\n        <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"250m\"</span></code></pre></div>\n<p>Workloads which are created which specify the kata-fc RuntimeClass handler will take the memory and cpu overheads into account for resource quota calculations, node scheduling, as well as Pod cgroup sizing.</p>\n<p>Consider running the given example workload, <code class=\"language-text\">test-pod</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>pod\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runtimeClassName</span><span class=\"token punctuation\">:</span> kata<span class=\"token punctuation\">-</span>fc\n    <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> busybox<span class=\"token punctuation\">-</span>ctr\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> busybox<span class=\"token punctuation\">:</span><span class=\"token number\">1.28</span>\n        <span class=\"token key atrule\">stdin</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">tty</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 500m\n                <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 100Mi\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>ctr\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 1500m\n                <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 100Mi</code></pre></div>\n<p>At admission time the RuntimeClass admission controller updates the workload's PodSpec to include the overhead as described in the RuntimeClass. If the PodSpec already has this field defined, the Pod will be rejected. In the given example, since only the RuntimeClass name is specified, the admission controller mutates the Pod to include an overhead.</p>\n<p>After the RuntimeClass admission controller has made modifications, you can check the updated Pod overhead value:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pod test-pod <span class=\"token parameter variable\">-o</span> <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token string\">'{.spec.overhead}'</span></code></pre></div>\n<p>The output is:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">map<span class=\"token punctuation\">[</span>cpu<span class=\"token operator\">:</span>250m memory<span class=\"token operator\">:</span>120Mi<span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"future-enhancements-\" style=\"position:relative;\"><a href=\"#future-enhancements-\" aria-label=\"future enhancements  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Future Enhancements ğŸ”®</h2>\n<p>All the future enhancements to the Kubernetes-adjacent projects are publicly available and maintained in git. You can find it <a href=\"https://github.com/kubernetes/enhancements/tree/master/keps\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>. If you have any good idea (and the resources to make it a reality), you can even submit your own!</p>\n<br>\n<p><strong><em>Until next time, ã¤ã¥ã ğŸ‰</em></strong></p>\n<blockquote>\n<p>ğŸ’¡ Thank you for Reading !! ğŸ™ŒğŸ»ğŸ˜ğŸ“ƒ, see you in the next blog.ğŸ¤˜  <strong><em>Until next time ğŸ‰</em></strong></p>\n</blockquote>\n<p>ğŸš€ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>â™»ï¸ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>â™»ï¸ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end âœŒğŸ»</strong></p>\n<h1 align=\"center\">ğŸ”° Keep Learning !! Keep Sharing !! ğŸ”°</h1>\n<p><strong>ğŸ“… Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>"},"nextThought":{"frontmatter":{"path":"/blog/kubernetes-dns-coredns-externaldns/","title":"Kubernetes & DNS: A Guide to CoreDNS and ExternalDNS in AWS EKS clusterğŸ³","date":"2024-10-29 19:06:00"},"excerpt":"The ABCs of Kubernetes DNS ğŸ³ ğŸ”¥ Introduction Kubernetes, an open-source platform for automating containerized applications, relies onâ€¦","html":"<blockquote>\n<p><strong>The ABCs of Kubernetes DNS ğŸ³</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ğŸ”¥ Introduction</h2>\n<p>Kubernetes, an open-source platform for automating containerized applications, relies on Domain Name System (DNS) to facilitate communication between its various components. Two essential tools for managing DNS within a Kubernetes cluster are <strong>CoreDNS</strong> and <strong>ExternalDNS</strong>. In this blog post, we will take a straightforward look at these tools, their functions, and how they can benefit your Kubernetes environment.</p>\n<h2 id=\"-how-coredns-and-externaldns-work\" style=\"position:relative;\"><a href=\"#-how-coredns-and-externaldns-work\" aria-label=\" how coredns and externaldns work permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ğŸ•¸ How CoreDNS and ExternalDNS Work</h2>\n<p>Kubernetes relies on the Domain Name System (DNS) to enable seamless communication between its various components, such as pods and services. When a new Kubernetes service is created, the platform automatically generates a DNS record for it, allowing other pods to easily locate and connect to the service. Kubernetes also offers support for <strong>ExternalDNS</strong>, which simplifies the process of creating and managing DNS records for services that need to be accessible externally. This makes it easier for external clients to access the services within the cluster.</p>\n<p>In simpler terms:</p>\n<ul>\n<li>Kubernetes uses DNS to help pods and services find and communicate with each other using hostnames.</li>\n<li>When a Kubernetes service is created, a DNS record is automatically generated for it.</li>\n<li>Kubernetes supports ExternalDNS, which helps manage DNS records for services that need to be accessible outside the cluster.</li>\n</ul>\n<h3 id=\"externaldns\" style=\"position:relative;\"><a href=\"#externaldns\" aria-label=\"externaldns permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ExternalDNS</h3>\n<p>In short, <strong>ExternalDNS</strong> is a pod running in your EKS cluster that watches over all your ingresses. When it detects an ingress with a host specified, it automatically picks up the hostname as well as the endpoint and creates a record for that resource in <a href=\"https://aws.amazon.com/route53/\" target=\"_blank\" rel=\"noopener noreferrer\">Route53</a>. If the host is changed or deleted, ExternalDNS will reflect the change immediately in Route53.</p>\n<p>This system allows for automatically creating and managing DNS records for services exposed externally with the supported DNS providers. It enables external clients to access the services running inside the cluster by resolving the service's hostname to the external IP address of the Kubernetes cluster.</p>\n<h3 id=\"coredns\" style=\"position:relative;\"><a href=\"#coredns\" aria-label=\"coredns permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>CoreDNS</h3>\n<p>This is a DNS server explicitly built for Kubernetes and is now the default DNS server in Kubernetes 1.14 and later. <strong>CoreDNS</strong> is a flexible, extensible DNS server that can perform service discovery and name resolution within the cluster, and with some configuration changes, it can leverage external DNS providers.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 6.470588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQklEQVR42h2LOw5AIQjA3v2vKSrE3yAmbH0JUzu0X2sNEWGMwVorOeeklIKqEhGcc9h7p5sZtdZs3J33Hvdeeu/5/t6jS1hd+/LxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"CoreDNS\" title=\"\" src=\"/static/e0e1e0f7b24457d00cbc355c32ad765f/c5bb3/coreDNS.png\" srcset=\"/static/e0e1e0f7b24457d00cbc355c32ad765f/04472/coreDNS.png 170w,\n/static/e0e1e0f7b24457d00cbc355c32ad765f/9f933/coreDNS.png 340w,\n/static/e0e1e0f7b24457d00cbc355c32ad765f/c5bb3/coreDNS.png 680w,\n/static/e0e1e0f7b24457d00cbc355c32ad765f/b12f7/coreDNS.png 1020w,\n/static/e0e1e0f7b24457d00cbc355c32ad765f/b5a09/coreDNS.png 1360w,\n/static/e0e1e0f7b24457d00cbc355c32ad765f/f4b34/coreDNS.png 1457w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2klEQVR42m2R16qGMBCE8/5vJ/besYuIFcv8TEDwHJyrTXYy+bIR930jSRJomgbbtmGaJnRdh+/7cBwHeZ5jXVeEYQhVVWXfsiz0fY9hGOQZ7tMbRRHEsiyySNNUBrmuKw/FcYwsy+B5nryQ/SAIoCgK2rZF0zSyz0Cu53kGswQJSEcDN7dtA6mv6wJFOhqLopAUDOAFXddh33ccx4G3RFmWkpD4FMMeveuqqmAYhqQnxHmef3yPV7zT3423SFHXtQziKDg/vuRL4j/Jl6Zpkp9CuucDxnH8DPwBG2THLwQf9rwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Ingress\" title=\"\" src=\"/static/a652aaa19f4b64fab1dbfd4628f736c0/c5bb3/ingress.png\" srcset=\"/static/a652aaa19f4b64fab1dbfd4628f736c0/04472/ingress.png 170w,\n/static/a652aaa19f4b64fab1dbfd4628f736c0/9f933/ingress.png 340w,\n/static/a652aaa19f4b64fab1dbfd4628f736c0/c5bb3/ingress.png 680w,\n/static/a652aaa19f4b64fab1dbfd4628f736c0/b12f7/ingress.png 1020w,\n/static/a652aaa19f4b64fab1dbfd4628f736c0/b5a09/ingress.png 1360w,\n/static/a652aaa19f4b64fab1dbfd4628f736c0/29007/ingress.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h3 id=\"why-externaldns-is-a-valuable-addition-to-k8s-cluster\" style=\"position:relative;\"><a href=\"#why-externaldns-is-a-valuable-addition-to-k8s-cluster\" aria-label=\"why externaldns is a valuable addition to k8s cluster permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Why ExternalDNS is a Valuable Addition to K8s Cluster</h3>\n<p>Kubernetes's built-in DNS system, known as Kube-DNS or CoreDNS, is responsible for resolving DNS names for Kubernetes services and pods within a cluster. However, organizations often opt for an external DNS system due to several advantages:</p>\n<ul>\n<li><strong>Advanced features</strong>: External DNS systems offer additional functionalities such as global load balancing, automatic failover, and DNS-based traffic management. They also include built-in security features like DNSSEC to protect against tampering and spoofing attacks, which are crucial for organizations managing traffic across multiple regions, handling high traffic loads, or managing sensitive data.</li>\n<li><strong>Consistent DNS infrastructure</strong>: An external DNS system allows organizations to maintain a consistent DNS infrastructure across all their applications, whether running on Kubernetes or not. This simplifies management and enhances security.</li>\n<li><strong>Granular control</strong>: External DNS provides granular and dynamic control over DNS records or text instructions stored on DNS servers. Its primary role is to act as a bridge, enabling the use of specialized DNS providers outside of Kubernetes. External DNS can handle millions of DNS records and offer more options for managing them.</li>\n<li><strong>Scalability</strong>: As the number of services and pods within a Kubernetes cluster grows, the Kube-DNS system can become a bottleneck. An external DNS system can handle a much larger number of DNS queries, ensuring that the DNS system does not become a bottleneck for the rest of the cluster.</li>\n<li><strong>Flexibility</strong>: Using External DNS with Kubernetes offers greater flexibility in the choice of DNS server types. Depending on your requirements and preferences, you can select from various open-source DNS options like CoreDNS, SkyDNS, or Knot DNS, as well as commercial DNS solutions such as <a href=\"https://cloud.google.com/dns\" target=\"_blank\" rel=\"noopener noreferrer\">Google Cloud DNS</a>, <a href=\"https://aws.amazon.com/route53/\" target=\"_blank\" rel=\"noopener noreferrer\">Amazon Route 53</a>, BIND, or Microsoft DNS.</li>\n</ul>\n<p>Integrating an external DNS system with Kubernetes provides organizations with a more advanced and flexible DNS infrastructure and management. It is a recommended practice to use an external DNS when deploying Kubernetes in production, as several popular external DNS providers can work with Kubernetes.</p>\n<h2 id=\"set-up-externaldns-in-the-eks-cluster\" style=\"position:relative;\"><a href=\"#set-up-externaldns-in-the-eks-cluster\" aria-label=\"set up externaldns in the eks cluster permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Set up ExternalDNS in the EKS Cluster</h2>\n<p>The setup can be divided into two parts: setting up permissions (to give your service access to Route53) and deploying the ExternalDNS.</p>\n<h3 id=\"ï¸-setting-up-route53-permissions-for-your-externaldns\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-setting-up-route53-permissions-for-your-externaldns\" aria-label=\"ï¸ setting up route53 permissions for your externaldns permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ğŸ› ï¸ Setting up Route53 Permissions for Your ExternalDNS</h3>\n<p>In this tutorial, we will make use of an IAM role with an ID provider.</p>\n<p>The main idea here is to give the ExternalDNS pod the permission to create, update, and delete Route53 records in your AWS account. To do so, we need to use an identity provider in the AWS IAM service. An identity provider allows an external user to assume roles in your AWS account by setting up a trust relationship.</p>\n<h4 id=\"setting-up-the-identity-provider\" style=\"position:relative;\"><a href=\"#setting-up-the-identity-provider\" aria-label=\"setting up the identity provider permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Setting up the Identity Provider</h4>\n<p>To create an identity provider, you need three things: a type of identity provider, an audience, and a provider URL.</p>\n<p>In this tutorial, we will use OpenID Connect for the provider type and <code class=\"language-text\">sts.amazonaws.com</code> for the audience. The provider URL varies; to get your provider URL, you can use the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">aws eks describe-cluster <span class=\"token parameter variable\">--name</span> <span class=\"token operator\">&lt;</span>CLUSTER_NAME<span class=\"token operator\">></span> <span class=\"token parameter variable\">--query</span> <span class=\"token string\">\"cluster.identity.oidc.issuer\"</span> <span class=\"token parameter variable\">--output</span> text</code></pre></div>\n<p>The output should look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">https://oidc.eks.<span class=\"token operator\">&lt;</span>region<span class=\"token operator\">></span>.amazonaws.com/id/EXAMPLE86F27C29EF05B482628D9790EA7066.</code></pre></div>\n<p>You now have everything you need to set up your identity provider! Head over to <a href=\"https://console.aws.amazon.com/iam/home?#/providers\" target=\"_blank\" rel=\"noopener noreferrer\">the identity provider section of IAM in the AWS console</a> and create a new provider.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42oWPUQ6DIBBEvf8ljbUCqQZBQFGx9FXTxqZJOx+EhX07s8W6rsaYYRiccymlnPO2bUqpsiybphFCcOErv3Q/qYgxAltr4adpOmDKtm0hwZZlCSHwhQ3TP2Bal13n2Zzeeyml2xNV1aWur1prXBjx7izylw54nmcSPXP5KG5adUa2fa066/zh/wtGLDKOI4F7Y1nM+0DBCoT9D9OHP3y/i1nswiPOJEopPQAuUVx3TokG9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"OIDC\" title=\"\" src=\"/static/34936790f09c523d255f1f0fc78c5f49/c5bb3/oidc.png\" srcset=\"/static/34936790f09c523d255f1f0fc78c5f49/04472/oidc.png 170w,\n/static/34936790f09c523d255f1f0fc78c5f49/9f933/oidc.png 340w,\n/static/34936790f09c523d255f1f0fc78c5f49/c5bb3/oidc.png 680w,\n/static/34936790f09c523d255f1f0fc78c5f49/b12f7/oidc.png 1020w,\n/static/34936790f09c523d255f1f0fc78c5f49/b5a09/oidc.png 1360w,\n/static/34936790f09c523d255f1f0fc78c5f49/29007/oidc.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Now that you have an identity provider, all that's left to do is create an IAM role with Route53 permissions and a trust relationship with your brand-new provider.</p>\n<p>First, create a new role in IAM and trust your provider by selecting Web Identity and inputting your provider information.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxklEQVR42o1Qyw6CMBDk/3/Iox/gwYQTMSFCMAb6lnYpGEqdluBV5zDZ3enso8U4jtbadV3jL2xbPF2elpawJoQQCpYhpez7HozS8fRAjCFseItQuzdc0EJOk1kqRUTLsmCLV4Yxxk/Ucl/e9a3pW2aZ26RxWgmsmVTvMaDoug5+rTXMCPZ0GAYlxbVW5/JZtazqTM188xjaphFCYEf409p6xFRCJ/A0Td8gVcmRczYR4Wd2FTzPMzScXTDOcSrPjJloGf/GBxExV7IOyaMBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Identity\" title=\"\" src=\"/static/2d236f25f2462608816e93ad54578c8f/c5bb3/identity.png\" srcset=\"/static/2d236f25f2462608816e93ad54578c8f/04472/identity.png 170w,\n/static/2d236f25f2462608816e93ad54578c8f/9f933/identity.png 340w,\n/static/2d236f25f2462608816e93ad54578c8f/c5bb3/identity.png 680w,\n/static/2d236f25f2462608816e93ad54578c8f/b12f7/identity.png 1020w,\n/static/2d236f25f2462608816e93ad54578c8f/b5a09/identity.png 1360w,\n/static/2d236f25f2462608816e93ad54578c8f/29007/identity.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Once this has been completed, click create a new policy and input the following in JSON:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2012-10-17\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Statement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Allow\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"route53:ChangeResourceRecordSets\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"arn:aws:route53:::hostedzone/*\"</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Allow\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"route53:ListHostedZones\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"route53:ListResourceRecordSets\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"*\"</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then attach the <a href=\"https://console.aws.amazon.com/iam/home?region=eu-west-3#/policies/arn%3Aaws%3Aiam%3A%3Aaws%3Apolicy%2FAmazonEKSClusterPolicy\" target=\"_blank\" rel=\"noopener noreferrer\">AmazonEKSClusterPolicy</a> to the role as well.</p>\n<p>Once the role is created, keep the ARN; you will need it later.</p>\n<h3 id=\"-installing-the-externaldns\" style=\"position:relative;\"><a href=\"#-installing-the-externaldns\" aria-label=\" installing the externaldns permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ğŸš€ Installing the ExternalDNS</h3>\n<p>We will install the ExternalDNS using Helm. If you do not have Helm installed on your machine, you can find instructions to <a href=\"https://helm.sh/docs/intro/install/\" target=\"_blank\" rel=\"noopener noreferrer\">install Helm</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">helm <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>RELEASE_NAME<span class=\"token operator\">></span> stable/external-dns <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">provider</span><span class=\"token operator\">=</span>aws <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> domainFilters<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>DOMAIN_FILTER<span class=\"token operator\">></span><span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">policy</span><span class=\"token operator\">=</span>sync <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">registry</span><span class=\"token operator\">=</span>txt <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">txtOwnerId</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>HOSTED_ZONE_ID<span class=\"token operator\">></span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">interval</span><span class=\"token operator\">=</span>3m <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">rbac.create</span><span class=\"token operator\">=</span>true <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> <span class=\"token assign-left variable\">rbac.serviceAccountName</span><span class=\"token operator\">=</span>external-dns <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--set</span> rbac.serviceAccountAnnotations.eks<span class=\"token punctuation\">\\</span>.amazonaws<span class=\"token punctuation\">\\</span>.com/role-arn<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>ROLE_ARN<span class=\"token operator\">></span></code></pre></div>\n<p>Where:</p>\n<ul>\n<li><code class=\"language-text\">RELEASE_NAME</code>: Name of the Helm release, can be anything you want (e.g., <code class=\"language-text\">external-dns</code>).</li>\n<li><code class=\"language-text\">DOMAIN_FILTER</code>: Name of your Route53 hosted zone. If <code class=\"language-text\">*.example.com</code>, it would be <code class=\"language-text\">example.com</code>. You can find information about the domain filter in the AWS console (Route53).</li>\n<li><code class=\"language-text\">HOSTED_ZONE_ID</code>: ID of your hosted zone in AWS. You can find this information in the AWS console (Route53).</li>\n<li><code class=\"language-text\">ROLE_ARN</code>: ARN of the role you created earlier in the tutorial.</li>\n</ul>\n<h3 id=\"-using-the-externaldns\" style=\"position:relative;\"><a href=\"#-using-the-externaldns\" aria-label=\" using the externaldns permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ğŸŒ Using the ExternalDNS</h3>\n<p>To create a new Route53 record for your services, all you need to do is add the annotation: <code class=\"language-text\">external-dns.alpha.kubernetes.io/hostname</code>.</p>\n<h4 id=\"example-of-a-loadbalancer-service\" style=\"position:relative;\"><a href=\"#example-of-a-loadbalancer-service\" aria-label=\"example of a loadbalancer service permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Example of a LoadBalancer Service:</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">external-dns.alpha.kubernetes.io/hostname</span><span class=\"token punctuation\">:</span> myservice.example.com \n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> LoadBalancer\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http\n        <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n    <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> test</code></pre></div>\n<h4 id=\"for-an-ingress\" style=\"position:relative;\"><a href=\"#for-an-ingress\" aria-label=\"for an ingress permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>For an Ingress:</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> extensions/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Ingress\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">alb.ingress.kubernetes.io/scheme</span><span class=\"token punctuation\">:</span> internet<span class=\"token punctuation\">-</span>facing\n        <span class=\"token key atrule\">external-dns.alpha.kubernetes.io/hostname</span><span class=\"token punctuation\">:</span> myservice.example.com \n        <span class=\"token key atrule\">kubernetes.io/ingress.class</span><span class=\"token punctuation\">:</span> alb\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">serviceName</span><span class=\"token punctuation\">:</span> test\n                    <span class=\"token key atrule\">servicePort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n                <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /</code></pre></div>\n<h2 id=\"-summary\" style=\"position:relative;\"><a href=\"#-summary\" aria-label=\" summary permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ğŸ“Œ Summary</h2>\n<p>The Kubernetes DNS system, CoreDNS, and ExternalDNS enable seamless communication within clusters. They create DNS records for Services and Pods, allowing consistent access via DNS names instead of IP addresses. Understanding and customizing DNS resolution is crucial for effective management within a Kubernetes cluster.</p>\n<hr>\n<br>\n<p><strong><em>Until next time, ã¤ã¥ã ğŸ‰</em></strong></p>\n<blockquote>\n<p>ğŸ’¡ Thank you for Reading !! ğŸ™ŒğŸ»ğŸ˜ğŸ“ƒ, see you in the next blog.ğŸ¤˜  <strong><em>Until next time ğŸ‰</em></strong></p>\n</blockquote>\n<p>ğŸš€ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>â™»ï¸ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>â™»ï¸ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end âœŒğŸ»</strong></p>\n<h1 align=\"center\">ğŸ”° Keep Learning !! Keep Sharing !! ğŸ”°</h1>\n<p><strong>ğŸ“… Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}