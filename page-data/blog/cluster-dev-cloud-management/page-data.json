{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/cluster-dev-cloud-management/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p><strong>Manage Cloud Infrastructures Declaratively â˜ï¸</strong></p>\n</blockquote>\n<h2 id=\"-introduction\" style=\"position:relative;\"><a href=\"#-introduction\" aria-label=\" introduction permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>ğŸ“™ Introduction</h2>\n<p>Have you ever wished for a single tool to manage all your cloud infrastructure needs?</p>\n<p><a href=\"https://cluster.dev/\" target=\"_blank\" rel=\"noopener noreferrer\">Cluster.dev</a> is one of these tools that will change the way you handle cloud-native infrastructures.</p>\n<p>In this blog post, we will explore the incredible features of Cluster.dev and how it simplifies the deployment, testing, and distribution of cloud-native components.</p>\n<p>Get ready to discover Cluster.dev and how it can make your infrastructure management a breeze.</p>\n<h2 id=\"-when-do-i-need-clusterdev\" style=\"position:relative;\"><a href=\"#-when-do-i-need-clusterdev\" aria-label=\" when do i need clusterdev permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>â“ When do I need Cluster.dev</h2>\n<p>If you have a common infrastructure pattern that contains multiple components stuck together, like a bunch of TF-modules or a set of K8s addons, you need to re-use this pattern inside your projects.\nIf you develop an infrastructure platform that you ship to other teams, and they need to launch new infrastructures from your template.\nIf you build a complex infrastructure that contains different technologies, and you need to perform integration testing to confirm the components' interoperability. After which you can promote the changes to the next environments.\nIf you are a software vendor and you need to deliver infrastructure deployment along with your software.</p>\n<h3 id=\"for-whom\" style=\"position:relative;\"><a href=\"#for-whom\" aria-label=\"for whom permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>For whom</h3>\n<p>The target audience is primarily infrastructure teams with a certain level of expertise, to whom Cluster.dev could simplify their daily routine: creating clusters, deploying services to the clusters, launching environments, sharing experience with development teams, etc.</p>\n<p>ğŸ’  <strong>Base concept diagrams</strong></p>\n<p>Stack templates are composed of <a href=\"https://docs.cluster.dev/units-overview/\" target=\"_blank\" rel=\"noopener noreferrer\">units</a> - Lego-like building blocks responsible for passing variables to a particular technology.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABiklEQVR42pVTPU/CUBR9IChIsQIBHRxJjAyEjaXg4MLowkbiYELi4O5i+jsYdeQHkOgACyGSMHc0sbUkECPftKHC9d5nSYgYqCc56U3Peaf3vd7H2G8sKnsMagKDpwCDsn9Nh5KXdcqoI8m7FYuXAwbgobIOEOxOp+fEz9k027OMi9fB4JS0BJR3uXcroB6M53LcqOu6ZBomECfjiQUIwzAfSCtBy0teR4HJQiFApaqq2dnMAkVRoFqt8kDLsijQHU+louyj4qBDNIXj8RNa1G63s5b1BaPRGHq9Pg+cz+ePZLuSZZ/jDostPHiEaZpn3U63+a5pTV3TGuqbqgz7w3vSZDpnp4E/f5rOqOZZ18HNNe5xFIghfCxobJDydZjdXUbYbS7KSkWRQcPP33PPHx/cADdyB3mIPLK5j3TZ2r/gEgQhKopiCGvqIoYUkT7kMTKyGppMJmOSJCW2hdIiwV4YWumORoWPVT6fpx2wdDp9k8lknjd2aG9VtGt6Lq9h0A5f+ggB3A352TeScL0D5jKWVAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"units\" title=\"\" src=\"/static/fcfca4177c21523518ad7da7dcee2417/c5bb3/units.png\" srcset=\"/static/fcfca4177c21523518ad7da7dcee2417/04472/units.png 170w,\n/static/fcfca4177c21523518ad7da7dcee2417/9f933/units.png 340w,\n/static/fcfca4177c21523518ad7da7dcee2417/c5bb3/units.png 680w,\n/static/fcfca4177c21523518ad7da7dcee2417/b12f7/units.png 1020w,\n/static/fcfca4177c21523518ad7da7dcee2417/b5a09/units.png 1360w,\n/static/fcfca4177c21523518ad7da7dcee2417/2cefc/units.png 1400w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>Templates define infrastructure patterns or even the whole platform.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVR42r1TTWgTQRR+TZqfTVs32VtABCEHqXjqIRIbllzWg3joYdBbwEOgXiQgXgMFvQXxUIuUohcPXRRFpWGTlhoCxcOqUHJpYrvZn8km0dSYlqiXjjPJFpbiScUHH9/Mzrf73vfmLYA7CIz9Ef5PkKofyIswkBI/TbaEaVIVLpDtyEWHZ4keOUMqQ2Z7phthk76jBUffIK5qhweqjz70ODY8gJDXJRxzeBxy9IzqZlTVFztaCwBLcDIiROUp+XPpdBCb5oJpmPl+r3/z8OBwcTAYpJtW82m3272292nvnq5pC5lMJuQUMg75LAfd4iL0158AfCutwr6yAnJegBnwIYQ4y2rOW5Z1u1Kp3NjZqa1ijJ9jbMvF4gYyDGvDtlvPqE6gCS41OvaVW0QLw0EBwWD9DsCPt1fhe1mCXdaPnOe44kQiMcW4Xq+ndN0ofen1JOZA1/UCTbYsSZJg6uaKZhhKtv0+Rhr23Z8Ne8lleZdZDiJRnKQVvWm32tVyoRBlPRNFkTXdW1aUszZufsAmfk0tMz0gInthv8TjVmvO6HSuw/ASWBy9OwXa4yDUHgTuf/0YXjaqwumtPAdylnPzw9525BFLTmR/rLYWiOJXIaC3/5uxoXbJ5uQIamiE470bysQIdP355RQtiDs3dzmaSqXOy7Ls/avRRc5YxePx+WQyWfyXv8UEz/NhtvoFLtQmHqVuYIkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"infra\" title=\"\" src=\"/static/b2a8795612c0ea58cce80a519382a614/c5bb3/infra.png\" srcset=\"/static/b2a8795612c0ea58cce80a519382a614/04472/infra.png 170w,\n/static/b2a8795612c0ea58cce80a519382a614/9f933/infra.png 340w,\n/static/b2a8795612c0ea58cce80a519382a614/c5bb3/infra.png 680w,\n/static/b2a8795612c0ea58cce80a519382a614/b12f7/infra.png 1020w,\n/static/b2a8795612c0ea58cce80a519382a614/b5a09/infra.png 1360w,\n/static/b2a8795612c0ea58cce80a519382a614/2cefc/infra.png 1400w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>ğŸ”¥ <strong>Features</strong></p>\n<ul>\n<li>Common variables, secrets, and templating for different technologies.</li>\n<li>Same GitOps Development experience for Terraform, Shell, Kubernetes.</li>\n<li>Could be used with any Cloud, On-premises or Hybrid scenarios.</li>\n<li>Encourage teams to follow technology best practices.</li>\n</ul>\n<p>ğŸ“Œ <strong>Differences between Cluster.dev and Terraform:</strong></p>\n<p>Cluster.dev improves on Terraform in a few key ways:</p>\n<ul>\n<li><strong>Relations:</strong> Terraform struggles with defining relationships between components, but Cluster.dev makes it easier, allowing you to trigger only what's needed.</li>\n<li><strong>Templating:</strong> Unlike Terraform, Cluster.dev supports templating, making it simpler to include or exclude modules like Jenkins Terraform.</li>\n<li><strong>External Tools:</strong> Terraform has limitations when using external tools, while Cluster.dev provides consistent support and integration for better control.</li>\n</ul>\n<p>Overall, Cluster.dev simplifies infrastructure management and addresses some limitations of Terraform.</p>\n<p>â” <strong>Why Infrastructure Templating is Essential:</strong></p>\n<p>In modern cloud-native settings, infrastructure templating plays a crucial role in simplifying the processes of developing and maintaining infrastructure. Here's why it's vital:</p>\n<ul>\n<li>Streamlines infrastructure development by establishing clear functional boundaries.</li>\n<li>Facilitates testing the interoperability of components, even if they employ different technologies.</li>\n<li>Enables the sharing of infrastructure patterns among team members.</li>\n<li>Allows the integration of infrastructure into the product, enhancing overall efficiency.</li>\n<li>Facilitates the division of responsibilities between Platform and SRE teams.</li>\n<li>Supports a comprehensive GitOps approach for all infrastructure components.</li>\n</ul>\n<p>Now, let's explore the primary use cases of infrastructure templating and examine the benefits it brings.</p>\n<p>Templating significantly simplifies tasks for DevOps and SRE teams, especially in deploying and testing within complex environments. So, what comprises infrastructure templates? Let's explore the essential building blocks necessary for creating an infrastructure template, starting with infrastructure layering:</p>\n<ul>\n<li><strong>Networking Layer:</strong> Involves VPCs, Peerings, VPNs, Security Groups, and Routing.</li>\n<li><strong>Permissions Layer:</strong> Encompasses IAM roles and user policies.</li>\n<li><strong>Infra and OS Layer:</strong> Encompasses server instance provisioning and operating system settings.</li>\n<li><strong>Data Management Layer:</strong> Includes Relational and NoSQL databases, caches, file and object storages.</li>\n<li><strong>Application Layer:</strong> Involves container orchestration, continuous delivery of applications, business applications and workloads, and infrastructure applications.</li>\n<li><strong>Observability Layer:</strong> Encompasses metric logs, tracing applications, and storages.</li>\n<li><strong>Configuration Layer:</strong> Involves declarative configuration storage, infrastructure state storages, and secret storages.</li>\n</ul>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42j2R2Y7jMAwE/f9ft1gMMj51+JAPyWeQOAGS1NIe7AjgCylVd1NRCIHGNYR+RCcGbTSlcRRFQX7pyFLFNE+s60rT1HStJ/7bYKzGmlruKfrKkMbfeGFFB9A5R98O6MyeQKNLyrLEqhZVGOZlZp4X6roWqJO+w3uPLSqUUgytE6FWhGeicRzp+o6hGygSjdKKPM+x1grAEcfJr8ND+Egz+J5t3bC5JU2T09n1emXbNqJDqaoqXN2Sf6sTaFRNlmWkeXHOlmX5iexqWieuY4ko88uf5oyscsPX14VejEWPx4P7/c6+79xvO9M0ymAghJEpeEapdd4IPki0QO8G6Y0y9/Sd53a7yduDsfN8Pone7zefz+e3DlAtro4YbWloZOGulM9JUnQqzi8a19ZU5c++X68Xx/n//h/nir1ySeMgzAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"layers\" title=\"\" src=\"/static/2fac83b032385e56f487120cb1fa55a2/c5bb3/layers.png\" srcset=\"/static/2fac83b032385e56f487120cb1fa55a2/04472/layers.png 170w,\n/static/2fac83b032385e56f487120cb1fa55a2/9f933/layers.png 340w,\n/static/2fac83b032385e56f487120cb1fa55a2/c5bb3/layers.png 680w,\n/static/2fac83b032385e56f487120cb1fa55a2/b12f7/layers.png 1020w,\n/static/2fac83b032385e56f487120cb1fa55a2/2bef9/layers.png 1024w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>ğŸ“š <strong>Conclusion:</strong></p>\n<p>Cluster.dev is a great tool that simplifies the management of cloud-native infrastructures. It uses simple declarative manifests, or stack templates, to enable users to describe and deploy entire infrastructures with a single tool. The platform's support for various technologies, powerful templating engine, GitOps-first approach, and cross-platform compatibility make it a versatile and adaptable solution for managing complex infrastructures. By consolidating previously disconnected infrastructure components under one roof, Cluster.dev enables efficient, one-shot deployment of entire stacks, saving time and effort on operating tasks and allowing teams to focus on code development.</p>\n<p>If you found this article helpful, please don't forget to hit the <strong>Follow</strong> ğŸ‘‰ and <strong>Clap</strong> ğŸ‘ buttons to help me write more articles like this.</p>\n<p><strong>Thank You ğŸ–¤</strong></p>\n<br>\n<p><strong><em>Until next time, ã¤ã¥ã ğŸ‰</em></strong></p>\n<blockquote>\n<p>ğŸ’¡ Thank you for Reading !! ğŸ™ŒğŸ»ğŸ˜ğŸ“ƒ, see you in the next blog.ğŸ¤˜  <strong><em>Until next time ğŸ‰</em></strong></p>\n</blockquote>\n<p>ğŸš€ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>â™»ï¸ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>â™»ï¸ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end âœŒğŸ»</strong></p>\n<h1 align=\"center\">ğŸ”° Keep Learning !! Keep Sharing !! ğŸ”°</h1>\n<p><strong>ğŸ“… Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>","timeToRead":3,"rawMarkdownBody":"\n> **Manage Cloud Infrastructures Declaratively â˜ï¸**\n\n## ğŸ“™ Introduction\n\nHave you ever wished for a single tool to manage all your cloud infrastructure needs?\n\n[Cluster.dev](https://cluster.dev/) is one of these tools that will change the way you handle cloud-native infrastructures.\n\nIn this blog post, we will explore the incredible features of Cluster.dev and how it simplifies the deployment, testing, and distribution of cloud-native components.\n\nGet ready to discover Cluster.dev and how it can make your infrastructure management a breeze.\n\n## â“ When do I need Cluster.dev\n\nIf you have a common infrastructure pattern that contains multiple components stuck together, like a bunch of TF-modules or a set of K8s addons, you need to re-use this pattern inside your projects.\nIf you develop an infrastructure platform that you ship to other teams, and they need to launch new infrastructures from your template.\nIf you build a complex infrastructure that contains different technologies, and you need to perform integration testing to confirm the components' interoperability. After which you can promote the changes to the next environments.\nIf you are a software vendor and you need to deliver infrastructure deployment along with your software.\n\n### For whom\n\nThe target audience is primarily infrastructure teams with a certain level of expertise, to whom Cluster.dev could simplify their daily routine: creating clusters, deploying services to the clusters, launching environments, sharing experience with development teams, etc.\n\nğŸ’  **Base concept diagrams**\n\nStack templates are composed of [units](https://docs.cluster.dev/units-overview/) - Lego-like building blocks responsible for passing variables to a particular technology.\n\n![units](./units.png)\n\nTemplates define infrastructure patterns or even the whole platform.\n\n![infra](./infra.png)\n\nğŸ”¥ **Features**\n\n- Common variables, secrets, and templating for different technologies.\n- Same GitOps Development experience for Terraform, Shell, Kubernetes.\n- Could be used with any Cloud, On-premises or Hybrid scenarios.\n- Encourage teams to follow technology best practices.\n\nğŸ“Œ **Differences between Cluster.dev and Terraform:**\n\nCluster.dev improves on Terraform in a few key ways:\n\n- **Relations:** Terraform struggles with defining relationships between components, but Cluster.dev makes it easier, allowing you to trigger only what's needed.\n- **Templating:** Unlike Terraform, Cluster.dev supports templating, making it simpler to include or exclude modules like Jenkins Terraform.\n- **External Tools:** Terraform has limitations when using external tools, while Cluster.dev provides consistent support and integration for better control.\n\nOverall, Cluster.dev simplifies infrastructure management and addresses some limitations of Terraform.\n\nâ” **Why Infrastructure Templating is Essential:**\n\nIn modern cloud-native settings, infrastructure templating plays a crucial role in simplifying the processes of developing and maintaining infrastructure. Here's why it's vital:\n\n- Streamlines infrastructure development by establishing clear functional boundaries.\n- Facilitates testing the interoperability of components, even if they employ different technologies.\n- Enables the sharing of infrastructure patterns among team members.\n- Allows the integration of infrastructure into the product, enhancing overall efficiency.\n- Facilitates the division of responsibilities between Platform and SRE teams.\n- Supports a comprehensive GitOps approach for all infrastructure components.\n\nNow, let's explore the primary use cases of infrastructure templating and examine the benefits it brings.\n\nTemplating significantly simplifies tasks for DevOps and SRE teams, especially in deploying and testing within complex environments. So, what comprises infrastructure templates? Let's explore the essential building blocks necessary for creating an infrastructure template, starting with infrastructure layering:\n\n- **Networking Layer:** Involves VPCs, Peerings, VPNs, Security Groups, and Routing.\n- **Permissions Layer:** Encompasses IAM roles and user policies.\n- **Infra and OS Layer:** Encompasses server instance provisioning and operating system settings.\n- **Data Management Layer:** Includes Relational and NoSQL databases, caches, file and object storages.\n- **Application Layer:** Involves container orchestration, continuous delivery of applications, business applications and workloads, and infrastructure applications.\n- **Observability Layer:** Encompasses metric logs, tracing applications, and storages.\n- **Configuration Layer:** Involves declarative configuration storage, infrastructure state storages, and secret storages.\n\n![layers](./layers.png)\n\nğŸ“š **Conclusion:**\n\nCluster.dev is a great tool that simplifies the management of cloud-native infrastructures. It uses simple declarative manifests, or stack templates, to enable users to describe and deploy entire infrastructures with a single tool. The platform's support for various technologies, powerful templating engine, GitOps-first approach, and cross-platform compatibility make it a versatile and adaptable solution for managing complex infrastructures. By consolidating previously disconnected infrastructure components under one roof, Cluster.dev enables efficient, one-shot deployment of entire stacks, saving time and effort on operating tasks and allowing teams to focus on code development.\n\nIf you found this article helpful, please don't forget to hit the **Follow** ğŸ‘‰ and **Clap** ğŸ‘ buttons to help me write more articles like this.\n\n**Thank You ğŸ–¤**\n\n<br>\n\n**_Until next time, ã¤ã¥ã ğŸ‰_**\n\n> ğŸ’¡ Thank you for Reading !! ğŸ™ŒğŸ»ğŸ˜ğŸ“ƒ, see you in the next blog.ğŸ¤˜  **_Until next time ğŸ‰_**\n\nğŸš€ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:\n\n**â™»ï¸ LinkedIn:** https://www.linkedin.com/in/rajhi-saif/\n\n**â™»ï¸ X/Twitter:** https://x.com/rajhisaifeddine\n\n**The end âœŒğŸ»**\n\n<h1 align=\"center\">ğŸ”° Keep Learning !! Keep Sharing !! ğŸ”°</h1>\n\n**ğŸ“… Stay updated**\n\nSubscribe to our newsletter for more insights on AWS cloud computing and containers.\n","wordCount":{"words":777},"frontmatter":{"id":"384464547971f7b27e444dd3","path":"/blog/cluster-dev-cloud-management/","humanDate":"Oct 29, 2024","fullDate":"2024-10-29","title":"Discover Cluster.dev: A Simple Solution for Cloud Infrastructure Management â˜ï¸","keywords":["Cloud-native","AWS","Kubernetes","Infrastructure as Code","DevOps"],"excerpt":"Explore how Cluster.dev simplifies cloud infrastructure management with declarative configurations, making it easier to manage AWS and Kubernetes environments.","cover":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHizspgK//EABkQAAMBAQEAAAAAAAAAAAAAAAABAgMREv/aAAgBAQABBQLPN6HPLI0qB02z/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAEDAQE/Aax//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAABARIf/aAAgBAQAGPwLCRYVf/8QAGRABAQADAQAAAAAAAAAAAAAAAREAECFR/9oACAEBAAE/IXmbMaFTqz7xAnrr/9oADAMBAAIAAwAAABCkD//EABgRAAIDAAAAAAAAAAAAAAAAAAEQESEx/9oACAEDAQE/EBdOL//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExEEGB/9oACAEBAAE/EAmkbc1FMhwj0+R3MhgbWXH52KvH/9k="},"images":{"fallback":{"src":"/static/f669cc6cabf798d30b4d4d2a075c2e4d/baf97/clusterdev-cover.jpg","srcSet":"/static/f669cc6cabf798d30b4d4d2a075c2e4d/baf97/clusterdev-cover.jpg 597w","sizes":"100vw"},"sources":[{"srcSet":"/static/f669cc6cabf798d30b4d4d2a075c2e4d/35cd4/clusterdev-cover.webp 597w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6465661641541038}}},"coverCredits":"Photo by Saifeddine Rajhi"}}},"pageContext":{"prevThought":{"frontmatter":{"path":"/blog/hidden-gems-kubernetes/","title":"Hidden Gems: A Few Things You Might Not Know About Kubernetes ğŸ’","date":"2024-10-29 20:30:00"},"excerpt":"Lesser-Known Aspects of Kubernetes ğŸ’ Overview ğŸ‘€ Kubernetes has revolutionized the way we manage containerized applications, but it'sâ€¦","html":"<blockquote>\n<p><strong>Lesser-Known Aspects of Kubernetes ğŸ’</strong></p>\n</blockquote>\n<h2 id=\"overview-\" style=\"position:relative;\"><a href=\"#overview-\" aria-label=\"overview  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Overview ğŸ‘€</h2>\n<p>Kubernetes has revolutionized the way we manage containerized applications, but it's packed with hidden features that even experienced users might not be aware of.</p>\n<p>Let's dive into a few of these hidden gems and discover the lesser-known capabilities of Kubernetes.</p>\n<p>I hope this blog post has been helpful.</p>\n<h2 id=\"sorting-and-organizing-your-pods-\" style=\"position:relative;\"><a href=\"#sorting-and-organizing-your-pods-\" aria-label=\"sorting and organizing your pods  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Sorting and Organizing Your Pods ğŸ“‹</h2>\n<p>Ever wished you could organize your pod list in a more meaningful way? With Kubernetes, you can! Simply use the <code class=\"language-text\">--sort-by</code> flag along with the <code class=\"language-text\">kubectl get pods</code> command to sort your pods by various criteria, such as pod name or creation time.</p>\n<p>Running <code class=\"language-text\">kubectl get pods --sort-by=.metadata.name</code> might just save you from endless scrolling through your pod list. Let's sort the pods in descending order, i.e., with the newest pods appearing first:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pods --sort-by<span class=\"token operator\">=</span>.metadata.creationTimestamp --no-headers <span class=\"token operator\">|</span> <span class=\"token function\">tail</span> <span class=\"token parameter variable\">-r</span>\nubuntu-pod-3             <span class=\"token number\">2</span>/2     Running   <span class=\"token number\">0</span>          5m17s\nubuntu-pod-2             <span class=\"token number\">2</span>/2     Running   <span class=\"token number\">0</span>          13m7s\nubuntu-pod-1             <span class=\"token number\">2</span>/2     Running   <span class=\"token number\">0</span>          26m</code></pre></div>\n<h2 id=\"listing-all-object-types-\" style=\"position:relative;\"><a href=\"#listing-all-object-types-\" aria-label=\"listing all object types  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Listing All Object Types ğŸ“œ</h2>\n<p>Did you know you can list all the object types that your cluster supports? Use the <code class=\"language-text\">kubectl api-resources</code> command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl api-resources</code></pre></div>\n<p>When we want a more encompassing list of all resources in a namespace, we can combine the <code class=\"language-text\">kubectl api-resources</code> command with <code class=\"language-text\">kubectl get</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl api-resources <span class=\"token parameter variable\">--verbs</span><span class=\"token operator\">=</span>list <span class=\"token parameter variable\">--namespaced</span> <span class=\"token parameter variable\">-o</span> name <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token parameter variable\">-n</span> <span class=\"token number\">1</span> kubectl get --ignore-not-found --show-kind <span class=\"token parameter variable\">-n</span> <span class=\"token operator\">&lt;</span>namespace<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">kubectl api-resources --verbs=list --namespaced -o name</code> retrieves all namespaced API resource types that support the list API verb. Then it outputs their names. Those names are then redirected to <code class=\"language-text\">xargs</code> as standard input.</p>\n<p><a href=\"https://www.baeldung.com/linux/xargs-multiple-arguments\" target=\"_blank\" rel=\"noopener noreferrer\"><code class=\"language-text\">xargs -n 1</code></a> singly passes each of those names as initial arguments to <code class=\"language-text\">kubectl get --ignore-not-found --show-kind -n &lt;namespace></code>. Then, the <code class=\"language-text\">kubectl get</code> command returns a list of resources belonging to each resource type in the specified namespace.</p>\n<h2 id=\"default-resources-and-limits-with-limitrange-and-resourcequotas-\" style=\"position:relative;\"><a href=\"#default-resources-and-limits-with-limitrange-and-resourcequotas-\" aria-label=\"default resources and limits with limitrange and resourcequotas  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Default Resources and Limits with LimitRange and ResourceQuotas ğŸš¦</h2>\n<p>In Kubernetes, namespaces provide a mechanism for isolating groups of resources within a single cluster. Namespaces are a way to divide cluster resources into groups for multiple users (via resource-quota). Each namespace will have one or multiple containers running inside it.</p>\n<p>After creating a namespace for each team within the cluster, consider that what if one team, i.e., namespace, consumes more resources from the cluster like CPU and memory, and other teams' resources starve for resources as the cluster has a very limited amount of available hardware resources. This creates a noisy neighbor problem within the cluster.</p>\n<p>To avoid this, as an administrator, first, you create a namespace within the cluster, and then you can use ResourceQuota and LimitRange to assign resource quotas on namespaces and set limits for containers running inside any namespace.</p>\n<h3 id=\"resource-quotas\" style=\"position:relative;\"><a href=\"#resource-quotas\" aria-label=\"resource quotas permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Resource Quotas</h3>\n<p>After creating namespaces, we can use the ResourceQuota object to limit the total amount of resources used by the namespace. We can use ResourceQuota to set limits for different object types that can be created within a namespace along with setting quotas for resources like CPU and memory.</p>\n<p>A ResourceQuota for setting a quota on resources looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ResourceQuota\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> teamx<span class=\"token punctuation\">-</span>resource<span class=\"token punctuation\">-</span>quota\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> teamx\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">hard</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">limits.cpu</span><span class=\"token punctuation\">:</span> 150m\n        <span class=\"token key atrule\">limits.memory</span><span class=\"token punctuation\">:</span> 600Mi\n        <span class=\"token key atrule\">requests.cpu</span><span class=\"token punctuation\">:</span> 150m\n        <span class=\"token key atrule\">requests.memory</span><span class=\"token punctuation\">:</span> 600Mi</code></pre></div>\n<ul>\n<li><code class=\"language-text\">limits.cpu</code> is the maximum CPU limit for all the containers in the Namespace, i.e., the entire namespace.</li>\n<li><code class=\"language-text\">limits.memory</code> is the maximum Memory limit for all containers in the Namespace, i.e., the entire namespace.</li>\n<li><code class=\"language-text\">requests.cpu</code> is the maximum CPU requests for all the containers in the Namespace. As per the above YAML, the total requested CPU in the Namespace should be less than 150m.</li>\n<li><code class=\"language-text\">requests.memory</code> is the maximum Memory requests for all the containers in the Namespace. As per the above YAML, the total requested memory in the namespace should be less than 600Mi.</li>\n</ul>\n<h3 id=\"limitrange-for-containers\" style=\"position:relative;\"><a href=\"#limitrange-for-containers\" aria-label=\"limitrange for containers permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>LimitRange for Containers</h3>\n<p>We can create a LimitRange object in our Namespace which can be used to set limits on resources on containers running within the namespace. This is used to provide default limit values for Pods which do not specify this value themselves to equally distribute resources within a namespace.</p>\n<p>A LimitRange provides constraints that can:</p>\n<ul>\n<li>Apply minimum and maximum CPU resources usage limit per Pod or Container in a namespace.</li>\n<li>Apply minimum and maximum memory request limit per PersistentVolumeClaim in a namespace.</li>\n<li>Apply minimum and maximum CPU resources usage limit per Pod or Container in a namespace.</li>\n<li>Set default request/limit for resources within a namespace and then automatically set the limits to Containers at runtime.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> LimitRange\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> teamx<span class=\"token punctuation\">-</span>limit<span class=\"token punctuation\">-</span>range\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n        <span class=\"token key atrule\">defaultRequest</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n        <span class=\"token key atrule\">max</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n        <span class=\"token key atrule\">min</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n        <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Container</code></pre></div>\n<p>The above YAML file has 4 sections: <code class=\"language-text\">max</code>, <code class=\"language-text\">min</code>, <code class=\"language-text\">default</code>, and <code class=\"language-text\">defaultRequest</code>.</p>\n<ul>\n<li>The <code class=\"language-text\">default</code> section will set up the default limits for a container in a pod. Any container with no limits defined will get these values assigned as default.</li>\n<li>The <code class=\"language-text\">defaultRequest</code> section will set up the default requests for a container in a pod. Any container with no requests defined will get these values assigned as default.</li>\n<li>The <code class=\"language-text\">max</code> section will set up the maximum limits that a container in a Pod can set. The value specified in the <code class=\"language-text\">default</code> section cannot be higher than this value.</li>\n<li>The <code class=\"language-text\">min</code> section will set up the minimum requests that a container in a Pod can set. The value specified in the <code class=\"language-text\">defaultRequest</code> section cannot be lower than this value.</li>\n</ul>\n<h2 id=\"kubectl-debug\" style=\"position:relative;\"><a href=\"#kubectl-debug\" aria-label=\"kubectl debug permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>kubectl debug</h2>\n<p>One of the most forgotten but powerful <code class=\"language-text\">kubectl</code> commands is <code class=\"language-text\">debug</code>. It allows you to create a sidecar container on any pod, copy a pod to a new instance for debugging, and even access the pod's filesystem.</p>\n<h3 id=\"debugging-a-node-ï¸\" style=\"position:relative;\"><a href=\"#debugging-a-node-%EF%B8%8F\" aria-label=\"debugging a node ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Debugging a Node ğŸ–¥ï¸</h3>\n<p>Use the <code class=\"language-text\">kubectl debug node</code> command to deploy a Pod to a Node that you want to troubleshoot. This command is helpful in scenarios where you can't access your Node by using an SSH connection. When the Pod is created, the Pod opens an interactive shell on the Node. To create an interactive shell on a Node named <code class=\"language-text\">mynode</code>, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl debug node/mynode <span class=\"token parameter variable\">-ti</span> <span class=\"token parameter variable\">--image</span><span class=\"token operator\">=</span>ubuntu -- <span class=\"token function\">chroot</span> /host <span class=\"token function\">bash</span></code></pre></div>\n<h3 id=\"adding-ephemeral-containers-\" style=\"position:relative;\"><a href=\"#adding-ephemeral-containers-\" aria-label=\"adding ephemeral containers  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Adding Ephemeral Containers ğŸ³</h3>\n<p>You can also use the <code class=\"language-text\">kubectl debug</code> command to add ephemeral containers to a running Pod for debugging.</p>\n<p>First, create a pod for the example:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl run ephemeral-demo <span class=\"token parameter variable\">--image</span><span class=\"token operator\">=</span>registry.k8s.io/pause:3.1 <span class=\"token parameter variable\">--restart</span><span class=\"token operator\">=</span>Never</code></pre></div>\n<p>The examples in this section use the <a href=\"https://registry.k8s.io/pause:3.1\" target=\"_blank\" rel=\"noopener noreferrer\">pause container image</a> because it does not contain debugging utilities, but this method works with all container images. If you attempt to use <code class=\"language-text\">kubectl exec</code> to create a shell, you will see an error because there is no shell in this container image.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> ephemeral-demo -- <span class=\"token function\">sh</span>\nOCI runtime <span class=\"token builtin class-name\">exec</span> failed: <span class=\"token builtin class-name\">exec</span> failed: container_linux.go:346: starting container process caused <span class=\"token string\">\"exec: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>sh<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: executable file not found in <span class=\"token environment constant\">$PATH</span>\"</span><span class=\"token builtin class-name\">:</span> unknown</code></pre></div>\n<p>You can instead add a debugging container using <code class=\"language-text\">kubectl debug</code>. If you specify the <code class=\"language-text\">-i/--interactive</code> argument, <code class=\"language-text\">kubectl</code> will automatically attach to the console of the Ephemeral Container.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl debug <span class=\"token parameter variable\">-it</span> ephemeral-demo <span class=\"token parameter variable\">--image</span><span class=\"token operator\">=</span>busybox:1.28 <span class=\"token parameter variable\">--target</span><span class=\"token operator\">=</span>ephemeral-demo\nDefaulting debug container name to debugger-8xzrl.\nIf you don't see a <span class=\"token builtin class-name\">command</span> prompt, try pressing enter.\n/ <span class=\"token comment\">#</span></code></pre></div>\n<p>This command adds a new <code class=\"language-text\">busybox</code> container and attaches to it. The <code class=\"language-text\">--target</code> parameter targets the process namespace of another container. It's necessary here because <code class=\"language-text\">kubectl run</code> does not enable process namespace sharing in the pod it creates.</p>\n<h2 id=\"krew-the-plugin-marketplace-\" style=\"position:relative;\"><a href=\"#krew-the-plugin-marketplace-\" aria-label=\"krew the plugin marketplace  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Krew: The Plugin Marketplace ğŸš€</h2>\n<p>There's a massive marketplace of Kubectl plugins that can extend its functionality and make your life easier. Meet <a href=\"https://krew.sigs.k8s.io/docs/user-guide/setup/install/\" target=\"_blank\" rel=\"noopener noreferrer\">Krew</a>:</p>\n<p>Krew is the plugin manager for the <code class=\"language-text\">kubectl</code> command-line tool.</p>\n<p>Krew helps you:</p>\n<ul>\n<li>Discover <a href=\"https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/\" target=\"_blank\" rel=\"noopener noreferrer\">kubectl plugins</a>,</li>\n<li>Install them on your machine,</li>\n<li>And keep the installed plugins up-to-date.</li>\n</ul>\n<p>There are 225 kubectl plugins currently distributed on Krew. Krew works across all major platforms, like macOS, Linux, and Windows.</p>\n<h2 id=\"prow-cicd-for-kubernetes-ï¸\" style=\"position:relative;\"><a href=\"#prow-cicd-for-kubernetes-%EF%B8%8F\" aria-label=\"prow cicd for kubernetes ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Prow: CI/CD for Kubernetes âš™ï¸</h2>\n<p>Kubernetes' Project CI/CD is powered by <a href=\"http://prow.k8s.io\" target=\"_blank\" rel=\"noopener noreferrer\">Prow</a>, an open-source CI system that can scale to hundreds of thousands of jobs.</p>\n<p>The Kubernetes Testing SIG describes Prow as \"a CI/CD system built on Kubernetes for Kubernetes that executes jobs for building, testing, publishing, and deploying.\" However, that description does not highlight perhaps the most important inferred capability of Prowâ€Šâ€”â€Ša capability that is at the heart of best-of-breed CI/CD automation toolsâ€Šâ€”â€Šthat capability is automation that starts with code commits. In the case of Prow, it starts with a scalable stateless microservice called <a href=\"https://github.com/kubernetes/test-infra/blob/master/prow/cmd/README.md#core-components\" target=\"_blank\" rel=\"noopener noreferrer\">hook</a> that triggers native K8s CI/CD jobs (among a number of things that hook does via <a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins\" target=\"_blank\" rel=\"noopener noreferrer\">plugins</a>).</p>\n<p>It is this GitHub automation capability that has been one of the key reasons why other K8s projects have adopted Prow for their own CI/CD. But Prow is more than just GitHub webhook automation and CI/CD job execution. Prow is also:</p>\n<ul>\n<li><strong>Comprehensive GitHub Automation</strong></li>\n<li><strong>ChatOps</strong> <a href=\"https://prow.k8s.io/command-help\" target=\"_blank\" rel=\"noopener noreferrer\">via simple /foo commands</a></li>\n<li><strong>Fine-grained GitHub policy and permission management</strong> via <a href=\"https://github.com/kubernetes/community/blob/master/contributors/guide/owners.md\" target=\"_blank\" rel=\"noopener noreferrer\">OWNERS files</a></li>\n<li><strong>GitHub PR/merge automation</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/tide\" target=\"_blank\" rel=\"noopener noreferrer\">tide</a></li>\n<li><strong>GitHub API request cache</strong> to minimize the impact of GitHub API limitsâ€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/ghproxy\" target=\"_blank\" rel=\"noopener noreferrer\">ghProxy</a></li>\n<li><strong>GitHub Organization and repository membership and permissions management</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/peribolos\" target=\"_blank\" rel=\"noopener noreferrer\">peribolos</a></li>\n<li><strong>GitHub labels management</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/label\" target=\"_blank\" rel=\"noopener noreferrer\">label plugin</a></li>\n<li><strong>GitHub branch protection configuration</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/branchprotector\" target=\"_blank\" rel=\"noopener noreferrer\">branchprotector</a></li>\n<li><strong>GitHub release notes management</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/releasenote\" target=\"_blank\" rel=\"noopener noreferrer\">releasenote</a></li>\n<li><strong>Scalable, cacheable</strong> <a href=\"https://github.com/kubernetes/test-infra/blob/master/prow/scaling.md#github-api-cache\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub API cache</a></li>\n<li><strong>GitHub bot</strong> with <a href=\"https://github.com/k8s-ci-robot\" target=\"_blank\" rel=\"noopener noreferrer\">Prow's bot being an active GitHub user since 2016</a></li>\n<li><strong>Multi-engine CI/CD Job Execution</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/plank\" target=\"_blank\" rel=\"noopener noreferrer\">plank</a></li>\n<li><strong>CI/CD Reporting</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/crier\" target=\"_blank\" rel=\"noopener noreferrer\">crier</a></li>\n<li><strong>CI/CD Dashboards</strong> for viewing job history, merge status, and moreâ€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/cmd/deck\" target=\"_blank\" rel=\"noopener noreferrer\">deck</a></li>\n<li><strong>Pluggable Artifact Viewer</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/spyglass\" target=\"_blank\" rel=\"noopener noreferrer\">Spyglass</a></li>\n<li><strong>Prometheus Metrics</strong> for monitoring and alertingâ€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/metrics\" target=\"_blank\" rel=\"noopener noreferrer\">metrics</a></li>\n<li><strong>Config-as-Code for Its Own Configuration</strong>â€Šâ€”â€Š<a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/updateconfig\" target=\"_blank\" rel=\"noopener noreferrer\">updateconfig</a></li>\n</ul>\n<p>And I am sure I am still missing a bunch of thingsâ€Šâ€”â€Šlike <a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/cat\" target=\"_blank\" rel=\"noopener noreferrer\">cats</a> and <a href=\"https://github.com/kubernetes/test-infra/tree/master/prow/plugins/dog\" target=\"_blank\" rel=\"noopener noreferrer\">dogs</a>.</p>\n<h2 id=\"extending-kubernetes-api-\" style=\"position:relative;\"><a href=\"#extending-kubernetes-api-\" aria-label=\"extending kubernetes api  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Extending Kubernetes API ğŸš€</h2>\n<p>Did you know you can extend the Kubernetes API itself? Meet the <a href=\"https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubernetes API Aggregator Layer</a>, a powerful tool for introducing subresources or aggregating them, like the custom metrics server.</p>\n<p>The aggregation layer enables installing additional Kubernetes-style APIs in your cluster. These can either be pre-built, existing 3rd party solutions, such as <a href=\"https://github.com/kubernetes-incubator/service-catalog/blob/master/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">service-catalog</a>, or user-created APIs like <a href=\"https://github.com/kubernetes-incubator/apiserver-builder/blob/master/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">apiserver-builder</a>, which can get you started.</p>\n<h2 id=\"auto-provisioning-namespaces-ï¸\" style=\"position:relative;\"><a href=\"#auto-provisioning-namespaces-%EF%B8%8F\" aria-label=\"auto provisioning namespaces ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Auto-Provisioning Namespaces ğŸ› ï¸</h2>\n<p>There's an easy way to auto-provision namespaces without giving extra permissions to your users. Use the <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#namespaceautoprovision\" target=\"_blank\" rel=\"noopener noreferrer\">NamespaceAutoProvision Admission controller</a>.</p>\n<p>This admission controller examines all incoming requests on namespaced resources and checks if the referenced namespace exists. It creates a namespace if it cannot be found. This admission controller is useful in deployments that do not want to restrict the creation of a namespace prior to its usage.</p>\n<h2 id=\"enforcing-customrules\" style=\"position:relative;\"><a href=\"#enforcing-customrules\" aria-label=\"enforcing customrules permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Enforcing CustomÂ Rules</h2>\n<p>Kubernetes offers a simple way to intercept and validate requests with ValidatingAdmissionWebhooks and MutatingAdmissionWebhooks.</p>\n<p><a href=\"https://github.com/slackhq/simple-kubernetes-webhook\" target=\"_blank\" rel=\"noopener noreferrer\">This</a> is a simple <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubernetes admission webhook</a>. It is meant to be used as a validating and mutating admission webhook only and does not support any controller logic.</p>\n<p>It has been developed as a simple Go web service without using any framework or <code class=\"language-text\">boilerplate</code> such as <code class=\"language-text\">kubebuilder</code>.</p>\n<p>This project is aimed at illustrating how to build a fully functioning admission webhook in the simplest way possible. Most existing examples found on the web rely on heavy machinery using powerful frameworks, yet fail to illustrate how to implement a lightweight webhook that can do much-needed actions such as rejecting a pod for compliance reasons or injecting helpful environment variables.</p>\n<h2 id=\"dynamic-resource-allocation-\" style=\"position:relative;\"><a href=\"#dynamic-resource-allocation-\" aria-label=\"dynamic resource allocation  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Dynamic Resource Allocation ğŸš€</h2>\n<p>Allocate resources outside your cluster with Dynamic <a href=\"https://kubernetes.io/blog/2022/12/15/dynamic-resource-allocation/\" target=\"_blank\" rel=\"noopener noreferrer\">Resource Allocation</a>. Since K8s v1.26, use <strong>ResourceClass</strong> and <strong>ResourceClaims</strong> to extend offerings beyond the cluster.</p>\n<p>In contrast to native resources (such as CPU or RAM) and <a href=\"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#extended-resources\" target=\"_blank\" rel=\"noopener noreferrer\">extended resources</a> (managed by a device plugin, advertised by kubelet), the scheduler has no knowledge of what dynamic resources are available in a cluster or how they could be split up to satisfy the requirements of a specific ResourceClaim. Resource drivers are responsible for that.</p>\n<p>Drivers mark <strong>ResourceClaims</strong> as allocated once resources for it are reserved. This also then tells the scheduler where in the cluster a claimed resource is actually available.</p>\n<p><strong>ResourceClaims</strong> can get resources allocated as soon as the ResourceClaim is created (immediate allocation), without considering which Pods will use the resource. The default (wait for first consumer) is to delay allocation until a Pod that relies on the ResourceClaim becomes eligible for scheduling. This design with two allocation options is similar to how Kubernetes handles storage provisioning with PersistentVolumes and PersistentVolumeClaims.</p>\n<h2 id=\"managing-requests-in-the-kubernetes-api-\" style=\"position:relative;\"><a href=\"#managing-requests-in-the-kubernetes-api-\" aria-label=\"managing requests in the kubernetes api  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Managing Requests in the Kubernetes API ğŸ“œ</h2>\n<p>In Kubernetes, request queue management is handled by <a href=\"https://kubernetes.io/docs/concepts/cluster-administration/flow-control\" target=\"_blank\" rel=\"noopener noreferrer\">API Priority and Fairness (APF)</a>. It is enabled by default in Kubernetes 1.20 and beyond. The API server also provides two parameters, <code class=\"language-text\">--max-requests-inflight</code> (default is 400) and <code class=\"language-text\">--max-mutating-requests-inflight</code> (default is 200), for limiting the number of requests. If APF is enabled, both of these parameters are summed upâ€Šâ€”â€Šand that's how the API server's total concurrency limit is defined.</p>\n<p>That said, there are some finer details to account for:</p>\n<ul>\n<li>Long-running API requests (e.g., viewing logs or executing commands in a pod) are not subject to APF limits, and neither are WATCH requests.</li>\n<li>There is also a special predefined priority level called exempt. Requests from this level are processed immediately.</li>\n</ul>\n<p>So you can fine-tune how the Kubernetes API server queues and handles requests to prioritize essential requests and manage latency effectively.</p>\n<h3 id=\"api-priority-with-code-classlanguage-textkubectlcode\" style=\"position:relative;\"><a href=\"#api-priority-with-code-classlanguage-textkubectlcode\" aria-label=\"api priority with code classlanguage textkubectlcode permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>API Priority with <code class=\"language-text\">kubectl</code></h3>\n<p>You can explore how busy your Kubernetes API server is by examining the Priority Level queue. With the APIPriorityAndFairness feature enabled, the kube-apiserver serves the following additional paths at its HTTP(S) ports. You need to ensure you have permissions to access these endpoints. You don't have to do anything if you are using admin. Permissions can be granted if needed following the RBAC doc to access <code class=\"language-text\">/debug/api_priority_and_fairness/</code> by specifying nonResourceURLs.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">/debug/api_priority_and_fairness/dump_priority_levels</code> - a listing of all the priority levels and the current state of each. You can fetch like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get <span class=\"token parameter variable\">--raw</span> /debug/api_priority_and_fairness/dump_priority_levels</code></pre></div>\n<p>The output will be in CSV and similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PriorityLevelName, ActiveQueues, IsIdle, IsQuiescing, WaitingRequests, ExecutingRequests, DispatchedRequests, RejectedRequests, TimedoutRequests, CancelledRequests\ncatch-all,         0,            true,   false,       0,               0,                 1,                  0,                0,                0\nexempt,            0,            true,   false,       0,               0,                 0,                  0,                0,                0\nglobal-default,    0,            true,   false,       0,               0,                 46,                 0,                0,                0\nleader-election,   0,            true,   false,       0,               0,                 4,                  0,                0,                0\nnode-high,         0,            true,   false,       0,               0,                 34,                 0,                0,                0\nsystem,            0,            true,   false,       0,               0,                 48,                 0,                0,                0\nworkload-high,     0,            true,   false,       0,               0,                 500,                0,                0,                0\nworkload-low,      0,            true,   false,       0,               0,                 0,                  0,                0,                0</code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">/debug/api_priority_and_fairness/dump_queues</code> - a listing of all the queues and their current state. You can fetch like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get <span class=\"token parameter variable\">--raw</span> /debug/api_priority_and_fairness/dump_queues</code></pre></div>\n<p>The output will be in CSV and similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PriorityLevelName, Index,  PendingRequests, ExecutingRequests, SeatsInUse, NextDispatchR,   InitialSeatsSum, MaxSeatsSum, TotalWorkSum\nworkload-low,      14,     27,              0,                 0,          77.64342019ss,   270,             270,         0.81000000ss\nworkload-low,      74,     26,              0,                 0,          76.95387841ss,   260,             260,         0.78000000ss\n...\nleader-election,   0,      0,               0,                 0,          5088.87053833ss, 0,               0,           0.00000000ss\nleader-election,   1,      0,               0,                 0,          0.00000000ss,    0,               0,           0.00000000ss\n...\nworkload-high,     0,      0,               0,                 0,          0.00000000ss,    0,               0,           0.00000000ss\nworkload-high,     1,      0,               0,                 0,          1119.44936475ss, 0,               0,           0.00000000ss</code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">/debug/api_priority_and_fairness/dump_requests</code> - a listing of all the requests including requests waiting in a queue and requests being executed. You can fetch like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get <span class=\"token parameter variable\">--raw</span> /debug/api_priority_and_fairness/dump_requests</code></pre></div>\n<p>The output will be in CSV and similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">PriorityLevelName, FlowSchemaName,   QueueIndex, RequestIndexInQueue, FlowDistingsher,                        ArriveTime,                     InitialSeats, FinalSeats, AdditionalLatency, StartTime\nexempt,            exempt,           -1,         -1,                  ,                                       <span class=\"token number\">2023</span>-07-15T04:51:25.596404345Z, <span class=\"token number\">1</span>,            <span class=\"token number\">0</span>,          0s,                <span class=\"token number\">2023</span>-07-15T04:51:25.596404345Z\nworkload-low,      service-accounts, <span class=\"token number\">14</span>,         <span class=\"token number\">0</span>,                   system:serviceaccount:default:loadtest, <span class=\"token number\">2023</span>-07-18T00:12:51.386556253Z, <span class=\"token number\">10</span>,           <span class=\"token number\">0</span>,          0s,                0001-01-01T00:00:00Z\nworkload-low,      service-accounts, <span class=\"token number\">14</span>,         <span class=\"token number\">1</span>,                   system:serviceaccount:default:loadtest, <span class=\"token number\">2023</span>-07-18T00:12:51.487092539Z, <span class=\"token number\">10</span>,           <span class=\"token number\">0</span>,          0s,                0001-01-01T00:00:00Z</code></pre></div>\n</li>\n</ul>\n<h2 id=\"manually-triggering-pod-evictions-\" style=\"position:relative;\"><a href=\"#manually-triggering-pod-evictions-\" aria-label=\"manually triggering pod evictions  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Manually Triggering Pod Evictions ğŸš¨</h2>\n<p>A safer alternative to deleting pods is using evictions, because they respect pod disruption budgets and other termination policies. You can manually trigger a pod eviction using the Kubernetes eviction API.</p>\n<p>Create a file called <code class=\"language-text\">eviction.json</code> with content similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"apiVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"policy/v1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Eviction\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"metadata\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pod-name-here\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"namespace\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And run this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-v</span> <span class=\"token parameter variable\">-H</span> <span class=\"token string\">'Content-type: application/json'</span> https://your-cluster-api-endpoint.example/api/v1/namespaces/default/pods/pod-name-here/eviction <span class=\"token parameter variable\">-d</span> @eviction.json</code></pre></div>\n<h2 id=\"pod-overhead-ï¸ï¸\" style=\"position:relative;\"><a href=\"#pod-overhead-%EF%B8%8F%EF%B8%8F\" aria-label=\"pod overhead ï¸ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Pod Overhead ğŸ‹ï¸â€â™‚ï¸</h2>\n<p>When you run a Pod on a Node, the Pod itself takes an amount of system resources. These resources are additional to the resources needed to run the container(s) inside the Pod. In Kubernetes, Pod Overhead is a way to account for the resources consumed by the Pod infrastructure on top of the container requests &#x26; limits.</p>\n<p>In Kubernetes, the Pod's overhead is set at <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#what-are-admission-webhooks\" target=\"_blank\" rel=\"noopener noreferrer\">admission</a> time according to the overhead associated with the Pod's <a href=\"https://kubernetes.io/docs/concepts/containers/runtime-class/\" target=\"_blank\" rel=\"noopener noreferrer\">RuntimeClass</a>.</p>\n<p>A pod's overhead is considered in addition to the sum of container resource requests when scheduling a Pod. Similarly, the kubelet will include the Pod overhead when sizing the Pod cgroup, and when carrying out Pod eviction ranking. You need to make sure a RuntimeClass is utilized which defines the overhead field.</p>\n<p>To work with Pod overhead, you need a RuntimeClass that defines the overhead field. As an example, you could use the following RuntimeClass definition with a virtualization container runtime that uses around 120MiB per Pod for the virtual machine and the guest OS:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> node.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> RuntimeClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kata<span class=\"token punctuation\">-</span>fc\n<span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> kata<span class=\"token punctuation\">-</span>fc\n<span class=\"token key atrule\">overhead</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">podFixed</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"120Mi\"</span>\n        <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"250m\"</span></code></pre></div>\n<p>Workloads which are created which specify the kata-fc RuntimeClass handler will take the memory and cpu overheads into account for resource quota calculations, node scheduling, as well as Pod cgroup sizing.</p>\n<p>Consider running the given example workload, <code class=\"language-text\">test-pod</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">-</span>pod\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runtimeClassName</span><span class=\"token punctuation\">:</span> kata<span class=\"token punctuation\">-</span>fc\n    <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> busybox<span class=\"token punctuation\">-</span>ctr\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> busybox<span class=\"token punctuation\">:</span><span class=\"token number\">1.28</span>\n        <span class=\"token key atrule\">stdin</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">tty</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 500m\n                <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 100Mi\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>ctr\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 1500m\n                <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 100Mi</code></pre></div>\n<p>At admission time the RuntimeClass admission controller updates the workload's PodSpec to include the overhead as described in the RuntimeClass. If the PodSpec already has this field defined, the Pod will be rejected. In the given example, since only the RuntimeClass name is specified, the admission controller mutates the Pod to include an overhead.</p>\n<p>After the RuntimeClass admission controller has made modifications, you can check the updated Pod overhead value:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kubectl get pod test-pod <span class=\"token parameter variable\">-o</span> <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token string\">'{.spec.overhead}'</span></code></pre></div>\n<p>The output is:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">map<span class=\"token punctuation\">[</span>cpu<span class=\"token operator\">:</span>250m memory<span class=\"token operator\">:</span>120Mi<span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"future-enhancements-\" style=\"position:relative;\"><a href=\"#future-enhancements-\" aria-label=\"future enhancements  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Future Enhancements ğŸ”®</h2>\n<p>All the future enhancements to the Kubernetes-adjacent projects are publicly available and maintained in git. You can find it <a href=\"https://github.com/kubernetes/enhancements/tree/master/keps\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>. If you have any good idea (and the resources to make it a reality), you can even submit your own!</p>\n<br>\n<p><strong><em>Until next time, ã¤ã¥ã ğŸ‰</em></strong></p>\n<blockquote>\n<p>ğŸ’¡ Thank you for Reading !! ğŸ™ŒğŸ»ğŸ˜ğŸ“ƒ, see you in the next blog.ğŸ¤˜  <strong><em>Until next time ğŸ‰</em></strong></p>\n</blockquote>\n<p>ğŸš€ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>â™»ï¸ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>â™»ï¸ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end âœŒğŸ»</strong></p>\n<h1 align=\"center\">ğŸ”° Keep Learning !! Keep Sharing !! ğŸ”°</h1>\n<p><strong>ğŸ“… Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>"},"nextThought":{"frontmatter":{"path":"/blog/container-runtimes-cri-overview/","title":"Container Runtimes and CRI: A Technical Overview ğŸ› ï¸","date":"2024-10-29 19:06:00"},"excerpt":"A Deep Dive into the Evolution Overview ğŸ‘€ Containerization technologies have revolutionized the way we build, deploy, and manageâ€¦","html":"<blockquote>\n<p><strong>A Deep Dive into the Evolution</strong></p>\n</blockquote>\n<h2 id=\"overview-\" style=\"position:relative;\"><a href=\"#overview-\" aria-label=\"overview  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Overview ğŸ‘€</h2>\n<p>Containerization technologies have revolutionized the way we build, deploy, and manage applications. Docker, Kubernetes, and other popular containerization tools have made it possible to deliver applications more quickly, reliably, and efficiently than ever before.</p>\n<p>At the heart of containerization technology are a number of building blocks, including container runtimes and the Container Runtime Interface (CRI).</p>\n<p>Container runtimes are responsible for creating, running, and managing containers. They provide a layer of abstraction between the host operating system and the container, allowing containers to be isolated from each other and from the host.</p>\n<p>The CRI is a standard interface that allows different container runtimes to be used with Kubernetes. This makes it easier to switch between different container runtimes without having to make major changes to Kubernetes.</p>\n<p>In this blog post, we will explore the evolution of container runtimes and the CRI in more detail.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 25.294117647058822%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVR42lWPbUvCYBSG/fuBFAR+C6wPISQEQW+gIykyTcnM0nRTtz068WVuc2vO1K4ee4E6cHHf53C4DydmjTziOwnOLhVq6gDNGErG6P0JotPF7hm0NRMhhviuw5Nhc9qdsxAartBRBxGvqk6hkMdxHGKzIGI7vsXtTQ7D8hjbHp4/5y1cUK3VMTptBiOHnjVEbeoYPQtVCCzTxOoPaLZHCF16q08YhsROsmWSaYW91BW7ySyJA0Vqhv3jIrnzC57vrjFlYEvTUTIlavUGZXk83/N5sBzEi0a/a9AwTOabwKN0i8NUg0q9Q7HSplTtcP/4rdPJhND3cF2Xmecxm/nSe9j2VH4Q4gcBU9vGkfMNURQRyysBxVwAfLBe86+WqxXvy+WXLjf6w+pP/+tXks3uJyyTap9qsOK2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cris\" title=\"\" src=\"/static/046aac5d02b575e8156934d91d50b016/c5bb3/cris.png\" srcset=\"/static/046aac5d02b575e8156934d91d50b016/04472/cris.png 170w,\n/static/046aac5d02b575e8156934d91d50b016/9f933/cris.png 340w,\n/static/046aac5d02b575e8156934d91d50b016/c5bb3/cris.png 680w,\n/static/046aac5d02b575e8156934d91d50b016/b12f7/cris.png 1020w,\n/static/046aac5d02b575e8156934d91d50b016/b5a09/cris.png 1360w,\n/static/046aac5d02b575e8156934d91d50b016/aa440/cris.png 1500w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<div class=\"image-title\"><a href=\"https://landscape.cncf.io/guide#runtime--container-runtime\">Source</a></div>\n<p>Now, welcome to the world of containers!</p>\n<p>Lots of applications can run containers, whereas every application would have a slightly different opinion about what a container runtime should do and support. For example, systemd is able to run containers via <a href=\"https://www.freedesktop.org/software/systemd/man/systemd-nspawn.html\" target=\"_blank\" rel=\"noopener noreferrer\">systemd-nspawn</a>, and <a href=\"https://nixos.org/\" target=\"_blank\" rel=\"noopener noreferrer\">NixOS</a> has integrated <a href=\"https://nixos.org/nixos/manual/#ch-containers\" target=\"_blank\" rel=\"noopener noreferrer\">container management</a> as well. Not to mention all the other existing container runtimes like <a href=\"https://cri-o.io/\" target=\"_blank\" rel=\"noopener noreferrer\">CRI-O</a>, <a href=\"https://katacontainers.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Kata Containers</a>, <a href=\"https://firecracker-microvm.github.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Firecracker</a>, <a href=\"https://github.com/google/gvisor\" target=\"_blank\" rel=\"noopener noreferrer\">gVisor</a>, <a href=\"https://containerd.io/\" target=\"_blank\" rel=\"noopener noreferrer\">containerd</a>, <a href=\"https://linuxcontainers.org/\" target=\"_blank\" rel=\"noopener noreferrer\">LXC</a>, <a href=\"https://github.com/opencontainers/runc\" target=\"_blank\" rel=\"noopener noreferrer\">runc</a>, <a href=\"https://nabla-containers.github.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Nabla Containers</a> and many more.</p>\n<p>A lot of them are now part of the <a href=\"https://www.cncf.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Cloud Native Computing Foundation (CNCF)</a> and their <a href=\"https://landscape.cncf.io/\" target=\"_blank\" rel=\"noopener noreferrer\">huge landscape</a>.</p>\n<h2 id=\"a-brief-history-\" style=\"position:relative;\"><a href=\"#a-brief-history-\" aria-label=\"a brief history  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>A Brief History ğŸ“œ</h2>\n<p>After the invention of cgroups back in 2008, a project called Linux Containers (LXC) started to pop up in the wild, which should revolutionize the container world. LXC combined cgroup and namespace technologies to provide an isolated environment for running applications. You may know that we sometimes live in a parallel world. This means that Google started its own containerization project in 2007 called <a href=\"https://github.com/google/lmctfy\" target=\"_blank\" rel=\"noopener noreferrer\">Let Me Contain That For You (LMCTFY)</a>, which works mainly at the same level as LXC does. With LMCTFY, Google tried to provide a stable and API-driven configuration without users having to understand the details of cgroups and its internals.</p>\n<p>If we now look back into 2013, we see that there was a tool written called Docker, which was built on top of the already existing LXC stack. One invention of Docker was that the user is now able to package containers into images to move them between machines. Docker were the first ones who tried to make containers a standard software unit, as they state in their <a href=\"https://github.com/moby/moby/blob/0db56e6c519b19ec16c6fbd12e3cee7dfa6018c5/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">Â«Standard Container ManifestoÂ»</a>.</p>\n<p>Some years later, they began to work on <a href=\"https://github.com/docker/libcontainer\" target=\"_blank\" rel=\"noopener noreferrer\">libcontainer</a>, a <a href=\"https://golang.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Go</a> native way to spawn and manage containers. LMCTFY was abandoned during that time too, whereas the core concepts and major benefits of LMCTFY were ported into libcontainer and Docker.</p>\n<p>We are now back in 2015, where projects like Kubernetes hit version 1.0. A lot of stuff was ongoing during that time: The CNCF was founded as part of the <a href=\"https://www.linuxfoundation.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Linux Foundation</a> with the target to promote containers. The <a href=\"https://www.opencontainers.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Open Container Initiative (OCI)</a> was founded in 2015 as well, as an open governance structure around the container ecosystem.</p>\n<h2 id=\"open-container-initiative-oci-ï¸\" style=\"position:relative;\"><a href=\"#open-container-initiative-oci-%EF%B8%8F\" aria-label=\"open container initiative oci ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Open Container Initiative (OCI) ğŸ› ï¸</h2>\n<p>OCI, short for the Open Container Initiative, is indeed a community project that was established in 2015 to address the need for containerization standards. It is a collaborative effort within the container ecosystem to develop open industry standards for container formats and runtime. The OCI's primary goal is to ensure interoperability between container technologies, making it easier to create and run containerized applications across different platforms and container runtimes.</p>\n<p><strong>Key points about OCI include:</strong></p>\n<ul>\n<li><strong>Standardization:</strong> OCI defines open standards for container images and runtimes. This includes the OCI Image Format specification for container images and the OCI Runtime Specification for container runtimes.</li>\n<li><strong>Interoperability:</strong> By adhering to OCI specifications, container runtimes, and container images from various vendors can work seamlessly together. This promotes compatibility and flexibility in choosing containerization tools.</li>\n<li><strong>Ecosystem Benefits:</strong> OCI standards have been widely adopted in the container ecosystem. This adoption has led to the development of a rich ecosystem of container tools, orchestrators, and platforms that are OCI-compliant.</li>\n</ul>\n<p>On the other side of the container engine is the container runtime controlled through the Open Container Initiative specs. There are two specifications produced by the OCI: OCI-runtime and OCI-image. These specs work together to define how to start containers through the container runtime.</p>\n<p>The OCI runtime spec defines how to interact with a container runtime to control the lifecycle of a container. While it might seem redundant (given that CRI seems to define the same thing), it adds another layer of contract definition to the architecture. As with CRI, this layer of contract gives some guarantees to the system regarding how the developer's code will run.</p>\n<p>The container engine provides the runtime with a filesystem bundle (conforming to the OCI-image spec) to run. Within this filesystem bundle are all the files needed in the runtime and a configuration specifying what to run in the container (also known as its entrypoint).</p>\n<p>For some extremely dense reading, the specs can be found <a href=\"https://github.com/opencontainers/runtime-spec\" target=\"_blank\" rel=\"noopener noreferrer\">here</a> and <a href=\"https://github.com/opencontainers/image-spec\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.</p>\n<p>If we give an example of OCI Runtime, a simple picture is to imagine a technology such as USB that many vendors produce, whether any version of PC or OS can use USB. That's because they follow USB standards, which OCI Runtime is a similar standard. Same thing, but only used with Container Runtimes.</p>\n<h3 id=\"what-is-container-runtime\" style=\"position:relative;\"><a href=\"#what-is-container-runtime\" aria-label=\"what is container runtime permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>What is Container Runtime?</h3>\n<p>Container runtimes are described as the software responsible for executing containerized applications. They take container images (which specify how an application should look) and launch applications within containers, providing them with the necessary resources.</p>\n<p><strong>Problem Addressed by Container Runtimes:</strong></p>\n<ul>\n<li><strong>Standardization:</strong> Container runtimes ensure that containerized applications are launched in a standardized manner across different environments.</li>\n<li><strong>Security:</strong> They establish security boundaries to prevent unauthorized access to containerized applications.</li>\n<li><strong>Isolation:</strong> They ensure isolation to protect applications from interfering with each other, even if one of them crashes.</li>\n<li><strong>Resource Allocation:</strong> They allocate and manage resources like CPU, storage, and memory for containerized applications.</li>\n</ul>\n<p><strong>How Container Runtimes Help:</strong></p>\n<ul>\n<li><strong>Standardization:</strong> Container runtimes launch applications in a consistent way, regardless of the environment, ensuring predictability.</li>\n<li><strong>Security:</strong> Some container runtimes, like CRI-O and gVisor (via \"runsc\"), emphasize security and harden the security boundaries.</li>\n<li><strong>Isolation:</strong> Container runtimes enforce isolation to prevent interference between applications.</li>\n<li><strong>Resource Allocation:</strong> They set resource limits to prevent one application from consuming all available resources, which could affect other applications.</li>\n</ul>\n<p><strong>Technical Overview:</strong></p>\n<p>Container runtimes vary in their capabilities and focus:</p>\n<ul>\n<li><a href=\"https://containerd.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Containerd</a> and <a href=\"https://cri-o.io/\" target=\"_blank\" rel=\"noopener noreferrer\">CRI-O</a>: These are standard container runtime implementations.</li>\n<li><a href=\"https://katacontainers.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Kata</a>: Allows running containers as virtual machines (VMs), expanding the use of containers to other technologies.</li>\n<li><a href=\"https://gvisor.dev/\" target=\"_blank\" rel=\"noopener noreferrer\">gVisor</a> (via runsc): Provides an additional security layer between containers and the host operating system, enhancing security.</li>\n<li><a href=\"https://github.com/opencontainers/runc\" target=\"_blank\" rel=\"noopener noreferrer\">runc</a>: runc is a separate container runtime associated with the Open Container Initiative (OCI) standard. It serves as the reference implementation of the OCI runtime specification and is used to run containers in a standardized way.</li>\n<li><a href=\"https://github.com/containers/crun\" target=\"_blank\" rel=\"noopener noreferrer\">crun</a>: A fast and lightweight fully featured OCI runtime and C library for running containers.</li>\n</ul>\n<p>The CRI interface is built on gRPC and Protobuf over a Unix socket. The spec can be found on <a href=\"https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/apis/cri/runtime/v1alpha2/api.proto\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a>.</p>\n<h2 id=\"putting-it-all-together-kubernetes-and-cri-\" style=\"position:relative;\"><a href=\"#putting-it-all-together-kubernetes-and-cri-\" aria-label=\"putting it all together kubernetes and cri  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Putting it all together: Kubernetes and CRI ğŸš€</h2>\n<p>The CRI gives Kubernetes the flexibility to run a variety of container managers and container runtimes.</p>\n<p>In Kubernetes, a container runtime is responsible for managing the lifecycle of containers. It is the component that actually runs the container images and provides an interface between Kubernetes and the container.</p>\n<p>Kubernetes could use any container runtime that implements CRI to manage pods, containers, and container images. Docker is the most common container runtime used in production Kubernetes environments, but containerd (initiated by Docker Inc. &#x26; donated to CNCF in March of 2017) may prove to be a better option. For more details, you could refer to the <a href=\"https://kubernetes.io/blog/2017/11/containerd-container-runtime-options-kubernetes/\" target=\"_blank\" rel=\"noopener noreferrer\">official blog</a>.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACGElEQVR42nVSy28SQRzm7+rBVIW6NB489Wg8mZjIQQ+2phJpU2NpYqymxCoLook9NOmBRAuilcfCJjTQXaBBU7CV5+6wFGaLwHZmHw6PEj345TfJ95vM93uOySDQjYVsYJqhr7PvZhM+64VRYTcV81DsWyoxNivrI89sB35V04jOZAwxn92dimzOxL1mxmNhPOYYfTVGm4Mu895rC0OTG0vcey3unWG8l2Luu9y/YgKknOu6PuIqVlWMxxxh4o44RkhT1YnEpOqDGO9PUpYvr2bD9HaJz7dFKrRpCbgec4GwWLgS3Jj++MKZ/waV3lzUR0Xc+80ykWi6btKG2b4KhQcJ/2LyU1Q8LndaDj5kTwc+FNPZdn0583mZC/qrhz2MXn5PrOajR2fSRDzInJa4peTTFW6Nb2aJ2zirAljtIqhoag5UMqAsdOU+7uVB7qiZxxoalz0SM8K+jbHfjswnASd2Jevuzcs7cwvsSlGWboTeTO04l9JB0AXPOXoj52spcLCiSeYfp8XF2Or9PUeqzhN3naNt4UehUnRQHtZwnxyNbNTQjb8xFnPS4Z34w1vhe8kGN5i8jokRkqwdONhnHn7rSXydzmytsS474/wp/xr3PIpxrqIyqAotETQBhFCGcqt52oFnYqeREvgSrBSk4zKs1n+LJ3Kli/vDn3WxZ9IARljpKUAQG1IDAFCr1epCXW7LqI+M/+APe2whY5M0R5AAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"kubelet\" title=\"\" src=\"/static/84d5d4c213fe186b062ae18bded93dae/c5bb3/kubelet.png\" srcset=\"/static/84d5d4c213fe186b062ae18bded93dae/04472/kubelet.png 170w,\n/static/84d5d4c213fe186b062ae18bded93dae/9f933/kubelet.png 340w,\n/static/84d5d4c213fe186b062ae18bded93dae/c5bb3/kubelet.png 680w,\n/static/84d5d4c213fe186b062ae18bded93dae/b12f7/kubelet.png 1020w,\n/static/84d5d4c213fe186b062ae18bded93dae/2bef9/kubelet.png 1024w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<h2 id=\"docker-shim-deprecated-from-k8s-124-ï¸\" style=\"position:relative;\"><a href=\"#docker-shim-deprecated-from-k8s-124-%EF%B8%8F\" aria-label=\"docker shim deprecated from k8s 124 ï¸ permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Docker Shim Deprecated from K8s 1.24 âš ï¸</h2>\n<p>In version 1.24, Kubernetes is no longer supported Docker as a container runtime. Docker is being phased out in favor of runtimes that use the Container Runtime Interface (CRI), which was built for Kubernetes. If you're a Kubernetes end-user, you won't notice much of a difference.</p>\n<p>This does not imply that Docker is dead, nor does it imply that you can't or shouldn't use it as a development tool. Docker is still a helpful tool for creating containers, and the images generated by the docker build may be used in your Kubernetes cluster.</p>\n<p>If you wish to create your cluster, you'll have to make certain adjustments to avoid cluster failure. As Docker will be deprecated from K8s 1.24, you'll have to transition to one of the other compatible container runtimes, such as containerd or CRI-O. Simply ensure that the runtime you select supports the current settings of the Docker daemon (such as logging).</p>\n<h3 id=\"demo-cri-o-and-k8s\" style=\"position:relative;\"><a href=\"#demo-cri-o-and-k8s\" aria-label=\"demo cri o and k8s permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Demo: CRI-O and K8s</h3>\n<p>CRI-O may pull from any container registry and supports OCI container images. It's a lightweight alternative as a Kubernetes runtime.</p>\n<p><strong>Features:</strong></p>\n<ul>\n<li>OCI compatible runtime</li>\n<li>containers/storage</li>\n<li>containers/image</li>\n<li>networking (CNI)</li>\n<li>container monitoring</li>\n<li>Several essential Linux functions support security</li>\n</ul>\n<p><strong>How does CRI-O work?</strong></p>\n<p>It is a Kubernetes CRI implementation that allows OCI-compatible runtimes to be used. It's a lighter alternative to using Docker as the runtime for Kubernetes. It enables Kubernetes to use any OCI-compliant container runtime for pod execution. It now supports runc and Kata Containers as container runtimes, and any OCI-compliant runtime can theoretically be plugged in.</p>\n<p><strong>Architecture:</strong></p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACm0lEQVR42l2Ra08TURCG+VHGRCSaEA2FUlqCpff7bne3e+l2u70X2tLSrb2BFIoogmCkKuonEROIiR/4S5jYeF5PSVRgksmZzEyeM+/M2Bi1s42MuZERUMyopFtfQlJmoQhhZDURqTgHNRaBLkehSQxSShTZhABVZKDTWBEZ0ipI+NpJzIz9tU+VsLnbNlDt75Fiu4d7NhdMfg4eJYNAMo+HiwGM29x4YPcjrBdhFzSYvCwm5t24M+cmnMDibF2b/Qc8bUnm5UKKNqrEGmAx7QmB1XPwxOJQqwb0ehNuQUE0VYCTV2ChPVKK1jkR0/4oSSZEnLSV/8DvVLIscZgNCcQlxPHY6UdQTcMrJsDnSnDQnMkdhFfSEIin4Iyp4CnQ6o9g0hUkCTV2G5g0J1QR1ohIFiICnrAiHi36YA1xMLmCuD9nx4TNgQmrA7YQjwVGhC3M05jDpJslHH9L8o+tjFmjQBsjE7+cxPGXU2zuH6K+0Uez/xLPdl/D6G2jReNRLlN7iv7BW5ycn6M7uCDNzjY+l9zXgHTCEdASjpHRZI3NHfiVFEKJNKR8ie4zDx/9yEWlysUK1OXa1T4ZLYv1vQGp10o4LjE3J1RkDsX2Bll7votXR++xtXcIH93Z3Zl5jFPJI5+i8h30KKP9juCjetroEIYN4ttNyUmzqvCQilVSanax/+4DXrw5gr5iIKDoYJJZBOkx5EIZWnkVeqWOWHYZxUYbRn+XKDJPj3INeLGTMauqBAujEDsXR+9ggFS9g3jZQLaxduVatQm91kKSvkJhBVyujFJnE2v7AyLJwq0r99JTRpofLuW0y3Yle7m9mv+ZjnO/CvnEUBbCQzbgHPIRL3XP1Sswvt8C44UU9UNTOGKkBXw0ZMsI9gcX2MQVCZvL7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cri-o\" title=\"\" src=\"/static/39f8ccd779450831bdb5b49cdeab6430/c5bb3/cri-o.png\" srcset=\"/static/39f8ccd779450831bdb5b49cdeab6430/04472/cri-o.png 170w,\n/static/39f8ccd779450831bdb5b49cdeab6430/9f933/cri-o.png 340w,\n/static/39f8ccd779450831bdb5b49cdeab6430/c5bb3/cri-o.png 680w,\n/static/39f8ccd779450831bdb5b49cdeab6430/b12f7/cri-o.png 1020w,\n/static/39f8ccd779450831bdb5b49cdeab6430/b5a09/cri-o.png 1360w,\n/static/39f8ccd779450831bdb5b49cdeab6430/29007/cri-o.png 1600w\" sizes=\"(max-width: 680px) 100vw, 680px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n          </p>\n<p>The following are the architectural elements:</p>\n<ul>\n<li>To deploy a pod, Kubernetes communicates with the kubelet.</li>\n<li>Pods are a Kubernetes notion that consists of one or more containers in the same cgroup that share the same IPC, NET, and PID namespaces.</li>\n<li>To launch a new pod, the kubelet sends a request to the CRI-O daemon using the Kubernetes CRI.</li>\n<li>CRI-O pulls the image from a container registry using the containers/image library.</li>\n<li>Using the containers/storage library, the downloaded image is unpacked into the container's root filesystems and stored in COW file systems.</li>\n<li>After the container's rootfs have been constructed, CRI-O creates an OCI runtime specification JSON file that describes how to use the OCI Generate tools to run the container.</li>\n<li>The specification is then used by CRI-O to launch an OCI Compatible Runtime, which runs the container processes. The OCI Runtime by default is runc.</li>\n<li>A separate conmon process monitors each container. The pty of the container process's PID1 is held by the conmon process. It manages the container's logging and keeps track of the container's exit code.</li>\n<li>CNI is used to set up the pod's networking, therefore any CNI plugin can be used with CRI-O.</li>\n</ul>\n<h2 id=\"conclusion-\" style=\"position:relative;\"><a href=\"#conclusion-\" aria-label=\"conclusion  permalink\" class=\"anchor before\"><svg class=\"anchor-icon\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg></a>Conclusion ğŸ¯</h2>\n<p>Container runtimes and CRIs have evolved rapidly in recent years, driven by the need to support new features and use cases. This overview has provided a high-level overview of the current state of the art, but there is still much more to explore.</p>\n<p>As Kubernetes continues to mature and new container technologies emerge, we can expect to see continued innovation in the container runtime and CRI space.</p>\n<p>I hope this blog post has given you a better understanding of container runtimes and CRIs, and their role in the Kubernetes ecosystem.</p>\n<br>\n<p><strong><em>Until next time, ã¤ã¥ã ğŸ‰</em></strong></p>\n<blockquote>\n<p>ğŸ’¡ Thank you for Reading !! ğŸ™ŒğŸ»ğŸ˜ğŸ“ƒ, see you in the next blog.ğŸ¤˜  <strong><em>Until next time ğŸ‰</em></strong></p>\n</blockquote>\n<p>ğŸš€ Thank you for sticking up till the end. If you have any questions/feedback regarding this blog feel free to connect with me:</p>\n<p><strong>â™»ï¸ LinkedIn:</strong> <a href=\"https://www.linkedin.com/in/rajhi-saif/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.linkedin.com/in/rajhi-saif/</a></p>\n<p><strong>â™»ï¸ X/Twitter:</strong> <a href=\"https://x.com/rajhisaifeddine\" target=\"_blank\" rel=\"noopener noreferrer\">https://x.com/rajhisaifeddine</a></p>\n<p><strong>The end âœŒğŸ»</strong></p>\n<h1 align=\"center\">ğŸ”° Keep Learning !! Keep Sharing !! ğŸ”°</h1>\n<p><strong>ğŸ“… Stay updated</strong></p>\n<p>Subscribe to our newsletter for more insights on AWS cloud computing and containers.</p>"}}},"staticQueryHashes":["1271460761","1321585977"],"slicesMap":{}}